"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-core-blocks-PinListView-Connected"],{42498(e,t,l){l.r(t),l.d(t,{default:()=>x});var r=l(91557),n=l(84680),i=l(44371),o=l(38860),a=l(30719),s=l(8051),m=l(89481),c=l(77299),u=l(58156),d=l.n(u),p=l(56449),g=l.n(p),E=l(23181),f=l.n(E),h=l(98023),y=l.n(h),k=l(96540),A=l(71468);let w=e=>{let{item:t,isShape:l}=e,{jsxBackend:n}=(0,r.PCX)(),i=k.useRef(),o=n.get(t.component);return o?l?k.createElement(c.Ay,{ref:i,item:!0,key:"itemAddPhotoAlbum",style:{width:"100%",paddingTop:0}},k.createElement(s.A,{sx:{width:"125px",height:"125px"}})):k.createElement(c.Ay,{ref:i,item:!0,key:"itemAddPhotoAlbum",style:{width:"100%",paddingTop:0}},k.createElement(o,{size:"large"})):null};var v=l(85980);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e}).apply(this,arguments)}let b={},x=(0,r.hS2)(function({title:e,numColumns:t=4,limitItemsLoadSmooth:l=4,numberOfItemsPerPage:u,displayLimit:p,pagingId:E,itemProps:h={},gridItemProps:x={},gridContainerProps:_,itemView:C,canLoadMore:S,canLoadSmooth:T=!0,loadMore:W,emptyPage:$="no_content",emptyPageProps:H,startItemView:I}){let{jsxBackend:j}=(0,r.PCX)(),{loggedIn:B,user:D}=(0,r.wVH)(),L=(0,n.HX)(),O=null==L?void 0:L.identity,V=(0,a.A)();(null==L?void 0:L.profile_page)&&(null==L?void 0:L.album_id)&&(O=`photo.entities.photo_album.${L.album_id}`);let X=(0,r.dx2)(O),z=j.get(C),R=j.get(`${C}.skeleton`),q=[];if(I){let K=(null==D?void 0:D.id)&&(null==L?void 0:L.id)&&(null==D?void 0:D.id)===parseInt(L.id);q=(0,o.Ue)(I,{pageParams:L,authUser:D,loggedIn:B,isAuthUser:K,item:X}).map(({as:e,...t},l)=>({component:e,props:{key:l.toString(),...t}}))}let[M,Q]=k.useState(1),U=p||4,F=(0,A.d4)(e=>(0,r.qRQ)(e,E))||(0,r.KCW)();(0,r.ksV)(S?()=>Q(e=>e+1):void 0),(null==F?void 0:F.ids)||(F.ids=[]);let G=S?F.ids.slice(0,M*(u||20)):F.ids.slice(0,U||4),J=[...q,...G],{loading:N,refreshing:Y,error:Z,ended:ee,initialized:et}=null!=F?F:{};if(h||(h={xs:12}),k.useEffect(()=>{(et&&S&&!N&&W&&!ee||Y)&&W()},[et,Y]),!z)return null;if(Z){let el=d()(Z,"response.data.error")||d()(Z,"response.data.message"),er=403===d()(Z,"response.status")?"core.block.error403":"core.block.error404",en=j.get(er);return k.createElement(en,{title:el})}let ei=null==_?void 0:_.spacing,eo=y()(ei)?(V.gridPoint||8)*ei:0,ea=`${Math.floor(100/t*10)/10}%`;if(!et)return R?k.createElement(n.eB,null,k.createElement(n.Tw,{title:e}),k.createElement(n.tD,null,k.createElement(v.Ay,{columnWidth:ea,gutterWidth:eo,gutterHeight:eo,monitorImagesLoaded:!0},f()(1,U).map(e=>k.createElement(R,{wrapAs:c.Ay,wrapProps:x,itemProps:h,key:e.toString()}))))):k.createElement(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"}},k.createElement(m.A,{size:30}));if(!G.length&&ee){if("hide"===$)return null;let es=j.get($),{noBlock:em}=H||{};return em?k.createElement(es,P({},H)):k.createElement(n.eB,null,k.createElement(n.Tw,{title:e}),k.createElement(n.tD,null,k.createElement(es,P({},H))))}return k.createElement(n.eB,null,k.createElement(n.Tw,{title:e}),k.createElement(n.tD,null,k.createElement(s.A,{sx:{"& article":{opacity:"1 !important"}}},k.createElement(v.Ay,{columnWidth:ea,gutterWidth:eo,gutterHeight:eo,monitorImagesLoaded:!0,itemComponent:"article"},g()(J)&&J.map((e,t)=>(null==e?void 0:e.component)?k.createElement(w,{key:`k${t}`,order:t,item:e}):k.createElement(z,{identity:e,key:`k${t}`,order:t,wrapAs:i.Ei,wrapProps:b,itemProps:h})),T&&!ee?f()(1,l||U).map(e=>k.createElement(R,{wrapAs:c.Ay,wrapProps:x,itemProps:h,key:e.toString()})):null))))})}}]);