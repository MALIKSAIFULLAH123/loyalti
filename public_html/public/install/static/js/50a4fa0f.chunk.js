"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["listview"],{47226(e,t,n){n.r(t),n.d(t,{default:()=>f});var l=n(91557),r=n(84680),a=n(8051),o=n(77299),i=n(56449),s=n.n(i),c=n(23181),m=n.n(c),u=n(58156),p=n.n(u),d=n(96540),g=n(71468);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}let f=(0,l.hS2)(function({title:e,itemView:t,itemProps:n={},gridItemProps:i={},gridContainerProps:c={spacing:2},pagingId:u,collapsible:f,numberOfItemsPerPage:y,emptyPage:h="core.block.no_content",emptyPageProps:v,errorPage:w,loadMore:k}){let{jsxBackend:A,i18n:P}=(0,l.PCX)(),b=A.get(t),x=A.get(`${t}.skeleton`),{limit:_=10,as:O}=f||{},S=A.get(O),[T,C]=d.useState(!0),B=(0,g.d4)(e=>(0,l.qRQ)(e,u))||(0,l.KCW)(),{refreshing:D,error:I,ended:j,initialized:K,dirty:$}=null!=B?B:{},M=B.ids.slice(0,y||B.ids.length),W=f&&B.ids.length>_;if(W&&(M=W&&T?B.ids.slice(0,_):B.ids),d.useEffect(()=>{D&&!$&&k()},[K,D]),!b)return null;if(i.xs||(i.xs=12),I){if("hide"===w)return null;let q=p()(I,"response.data.error")||p()(I,"response.data.message"),N=403===p()(I,"response.status")?"core.block.error403":"core.block.error404",Q=A.get(N);return d.createElement(Q,{title:q})}if(!M.length&&(j||I)){if("hide"===h)return null;if("string"!=typeof h)return h;let R=A.get(h);if(!R)return null;let{noBlock:X,contentStyle:F}=v||{};return X?d.createElement(a.A,null,d.createElement(R,E({},v))):d.createElement(r.eB,null,d.createElement(r.Tw,{title:e}),d.createElement(r.tD,E({},F),d.createElement(R,{...v})))}return K?d.createElement(r.eB,null,d.createElement(r.Tw,{title:e,data:M}),d.createElement(r.tD,null,d.createElement(o.Ay,E({container:!0},c),s()(M)&&M.map((e,t)=>d.createElement(b,{index:t,identity:e,itemProps:n,key:e.toString(),wrapAs:o.Ay,wrapProps:i,pagingId:u}))),W&&S?d.createElement(S,{setCollapsed:C,collapsed:T}):null)):x?d.createElement(r.eB,null,d.createElement(r.Tw,{title:e}),d.createElement(r.tD,null,d.createElement(o.Ay,E({container:!0,sx:{"&:empty":{display:"none"}}},c),m()(0,_).map(e=>d.createElement(x,{wrapAs:o.Ay,wrapProps:i,itemProps:n,key:e.toString()}))))):d.createElement("div",null,P.formatMessage({id:"loading_dots"}))})},95594(e,t,n){n.r(t),n.d(t,{default:()=>_});var l=n(91557),r=n(84680),a=n(67244),o=n(77299),i=n(8051),s=n(56449),c=n.n(s),m=n(23181),u=n.n(m),p=n(58156),d=n.n(p),g=n(96540),E=n(71468),f=n(44371),y=n(47695);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function v(e){let{blockId:t,title:n,itemView:s,itemProps:m={},gridItemProps:p={},gridContainerProps:v={spacing:2},displayLimit:w=4,displayRowsLimit:k,pagingId:A,canLoadMore:P,buttonMessageLoadmore:b="view_more",canLoadSmooth:x,loadMore:_,numberOfItemsPerPage:O,emptyPage:S="core.block.no_content",emptyPageProps:T,loadMoreTypeProp:C,isLoadMoreScroll:B,isLoadMoreButton:D,errorPage:I,errorPageProps:j,handleActionItem:K,cachedEmpty:$}=e,{jsxBackend:M,i18n:W,useWidthBreakpoint:q,useCachedBlockEmpty:N,useTheme:Q}=(0,l.PCX)(),R=M.get(s),X=M.get(`${s}.skeleton`),F=q(),L=Q(),z=[...L.breakpoints.keys],V=(0,a.hz)(F,p,z),Y=k?k*V:w,[G,H]=N(`${A}_${t}`),[J,U]=(0,y.Wx)({threshold:0}),[Z,ee]=g.useState(1),et=(0,E.d4)(e=>(0,l.qRQ)(e,A))||(0,l.KCW)(),en=g.useCallback(()=>{B&&Z<=et.page&&ee(e=>e+1)},[B,Z,et.page]);(0,l.ksV)(en);let el=g.useCallback(()=>{_(),ee(e=>e+1)},[A,_]),{loading:er,refreshing:ea,error:eo,ended:ei,initialized:es,dirty:ec}=null!=et?et:{};g.useEffect(()=>{B&&U&&!er&&!ei&&el()},[U,er,el,B,ei]);let em=2*V;!P&&Y&&(em=Y);let eu=B&&!ei,ep=P?et.ids.slice(0,Z*(O||20)):et.ids.slice(0,Y||et.ids.length);if(g.useEffect(()=>{ea&&!ec&&_()},[es,ea]),g.useEffect(()=>{G&&ep.length&&H(!1)},[G,ep.length]),!R)return null;if(p.xs||(p.xs=12),eo){if("hide"===I)return null;let ed=d()(eo,"response.data.error")||d()(eo,"response.data.message")||d()(eo,"response.data.meta.title"),eg=d()(eo,"response.data.meta.description"),eE=403===d()(eo,"response.status")?"core.block.error403":"core.block.error404",ef=M.get(eE),{hideContent:ey=!1}=j||{};return"default"===I?g.createElement(r.eB,null,g.createElement(r.Tw,{title:n,data:ep}),ey?null:g.createElement(r.tD,null,g.createElement(ef,{title:ed,content:eg}))):g.createElement(ef,{title:ed,content:eg})}if(!ep.length&&(ei||$&&G)||eo){if(G||H(!0),"hide"===S)return null;if("string"!=typeof S)return S;let eh=M.get(S);if(!eh)return null;let{noBlock:ev,contentStyle:ew}=T||{};return ev?g.createElement(eh,h({},T)):g.createElement(r.eB,null,g.createElement(r.Tw,{title:n}),g.createElement(r.tD,h({},ew),g.createElement(eh,{...T})))}return es?g.createElement(r.eB,null,g.createElement(r.Tw,{title:n,data:ep}),g.createElement(r.tD,null,g.createElement(o.Ay,h({container:!0},v),c()(ep)&&ep.map((e,t)=>g.createElement(R,{index:t,identity:e,itemProps:m,key:e.toString(),wrapAs:o.Ay,wrapProps:p,pagingId:A,handleActionItem:K})),!ei&&eu?g.createElement(i.A,{ref:J,sx:{width:"0 !important",height:"0 !important"}}):null,x&&(eu||D&&er)&&X?g.createElement(g.Fragment,null,u()(0,em).map(e=>g.createElement(X,{wrapAs:o.Ay,wrapProps:p,itemProps:m,key:e.toString()}))):null),D&&(!ei&&!er||Z<(null==et?void 0:et.page))?g.createElement(f.YL,{handleClick:el,message:b,loadMoreTypeProp:C}):null)):X?g.createElement(r.eB,null,g.createElement(r.Tw,{title:n}),g.createElement(r.tD,null,g.createElement(o.Ay,h({container:!0,sx:{"&:empty":{display:"none"}}},v),u()(0,em).map(e=>g.createElement(X,{testid:"loadingIndicator",wrapAs:o.Ay,wrapProps:p,itemProps:m,key:e.toString()}))))):g.createElement("div",{"data-testid":"loadingIndicator"},W.formatMessage({id:"loading_dots"}))}var w=n(52705);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}let A=({pagesOffset:e,data:t,loading:n})=>{let{blockProps:{titleStyle:l={component:"h2",sx:{mt:0,mb:.5}}}={}}=(0,r.lA)(),{title:a,description:o}=e||{};return n?g.createElement(r.Tw,{children:g.createElement(i.A,{sx:{display:"block",flex:1}},g.createElement(w.A,{height:24,width:160}))}):g.createElement(r.Tw,{data:t},g.createElement(i.A,{sx:{display:"block",flex:1}},g.createElement(i.A,k({},l),a),o?g.createElement(i.A,{color:"text.secondary"},o):null))},P=function({title:e,itemView:t,itemProps:n={},gridItemProps:a={},gridContainerProps:i={spacing:2},pagingId:s,messagePagination:m,handleUpdateLastRead:p,loadMore:y,numberOfItemsPerPage:h,emptyPage:v="core.block.no_content",emptyPageProps:w,errorPage:P,hasSort:b=!1,titleBackend:x=!1,moduleName:_,resourceName:O,actionSortName:S,handleActionItem:T,hideTopPagination:C,hideBottomPagination:B}){var D,I,j,K,$;let{jsxBackend:M,usePageParams:W,i18n:q}=(0,l.PCX)(),N=W(),{page:Q}=N,R=M.get(t),X=M.get(`${t}.skeleton`),F=parseInt(Q||1,10),[L,z]=g.useState(F),V=(0,E.d4)(e=>(0,l.qRQ)(e,s))||(0,l.KCW)(),{loading:Y,refreshing:G,error:H,ended:J,initialized:U,pagesOffset:Z,dirty:ee}=null!=V?V:{},et=h||20,en=(null===(D=V.pages[L])||void 0===D?void 0:D.ids)||[];if(g.useEffect(()=>{p&&p()},[L]),g.useEffect(()=>{let e=parseInt((null==N?void 0:N.page)||(null==Z?void 0:Z.current_page),10);z(e),e!==(null==N?void 0:N.page)&&y()},[null==N?void 0:N.page,null==Z?void 0:Z.current_page]),g.useEffect(()=>{G&&!ee&&y()},[U,G]),!R)return null;if(a.xs||(a.xs=12),H){if("hide"===P)return null;let el=d()(H,"response.data.error")||d()(H,"response.data.message")||d()(H,"response.data.meta.title"),er=d()(H,"response.data.meta.description"),ea=403===d()(H,"response.status")?"core.block.error403":"core.block.error404",eo=M.get(ea);return"default"===P?g.createElement(r.eB,null,g.createElement(r.Tw,{title:e,data:en}),g.createElement(r.tD,null,g.createElement(eo,{title:el,content:er}))):g.createElement(eo,{title:el,content:er})}if(!en.length&&J||H){if("hide"===v)return null;if("string"!=typeof v)return v;let ei=M.get(v);if(!ei)return null;let{noBlock:es,contentStyle:ec}=w||{};return es?g.createElement(ei,k({},w)):g.createElement(r.eB,null,x?g.createElement(A,{pagesOffset:Z}):g.createElement(r.Tw,{title:e}),g.createElement(r.tD,k({},ec),g.createElement(ei,{...w})))}return U?g.createElement(r.eB,null,x?g.createElement(A,{pagesOffset:Z,data:en}):g.createElement(r.Tw,{title:e,data:en}),g.createElement(r.tD,null,C?null:g.createElement(f.dK,{currentPage:L,from:null===(I=V.pages[L])||void 0===I?void 0:I.from,to:null===(j=V.pages[L])||void 0===j?void 0:j.to,total:(null==Z?void 0:Z.total_item)||(null==Z?void 0:Z.total),itemsPerPage:et,message:m,hasSort:b,moduleName:_,resourceName:O,actionName:S}),g.createElement(o.Ay,k({container:!0},i),c()(en)&&en.map((e,t)=>g.createElement(R,{index:t,identity:e,itemProps:n,key:e.toString(),wrapAs:o.Ay,wrapProps:a,pagingId:s,handleActionItem:T})),Y&&X?g.createElement(g.Fragment,null,u()(0,h).map(e=>g.createElement(X,{wrapAs:o.Ay,wrapProps:a,itemProps:n,key:e.toString()}))):null),B?null:g.createElement(f.dK,{currentPage:L,from:null===(K=V.pages[L])||void 0===K?void 0:K.from,to:null===($=V.pages[L])||void 0===$?void 0:$.to,total:(null==Z?void 0:Z.total_item)||(null==Z?void 0:Z.total),itemsPerPage:et,message:m}))):X?g.createElement(r.eB,null,x?g.createElement(A,{loading:!0}):g.createElement(r.Tw,{title:e}),g.createElement(r.tD,null,g.createElement(o.Ay,k({container:!0,sx:{"&:empty":{display:"none"}}},i),u()(0,h).map(e=>g.createElement(X,{testid:"loadingIndicator",wrapAs:o.Ay,wrapProps:a,itemProps:n,key:e.toString()}))))):g.createElement("div",{"data-testid":"loadingIndicator"},q.formatMessage({id:"loading_dots"}))};function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}let x=e=>{let{isLoadMorePagination:t}=e;return t?g.createElement(P,b({},e)):g.createElement(v,b({},e))},_=(0,l.hS2)(x)}}]);