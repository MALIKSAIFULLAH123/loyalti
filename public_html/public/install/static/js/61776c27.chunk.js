(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-core-components-SiteBarMobileBlock-SiteBarMobileBlock"],{72761(e,t,o){"use strict";o.d(t,{A:()=>S});var n=o(98587),a=o(58168),r=o(96540),i=o(20053),l=o(5004),s=o(75659),c=o(38413),p=o(31609);function d(e){return(0,p.A)("MuiBadge",e)}(0,c.A)("MuiBadge",["root","badge","invisible"]);var m=o(99977),u=o(74848);let g=["badgeContent","component","children","invisible","max","slotProps","slots","showZero"],h=e=>{let{invisible:t}=e;return(0,s.A)({root:["root"],badge:["badge",t&&"invisible"]},d,void 0)},f=r.forwardRef(function(e,t){let{component:o,children:r,max:i=99,slotProps:s={},slots:c={},showZero:p=!1}=e,d=(0,n.A)(e,g),{badgeContent:f,max:v,displayValue:b,invisible:x}=function(e){let{badgeContent:t,invisible:o=!1,max:n=99,showZero:a=!1}=e,r=(0,l.A)({badgeContent:t,max:n}),i=o;!1!==o||0!==t||a||(i=!0);let{badgeContent:s,max:c=n}=i?r:e,p=s&&Number(s)>c?`${c}+`:s;return{badgeContent:s,invisible:i,max:c,displayValue:p}}((0,a.A)({},e,{max:i})),y=(0,a.A)({},e,{badgeContent:f,invisible:x,max:v,showZero:p}),A=h(y),k=o||c.root||"span",w=(0,m.A)({elementType:k,externalSlotProps:s.root,externalForwardedProps:d,additionalProps:{ref:t},ownerState:y,className:A.root}),R=c.badge||"span",E=(0,m.A)({elementType:R,externalSlotProps:s.badge,ownerState:y,className:A.badge});return(0,u.jsxs)(k,(0,a.A)({},w,{children:[r,(0,u.jsx)(R,(0,a.A)({},E,{children:b}))]}))});var v=o(3556),b=o(92353),x=o(87447),y=o(75630);function A(e){return(0,p.A)("MuiBadge",e)}let k=(0,c.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),w=["anchorOrigin","className","component","components","componentsProps","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],R=e=>{let{color:t,anchorOrigin:o,invisible:n,overlap:a,variant:r,classes:i={}}=e,l={root:["root"],badge:["badge",r,n&&"invisible",`anchorOrigin${(0,y.A)(o.vertical)}${(0,y.A)(o.horizontal)}`,`anchorOrigin${(0,y.A)(o.vertical)}${(0,y.A)(o.horizontal)}${(0,y.A)(a)}`,`overlap${(0,y.A)(a)}`,"default"!==t&&`color${(0,y.A)(t)}`]};return(0,s.A)(l,A,i)},E=(0,v.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),C=(0,v.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver(e,t){let{ownerState:o}=e;return[t.badge,t[o.variant],t[`anchorOrigin${(0,y.A)(o.anchorOrigin.vertical)}${(0,y.A)(o.anchorOrigin.horizontal)}${(0,y.A)(o.overlap)}`],"default"!==o.color&&t[`color${(0,y.A)(o.color)}`],o.invisible&&t.invisible]}})(({theme:e,ownerState:t})=>(0,a.A)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},"default"!==t.color&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},"dot"===t.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${k.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${k.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${k.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${k.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${k.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${k.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${k.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${k.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})})),I=r.forwardRef(function(e,t){var o,r,s,c,p,d;let m;let g=(0,b.A)({props:e,name:"MuiBadge"}),{anchorOrigin:h={vertical:"top",horizontal:"right"},className:v,component:y="span",components:A={},componentsProps:k={},overlap:I="rectangular",color:S="default",invisible:M=!1,max:O,badgeContent:B,slots:z,slotProps:T,showZero:$=!1,variant:W="standard"}=g,N=(0,n.A)(g,w),P=(0,l.A)({anchorOrigin:h,color:S,overlap:I,variant:W}),L=M;!1!==M||(0!==B||$)&&(null!=B||"dot"===W)||(L=!0);let{color:F=S,overlap:_=I,anchorOrigin:D=h,variant:H=W}=L?P:g,j=(0,a.A)({},g,{anchorOrigin:D,invisible:L,color:F,overlap:_,variant:H}),U=R(j);"dot"!==H&&(m=B&&Number(B)>O?`${O}+`:B);let X=null!=(o=null!=(r=null==z?void 0:z.root)?r:A.Root)?o:E,q=null!=(s=null!=(c=null==z?void 0:z.badge)?c:A.Badge)?s:C,G=null!=(p=null==T?void 0:T.root)?p:k.root,Y=null!=(d=null==T?void 0:T.badge)?d:k.badge;return(0,u.jsx)(f,(0,a.A)({invisible:M,badgeContent:m,showZero:$,max:O},N,{slots:{root:X,badge:q},className:(0,i.default)(null==G?void 0:G.className,U.root,v),slotProps:{root:(0,a.A)({},G,(0,x.A)(X)&&{as:y,ownerState:(0,a.A)({},null==G?void 0:G.ownerState,{anchorOrigin:D,color:F,overlap:_,variant:H})}),badge:(0,a.A)({},Y,{className:(0,i.default)(U.badge,null==Y?void 0:Y.className)},(0,x.A)(q)&&{ownerState:(0,a.A)({},null==Y?void 0:Y.ownerState,{anchorOrigin:D,color:F,overlap:_,variant:H})})},ref:t}))}),S=I},25669(e,t,o){"use strict";o.d(t,{A:()=>c});var n=o(58168),a=o(98587),r=o(96540);let i=["getTrigger","target"];function l(e,t){let{disableHysteresis:o=!1,threshold:n=100,target:a}=t,r=e.current;return a&&(e.current=void 0!==a.pageYOffset?a.pageYOffset:a.scrollTop),(!!o||void 0===r||!(e.current<r))&&e.current>n}let s="undefined"!=typeof window?window:null;function c(e={}){let{getTrigger:t=l,target:o=s}=e,c=(0,a.A)(e,i),p=r.useRef(),[d,m]=r.useState(()=>t(p,c));return r.useEffect(()=>{let e=()=>{m(t(p,(0,n.A)({target:o},c)))};return e(),o.addEventListener("scroll",e,{passive:!0}),()=>{o.removeEventListener("scroll",e,{passive:!0})}},[o,t,JSON.stringify(c)]),d}},23875(e,t,o){var n=o(96131);e.exports=function(e,t){for(var o=e.length;o--&&n(t,e[o],0)>-1;);return o}},28380(e,t,o){var n=o(96131);e.exports=function(e,t){for(var o=-1,a=e.length;++o<a&&n(t,e[o],0)>-1;);return o}},44826(e,t,o){var n=o(77556),a=o(54128),r=o(28754),i=o(23875),l=o(28380),s=o(63912),c=o(13222);e.exports=function(e,t,o){if((e=c(e))&&(o||void 0===t))return a(e);if(!e||!(t=n(t)))return e;var p=s(e),d=s(t),m=l(p,d),u=i(p,d)+1;return r(p,m,u).join("")}},14035(e,t,o){"use strict";o.d(t,{A:()=>P});var n=o(91557),a=o(44371),r=o(8051),i=o(95223),l=o(3556),s=o(44826),c=o.n(s),p=o(85015),d=o.n(p),m=o(96540),u=o(56525),g=o(85838);let h=(0,u.A)(e=>{var t,o,n,a;return(0,g.A)({root:{width:320,position:"absolute",left:"50%",transform:"translateX(-50%)",top:0,paddingTop:13,overflow:"hidden",zIndex:e.zIndex.appBar},rootOpen:{background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,boxShadow:e.shadows[8],"& $searchIcon":{color:e.palette.primary.main},"& $resultWrapper":{display:"block"}},form:{width:284,position:"relative",background:e.palette.action.hover,borderRadius:"999px",height:e.spacing(4),margin:e.spacing(0,2,0,2),"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputBase-input":{height:e.spacing(4),boxSizing:"border-box"}},formFocused:{border:e.mixins.border("primary"),borderColor:e.palette.primary.main,background:"none"},searchIcon:{color:e.palette.text.secondary,transition:"all .2s ease",cursor:"pointer"},inputRoot:{color:`${e.palette.text.secondary} !important`,width:"100%"},inputInput:{padding:`${e.spacing(.5,1,.75,1)} !important`,boxSizing:"border-box",paddingLeft:"30px",transition:"all .2s ease",width:"100%",height:"32px"},guestBar:{justifyContent:"space-between"},textField:{marginRight:e.spacing(1),height:e.spacing(5),width:"203px","& input":{color:e.palette.text.secondary}},button:{marginRight:e.spacing(2),textTransform:"capitalize",fontWeight:e.typography.fontWeightBold},account:{textTransform:"none",fontWeight:e.typography.fontWeightBold},searchIconFocused:{color:e.palette.primary.main},renderOption:{position:"relative",width:"100%",padding:e.spacing(1,0),display:"flex",alignItems:"center",justifyContent:"space-between"},removeButton:{minWidth:"16px",cursor:"pointer",height:"26px",borderRadius:"26px",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(14)},labelItem:{flexGrow:1,paddingRight:e.spacing(1)},resultWrapper:{display:"none"},menuList:{margin:0,padding:0},menuItem:{"& + $menuItem":{borderTop:"solid 1px",borderTopColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary}},menuItemLink:{padding:e.spacing(1.2,2),display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",color:e.palette.text.primary,transition:"all .2s","&:hover":{backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius}},menuItemAvatar:{width:e.spacing(6),height:e.spacing(6),marginRight:e.spacing(2)},menuItemIcon:{display:"inline-block",width:e.spacing(4),height:e.spacing(4),lineHeight:"32px",backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"50%",color:"#828080",textAlign:"center",marginRight:e.spacing(2)},headerPopup:{padding:e.spacing(1,1,1,2),display:"flex",justifyContent:"space-between",alignItems:"center",textTransform:"capitalize",fontWeight:e.typography.fontWeightBold,fontSize:e.mixins.pxToRem(18)},headerRecent:{borderBottom:"1px solid",borderBottomColor:null===(o=e.palette.border)||void 0===o?void 0:o.secondary},clearButton:{fontWeight:"normal !important"},recentItem:{padding:e.spacing(1,2),display:"flex",alignItems:"center",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(15),cursor:"pointer","& + $recentItem":{borderTop:"solid 1px",borderTopColor:null===(n=e.palette.border)||void 0===n?void 0:n.secondary}},focusedItem:{backgroundColor:e.palette.action.selected},recentLabel:{flexGrow:1,padding:e.spacing(1,0),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},searchItem:{display:"flex",flexDirection:"row",padding:e.spacing(1.5),color:e.palette.text.primary,alignItems:"center",borderTop:"solid 1px",borderTopColor:null===(a=e.palette.border)||void 0===a?void 0:a.secondary},searchContent:{paddingLeft:e.spacing(1),flexGrow:1,overflow:"hidden"},searchAvatar:{width:48,height:48},searchNote:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,fontWeight:"normal"},searchTitle:{padding:e.spacing(.5,0),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"block",maxWidth:"100%",fontWeight:e.typography.fontWeightBold,fontSize:e.mixins.pxToRem(15),color:e.palette.text.primary},itemName:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,paddingTop:e.spacing(.5),fontWeight:"normal"},noOptions:{fontSize:e.mixins.pxToRem(15),padding:e.spacing(2),display:"block"},searchMinimize:{width:"32px",height:"32px",transition:"all .1s",transform:"translateZ(0)","& $searchIcon":{position:"relative",pointerEvents:"inherit"},"& $inputRoot":{position:"absolute",left:0,top:0,width:"32px",height:"30px",opacity:0,zIndex:2,cursor:"pointer"},[e.breakpoints.down("md")]:{}},divider:{margin:`${e.spacing(0,2,0,1)} !important`,height:"32px !important"}})},{name:"AppBar"});var f=o(60780),v=o(63461),b=o(20053),x=o(62193),y=o.n(x),A=o(71468);let k=m.forwardRef(function({onSearch:e,limit:t=5,classes:o},r){let{dispatch:i,i18n:l}=(0,n.PCX)(),[s,c]=m.useState(-1),p=[],d=(0,A.d4)(e=>e.search.recentSearch),{data:u,loaded:g}=d;m.useImperativeHandle(r,()=>({moveNext(){if(!(null==u?void 0:u.length))return;let e=Math.min(u.length,t);e&&c(t=>(t+1+e)%e)},movePrev(){if(!(null==u?void 0:u.length))return;let e=Math.min(u.length,t);e&&c(t=>(Math.max(0,t)-1+e)%e)},selected:()=>s>-1?u[s]:void 0})),m.useEffect(()=>{c(-1)},[u]),m.useEffect(()=>{g||i({type:"recentSearch/INIT",payload:{}})},[i,g]);let h=m.useCallback((e,t)=>{e&&(e.preventDefault(),e.stopPropagation()),i({type:"recentSearch/REMOVE",payload:{text:t}})},[]),x=m.useCallback(()=>{i({type:"recentSearch/CLEAR",payload:{}})},[i]);return y()(u)?m.createElement("div",{className:o.menuList,"data-testid":"noRecentSearches"},m.createElement("span",{className:o.noOptions},l.formatMessage({id:"no_recent_searches"}))):g?m.createElement(m.Fragment,null,m.createElement("div",{className:(0,b.default)(o.headerPopup,o.headerRecent)},m.createElement("span",null,l.formatMessage({id:"recents"})),m.createElement(f.A,{onClick:x,className:o.clearButton,tabIndex:-1,size:"medium"},l.formatMessage({id:"clear"}))),m.createElement("div",{className:o.menuList},u.slice(0,5).map((t,n)=>m.createElement("div",{role:"option",tabIndex:-1,ref(e){p[n]=e},"aria-selected":s===n,key:t.toString(),onClick:()=>e(t),onMouseOver:()=>c(n),onMouseLeave:()=>c(-1),className:(0,b.default)(o.recentItem,s===n&&o.focusedItem)},m.createElement("span",{className:o.recentLabel},t),m.createElement(v.A,{tabIndex:-1,size:"smaller",onClick:e=>h(e,t),sx:{fontSize:16}},m.createElement(a.s4,{color:"textSecondary",icon:"ico-close"})))))):null});var w=o(38860),R=o(87773),E=o(12789),C=o(89481);let I=e=>e.search.suggestions,S=m.forwardRef(function({limit:e=6,text:t,classes:o,onSearch:a,isActionSearch:i,blurSearch:l},s){let{i18n:c}=(0,n.PCX)(),[p,d]=m.useState(-1),u=(0,A.d4)(I),{data:g,loaded:h}=Object.assign({},u[t]);m.useImperativeHandle(s,()=>({moveNext(){if(!(null==g?void 0:g.length))return;let t=Math.min(g.length,e);t&&d(e=>(e+1+t)%t)},movePrev(){if(!(null==g?void 0:g.length))return;let t=Math.min(g.length,e);t&&d(e=>(Math.max(0,e)-1+t)%t)},selected:()=>p>-1?g[p]:void 0}));let f=()=>{"function"==typeof a&&a(t)};return m.createElement(m.Fragment,null,!!t&&m.createElement(R.A,{paragraph:!0,padding:"16px",margin:"0",sx:{cursor:"pointer"}},i&&m.createElement("span",{onClick:f},`${c.formatMessage({id:"search"})} “${t}”`)),m.createElement("div",{className:o.menuList,"data-testid":"suggestions"},h&&g.length?g.slice(0,e).map((e,t)=>m.createElement(n.Wti,{role:"option","data-testid":"suggestion",key:e.to,to:e.to,onClick:l,onMouseOver:()=>d(t),onMouseLeave:()=>d(-1),className:(0,b.default)(o.searchItem,p===t&&o.focusedItem)},m.createElement(E.A,{className:o.searchAvatar,src:(0,w.AE)(null==e?void 0:e.image,"200"),children:(0,w.cb)(e.title),style:{backgroundColor:w.m6.hex((0,w.cb)(e.title)||"")}}),m.createElement("div",{className:o.searchContent},m.createElement(R.A,{variant:"h5",className:o.searchTitle},e.title),m.createElement("div",{className:o.searchNote},e.note)))):null,h?null:m.createElement(r.A,{sx:{display:"flex",justifyContent:"center",pb:2,color:"text.disabled"}},m.createElement(C.A,{variant:"indeterminate",color:"inherit"}))))});var M=o(47186);let O="search",B="MfHeaderSearchForm",z=(0,l.Ay)(r.A,{name:B,slot:"Root",overridesResolver:({placement:e},t)=>[t.root,"left"===e&&t.rootPlacementLeft,"float-left"===e&&t.rootPlacementFloatLeft,"center"===e&&t.rootPlacementCenter,"right"===e&&t.rootPlacementRight]})(({theme:e,open:t,placement:o})=>({width:320,position:"absolute",top:0,paddingTop:13,zIndex:e.zIndex.appBar,transform:"translateX(-50%)",left:"50%",...t&&{background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,boxShadow:e.shadows[8],"& $searchIcon":{color:e.palette.primary.main},"& $resultWrapper":{display:"block"}}})),T=(0,l.Ay)("form",{name:B,slot:"Form",skipSx:!0,skipVariantsResolver:!0,shouldForwardProp:e=>"focused"!==e,overridesResolver:(e,t)=>[t.form]})(({theme:e,focused:t})=>({width:284,position:"relative",background:e.palette.action.hover,borderRadius:"999px",height:e.spacing(4),margin:e.spacing(0,2,0,2),"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputBase-input":{height:e.spacing(4),boxSizing:"border-box"},...t&&{border:e.mixins.border("primary"),borderColor:e.palette.primary.main,background:"none"}})),$=(0,l.Ay)(i.Ay,{name:B,slot:"Input"})(({theme:e})=>({color:`${e.palette.text.secondary} !important`,width:"100%","& input::placeholder":{color:e.palette.text.hint}})),W=(0,l.Ay)(r.A,{name:B,slot:"ResultWrapper"})(({open:e})=>({display:e?"block":"none"})),N=(0,l.Ay)(a.s4,{name:B,slot:"SearchIcon",shouldForwardProp:e=>"active"!==e})(({active:e,theme:t})=>({color:t.palette.text.hint,...e&&{color:t.palette.primary.main}}));function P({openSearch:e,minimize:t,closeSearch:o,placement:r,menuRef:i}){var l;let s=h(),{dispatch:p,usePageParams:u,i18n:g,eventCenter:f,navigate:v,location:b,getSetting:x}=(0,n.PCX)(),y=(0,n.IgF)(O,O,"searchHashtagItem"),A=(0,n.IgF)(O,O,"viewAll"),{pathname:R}=b,{q:E}=u(),C=m.useMemo(()=>/^\/hashtag\/search/.test(R)?E?`#${E}`:"":/^\/search/.test(R)?E:"",[R,E]),[I,B]=m.useState({open:!1,text:C,focus:!1,minimize:!!t}),P=x("search"),L=g.formatMessage({id:"search"}),F=m.useRef(),_=m.useRef(),D=m.useRef();m.useEffect(()=>{let e=f.on("minimizeGlobalSearchForm",()=>{B(e=>({...e,minimize:!0}))});return()=>{f.off("minimizeGlobalSearchForm",e)}},[]),m.useEffect(()=>{!0===e&&V()},[e]);let H=m.useCallback(e=>{if(B(t=>({...t,text:e})),e&&p({type:"recentSearch/ADD",payload:{text:c()(e)}}),e.startsWith("#")&&e.substring(1)){let t={q:e.substring(1),...null==y?void 0:y.pageParams},o=null==A?void 0:A.apiRules,n=(0,w.FI)(t,o);v({pathname:"/hashtag/search",search:M.stringify(n)},{replace:!0})}else v(`/search/?q=${e}`);(null==_?void 0:_.current)&&_.current.blur(),q()},[]),j=m.useCallback(()=>{B(e=>({...e,focus:!1,open:!1}))},[]),U=m.useCallback(()=>{var e;(null===(e=F.current)||void 0===e?void 0:e.movePrev)&&F.current.movePrev()},[]),X=m.useCallback(()=>{var e;(null===(e=F.current)||void 0===e?void 0:e.moveNext)&&F.current.moveNext()},[]),q=m.useCallback(()=>{B(e=>({...e,focus:!1,open:!1})),o&&o()},[o]),G=m.useCallback(e=>{var t;let n=null===(t=_.current)||void 0===t?void 0:t.value;if("#"===n)return;e&&(e.preventDefault(),e.stopPropagation());let a=c()(n);a||q(),a&&(p({type:"recentSearch/ADD",payload:{text:a}}),H(a)),o&&o()},[o]),Y=m.useCallback(e=>{let t=e.currentTarget.value;B(e=>({...e,text:t,selectedIndex:0})),p({type:"suggestions/QUERY",payload:{text:t}})},[]),V=m.useCallback(()=>{if(!I.open&&(B(e=>({...e,focus:!0,open:!0})),_.current)){var e;null===(e=_.current)||void 0===e||e.focus()}p({type:"suggestions/QUERY",payload:{text:I.text}})},[I.open,I.text]),Z=m.useCallback(()=>{o&&o(),B(e=>({...e,open:!1,focus:!1}))},[o]),K=m.useCallback(()=>{var e,t;let o=null===(e=F.current)||void 0===e?void 0:e.selected();if(o){null===(t=_.current)||void 0===t||t.blur(),d()(o)?H(o):v(null==o?void 0:o.to);return}G()},[I.text]),Q=m.useCallback(e=>{e.preventDefault(),e.stopPropagation()},[]),J=m.useCallback(e=>{let t=null==e?void 0:e.keyCode;if(!e.metaKey&&!e.ctrlKey)switch(t){case 9:j();break;case 27:j(),Q(e);break;case 13:K(),Q(e);break;case 38:U(),Q(e);break;case 40:X(),Q(e);break;default:I.open||V()}},[I.open]);return(m.useEffect(()=>{let e=["/search","/hashtag/search"].some(e=>R.startsWith(e));B(t=>({...t,text:e?C:""}))},[R,C]),P)?m.createElement(a.qB,{onClickAway:Z,excludeRef:i},m.createElement(z,{ref:D,"data-testid":"formSearch",open:I.open,placement:null!=r?r:"center",role:"search",id:"globalSearchBox"},m.createElement(T,{method:"get",focused:!!I.open,"aria-expanded":!I.minimize,onSubmit:G},m.createElement($,{startAdornment:m.createElement(N,{active:!!I.open,icon:"ico-search-o"}),placeholder:L,classes:{root:s.inputRoot,input:s.inputInput},autoComplete:"off",value:I.text,name:"globalSearch",inputProps:{"aria-label":"search","data-testid":"searchBox",autoComplete:"off",autoCapitalize:"off"},inputRef:_,onFocus:V,onChange:Y,onKeyDown:J})),I.open?m.createElement(W,{open:I.open},I.text?m.createElement(S,{ref:F,onSearch:H,classes:s,text:I.text,isActionSearch:(null===(l=_.current)||void 0===l?void 0:l.value)!=="#",blurSearch:Z}):m.createElement(k,{onSearch:H,ref:F,classes:s})):null)):null}},80276(e,t,o){"use strict";o.d(t,{A:()=>u});var n=o(91557),a=o(84680),r=o(38860),i=o(96540),l=o(56525),s=o(85838);let c=(0,l.A)(e=>(0,s.A)({root:{},menu:{},text:{flexGrow:1},colapseIcon:{},icon:{color:"#fff",backgroundColor:e.palette.primary.main,borderRadius:"32px",width:"32px",height:"32px",textAlign:"center",marginRight:e.spacing(2),lineHeight:"32px"},dropDownIcon:{},menuItemAvatar:{},menuItemIcon:{fontSize:e.mixins.pxToRem(18),display:"inline-block",textAlign:"center",marginRight:e.spacing(1),backgroundColor:"#e0dddd",borderRadius:"50%",lineHeight:"32px",width:e.spacing(4)},menuItem:{height:e.spacing(7),fontWeight:e.typography.fontWeightRegular,margin:e.spacing(0,-1),"& a":{padding:e.spacing(0,1)},"&:hover":{backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius}},menuItemText:{fontSize:e.mixins.pxToRem(15)},menuItemLink:{color:"light"===e.palette.mode?e.palette.text.primary:e.palette.text.secondary,display:"block",height:"100%",lineHeight:`${e.spacing(7)}px`},activeMenuItem:{"& $menuItemLink":{color:e.palette.primary.main,fontWeight:"bold"},"& $menuItemIcon":{color:e.palette.background.paper,backgroundColor:e.palette.primary.main}},menuItemButton:{marginTop:e.spacing(2),"& .ico":{marginRight:e.spacing(1)}},buttonLink:{fontSize:e.mixins.pxToRem(18),fontWeight:"bold",height:e.spacing(5)},headerBlock:{fontSize:e.mixins.pxToRem(18),fontWeight:"bold",color:"light"===e.palette.mode?e.palette.text.secondary:e.palette.text.primary,padding:e.spacing(2,0)}}),{name:"SidebarAppMenu"});var p=o(58156),d=o.n(p);let m={};function u({displayTitle:e,displayViewMore:t=!0,title:o,blockProps:l,appName:s,menuName:p,item:u,displayLimit:g=5}){let h=c(),{usePageParams:f,useSession:v,getAcl:b,jsxBackend:x,compactUrl:y,getSetting:A,i18n:k,location:w,useIsMobile:R}=(0,n.PCX)(),E=R(!0),C=i.useRef(!1),I=b(),{tab:S,pathname:M,id:O}=f(),B=M||(null==w?void 0:w.pathname),z=v(),T=A(),{appName:$,module_name:W}=f(),N=s||$||W||"core",[P,L]=i.useState(d()(m,N)),F=(0,i.useCallback)(()=>{m={[N]:!P},L(e=>!e)},[]),_=(0,n.cbF)(s||$||W||"core",p),D=(0,r.Ue)(null==_?void 0:_.items,{setting:T,session:z,acl:I,item:u,isMobile:E}),H=D.filter(e=>"sidebarButton"===e.as).length,j=(0,i.useMemo)(()=>{let e=[...D];return e.length?(e.length<=g+H||!t||(P?e.splice(e.length-H,0,{icon:"ico-angle-up",testid:"less",label:k.formatMessage({id:"less"}),onClick:F,to:null}):e.splice(g,e.length-(g+H),{icon:"ico-angle-down",testid:"more",label:k.formatMessage({id:"more"}),onClick:F,to:null})),e):[]},[D,g,H,t,P,k,F]),U=(0,i.useMemo)(()=>-1!==D.findIndex(e=>(0,r.w7)(B,e.to)),[D,B]),X=(0,i.useMemo)(()=>!j.some(e=>(0,r.w7)(B,e.to)),[j,B]);return i.useEffect(()=>{!C.current&&U&&X&&F(),C.current=!0},[U,X]),i.createElement(a.eB,{testid:"blockSidebarMenu"},e&&i.createElement(a.Tw,{title:o}),i.createElement(a.tD,null,i.createElement("div",{role:"menu"},j.map((e,t)=>x.render({component:`menuItem.as.${e.as||"sidebarLink"}`,props:{key:t.toString(),variant:"contained",item:{...e,to:e.to?y(e.to,{id:O}):void 0},classes:h,active:S&&S===e.tab||(0,r.w7)(B,e.to)}})))))}},24117(e,t,o){"use strict";o.r(t),o.d(t,{default:()=>L});var n=o(80276),a=o(91557),r=o(84680),i=o(44371),l=o(38860),s=o(3556),c=o(63009),p=o(8051),d=o(77298),m=o(25669),u=o(72761),g=o(62193),h=o.n(g),f=o(96540),v=o(14035),b=o(77066),x=o(71468);let y=[{to:"/",icon:"ico-home-alt",appName:"feed",scrollTop:!0,showWhen:["truthy","visibleMenus.home"]},{to:"/messages",icon:"ico-comment-o",appName:"chatplus",name:"new_chat_message",showWhen:["and",["truthy","setting.chatplus.server"],["truthy","visibleMenus.message"]],action:"chatplus/menu/clickItem"},{to:"/messages",icon:"ico-comment-o",appName:"chat",name:"new_chat_message",showWhen:["and",["truthy","setting.chat.is_active"],["falsy","setting.chatplus.server"],["truthy","pusherService"],["truthy","visibleMenus.message"]]},{to:"/notification",icon:"ico-bell-o",appName:"notification",name:"new_notification",showWhen:["truthy","visibleMenus.notification"],action:"notification/menu/clickItem"},{icon:"ico-search-o",appName:"",style:"search",showWhen:["or",["truthy","visibleMenus.search"],["eqeqeq","position","top"]]}],A=(0,s.Ay)("div",{name:"MenuWrapper"})(({theme:e,minHeight:t,active:o,position:n})=>({display:"flex",height:t,backgroundColor:e.mixins.backgroundColor("paper"),zIndex:1300,left:0,right:0,position:"fixed",transition:"all .5s ease",..."top"===n?{borderBottom:e.mixins.border("secondary"),bottom:"auto",top:0,...o?{top:`-${t}px`}:{}}:{borderTop:e.mixins.border("secondary"),bottom:0,...o?{bottom:`-${t}px`}:{}}})),k=(0,s.Ay)(i.s4,{name:"MenuButtonIcon"})(({theme:e})=>({width:24,height:24,fontSize:e.mixins.pxToRem(24)})),w=(0,s.Ay)(a.N_E,{name:"MenuButton",shouldForwardProp:e=>"activeMenu"!==e})(({theme:e,activeMenu:t})=>({flex:"1",minWidth:"64px",display:"flex",alignItems:"center",justifyContent:"center",borderTop:"solid 2px #fff",".appbar-position-top &":{borderTop:0,borderBottom:"solid 2px #fff"},...t&&{color:`${e.palette.primary.main} !important`,borderColor:`${e.palette.primary.main} !important`}})),R=(0,s.Ay)(c.Ay,{name:"PopoverStyled"})(({theme:e})=>{var t;return{"& .MuiPopover-paper":{maxWidth:"100%",width:"100%",borderRadius:0,top:"0px !important",bottom:0,boxShadow:"none !important",borderTop:`solid 1px ${null===(t=e.palette.border)||void 0===t?void 0:t.secondary}`,maxHeight:"calc(100% - 49px)"}}}),E=(0,s.Ay)("div",{name:"DropdownMenuWrapper"})(({theme:e})=>({width:"100%",minHeight:"calc(100vh - 60px)"})),C=(0,s.Ay)("div",{name:"UserBlock"})(({theme:e})=>{var t;return{display:"flex",alignItems:"center",padding:e.spacing(2),borderBottom:`solid 1px ${null===(t=e.palette.border)||void 0===t?void 0:t.secondary}`}}),I=(0,s.Ay)("div",{name:"Avatar"})(({theme:e})=>({width:48,marginRight:e.spacing(1)})),S=(0,s.Ay)("div",{name:"UserInner"})(({theme:e})=>({flex:1,minWidth:0,display:"flex",flexDirection:"column"})),M=(0,s.Ay)(p.A,{name:"UserName"})(({theme:e})=>({color:e.palette.text.primary,fontWeight:"bold"})),O=(0,s.Ay)(a.N_E,{name:"LinkInfo"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),lineHeight:1,color:e.palette.text.secondary})),B=(0,s.Ay)("div",{name:"UserAction"})(({theme:e})=>({marginLeft:"auto","& > .ico":{width:32,height:32,fontSize:e.mixins.pxToRem(24),color:e.palette.text.secondary,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"}})),z=(0,s.Ay)("div",{name:"MenuApp"})(({theme:e})=>({paddingTop:e.spacing(.5),"& ul":{marginLeft:e.spacing(-1),paddingBottom:e.spacing(4)},"& ul > li":{marginLeft:0,marginRight:0,marginBottom:e.spacing(1),paddingLeft:0,"& > a":{display:"flex",padding:e.spacing(1),fontSize:"0.9375rem",alignItems:"center",fontWeight:"bold"}}})),T=(0,s.Ay)("div",{name:"SearchMobile"})(({theme:e})=>({display:"block",zIndex:"1301",position:"absolute",backgroundColor:e.palette.background.paper,top:"0",width:"100%",height:"100%","& > div":{width:"100%"},"& form":{width:"calc(100% - 96px)"}})),$=(0,s.Ay)(a.N_E,{name:"CancelButton"})(({theme:e})=>({position:"absolute",zIndex:e.zIndex.appBar,right:"16px",top:"50%",transform:"translateY(-50%)"})),W=(0,s.Ay)(d.A,{name:"OfflineMode"})(({theme:e})=>({marginTop:e.spacing(1),width:"fit-content",backgroundColor:e.palette.warning.main,color:"#fff",cursor:"pointer"})),N=(0,s.Ay)("div",{name:"HeightFixed"})(({heightApp:e})=>({height:e})),P=(0,a.WvA)({name:"SiteBarMobileBlock",extendBlock:function({blockProps:e,visibleMenus:t,slotName:o}){var s,c,d;let{i18n:g,useSession:P,navigate:L,usePageParams:F,getSetting:_,jsxBackend:D,getAcl:H,useIsMobile:j,useTheme:U,dispatch:X}=(0,a.PCX)(),q="header"===o?"top":"bottom",G=(0,a.zy2)(),Y=P(),{user:V,loggedIn:Z}=Y,[K,Q]=f.useState(!1),[J,ee]=f.useState(!1),[et,eo]=f.useState(!1),en=f.useRef(),ea=_(),er=H(),ei=j(),el=f.useRef(),es=U(),ec=null!==(d=null===(s=es.appBarMobileConfig)||void 0===s?void 0:s.nav)&&void 0!==d?d:48,ep=(0,x.d4)(b.Wy),ed=D.get("core.ui.footerList"),em=H("core.admincp.has_admin_access"),eu=_("core.offline"),eg=(0,a.cbF)("core","accountMenu"),[eh]=(0,a.Vd3)(null,{}),ef=(0,m.A)(),[ev,eb]=f.useState(0);f.useEffect(()=>{Z&&document.body.classList.add(`appbar-${q}`)},[q,Z]),f.useEffect(()=>{var e;eb(null===(e=el.current)||void 0===e?void 0:e.clientHeight)},[]);let ex=(0,l.Ue)(eg.items,{setting:ea,acl:er,session:Y,isMobile:ei}),ey=(0,l.Ue)(y,{setting:ea,pusherService:!!a._W3,visibleMenus:t,position:q}),{appName:eA="feed"}=F(),ek=()=>{Q(e=>!e)},ew=()=>{Q(e=>!e)},eR=()=>{eo(e=>!e)};f.useEffect(()=>{Q(!1)},[G.pathname]),f.useEffect(()=>{K||ee(!1)},[K]);let eE=()=>{ee(e=>!e)},eC=e=>{e.scrollTop&&window.scrollTo(0,0),(null==e?void 0:e.action)&&X({type:e.action})};return h()(V)?null:f.createElement(r.eB,null,f.createElement(r.tD,null,f.createElement(N,{heightApp:ev}),f.createElement(A,{ref:el,active:ef,minHeight:ec,position:q,className:`appbar-position-${q}`},ey.map((e,t)=>"search"!==e.style?f.createElement(w,{key:`k${t}`,role:"button",to:e.to,activeMenu:eA===e.appName&&!K,underline:"none",onClick:()=>eC(e)},ep[null==e?void 0:e.name]?f.createElement(u.A,{color:"error",badgeContent:ep[null==e?void 0:e.name],max:99},f.createElement(k,{icon:e.icon})):f.createElement(k,{icon:e.icon})):f.createElement(f.Fragment,{key:`k${t}`},f.createElement(w,{role:"button",to:e.to,activeMenu:eA===e.appName&&!K,underline:"none",onClick:eR},f.createElement(k,{icon:e.icon})),et?f.createElement(T,null,f.createElement(v.A,{openSearch:et,menuRef:el,closeSearch:()=>eo(!1)}),f.createElement($,{onClick:eR},g.formatMessage({id:"cancel"}))):null)),f.createElement(w,{role:"button",ref:en,activeMenu:K,onClick:ek,underline:"none"},f.createElement(k,{icon:"ico-navbar"}))),f.createElement(R,{id:K?"dropdownMenuMobile":void 0,open:Boolean(K),anchorEl:en.current,onClose:ew,anchorReference:"anchorPosition",anchorPosition:{top:0,left:0},style:{maxWidth:"100%"},marginThreshold:0,transitionDuration:0,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},f.createElement(E,null,f.createElement(C,null,f.createElement(I,null,f.createElement(i.H8,{user:V,size:48})),f.createElement(S,null,f.createElement(i.mE,{variant:"body1",lines:2},f.createElement(M,null,V.full_name)),f.createElement(O,{onClick(){ew(),L(V.link)}},(null==V?void 0:null===(c=V.role)||void 0===c?void 0:c.name)||g.formatMessage({id:"view_profile"})),em&&eu&&f.createElement("a",{href:a.vl,target:"_blank",rel:"noreferrer"},f.createElement(W,{size:"small",label:g.formatMessage({id:"offline_mode"})}))),f.createElement(B,null,f.createElement(i.s4,{icon:J?"ico ico-angle-left":"ico ico-angle-right",onClick:eE}))),f.createElement(z,null,J?f.createElement(f.Fragment,null,ex.filter(Boolean).map((e,t)=>D.render({component:`menuItem.as.${e.as||"normal"}`,props:{key:t.toString(),item:e,variant:(null==e?void 0:e.variant)||"contained",handleAction:eh}}))):f.createElement(n.A,{appName:"core",menuName:"primaryMenu",displayViewMore:!1})),ed&&!J&&f.createElement(p.A,{sx:{px:2,pb:2,pt:1}},f.createElement(ed,{color:"inherit"}))))))},defaults:{visibleMenus:{home:!0,message:!0,notification:!0,search:!1}},custom:{home:{component:"Checkbox",name:"visibleMenus.home",label:"Show Home Icon",fullWidth:!0},message:{component:"Checkbox",name:"visibleMenus.message",label:"Show Message Icon",fullWidth:!0},notification:{component:"Checkbox",name:"visibleMenus.notification",label:"Show Notification Icon",fullWidth:!0}}}),L=P}}]);