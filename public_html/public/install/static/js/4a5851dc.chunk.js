"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["FormEditor"],{38298(e,t,r){r.d(t,{A:()=>o});var l,n,a=r(96540);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let o=function(e){return a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"link_svg__bi link_svg__bi-link"},e),l||(l=a.createElement("path",{d:"M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"})),n||(n=a.createElement("path",{d:"M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"})))}},70418(e,t,r){r.r(t),r.d(t,{default:()=>rZ});var l,n,a,i,o,s,c,u,d,m,h,p,g,_,f,b,E,v,w,x,C,y,N,M,O,k,S,A,T,R,$,L,D=r(44371),z=r(20687),P=r(8051),I=r(89335),H=r(56525),F=r(85838),W=r(20053),j=r(30261),B=r(84058),V=r.n(B),X=r(96540),Y=r(59262);let K={ltr:"ltr",rtl:"rtl",placeholder:"editor-placeholder",paragraph:"editor-paragraph",quote:"editor-quote",heading:{h1:"editor-heading-h1",h2:"editor-heading-h2",h3:"editor-heading-h3",h4:"editor-heading-h4",h5:"editor-heading-h5"},list:{checklist:"editor-list-checklist",nested:{listitem:"editor-nested-listitem"},ol:"editor-list-ol",ul:"editor-list-ul",listitem:"editor-listitem"},image:"editor-image",link:"editor-link",text:{bold:"editor-text-bold",italic:"editor-text-italic",overflowed:"editor-text-overflowed",hashtag:"editor-text-hashtag",underline:"editor-text-underline",strikethrough:"editor-text-strikethrough",underlineStrikethrough:"editor-text-underlineStrikethrough",code:"editor-text-code"},table:"table",tableAddColumns:"tableAddColumns",tableAddRows:"tableAddRows",tableCell:"tableCell",tableCellActionButton:"tableCellActionButton",tableCellActionButtonContainer:"tableCellActionButtonContainer",tableCellEditing:"tableCellEditing",tableCellHeader:"tableCellHeader",tableCellPrimarySelected:"tableCellPrimarySelected",tableCellResizer:"tableCellResizer",tableCellSelected:"tableCellSelected",tableCellSortedIndicator:"tableCellSortedIndicator",tableResizeRuler:"tableCellResizeRuler",tableSelected:"tableSelected",tableSelection:"tableSelection",code:"editor-code",codeHighlight:{atrule:"editor-tokenAttr",attr:"editor-tokenAttr",boolean:"editor-tokenProperty",builtin:"editor-tokenSelector",cdata:"editor-tokenComment",char:"editor-tokenSelector",class:"editor-tokenFunction","class-name":"editor-tokenFunction",comment:"editor-tokenComment",constant:"editor-tokenProperty",deleted:"editor-tokenProperty",doctype:"editor-tokenComment",entity:"editor-tokenOperator",function:"editor-tokenFunction",important:"editor-tokenVariable",inserted:"editor-tokenSelector",keyword:"editor-tokenAttr",namespace:"editor-tokenVariable",number:"editor-tokenProperty",operator:"editor-tokenOperator",prolog:"editor-tokenComment",property:"editor-tokenProperty",punctuation:"editor-tokenPunctuation",regex:"editor-tokenVariable",selector:"editor-tokenSelector",string:"editor-tokenSelector",symbol:"editor-tokenProperty",tag:"editor-tokenProperty",url:"editor-tokenOperator",variable:"editor-tokenVariable"}};var U=r(84535),G=r(57451),J=r(7256),Z=r(12342),q=r(17591),Q=r(42421),ee=r.n(Q),et=r(67746),er=r(35390),el=r(84354),en=r(88010),ea=r(5744),ei=r(12979),eo=r(51381),es=r(91372),ec=r(64252),eu=r(12962),ed=r(53579),em=r(88182),eh=r(90894),ep=r(21271),eg=r(91185);function e_(e){let{className:t,format:r,nodeKey:l,videoID:n,width:a,height:i}=e;return X.createElement(eg.BlockWithAlignableContents,{className:t,format:r,nodeKey:l},X.createElement("iframe",{width:a,height:i,src:`https://www.youtube-nocookie.com/embed/${n}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video"}))}function ef(e){let t=e.getAttribute("data-lexical-youtube"),r=e.getAttribute("width"),l=e.getAttribute("height"),n=e.parentElement,a="";if(n&&"DIV"===n.tagName){let i=n.style.textAlign;i&&(a=i)}if(t){var o;let s=(o={id:t,width:r,height:l,format:a},new eb(o));return{node:s}}return null}class eb extends ei.DecoratorBlockNode{static getType(){return"youtube"}static clone(e){return new eb({id:e.__id,width:e.__width,height:e.__height},e.__format,e.__key)}static importDOM(){return{iframe(e){let t=e.getAttribute("data-lexical-youtube");return t?{conversion:ef,priority:1}:null}}}exportDOM(){let e=document.createElement("div");e.style.textAlign=this.__format;let t=document.createElement("iframe");return t.setAttribute("data-lexical-youtube",this.__id),t.setAttribute("width",this.__width),t.setAttribute("height",this.__height),t.setAttribute("src",`https://www.youtube-nocookie.com/embed/${this.__id}`),t.setAttribute("frameborder","0"),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen","true"),t.setAttribute("title","YouTube video"),e.appendChild(t),{element:e}}updateDOM(){return!1}getId(){return this.__id}getTextContent(e,t){return`https://www.youtube.com/watch?v=${this.__id}`}decorate(e,t){let r=t.theme.embedBlock||{},l={base:r.base||"",focus:r.focus||""};return X.createElement(e_,{className:l,format:this.__format,nodeKey:this.getKey(),videoID:this.__id,width:this.__width,height:this.__height})}constructor(e,t,r){var l;super(t,r),this.__id=null==e?void 0:e.id,this.__width=null==e?void 0:e.width,this.__height=null==e?void 0:e.height,this.__format=null!==(l=null==e?void 0:e.format)&&void 0!==l?l:t}}let eE=(0,ed.createCommand)("INSERT_YOUTUBE_COMMAND");function ev(){let[e]=(0,ea.useLexicalComposerContext)();return(0,X.useEffect)(()=>{if(!e.hasNodes([eb]))throw Error("YouTubePlugin: YouTubeNode not registered on editor");return e.registerCommand(eE,e=>{let t=new eb(e);return(0,eu.$insertNodeToNearestRoot)(t),!0},ed.COMMAND_PRIORITY_EDITOR)},[e]),null}function ew(e){let{className:t,format:r,nodeKey:l,url:n,width:a,height:i}=e;return X.createElement(eg.BlockWithAlignableContents,{className:t,format:r,nodeKey:l},X.createElement("iframe",{src:n,width:a,height:i,frameBorder:"0",scrolling:"no",allowFullScreen:!0,title:"iframe embed"}))}function ex(e){let t=e.getAttribute("data-lexical-iframe"),r=e.getAttribute("width"),l=e.getAttribute("height"),n=e.parentElement,a="";if(n&&"DIV"===n.tagName){let i=n.style.textAlign;i&&(a=i)}if(t){var o;let s=(o={url:t,width:r,height:l,format:a},new eC(o));return{node:s}}return null}class eC extends ei.DecoratorBlockNode{static getType(){return"iframe"}static clone(e){return new eC({url:e.__url,width:e.__width,height:e.__height},e.__format,e.__key)}static importJSON(e){var t;let r=(t=e.url,new eC(t));return r.setFormat(e.format),r}exportJSON(){return{...super.exportJSON(),type:"iframe",version:1,url:this.__url}}exportDOM(){let e=document.createElement("div");e.style.textAlign=this.__format;let t=document.createElement("iframe");return t.setAttribute("data-lexical-iframe",this.__url),t.setAttribute("width",this.__width),t.setAttribute("height",this.__height),t.setAttribute("src",this.__url),t.setAttribute("frameborder","0"),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen","true"),t.setAttribute("title",""),e.appendChild(t),{element:e}}static importDOM(){return{iframe:e=>e.hasAttribute("data-lexical-iframe")?{conversion:ex,priority:1}:null}}updateDOM(){return!1}getId(){return this.__url}getTextContent(e,t){return this.__url}decorate(e,t){let r=t.theme.embedBlock||{},l={base:r.base||"",focus:r.focus||""};return X.createElement(ew,{className:l,format:this.__format,nodeKey:this.getKey(),url:this.__url,width:this.__width,height:this.__height})}constructor(e,t,r){var l;super(t,r),this.__url=null==e?void 0:e.url,this.__width=null==e?void 0:e.width,this.__height=null==e?void 0:e.height,this.__format=null!==(l=null==e?void 0:e.format)&&void 0!==l?l:t}}let ey=(0,ed.createCommand)("INSERT_IFRAME_COMMAND");function eN(){let[e]=(0,ea.useLexicalComposerContext)();return(0,X.useEffect)(()=>{if(!e.hasNodes([eC]))throw Error("IframePlugin: iframeNode not registered on editor");return e.registerCommand(ey,e=>{let t=new eC(e);return(0,eu.$insertNodeToNearestRoot)(t),!0},ed.COMMAND_PRIORITY_EDITOR)},[e]),null}var eM=r(72871),eO=r(91557);function ek({onSubmit:e,description:t}){let{i18n:r}=(0,eO.PCX)(),l={component:"Form",elements:{src:{name:"src",component:"Text",label:r.formatMessage({id:"embed_link"}),fullWidth:!0,placeholder:r.formatMessage({id:"embed_link"}),variant:"outlined",size:"small",description:t},size:{name:"size",component:"Container",variant:"horizontal",elements:{width:{name:"width",component:"Text",margin:"normal",label:r.formatMessage({id:"rich_text_editor_width"}),fullWidth:!1,sx:{maxWith:200},placeholder:r.formatMessage({id:"rich_text_editor_width"}),variant:"outlined",size:"small"},height:{name:"height",component:"Text",margin:"normal",label:r.formatMessage({id:"rich_text_editor_height"}),fullWidth:!1,sx:{maxWith:200},placeholder:r.formatMessage({id:"rich_text_editor_height"}),variant:"outlined",size:"small"}}},hint:{component:"Typo",plainText:r.formatMessage({id:"rich_text_size_hint"}),color:"text.hint",variant:"body2",sx:{}},footer:{name:"_footer",component:"FormFooter",elements:{submit:{name:"_submit",component:"Submit",label:r.formatMessage({id:"ok"}),variant:"contained",color:"primary"}}}}};return X.createElement(eM.ok,{formSchema:l,onSubmit:e,initialValues:{src:"",width:"auto",height:"auto"}})}function eS({className:e,format:t,nodeKey:r,videoID:l,width:n,height:a,h:i}){return X.createElement(eg.BlockWithAlignableContents,{className:e,format:t,nodeKey:r},X.createElement("iframe",{width:n,height:a,src:`https://player.vimeo.com/video/${l}${i?`?h=${i}`:""}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Vimeo video"}))}function eA(e){let t=e.getAttribute("data-lexical-vimeo"),r=e.getAttribute("width"),l=e.getAttribute("height");if(t){let n=new eT({id:t,width:r,height:l});return{node:n}}return null}class eT extends ei.DecoratorBlockNode{static getType(){return"vimeo"}static clone(e){return new eT({id:e.__id,width:e.__width,height:e.__height,h:e.__h},e.__format,e.__key)}static importJSON(e){var t;let r=(t=e.videoID,new eT(t));return r.setFormat(e.format),r}exportJSON(){return{...super.exportJSON(),type:"vimeo",version:1,videoID:this.__id,h:this.__h}}exportDOM(){let e=document.createElement("iframe");return e.setAttribute("data-lexical-vimeo",this.__id),e.setAttribute("width",this.__width),e.setAttribute("height",this.__height),e.setAttribute("src",`https://player.vimeo.com/video/${this.__id}${this.__h?`?h=${this.__h}`:""}`),e.setAttribute("frameborder","0"),e.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),e.setAttribute("allowfullscreen","true"),e.setAttribute("title","Vimeo video"),{element:e}}static importDOM(){return{iframe:e=>e.hasAttribute("data-lexical-vimeo")?{conversion:eA,priority:1}:null}}updateDOM(){return!1}getId(){return this.__id}getTextContent(e,t){return`https://player.vimeo.com/video/${this.__id}${this.__h?`?h=${this.__h}`:""}`}decorate(e,t){let r=t.theme.embedBlock||{},l={base:r.base||"",focus:r.focus||""};return X.createElement(eS,{className:l,format:this.__format,nodeKey:this.getKey(),videoID:this.__id,h:this.__h,width:this.__width,height:this.__height})}constructor(e,t,r){super(t,r),this.__id=null==e?void 0:e.id,this.__width=null==e?void 0:e.width,this.__height=null==e?void 0:e.height,this.__h=null==e?void 0:e.h}}let eR=(0,ed.createCommand)("INSERT_VIMEO_COMMAND");function e$(){let[e]=(0,ea.useLexicalComposerContext)();return(0,X.useEffect)(()=>{if(!e.hasNodes([eT]))throw Error("VimeoPlugin: VimeoNode not registered on editor");return e.registerCommand(eR,e=>{let t=new eT(e);return(0,eu.$insertNodeToNearestRoot)(t),!0},ed.COMMAND_PRIORITY_EDITOR)},[e]),null}let eL={contentName:"rich_text_editor_youtube_video",exampleUrl:"https://www.youtube.com/watch?v=jNQXAC9IVRw",icon:X.createElement(D.s4,{icon:"ico-youtube"}),insertNode(e,t){e.dispatchCommand(eE,t)},keywords:["youtube","video"],async parseUrl(e){let t=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/.exec(e),r=t&&(null==t?void 0:t[2].length)===11?t[2]:null;return null!=r?{id:r,url:e}:null},type:"youtube-video"};D.s4;let eD={contentName:"rich_text_editor_embed_iframe",exampleUrl:"https://www.youtube.com/watch?v=jNQXAC9IVRw",icon:X.createElement(D.s4,{icon:"ico-file-code-o"}),insertNode(e,t){e.dispatchCommand(ey,t)},keywords:["iframe","video"],parseUrl:async e=>({url:e}),type:"iframe"},ez=[eL,eD];function eP({embedConfig:e,onClose:t}){let[r]=(0,ea.useLexicalComposerContext)(),{dialogBackend:l,i18n:n}=(0,eO.PCX)(),a=t=>{null!=t&&e.insertNode(r,t)},i=async r=>{let{src:i}=r,o=en.URL_MATCHER.exec(i);if(null!=e&&null!=i&&null!=o){let s=await e.parseUrl(i);if(s){a({...r,...s}),t();return}}l.alert({message:n.formatMessage({id:"the_url_is_invalid"})}),t()};return X.createElement(ek,{onSubmit:i})}function eI(){let[e,t]=(0,em.A)(),{i18n:r}=(0,eO.PCX)(),l=e=>{t(r.formatMessage({id:e.contentName}),t=>X.createElement(eP,{embedConfig:e,onClose:t}))};return X.createElement(X.Fragment,null,e,X.createElement(en.LexicalAutoEmbedPlugin,{embedConfigs:ez,onOpenEmbedModalForConfig:l,menuRenderFn:()=>null,getMenuOptions:()=>null}))}var eH=r(38860),eF=r(35928),eW=r(60780);function ej({onSubmit:e}){let{i18n:t}=(0,eO.PCX)(),r={component:"Form",elements:{src:{name:"src",required:!0,component:"DirectUploadFile",label:t.formatMessage({id:"image_url"}),fullWidth:!0,placeholder:t.formatMessage({id:"image_url"}),variant:"outlined",size:"small"},size:{name:"size",component:"Container",variant:"horizontal",elements:{width:{name:"width",component:"Text",margin:"normal",label:t.formatMessage({id:"rich_text_editor_width"}),fullWidth:!1,sx:{maxWidth:200},placeholder:t.formatMessage({id:"rich_text_editor_width"}),variant:"outlined",size:"small"},height:{name:"height",component:"Text",margin:"normal",label:t.formatMessage({id:"rich_text_editor_height"}),fullWidth:!1,sx:{maxWidth:200},placeholder:t.formatMessage({id:"rich_text_editor_height"}),variant:"outlined",size:"small"}}},hint:{component:"Typo",plainText:t.formatMessage({id:"rich_text_size_hint"}),color:"text.hint",variant:"body2",sx:{}},footer:{name:"_footer",component:"FormFooter",elements:{submit:{name:"_submit",component:"Submit",label:t.formatMessage({id:"ok"}),variant:"contained",color:"primary"}}}}};return X.createElement(eM.ok,{formSchema:r,onSubmit:e,initialValues:{src:"",width:"auto",height:"auto"}})}function eB({onSubmit:e}){let{i18n:t}=(0,eO.PCX)(),r={component:"Form",elements:{src:{name:"src",component:"Text",label:t.formatMessage({id:"image_url"}),fullWidth:!0,placeholder:t.formatMessage({id:"image_url"}),variant:"outlined",size:"small"},size:{name:"size",component:"Container",variant:"horizontal",elements:{width:{name:"width",component:"Text",margin:"normal",label:t.formatMessage({id:"rich_text_editor_width"}),fullWidth:!1,sx:{maxWidth:200},placeholder:t.formatMessage({id:"rich_text_editor_width"}),variant:"outlined",size:"small"},height:{name:"height",component:"Text",margin:"normal",label:t.formatMessage({id:"rich_text_editor_height"}),fullWidth:!1,sx:{maxWidth:200},placeholder:t.formatMessage({id:"rich_text_editor_height"}),variant:"outlined",size:"small"}}},hint:{component:"Typo",plainText:t.formatMessage({id:"rich_text_size_hint"}),color:"text.hint",variant:"body2",sx:{}},footer:{name:"_footer",component:"FormFooter",elements:{submit:{name:"_submit",component:"Submit",label:t.formatMessage({id:"ok"}),variant:"contained",color:"primary"}}}}};return X.createElement(eM.ok,{formSchema:r,onSubmit:e,initialValues:{src:""}})}var eV=r(69843),eX=r.n(eV);let eY=e=>eH.qx?(e||window).getSelection():null,eK=(0,ed.createCommand)("INSERT_IMAGE_COMMAND"),eU=e=>new Promise((t,r)=>{let l=new Image;l.addEventListener("load",()=>t(l)),l.addEventListener("error",e=>r(e)),l.src=e}),eG=e=>eX()(e)||isNaN(e)?e:parseFloat(e);function eJ({onClick:e}){let{dialogBackend:t,i18n:r}=(0,eO.PCX)(),l=async({src:l,altText:n,width:a,height:i})=>{try{await eU(l),e({altText:n,src:l,width:eG(a),height:eG(i)})}catch(o){t.alert({message:r.formatMessage({id:"the_url_is_invalid"})})}};return X.createElement(eB,{onSubmit:l})}function eZ({onClick:e}){let{dialogBackend:t,i18n:r}=(0,eO.PCX)(),l=async({src:l,altText:n,width:a,height:i})=>{try{await eU(l),e({altText:n,src:l,width:eG(a),height:eG(i)})}catch(o){t.alert({message:r.formatMessage({id:"error_invalid_file_type"})})}};return X.createElement(ej,{onSubmit:l})}function eq({activeEditor:e,onClose:t}){let[r,l]=(0,X.useState)(null),n=(0,X.useRef)(!1),{i18n:a}=(0,eO.PCX)();(0,X.useEffect)(()=>{n.current=!1;let e=e=>{n.current=e.altKey};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[e]);let i=r=>{e.dispatchCommand(eK,r),t()};return X.createElement(X.Fragment,null,!r&&X.createElement(P.A,{sx:{display:"flex",flexDirection:"column",width:"100%"}},X.createElement(eW.A,{"data-testid":"image-modal-option-url",role:"button",variant:"outlined",disableRipple:!0,size:"medium",color:"primary",onClick:()=>l("url"),sx:{minWidth:100,mb:2}},a.formatMessage({id:"rich_text_editor_external_image"})),X.createElement(eW.A,{"data-testid":"image-modal-option-file",role:"button",variant:"outlined",disableRipple:!0,size:"medium",color:"primary",onClick:()=>l("file"),sx:{minWidth:100}},a.formatMessage({id:"upload"}))),"url"===r&&X.createElement(eJ,{onClick:i}),"file"===r&&X.createElement(eZ,{onClick:i}))}function eQ({captionsEnabled:e}){let[t]=(0,ea.useLexicalComposerContext)();return(0,X.useEffect)(()=>{if(!t.hasNodes([eF.K1]))throw Error("ImagesPlugin: ImageNode not registered on editor");return(0,eu.mergeRegister)(t.registerCommand(eK,e=>{let t=(0,eF.uC)(e);return(0,ed.$insertNodes)([t]),(0,ed.$isRootOrShadowRoot)(t.getParentOrThrow())&&(0,eu.$wrapNodeInElement)(t,ed.$createParagraphNode).selectEnd(),!0},ed.COMMAND_PRIORITY_EDITOR),t.registerCommand(ed.DRAGSTART_COMMAND,e=>(function(e){let t=e1();if(!t)return!1;let r=e.dataTransfer;return!!r&&(r.setData("text/plain","_"),r.setDragImage(e0,0,0),r.setData("application/x-lexical-drag",JSON.stringify({data:{altText:t.__altText,caption:t.__caption,height:t.__height,key:t.getKey(),maxWidth:t.__maxWidth,showCaption:t.__showCaption,src:t.__src,width:t.__width},type:"image"})),!0)})(e),ed.COMMAND_PRIORITY_HIGH),t.registerCommand(ed.DRAGOVER_COMMAND,e=>(function(e){let t=e1();return!!t&&(e5(e)||e.preventDefault(),!0)})(e),ed.COMMAND_PRIORITY_LOW),t.registerCommand(ed.DROP_COMMAND,e=>(function(e,t){let r=e1();if(!r)return!1;let l=function(e){var t;let r=null===(t=e.dataTransfer)||void 0===t?void 0:t.getData("application/x-lexical-drag");if(!r)return null;let{type:l,data:n}=JSON.parse(r);return"image"!==l?null:n}(e);if(!l)return!1;if(e.preventDefault(),e5(e)){let n=function(e){let t;let r=e.target,l=null==r?null:9===r.nodeType?r.defaultView:r.ownerDocument.defaultView,n=eY(l);if(document.caretRangeFromPoint)t=document.caretRangeFromPoint(e.clientX,e.clientY);else if(e.rangeParent&&null!==n)n.collapse(e.rangeParent,e.rangeOffset||0),t=n.getRangeAt(0);else throw Error("Cannot get the selection when dragging");return t}(e);r.remove();let a=(0,ed.$createRangeSelection)();null!=n&&a.applyDOMRange(n),(0,ed.$setSelection)(a),t.dispatchCommand(eK,l)}return!0})(e,t),ed.COMMAND_PRIORITY_HIGH))},[e,t]),null}let e0=document.createElement("img");function e1(){let e=(0,ed.$getSelection)();if(!(0,ed.$isNodeSelection)(e))return null;let t=e.getNodes(),r=t[0];return(0,eF.Eh)(r)?r:null}function e5(e){let t=e.target;return!!(t&&t instanceof HTMLElement&&!t.closest("code, span.editor-image")&&t.parentElement&&t.parentElement.closest("div.ContentEditable__root"))}e0.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";var e2=r(3556);function e3({activeEditor:e,onClose:t}){let{i18n:r}=(0,eO.PCX)(),[l,n]=(0,X.useState)("5"),[a,i]=(0,X.useState)("5"),[o,s]=(0,X.useState)(!0);(0,X.useEffect)(()=>{let e=Number(l),t=Number(a);e&&e>0&&e<=500&&t&&t>0&&t<=50?s(!1):s(!0)},[l,a]);let c=()=>{e.dispatchCommand(ec.INSERT_TABLE_COMMAND,{columns:a,rows:l}),t()};return X.createElement(X.Fragment,null,X.createElement(eh.ks,{placeholder:r.formatMessage({id:"rich_text_editor_number_of_rows_from_to"},{from:1,to:500}),label:r.formatMessage({id:"rich_text_editor_rows"}),onChange:n,value:l,"data-test-id":"table-modal-rows",type:"number"}),X.createElement(eh.ks,{placeholder:r.formatMessage({id:"rich_text_editor_number_of_columns_from_to"},{from:1,to:50}),label:r.formatMessage({id:"rich_text_editor_columns"}),onChange:i,value:a,"data-test-id":"table-modal-columns",type:"number"}),X.createElement(eh.ii,{"data-test-id":"table-model-confirm-insert"},X.createElement(eW.A,{variant:"contained",disabled:o,onClick:c},r.formatMessage({id:"confirm"}))))}function e4(){return(e4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}(0,ed.createCommand)("INSERT_NEW_TABLE_COMMAND");let e6=function(e){return X.createElement("svg",e4({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-bold_svg__bi type-bold_svg__bi-type-bold"},e),l||(l=X.createElement("path",{d:"M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13H8.21zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z"})))};function e7(){return(e7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let e8=function(e){return X.createElement("svg",e7({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-italic_svg__bi type-italic_svg__bi-type-italic"},e),n||(n=X.createElement("path",{d:"M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z"})))};function e9(){return(e9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let te=function(e){return X.createElement("svg",e9({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-underline_svg__bi type-underline_svg__bi-type-underline"},e),a||(a=X.createElement("path",{d:"M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57-1.709 0-2.687-1.08-2.687-2.57V3.136zM12.5 15h-9v-1h9v1z"})))};var tt=r(38298);function tr(){return(tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let tl=function(e){return X.createElement("svg",tr({xmlns:"http://www.w3.org/2000/svg",width:14,height:14,viewBox:"0 0 512 512"},e),i||(i=X.createElement("path",{fill:"#777",d:"M221.631 109 109.92 392h58.055l24.079-61h127.892l24.079 61h58.055L290.369 109Zm-8.261 168L256 169l42.63 108Z"})))};function tn(){return(tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let ta=function(e){return X.createElement("svg",tn({width:16,height:16,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=X.createElement("path",{fill:"#fff",fillOpacity:.01,d:"M0 0h48v48H0z"})),s||(s=X.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 37a4 4 0 0 0 4-4c0-1.473-1.333-3.473-4-6-2.667 2.527-4 4.527-4 6a4 4 0 0 0 4 4Z",fill:"#777"})),c||(c=X.createElement("path",{d:"m20.854 5.504 3.535 3.536",stroke:"#777",strokeWidth:4,strokeLinecap:"round"})),u||(u=X.createElement("path",{d:"M23.682 8.333 8.125 23.889 19.44 35.203l15.556-15.557L23.682 8.333Z",stroke:"#777",strokeWidth:4,strokeLinejoin:"round"})),d||(d=X.createElement("path",{d:"m12 20.073 16.961 5.577M4 43h40",stroke:"#777",strokeWidth:4,strokeLinecap:"round"})))};function ti(){return(ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let to=function(e){return X.createElement("svg",ti({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),m||(m=X.createElement("path",{d:"M4.648 4.475 1.824 12.25H.67l3.252-8.531h.744l-.018.756Zm2.368 7.775-2.83-7.775-.018-.756h.744l3.264 8.531h-1.16Zm-.147-3.158v.926H2.076v-.926H6.87Zm6.024 2.074V7.902c0-.25-.051-.466-.153-.65a.997.997 0 0 0-.445-.434 1.622 1.622 0 0 0-.738-.152c-.274 0-.514.047-.721.14a1.255 1.255 0 0 0-.48.37.809.809 0 0 0-.17.492H9.101c0-.227.058-.451.175-.674a1.98 1.98 0 0 1 .504-.603c.223-.184.489-.329.797-.434.313-.11.66-.164 1.043-.164.461 0 .867.078 1.219.234.355.157.633.393.832.71.203.312.305.704.305 1.177v2.953c0 .211.017.436.052.674.04.238.096.443.17.615v.094h-1.13a2.022 2.022 0 0 1-.13-.498 4.011 4.011 0 0 1-.046-.586Zm.187-2.76.012.762h-1.096c-.309 0-.584.025-.826.076a1.89 1.89 0 0 0-.61.217.979.979 0 0 0-.504.879c0 .2.046.38.135.545a.98.98 0 0 0 .405.392c.183.094.408.141.674.141.332 0 .625-.07.878-.211a1.83 1.83 0 0 0 .604-.516c.152-.203.234-.4.246-.591l.463.521a1.572 1.572 0 0 1-.223.545 2.607 2.607 0 0 1-1.2 1.025 2.328 2.328 0 0 1-.927.176 2.42 2.42 0 0 1-1.13-.252 1.933 1.933 0 0 1-.75-.674 1.784 1.784 0 0 1-.264-.955c0-.34.066-.638.199-.896a1.73 1.73 0 0 1 .574-.65c.25-.176.551-.31.903-.399a4.76 4.76 0 0 1 1.177-.135h1.26Z",fill:"#000"})))};function ts(){return(ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let tc=function(e){return X.createElement("svg",ts({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-strikethrough_svg__bi type-strikethrough_svg__bi-type-strikethrough"},e),h||(h=X.createElement("path",{d:"M6.333 5.686c0 .31.083.581.27.814H5.166a2.776 2.776 0 0 1-.099-.76c0-1.627 1.436-2.768 3.48-2.768 1.969 0 3.39 1.175 3.445 2.85h-1.23c-.11-1.08-.964-1.743-2.25-1.743-1.23 0-2.18.602-2.18 1.607zm2.194 7.478c-2.153 0-3.589-1.107-3.705-2.81h1.23c.144 1.06 1.129 1.703 2.544 1.703 1.34 0 2.31-.705 2.31-1.675 0-.827-.547-1.374-1.914-1.675L8.046 8.5H1v-1h14v1h-3.504c.468.437.675.994.675 1.697 0 1.826-1.436 2.967-3.644 2.967z"})))};function tu(){return(tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let td=function(e){return X.createElement("svg",tu({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),p||(p=X.createElement("path",{d:"M11.354 14.5v-.665l1.553-1.438c.132-.128.243-.243.332-.345.091-.102.16-.203.207-.3.047-.1.07-.207.07-.322a.574.574 0 0 0-.326-.546.748.748 0 0 0-.343-.077.721.721 0 0 0-.35.082.557.557 0 0 0-.23.232.753.753 0 0 0-.08.36h-.876c0-.286.065-.534.194-.744a1.3 1.3 0 0 1 .543-.488 1.8 1.8 0 0 1 .806-.172c.312 0 .584.055.816.166.233.11.414.261.543.456.13.194.194.418.194.669 0 .165-.033.327-.098.488-.064.16-.178.339-.343.535a7.918 7.918 0 0 1-.697.7l-.637.625v.03h1.832v.754h-3.11ZM5.04 4.273l1.92 3.196h.068l1.93-3.196h1.803L8.073 8.636 10.805 13H8.972L7.03 9.825h-.068L5.018 13H3.194l2.757-4.364-2.723-4.363H5.04Z",fill:"currentColor"})))};function tm(){return(tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let th=function(e){return X.createElement("svg",tm({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),g||(g=X.createElement("path",{d:"M11.354 6v-.665l1.553-1.438c.132-.128.243-.243.332-.345a1.31 1.31 0 0 0 .207-.3c.047-.1.07-.207.07-.322a.574.574 0 0 0-.326-.545.748.748 0 0 0-.343-.077.721.721 0 0 0-.35.08.557.557 0 0 0-.23.233.753.753 0 0 0-.08.36h-.876c0-.286.065-.534.194-.744a1.3 1.3 0 0 1 .543-.488 1.8 1.8 0 0 1 .806-.172c.312 0 .584.055.816.166.233.11.414.261.543.456.13.194.194.417.194.669 0 .165-.033.327-.098.488-.064.16-.178.339-.343.535a7.92 7.92 0 0 1-.697.7l-.637.625v.03h1.832V6h-3.11ZM5.04 4.273l1.92 3.196h.068l1.93-3.196h1.803L8.073 8.636 10.805 13H8.972L7.03 9.825h-.068L5.018 13H3.194l2.757-4.364-2.723-4.363H5.04Z",fill:"currentColor"})))};function tp(){return(tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let tg=function(e){return X.createElement("svg",tp({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"trash_svg__bi trash_svg__bi-trash"},e),_||(_=X.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"})),f||(f=X.createElement("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})))};function t_(){return(t_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let tf=function(e){return X.createElement("svg",t_({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"arrow-clockwise_svg__bi arrow-clockwise_svg__bi-arrow-clockwise"},e),b||(b=X.createElement("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"})),E||(E=X.createElement("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})))};function tb(){return(tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let tE=function(e){return X.createElement("svg",tb({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"arrow-counterclockwise_svg__bi arrow-counterclockwise_svg__bi-arrow-counterclockwise"},e),v||(v=X.createElement("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"})),w||(w=X.createElement("path",{d:"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"})))};function tv(){return(tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function tw(){return(tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function tx(){return(tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function tC(){return(tC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function ty(){return(ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function tN(){return(tN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function tM(){return(tM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}var tO=r(87773);let tk=e=>{let{icon:t,label:r}=e;return X.createElement(P.A,{sx:{display:"flex"}},t,X.createElement(tO.A,{sx:{flex:1,minWidth:0,display:"inline-flex"}},r))},tS={bullet:{label:"rich_text_editor_bullet_list",icon:X.createElement(function(e){return X.createElement("svg",ty({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"list-ul_svg__bi list-ul_svg__bi-list-ul"},e),M||(M=X.createElement("path",{fillRule:"evenodd",d:"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})))},null)},check:{label:"rich_text_editor_check_list",icon:X.createElement(function(e){return X.createElement("svg",tM({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"square-check_svg__bi square-check_svg__bi-check-square"},e),S||(S=X.createElement("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"})),A||(A=X.createElement("path",{d:"M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"})))},null)},h1:{label:"rich_text_editor_heading_1",icon:X.createElement(function(e){return X.createElement("svg",tw({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-h1_svg__bi type-h1_svg__bi-type-h1"},e),C||(C=X.createElement("path",{d:"M8.637 13V3.669H7.379V7.62H2.758V3.67H1.5V13h1.258V8.728h4.62V13h1.259zm5.329 0V3.669h-1.244L10.5 5.316v1.265l2.16-1.565h.062V13h1.244z"})))},null)},h2:{label:"rich_text_editor_heading_2",icon:X.createElement(function(e){return X.createElement("svg",tx({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-h2_svg__bi type-h2_svg__bi-type-h2"},e),y||(y=X.createElement("path",{d:"M7.638 13V3.669H6.38V7.62H1.759V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.022-6.733v-.048c0-.889.63-1.668 1.716-1.668.957 0 1.675.608 1.675 1.572 0 .855-.554 1.504-1.067 2.085l-3.513 3.999V13H15.5v-1.094h-4.245v-.075l2.481-2.844c.875-.998 1.586-1.784 1.586-2.953 0-1.463-1.155-2.556-2.919-2.556-1.941 0-2.966 1.326-2.966 2.74v.049h1.223z"})))},null)},h3:{label:"rich_text_editor_heading_3",icon:X.createElement(function(e){return X.createElement("svg",tC({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-h3_svg__bi type-h3_svg__bi-type-h3"},e),N||(N=X.createElement("path",{d:"M7.637 13V3.669H6.379V7.62H1.758V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.625-4.272h1.018c1.142 0 1.935.67 1.949 1.674.013 1.005-.78 1.737-2.01 1.73-1.08-.007-1.853-.588-1.935-1.32H9.108c.069 1.327 1.224 2.386 3.083 2.386 1.935 0 3.343-1.155 3.309-2.789-.027-1.51-1.251-2.16-2.037-2.249v-.068c.704-.123 1.764-.91 1.723-2.229-.035-1.353-1.176-2.4-2.954-2.385-1.873.006-2.857 1.162-2.898 2.358h1.196c.062-.69.711-1.299 1.696-1.299.998 0 1.695.622 1.695 1.525.007.922-.718 1.592-1.695 1.592h-.964v1.074z"})))},null)},number:{label:"rich_text_editor_numbered_list",icon:X.createElement(function(e){return X.createElement("svg",tN({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"list-ol_svg__bi list-ol_svg__bi-list-ol"},e),O||(O=X.createElement("path",{fillRule:"evenodd",d:"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"})),k||(k=X.createElement("path",{d:"M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z"})))},null)},paragraph:{label:"rich_text_editor_normal",icon:X.createElement(function(e){return X.createElement("svg",tv({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"text-paragraph_svg__bi text-paragraph_svg__bi-text-paragraph"},e),x||(x=X.createElement("path",{fillRule:"evenodd",d:"M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm4-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5z"})))},null)}},tA=function({editor:e,blockType:t,rootType:r,disabled:l=!1}){var n,a;let{i18n:i}=(0,eO.PCX)(),o=()=>{e.update(()=>{let e=(0,ed.$getSelection)();(0,ed.$isRangeSelection)(e)&&(0,es.$setBlocksType)(e,()=>(0,ed.$createParagraphNode)())})},s=r=>{t!==r&&e.update(()=>{let e=(0,ed.$getSelection)();null!==e&&(0,es.$setBlocksType)(e,()=>(0,eo.$createHeadingNode)(r))})},c=()=>{"bullet"!==t?e.dispatchCommand(el.INSERT_UNORDERED_LIST_COMMAND,void 0):o()},u=()=>{"check"!==t?e.dispatchCommand(el.INSERT_CHECK_LIST_COMMAND,void 0):o()},d=()=>{"number"!==t?e.dispatchCommand(el.INSERT_ORDERED_LIST_COMMAND,void 0):o()};return X.createElement(eh.Ck,{disabled:l,buttonLabel:i.formatMessage({id:(null===(n=tS[t])||void 0===n?void 0:n.label)||"Block Format"}),buttonIcon:null===(a=tS[t])||void 0===a?void 0:a.icon,buttonAriaLabel:"Formatting options for text style"},X.createElement(eh.Ho,{className:"item",onClick:o,selected:"paragraph"===t},X.createElement(tk,{icon:tS.paragraph.icon,label:i.formatMessage({id:tS.paragraph.label})})),X.createElement(eh.Ho,{className:"item ",onClick:()=>s("h1"),selected:"h1"===t},X.createElement(tk,{icon:tS.h1.icon,label:i.formatMessage({id:tS.h1.label})})),X.createElement(eh.Ho,{className:"item ",onClick:()=>s("h2"),selected:"h2"===t},X.createElement(tk,{icon:tS.h2.icon,label:i.formatMessage({id:tS.h2.label})})),X.createElement(eh.Ho,{className:"item",onClick:()=>s("h3"),selected:"h3"===t},X.createElement(tk,{icon:tS.h3.icon,label:i.formatMessage({id:tS.h3.label})})),X.createElement(eh.Ho,{className:"item ",onClick:c,selected:"bullet"===t},X.createElement(tk,{icon:tS.bullet.icon,label:i.formatMessage({id:tS.bullet.label})})),X.createElement(eh.Ho,{className:"item ",onClick:d,selected:"number"===t},X.createElement(tk,{icon:tS.number.icon,label:i.formatMessage({id:tS.number.label})})),X.createElement(eh.Ho,{className:"item",onClick:u,selected:"check"===t},X.createElement(tk,{icon:tS.check.icon,label:i.formatMessage({id:tS.check.label})})))};function tT(){return(tT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let tR=function(e){return X.createElement("svg",tT({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"text-left_svg__bi text-left_svg__bi-text-left"},e),T||(T=X.createElement("path",{fillRule:"evenodd",d:"M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})))};function t$(){return(t$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let tL=function(e){return X.createElement("svg",t$({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"text-right_svg__bi text-right_svg__bi-text-right"},e),R||(R=X.createElement("path",{fillRule:"evenodd",d:"M6 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm4-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})))};function tD(){return(tD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let tz=function(e){return X.createElement("svg",tD({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"text-center_svg__bi text-center_svg__bi-text-center"},e),$||($=X.createElement("path",{fillRule:"evenodd",d:"M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})))};function tP(){return(tP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let tI=function(e){return X.createElement("svg",tP({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"justify_svg__bi justify_svg__bi-justify"},e),L||(L=X.createElement("path",{fillRule:"evenodd",d:"M2 12.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})))},tH={center:{icon:X.createElement(tz,null),iconRTL:X.createElement(tz,null),label:"rich_text_editor_center_align",command:"center"},left:{icon:X.createElement(tR,null),iconRTL:X.createElement(tR,null),label:"rich_text_editor_left_align",command:"left"},right:{icon:X.createElement(tL,null),iconRTL:X.createElement(tL,null),label:"rich_text_editor_right_align",command:"right"},start:{icon:X.createElement(tR,null),iconRTL:X.createElement(tR,null),label:"rich_text_editor_start_align",command:"start"},justify:{icon:X.createElement(tI,null),iconRTL:X.createElement(tI,null),label:"rich_text_editor_justify_align",command:"justify"},end:{icon:X.createElement(tL,null),iconRTL:X.createElement(tL,null),label:"rich_text_editor_end_align",command:"end"}},tF=function({editor:e,value:t,isRTL:r,disabled:l=!1}){let{i18n:n}=(0,eO.PCX)(),a=tH[t||"left"],i=Object.keys(tH);return X.createElement(eh.Ck,{disabled:l,buttonLabel:n.formatMessage({id:(null==a?void 0:a.label)||"format"}),buttonIcon:r?null==a?void 0:a.iconRTL:null==a?void 0:a.icon,buttonAriaLabel:n.formatMessage({id:"rich_text_editor_format_text_align_description"})},i.map(l=>X.createElement(eh.Ho,{key:l,onClick(){e.dispatchCommand(ed.FORMAT_ELEMENT_COMMAND,tH[l].command)},className:"item ",selected:t===l},X.createElement(tk,{icon:r?tH[l].iconRTL:tH[l].icon,label:tH[l].label?n.formatMessage({id:tH[l].label}):""}))))},tW="RichtextEditorToolbar",tj=(0,e2.Ay)(P.A,{name:tW,slot:"ToolbarWrapper"})(({theme:e})=>({display:"flex",flexFlow:"wrap",marginBottom:e.spacing(1),borderBottom:"1px dashed",borderBottomColor:"light"===e.palette.mode?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)","& > button":{marginRight:e.spacing(.5),marginBottom:e.spacing(.5)}})),tB={bullet:"Bulleted List",check:"Check List",code:"Code Block",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",number:"Numbered List",paragraph:"Normal",quote:"Quote"},tV=function(){let e=[];for(let[t,r]of Object.entries(et.CODE_LANGUAGE_FRIENDLY_NAME_MAP))e.push([t,r]);return e}(),tX=[["Arial","Arial"],["Courier New","Courier New"],["Georgia","Georgia"],["Times New Roman","Times New Roman"],["Trebuchet MS","Trebuchet MS"],["Verdana","Verdana"]],tY=[["10px","10px"],["11px","11px"],["12px","12px"],["13px","13px"],["14px","14px"],["15px","15px"],["16px","16px"],["17px","17px"],["18px","18px"],["19px","19px"],["20px","20px"],["22px","22px"],["24px","24px"],["26px","26px"],["28px","28px"],["30px","30px"],["32px","32px"],["34px","34px"],["36px","36px"],["38px","38px"],["40px","40px"]],tK=(0,e2.Ay)(P.A,{name:tW,slot:"ToolbarWrapper"})(({theme:e})=>({display:"inline-flex",width:"1px",background:"light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)",height:"24px",margin:"auto 4px"}));function tU(){return X.createElement(tK,null)}function tG({editor:e,value:t,type:r,disabled:l=!1}){let n=(0,X.useCallback)(t=>{e.update(()=>{let e=(0,ed.$getSelection)();null!==e&&(0,es.$patchStyleText)(e,{[r]:t})})},[e,r]);return X.createElement(eh.Ck,{disabled:l,buttonLabel:t,buttonAriaLabel:"font-family"===r?"Formatting options for font family":"Formatting options for font size",sxDropdownWrapper:{maxHeight:"300px",overflowY:"auto"}},("font-family"===r?tX:tY).map(([e,l])=>X.createElement(eh.Ho,{className:`item  ${"font-size"===r?"fontsize-item":""}`,onClick:()=>n(e),key:e,selected:t===e},X.createElement("span",{className:"text"},l))))}function tJ({setIsLinkEditMode:e}){let{i18n:t,useLoggedIn:r}=(0,eO.PCX)(),l=r(),[n]=(0,ea.useLexicalComposerContext)(),[a,i]=(0,X.useState)(n),[o,s]=(0,X.useState)("paragraph"),[c,u]=(0,X.useState)("root"),[d,m]=(0,X.useState)(null),[h,p]=(0,X.useState)("15px"),[g,_]=(0,X.useState)("#000"),[f,b]=(0,X.useState)("#fff"),[E,v]=(0,X.useState)("left"),[w,x]=(0,X.useState)(!1),[C,y]=(0,X.useState)(!1),[N,M]=(0,X.useState)(!1),[O,k]=(0,X.useState)(!1),[S,A]=(0,X.useState)(!1),[T,R]=(0,X.useState)(!1),[$,L]=(0,X.useState)(!1),[z,I]=(0,X.useState)(!1),[H,F]=(0,X.useState)(!1),[W,j]=(0,em.A)(),[B,V]=(0,X.useState)(!1),[Y,K]=(0,X.useState)(""),[U,G]=(0,X.useState)(()=>n.isEditable()),J=(0,X.useCallback)(()=>{let e=(0,ed.$getSelection)();if((0,ed.$isRangeSelection)(e)){let t;let r=e.anchor.getNode(),l="root"===r.getKey()?r:(0,eu.$findMatchingParent)(r,e=>{let t=e.getParent();return null!==t&&(0,ed.$isRootOrShadowRoot)(t)});null===l&&(l=r.getTopLevelElementOrThrow());let n=l.getKey(),i=a.getElementByKey(n);y(e.hasFormat("bold")),M(e.hasFormat("italic")),k(e.hasFormat("underline")),A(e.hasFormat("strikethrough")),R(e.hasFormat("subscript")),L(e.hasFormat("superscript")),V((0,es.$isParentElementRTL)(e));let o=(0,ep.OL)(e),c=o.getParent();(0,er.$isLinkNode)(c)||(0,er.$isLinkNode)(o)?x(!0):x(!1);let d=(0,eu.$findMatchingParent)(o,ec.$isTableNode);if((0,ec.$isTableNode)(d)?u("table"):u("root"),null!==i){if(m(n),(0,el.$isListNode)(l)){let h=(0,eu.$getNearestNodeOfType)(r,el.ListNode),g=h?h.getListType():l.getListType();s(g)}else{let f=(0,eo.$isHeadingNode)(l)?l.getTag():l.getType();if(f in tB&&s(f),(0,et.$isCodeNode)(l)){let E=l.getLanguage();K(E?et.CODE_LANGUAGE_MAP[E]||E:"");return}}}p((0,es.$getSelectionStyleValueForProperty)(e,"font-size","15px")),_((0,es.$getSelectionStyleValueForProperty)(e,"color","#000")),b((0,es.$getSelectionStyleValueForProperty)(e,"background-color","#fff")),(0,er.$isLinkNode)(c)&&(t=(0,eu.$findMatchingParent)(o,e=>(0,ed.$isElementNode)(e)&&!e.isInline())),v((0,ed.$isElementNode)(t)?t.getFormatType():(0,ed.$isElementNode)(o)?o.getFormatType():(null==c?void 0:c.getFormatType())||"left")}},[a]);(0,X.useEffect)(()=>n.registerCommand(ed.SELECTION_CHANGE_COMMAND,(e,t)=>(J(),i(t),!1),ed.COMMAND_PRIORITY_CRITICAL),[n,J]),(0,X.useEffect)(()=>(0,eu.mergeRegister)(n.registerEditableListener(e=>{G(e)}),a.registerUpdateListener(({editorState:e})=>{e.read(()=>{J()})}),a.registerCommand(ed.CAN_UNDO_COMMAND,e=>(I(e),!1),ed.COMMAND_PRIORITY_CRITICAL),a.registerCommand(ed.CAN_REDO_COMMAND,e=>(F(e),!1),ed.COMMAND_PRIORITY_CRITICAL)),[J,a,n]),(0,X.useEffect)(()=>a.registerCommand(ed.KEY_MODIFIER_COMMAND,t=>{let{code:r,ctrlKey:l,metaKey:n}=t;if("KeyK"===r&&(l||n)){let i;return t.preventDefault(),w?(e(!1),i=null):(e(!0),i=(0,ep.Jf)("https://")),a.dispatchCommand(er.TOGGLE_LINK_COMMAND,i)}return!1},ed.COMMAND_PRIORITY_NORMAL),[a,w,e]);let Z=(0,X.useCallback)((e,t)=>{a.update(()=>{let t=(0,ed.$getSelection)();null!==t&&(0,es.$patchStyleText)(t,e)},t?{tag:"historic"}:{})},[a]),q=(0,X.useCallback)(()=>{a.update(()=>{let e=(0,ed.$getSelection)();if((0,ed.$isRangeSelection)(e)){let t=e.anchor,r=e.focus,l=e.getNodes();if(t.key===r.key&&t.offset===r.offset)return;l.forEach((e,n)=>{if((0,ed.$isTextNode)(e)){let a=e;0===n&&0!==t.offset&&(a=a.splitText(t.offset)[1]||a),n===l.length-1&&(a=a.splitText(r.offset)[0]||a),""!==a.__style&&a.setStyle(""),0!==a.__format&&(a.setFormat(0),(0,eu.$getNearestBlockElementAncestorOrThrow)(a).setFormat("")),e=a}else(0,eo.$isHeadingNode)(e)||(0,eo.$isQuoteNode)(e)?e.replace((0,ed.$createParagraphNode)(),!0):(0,ei.$isDecoratorBlockNode)(e)&&e.setFormat("")})}})},[a]),Q=(0,X.useCallback)((e,t)=>{Z({color:e},t)},[Z]),ee=(0,X.useCallback)((e,t)=>{Z({"background-color":e},t)},[Z]),eg=(0,X.useCallback)(()=>{w?(e(!1),n.dispatchCommand(er.TOGGLE_LINK_COMMAND,null)):(e(!0),n.dispatchCommand(er.TOGGLE_LINK_COMMAND,(0,ep.Jf)("https://")))},[n,w]),e_=(0,X.useCallback)(e=>{a.update(()=>{if(null!==d){let t=(0,ed.$getNodeByKey)(d);(0,et.$isCodeNode)(t)&&t.setLanguage(e)}})},[a,d]);return X.createElement(tj,null,X.createElement("button",{disabled:!z||!U,onClick(){a.dispatchCommand(ed.UNDO_COMMAND,void 0)},title:t.formatMessage({id:"rich_text_editor_undo"}),type:"button",className:"toolbar-item spaced","aria-label":"Undo"},X.createElement(tE,null)),X.createElement("button",{disabled:!H||!U,onClick(){a.dispatchCommand(ed.REDO_COMMAND,void 0)},title:t.formatMessage({id:"rich_text_editor_redo"}),type:"button",className:"toolbar-item","aria-label":"Redo"},X.createElement(tf,null)),X.createElement(tU,null),o in tB&&a===n&&X.createElement(X.Fragment,null,X.createElement(tA,{disabled:!U,blockType:o,rootType:c,editor:n}),X.createElement(tU,null)),"code"===o?X.createElement(eh.Ck,{disabled:!U,buttonClassName:"toolbar-item code-language",buttonLabel:(0,et.getLanguageFriendlyName)(Y),buttonAriaLabel:"Select language"},tV.map(([e,t])=>X.createElement(eh.Ho,{className:"item",onClick:()=>e_(e),key:e,selected:e===Y},X.createElement("span",{className:"text"},t)))):X.createElement(X.Fragment,null,X.createElement(tF,{disabled:!U,value:E,editor:n,isRTL:B}),X.createElement(tG,{disabled:!U,type:"font-size",value:h,editor:n}),X.createElement(tU,null),X.createElement("button",{disabled:!U,onClick(){a.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"bold")},className:`toolbar-item spaced ${C?"active":""}`,title:t.formatMessage({id:"rich_text_editor_bold"}),type:"button","aria-label":t.formatMessage({id:"rich_text_editor_bold"})},X.createElement(e6,null)),X.createElement("button",{disabled:!U,onClick(){a.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"italic")},className:`toolbar-item spaced ${N?"active":""}`,title:t.formatMessage({id:"rich_text_editor_italic"}),type:"button","aria-label":t.formatMessage({id:"rich_text_editor_italic"})},X.createElement(e8,null)),X.createElement("button",{disabled:!U,onClick(){a.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"underline")},className:`toolbar-item spaced ${O?"active":""}`,title:t.formatMessage({id:"rich_text_editor_underline"}),type:"button","aria-label":t.formatMessage({id:"rich_text_editor_underline"})},X.createElement(te,null)),X.createElement("button",{disabled:!U,onClick:eg,className:`toolbar-item spaced ${w?"active":""}`,"aria-label":"Insert link",title:t.formatMessage({id:"rich_text_editor_insert_link"}),type:"button"},X.createElement(tt.A,null)),X.createElement(eh.Zs,{disabled:!U,buttonAriaLabel:t.formatMessage({id:"rich_text_editor_text_color"}),color:g,onChange:Q,title:t.formatMessage({id:"rich_text_editor_text_color"}),buttonIcon:X.createElement(tl,null)}),X.createElement(eh.Zs,{disabled:!U,buttonAriaLabel:t.formatMessage({id:"rich_text_editor_background_color"}),color:f,onChange:ee,title:t.formatMessage({id:"rich_text_editor_background_color"}),buttonIcon:X.createElement(ta,null)}),X.createElement(eh.Ck,{disabled:!U,buttonAriaLabel:"Formatting options for additional text styles",buttonIcon:X.createElement(to,null)},X.createElement(eh.Ho,{onClick(){a.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"strikethrough")},className:"item ",title:t.formatMessage({id:"rich_text_editor_strikethrough"}),"aria-label":t.formatMessage({id:"rich_text_editor_strikethrough"}),selected:S},X.createElement(tc,null),X.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_strikethrough"}))),X.createElement(eh.Ho,{onClick(){a.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"subscript")},className:"item ",title:t.formatMessage({id:"rich_text_editor_subscript"}),"aria-label":t.formatMessage({id:"rich_text_editor_subscript"}),selected:T},X.createElement(td,null),X.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_subscript"}))),X.createElement(eh.Ho,{onClick(){a.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"superscript")},className:"item",title:t.formatMessage({id:"rich_text_editor_superscript"}),"aria-label":t.formatMessage({id:"rich_text_editor_superscript"}),selected:$},X.createElement(th,null),X.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_superscript"}))),X.createElement(eh.Ho,{onClick:q,className:"item",title:t.formatMessage({id:"rich_text_editor_clear_formatting"}),"aria-label":t.formatMessage({id:"rich_text_editor_clear_formatting"})},X.createElement(tg,null),X.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_clear_formatting"})))),X.createElement(tU,null),X.createElement(eh.Ck,{disabled:!U,buttonLabel:t.formatMessage({id:"rich_text_editor_insert"}),buttonAriaLabel:"Insert specialized editor node"},l?X.createElement(eh.Ho,{onClick(){j(t.formatMessage({id:"rich_text_editor_insert_image"}),e=>X.createElement(eq,{activeEditor:a,onClose:e}))},className:"item"},X.createElement(D.s4,{sx:{mr:1},icon:"ico-photo-o"}),X.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_image"}))):null,X.createElement(eh.Ho,{onClick(){j(t.formatMessage({id:"rich_text_editor_insert_table"}),e=>X.createElement(e3,{activeEditor:a,onClose:e}))},className:"item"},X.createElement(D.s4,{sx:{mr:1},icon:"ico-th-o"}),X.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_table"}))),ez.map(e=>X.createElement(eh.Ho,{key:e.type,onClick(){a.dispatchCommand(en.INSERT_EMBED_COMMAND,e.type)},className:"item"},X.createElement(P.A,{component:"span",mr:1},e.icon),X.createElement("span",{className:"text"},t.formatMessage({id:(null==e?void 0:e.contentName)||"rich_text_editor_embed"})))))),W)}var tZ=r(82774),tq=r(88706),tQ=r(44210),t0=r(11513);let t1=[(0,t0.createLinkMatcherWithRegExp)(/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,e=>e.startsWith("http")?e:`https://${e}`),(0,t0.createLinkMatcherWithRegExp)(/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,e=>`mailto:${e}`)];function t5(){return X.createElement(t0.AutoLinkPlugin,{matchers:t1})}var t2=r(96435),t3=r(40961),t4=r(54358),t6=r(63461);let t7=(0,e2.Ay)(P.A,{name:"RichtextEditorLinkEdit",slot:"Wrapper"})(({theme:e})=>({display:"flex",alignItems:"center",position:"absolute",top:0,left:0,zIndex:10,opacity:0,boxShadow:e.shadows[1],borderRadius:e.shape.borderRadius,transition:"opacity 0.5s",willChange:"transform",background:e.palette.background.paper}));function t8({editor:e,isLink:t,setIsLink:r,anchorElem:l,isLinkEditMode:n,setIsLinkEditMode:a}){let i=(0,X.useRef)(null),o=(0,X.useRef)(null),[s,c]=(0,X.useState)(""),[u,d]=(0,X.useState)("https://"),[m,h]=(0,X.useState)(null),p=(0,X.useCallback)(()=>{let t=(0,ed.$getSelection)();if((0,ed.$isRangeSelection)(t)){let r=(0,ep.OL)(t),o=(0,eu.$findMatchingParent)(r,er.$isLinkNode);o?c(o.getURL()):(0,er.$isLinkNode)(r)?c(r.getURL()):c(""),n&&d(s)}let u=i.current,m=window.getSelection(),p=document.activeElement;if(null===u)return;let g=e.getRootElement();if(null!==t&&null!==m&&null!==g&&g.contains(m.anchorNode)&&e.isEditable()){var _,f;let b=null===(_=m.focusNode)||void 0===_?void 0:null===(f=_.parentElement)||void 0===f?void 0:f.getBoundingClientRect();b&&(b.y+=40,(0,ep.LR)(b,u,l)),h(t)}else p&&"link-input"===p.className||(null!==g&&(0,ep.LR)(null,u,l),h(null),a(!1),c(""));return!0},[l,e,a,n,s]);(0,X.useEffect)(()=>{let t=l.parentElement,r=()=>{e.getEditorState().read(()=>{p()})};return window.addEventListener("resize",r),t&&t.addEventListener("scroll",r),()=>{window.removeEventListener("resize",r),t&&t.removeEventListener("scroll",r)}},[l.parentElement,e,p]),(0,X.useEffect)(()=>(0,eu.mergeRegister)(e.registerUpdateListener(({editorState:e})=>{e.read(()=>{p()})}),e.registerCommand(ed.SELECTION_CHANGE_COMMAND,()=>(p(),!0),ed.COMMAND_PRIORITY_LOW),e.registerCommand(ed.KEY_ESCAPE_COMMAND,()=>!!t&&(r(!1),!0),ed.COMMAND_PRIORITY_HIGH)),[e,p,r,t]),(0,X.useEffect)(()=>{e.getEditorState().read(()=>{p()})},[e,p]),(0,X.useEffect)(()=>{n&&o.current&&o.current.focus()},[n,t]);let g=e=>{"Enter"===e.key?(e.preventDefault(),_()):"Escape"===e.key&&(e.preventDefault(),a(!1))},_=()=>{null!==m&&(""!==s&&e.dispatchCommand(er.TOGGLE_LINK_COMMAND,(0,ep.Jf)(u)),d("https://"),a(!1))};return X.createElement(t7,{ref:i},t?n?X.createElement(P.A,{p:1,sx:{width:"320px",display:"flex",alignItems:"center"}},X.createElement(P.A,{mr:1,sx:{flex:1,minWidth:0}},X.createElement(t4.A,{fullWidth:!0,ref:o,className:"link-input",value:u,onChange(e){d(e.target.value)},onKeyDown(e){g(e)},size:"small"})),X.createElement(t6.A,{size:"small",role:"button",onClick(e){e.preventDefault(),a(!1)}},X.createElement(D.s4,{icon:"ico-close"})),X.createElement(t6.A,{size:"small",role:"button",onClick(e){e.preventDefault(),_()}},X.createElement(D.s4,{icon:"ico-check"}))):X.createElement(P.A,{sx:{display:"flex",width:"320px",alignItems:"center"},p:1},X.createElement(P.A,{sx:{flex:1,minWidth:0}},X.createElement("a",{href:(0,ep.Jf)(s),target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",width:"auto",maxWidth:"100%"}},X.createElement(D.mE,{variant:"body2",lines:1},s))),X.createElement(t6.A,{size:"small",role:"button",onClick(e){e.preventDefault(),d(s),a(!0)}},X.createElement(D.s4,{icon:"ico-pencilline-o"})),X.createElement(t6.A,{size:"small",role:"button",onClick(t){t.preventDefault(),e.dispatchCommand(er.TOGGLE_LINK_COMMAND,null)}},X.createElement(D.s4,{icon:"ico-trash-o"}))):null)}function t9({anchorElem:e=document.body,isLinkEditMode:t,setIsLinkEditMode:r}){let[l]=(0,ea.useLexicalComposerContext)();return function(e,t,r,l){let[n,a]=(0,X.useState)(e),[i,o]=(0,X.useState)(!1);return(0,X.useEffect)(()=>{function t(){let e=(0,ed.$getSelection)();if((0,ed.$isRangeSelection)(e)){let t=(0,ep.OL)(e),r=(0,eu.$findMatchingParent)(t,er.$isLinkNode),l=(0,eu.$findMatchingParent)(t,er.$isAutoLinkNode);null!==r&&null===l?o(!0):o(!1)}}return(0,eu.mergeRegister)(e.registerUpdateListener(({editorState:e})=>{e.read(()=>{t()})}),e.registerCommand(ed.SELECTION_CHANGE_COMMAND,(e,r)=>(t(),a(r),!1),ed.COMMAND_PRIORITY_CRITICAL),e.registerCommand(ed.CLICK_COMMAND,e=>{let t=(0,ed.$getSelection)();if((0,ed.$isRangeSelection)(t)){let r=(0,ep.OL)(t),l=(0,eu.$findMatchingParent)(r,er.$isLinkNode);if((0,er.$isLinkNode)(l)&&(e.metaKey||e.ctrlKey))return window.open(l.getURL(),"_blank"),!0}return!1},ed.COMMAND_PRIORITY_LOW))},[e]),(0,t3.createPortal)(X.createElement(t8,{editor:n,isLink:i,anchorElem:t,setIsLink:o,isLinkEditMode:r,setIsLinkEditMode:l}),t)}(l,e,t,r)}var re=r(771);let rt=(0,e2.Ay)(P.A,{name:"RichtextEditor",slot:"FloatTextContainer"})(({theme:e})=>({display:"flex",padding:e.spacing(.5),verticalAlign:"middle",position:"absolute",top:0,left:0,zIndex:10,opacity:0,boxShadow:e.shadows[1],background:(0,re.a)(e.palette.background.default,.1),borderRadius:e.shape.borderRadius,transition:"opacity 0.5s",willChange:"transform"}));function rr({editor:e,anchorElem:t,isLink:r,isBold:l,isItalic:n,isUnderline:a,isCode:i,isStrikethrough:o,isSubscript:s,isSuperscript:c}){let u=(0,X.useRef)(null),d=(0,X.useCallback)(()=>{r?e.dispatchCommand(er.TOGGLE_LINK_COMMAND,null):e.dispatchCommand(er.TOGGLE_LINK_COMMAND,"https://")},[e,r]);function m(e){if((null==u?void 0:u.current)&&(1===e.buttons||3===e.buttons)&&"none"!==u.current.style.pointerEvents){let t=e.clientX,r=e.clientY,l=document.elementFromPoint(t,r);u.current.contains(l)||(u.current.style.pointerEvents="none")}}function h(e){(null==u?void 0:u.current)&&"auto"!==u.current.style.pointerEvents&&(u.current.style.pointerEvents="auto")}(0,X.useEffect)(()=>{if(null==u?void 0:u.current)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h)}},[u]);let p=(0,X.useCallback)(()=>{let l=(0,ed.$getSelection)(),n=u.current,a=window.getSelection();if(null===n)return;let i=e.getRootElement();if(null!==l&&null!==a&&!a.isCollapsed&&null!==i&&i.contains(a.anchorNode)){let o=(0,ep.OW)(a,i);(0,ep.bB)(o,n,t,r)}},[e,t,r]);return(0,X.useEffect)(()=>{let r=t.parentElement,l=()=>{e.getEditorState().read(()=>{p()})};return window.addEventListener("resize",l),r&&r.addEventListener("scroll",l),()=>{window.removeEventListener("resize",l),r&&r.removeEventListener("scroll",l)}},[e,p,t]),(0,X.useEffect)(()=>(e.getEditorState().read(()=>{p()}),(0,eu.mergeRegister)(e.registerUpdateListener(({editorState:e})=>{e.read(()=>{p()})}),e.registerCommand(ed.SELECTION_CHANGE_COMMAND,()=>(p(),!1),ed.COMMAND_PRIORITY_LOW))),[e,p]),X.createElement(rt,{ref:u,className:"floating-text-format-popup"},e.isEditable()&&X.createElement(X.Fragment,null,X.createElement(t6.A,{type:"button",onClick(){e.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"bold")},className:`popup-item spaced ${l?"active":""}`,"aria-label":"Format text as bold"},X.createElement(e6,null)),X.createElement(t6.A,{type:"button",onClick(){e.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"italic")},className:`popup-item spaced ${n?"active":""}`,"aria-label":"Format text as italics"},X.createElement(e8,null)),X.createElement(t6.A,{type:"button",onClick(){e.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"underline")},className:`popup-item spaced ${a?"active":""}`,"aria-label":"Format text to underlined"},X.createElement(te,null)),X.createElement(t6.A,{type:"button",onClick(){e.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"strikethrough")},className:`popup-item spaced ${o?"active":""}`,"aria-label":"Format text with a strikethrough"},X.createElement(tc,null)),X.createElement(t6.A,{type:"button",onClick(){e.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"subscript")},className:`popup-item spaced ${s?"active":""}`,title:"Subscript","aria-label":"Format Subscript"},X.createElement(td,null)),X.createElement(t6.A,{type:"button",onClick(){e.dispatchCommand(ed.FORMAT_TEXT_COMMAND,"superscript")},className:`popup-item spaced ${c?"active":""}`,title:"Superscript","aria-label":"Format Superscript"},X.createElement(th,null)),X.createElement(t6.A,{type:"button",onClick:d,className:`popup-item spaced ${r?"active":""}`,"aria-label":"Insert link"},X.createElement(tt.A,null))))}function rl({anchorElem:e=document.body}){let[t]=(0,ea.useLexicalComposerContext)();return function(e,t){let[r,l]=(0,X.useState)(!1),[n,a]=(0,X.useState)(!1),[i,o]=(0,X.useState)(!1),[s,c]=(0,X.useState)(!1),[u,d]=(0,X.useState)(!1),[m,h]=(0,X.useState)(!1),[p,g]=(0,X.useState)(!1),[_,f]=(0,X.useState)(!1),[b,E]=(0,X.useState)(!1),v=(0,X.useCallback)(()=>{e.getEditorState().read(()=>{if(e.isComposing())return;let t=(0,ed.$getSelection)(),r=window.getSelection(),n=e.getRootElement();if(null!==r&&(!(0,ed.$isRangeSelection)(t)||null===n||!n.contains(r.anchorNode))){l(!1);return}if(!(0,ed.$isRangeSelection)(t))return;let i=(0,ep.OL)(t);o(t.hasFormat("bold")),c(t.hasFormat("italic")),d(t.hasFormat("underline")),h(t.hasFormat("strikethrough")),g(t.hasFormat("subscript")),f(t.hasFormat("superscript")),E(t.hasFormat("code"));let s=i.getParent();(0,er.$isLinkNode)(s)||(0,er.$isLinkNode)(i)?a(!0):a(!1),(0,et.$isCodeHighlightNode)(t.anchor.getNode())||""===t.getTextContent()?l(!1):l((0,ed.$isTextNode)(i)||(0,ed.$isParagraphNode)(i));let u=t.getTextContent().replace(/\n/g,"");if(!t.isCollapsed()&&""===u){l(!1);return}})},[e]);return((0,X.useEffect)(()=>(document.addEventListener("selectionchange",v),()=>{document.removeEventListener("selectionchange",v)}),[v]),(0,X.useEffect)(()=>(0,eu.mergeRegister)(e.registerUpdateListener(()=>{v()}),e.registerRootListener(()=>{null===e.getRootElement()&&l(!1)})),[e,v]),r)?(0,t3.createPortal)(X.createElement(rr,{editor:e,anchorElem:t,isLink:n,isBold:i,isItalic:s,isStrikethrough:m,isSubscript:p,isSuperscript:_,isUnderline:u,isCode:b}),t):null}(t,e)}var rn=r(48946),ra=r(39120);function ri(){return(ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let ro=(0,e2.Ay)(P.A,{name:"RichTextEditorViewer",slot:"viewer",shouldForwardProp:e=>"mt"!==e})(({theme:e,mt:t=2})=>({marginTop:e.spacing(t),whiteSpace:"pre-wrap",p:{margin:0}}));function rs({children:e,...t}){return X.createElement(ro,ri({},t),e)}var rc=r(9690),ru=r(29284),rd=r(71330),rm=r(74166),rh=r(8795);class rp extends ed.ElementNode{static getType(){return"layout-container"}static clone(e){return new rp(e.__templateColumns,e.__key)}createDOM(e){let t=document.createElement("div");return t.style.gridTemplateColumns=this.__templateColumns,"string"==typeof e.theme.layoutContainer&&(0,eu.addClassNamesToElement)(t,e.theme.layoutContainer),t}updateDOM(e,t){return e.__templateColumns!==this.__templateColumns&&(t.style.gridTemplateColumns=this.__templateColumns),!1}static importDOM(){return{}}static importJSON(e){var t;return t=e.templateColumns,new rp(t)}canBeEmpty(){return!1}exportJSON(){return{...super.exportJSON(),templateColumns:this.__templateColumns,type:"layout-container",version:1}}getTemplateColumns(){return this.getLatest().__templateColumns}setTemplateColumns(e){this.getWritable().__templateColumns=e}constructor(e,t){super(t),this.__templateColumns=e}}class rg extends ed.ElementNode{static getType(){return"layout-item"}static clone(e){return new rg(e.__key)}createDOM(e){let t=document.createElement("div");return"string"==typeof e.theme.layoutItem&&(0,eu.addClassNamesToElement)(t,e.theme.layoutItem),t}updateDOM(){return!1}static importDOM(){return{}}static importJSON(){return new rg}isShadowRoot(){return!0}exportJSON(){return{...super.exportJSON(),type:"layout-item",version:1}}}function r_(e){let t=e.textContent;if(null!==t){let r=rb(t);return{node:r}}return null}class rf extends ed.TextNode{static getType(){return"mention"}static clone(e){return new rf(e.__mention,e.__text,e.__key)}static importJSON(e){let t=rb(e.mentionName);return t.setTextContent(e.text),t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),mentionName:this.__mention,type:"mention",version:1}}createDOM(e){let t=super.createDOM(e);return t.style.cssText="background-color: rgba(24, 119, 232, 0.2)",t.className="mention",t}exportDOM(){let e=document.createElement("span");return e.setAttribute("data-lexical-mention","true"),e.textContent=this.__text,{element:e}}static importDOM(){return{span:e=>e.hasAttribute("data-lexical-mention")?{conversion:r_,priority:1}:null}}isTextEntity(){return!0}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}constructor(e,t,r){super(null!=t?t:e,r),this.__mention=e}}function rb(e){let t=new rf(e);return t.setMode("segmented").toggleDirectionless(),(0,ed.$applyNodeReplacement)(t)}class rE extends ed.TextNode{static getType(){return"extended-text"}static clone(e){return new rE(e.__text,e.__key)}static importDOM(){let e=ed.TextNode.importDOM();return{...e,code:()=>({conversion:rv(null==e?void 0:e.code),priority:1}),em:()=>({conversion:rv(null==e?void 0:e.em),priority:1}),span:()=>({conversion:rv(null==e?void 0:e.span),priority:1}),u:()=>({conversion:rv(null==e?void 0:e.u),priority:1}),i:()=>({conversion:rv(null==e?void 0:e.i),priority:1}),strong:()=>({conversion:rv(null==e?void 0:e.strong),priority:1}),sub:()=>({conversion:rv(null==e?void 0:e.sub),priority:1}),sup:()=>({conversion:rv(null==e?void 0:e.sup),priority:1})}}static importJSON(e){return ed.TextNode.importJSON(e)}isSimpleText(){return("text"===this.__type||"extended-text"===this.__type)&&0===this.__mode}exportJSON(){return{...super.exportJSON(),type:"extended-text",version:1}}constructor(e,t){super(e,t)}}function rv(e){return t=>{let r=null==e?void 0:e(t);if(!r)return null;let l=r.conversion(t);if(!l)return l;let n=t.style.backgroundColor,a=t.style.color,i=t.style.fontFamily,o=t.style.fontWeight,s=t.style.fontSize,c=t.style.textDecoration;return{...l,forChild(e,t){var r;let u=null!==(r=null==l?void 0:l.forChild)&&void 0!==r?r:e=>e,d=u(e,t);if((0,ed.$isTextNode)(d)){let m=[n?`background-color: ${n}`:null,a?`color: ${a}`:null,i?`font-family: ${i}`:null,o?`font-weight: ${o}`:null,s?`font-size: ${s}`:null,c?`text-decoration: ${c}`:null].filter(e=>null!=e).join("; ");if(m.length)return d.setStyle(m)}return d}}}}let rw=/^(\d+(?:\.\d+)?)px$/,rx={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1};class rC extends ec.TableCellNode{static getType(){return"customtablecell"}static clone(e){let t=new rC(e.__headerState,e.__colSpan,e.__width,e.__key);return t.__rowSpan=e.__rowSpan,t.__backgroundColor=e.__backgroundColor,t}static importDOM(){return{td:e=>({conversion:ry,priority:0}),th:e=>({conversion:ry,priority:0})}}static importJSON(e){let t=e.colSpan||1,r=e.rowSpan||1,l=rN(e.headerState,t,e.width||void 0);return l.__rowSpan=r,l.__backgroundColor=e.backgroundColor||null,l}createDOM(e){let t=document.createElement(this.getTag());return this.__width&&(t.style.width=`${this.__width}px`),this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),null!==this.__backgroundColor&&(t.style.backgroundColor=this.__backgroundColor),(0,eu.addClassNamesToElement)(t,e.theme.tableCell,this.hasHeader()&&e.theme.tableCellHeader),t}exportDOM(e){let{element:t}=super.exportDOM(e);if(t){let r=t;r.style.border="1px solid",this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),r.style.width=`${this.getWidth()||"75"}px`,r.style.verticalAlign="top",r.style.textAlign="start";let l=this.getBackgroundColor();null!==l?r.style.backgroundColor=l:this.hasHeader()&&(r.style.backgroundColor="#828080")}return{element:t}}exportJSON(){return{...super.exportJSON(),backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,type:"customtablecell",width:this.getWidth()}}getColSpan(){return this.__colSpan}setColSpan(e){return this.getWritable().__colSpan=e,this}getRowSpan(){return this.__rowSpan}setRowSpan(e){return this.getWritable().__rowSpan=e,this}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(e){let t=this.getWritable();return t.__headerState=e,this.__headerState}getHeaderStyles(){return this.getLatest().__headerState}setWidth(e){let t=this.getWritable();return t.__width=e,this.__width}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(e){this.getWritable().__backgroundColor=e}toggleHeaderStyle(e){let t=this.getWritable();return(t.__headerState&e)===e?t.__headerState-=e:t.__headerState+=e,t}hasHeaderState(e){return(this.getHeaderStyles()&e)===e}hasHeader(){return this.getLatest().__headerState!==rx.NO_STATUS}updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}constructor(e=rx.NO_STATUS,t=1,r,l){super(l),this.__colSpan=t,this.__rowSpan=1,this.__headerState=e,this.__width=r,this.__backgroundColor=null}}function ry(e){let t;let r=e.nodeName.toLowerCase();rw.test(e.style.width)&&(t=parseFloat(e.style.width));let l=rN("th"===r?rx.ROW:rx.NO_STATUS,e.colSpan,t);l.__rowSpan=e.rowSpan;let n=e.style.backgroundColor;return""!==n&&(l.__backgroundColor=n),{forChild(e,t){if(t instanceof rC&&!(0,ed.$isElementNode)(e)){let r=(0,ed.$createParagraphNode)();return(0,ed.$isLineBreakNode)(e)&&"\n"===e.getTextContent()?null:(r.append(e),r)}return e},node:l}}function rN(e,t=1,r){return(0,ed.$applyNodeReplacement)(new rC(e,t,r))}let rM=[eo.HeadingNode,el.ListNode,el.ListItemNode,eo.QuoteNode,ec.TableNode,rC,{replace:ec.TableCellNode,with:e=>new rC},ec.TableRowNode,ru.HashtagNode,er.AutoLinkNode,er.LinkNode,rm.OverflowNode,eF.K1,rf,rh.HorizontalRuleNode,eb,eT,eC,rd.MarkNode,rp,rg,rE,{replace:ed.TextNode,with:e=>new rE(e.__text,e.__key)}];var rO=r(90976),rk=r.n(rO),rS=r(63009);function rA(e){let{icon:t,active:r,disabled:l,children:n,label:a,isMenuOpen:i,setIsMenuOpen:o}=e,s=X.useRef(),c=()=>o(!1),u=()=>o(e=>!e);return X.createElement(X.Fragment,null,X.createElement(t6.A,{"aria-label":a,size:"small",onClick:u,role:"button",disabled:l,selected:r,ref:s,sx:{width:"24px",height:"24px",fontSize:"12px"}},X.createElement(D.s4,{icon:t})),X.createElement(rS.Ay,{anchorEl:s.current,open:i,onClose:c},X.createElement(D.nt.Provider,{value:{closePopover:c}},n)))}var rT=r(57660);function rR(e){let t=e.getShape();return{columns:t.toX-t.fromX+1,rows:t.toY-t.fromY+1}}function r$(e){if(1!==e.getChildrenSize())return!1;let t=e.getFirstChildOrThrow();return!!((0,ed.$isParagraphNode)(t)&&t.isEmpty())}function rL(e){return e.getEditorState().read(()=>{let e=(0,ed.$getSelection)();if((0,ed.$isRangeSelection)(e)||(0,ec.$isTableSelection)(e)){let[t]=(0,ec.$getNodeTriplet)(e.anchor);if((0,ec.$isTableCellNode)(t))return t.getBackgroundColor()}return null})}function rD({onClose:e,tableCellNode:t,setIsMenuOpen:r,contextRef:l,cellMerge:n,showColorPickerModal:a}){let{i18n:i}=(0,eO.PCX)(),[o]=(0,ea.useLexicalComposerContext)(),s=(0,X.useRef)(null),[c,u]=(0,X.useState)(t),[d,m]=(0,X.useState)({columns:1,rows:1}),[h,p]=(0,X.useState)(!1),[g,_]=(0,X.useState)(!1),[f,b]=(0,X.useState)(()=>rL(o)||"");(0,X.useEffect)(()=>o.registerMutationListener(rC,e=>{let t="updated"===e.get(c.getKey());t&&(o.getEditorState().read(()=>{u(c.getLatest())}),b(rL(o)||""))}),[o,c]),(0,X.useEffect)(()=>{o.getEditorState().read(()=>{let e=(0,ed.$getSelection)();if((0,ec.$isTableSelection)(e)){let t=rR(e);m(rR(e)),p(function(e){let t=e.getNodes(),r=[],l=null,n=null,a=0;for(let i=0;i<t.length;i++){let o=t[i];if((0,ec.$isTableCellNode)(o)){let s=o.getParentOrThrow();if((0,ep.V1)((0,ec.$isTableRowNode)(s),"Expected CellNode to have a RowNode parent"),l!==s){if(null!==n&&a!==n)return!1;null!==l&&(n=a),l=s,a=0}let c=o.__colSpan;for(let u=0;u<c;u++)void 0===r[a+u]&&(r[a+u]=0),r[a+u]+=o.__rowSpan;a+=c}}return(null===n||a===n)&&r.every(e=>e===r[0])}(e)&&(t.columns>1||t.rows>1))}_(function(){let e=(0,ed.$getSelection)();if((0,ed.$isRangeSelection)(e)&&!e.isCollapsed()||(0,ec.$isTableSelection)(e)&&!e.anchor.is(e.focus)||!(0,ed.$isRangeSelection)(e)&&!(0,ec.$isTableSelection)(e))return!1;let[t]=(0,ec.$getNodeTriplet)(e.anchor);return t.__colSpan>1||t.__rowSpan>1}())})},[o]),(0,X.useEffect)(()=>{let e=l.current,t=s.current,r=o.getRootElement();if(null!=e&&null!=t&&null!=r){let n=r.getBoundingClientRect(),a=e.getBoundingClientRect();t.style.opacity="1";let i=t.getBoundingClientRect(),c=a.right+5;if(c+i.width>window.innerWidth||c+i.width>n.right){let u=a.left-i.width-5;c=(u<0?5:u)+window.pageXOffset}t.style.left=`${c+window.pageXOffset}px`;let d=a.top;if(d+i.height>window.innerHeight){let m=a.bottom-i.height;d=(m<0?5:m)+window.pageYOffset}t.style.top=`${d+ +window.pageYOffset}px`}},[l,s,o]),(0,X.useEffect)(()=>{function e(e){null==s.current||null==l.current||s.current.contains(e.target)||l.current.contains(e.target)||r(!1)}return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[r,l]);let E=(0,X.useCallback)(()=>{o.update(()=>{if(c.isAttached()){let e=(0,ec.$getTableNodeFromLexicalNodeOrThrow)(c),t=o.getElementByKey(e.getKey());if(!t)throw Error("Expected to find tableElement in DOM");let r=(0,ec.getTableObserverFromTableElement)(t);null!==r&&r.clearHighlight(),e.markDirty(),u(c.getLatest())}let l=(0,ed.$getRoot)();l.selectStart()})},[o,c]),v=()=>{o.update(()=>{let t=(0,ed.$getSelection)();if((0,ec.$isTableSelection)(t)){let{columns:r,rows:l}=rR(t),n=t.getNodes(),a=null;for(let i=0;i<n.length;i++){let o=n[i];if((0,ec.$isTableCellNode)(o)){if(null===a){let s;o.setColSpan(r).setRowSpan(l),a=o;let c=r$(o);c&&(0,ed.$isParagraphNode)(s=o.getFirstChild())&&s.remove()}else if((0,ec.$isTableCellNode)(a)){let u=r$(o);u||a.append(...o.getChildren()),o.remove()}}}null!==a&&(0===a.getChildrenSize()&&a.append((0,ed.$createParagraphNode)()),function(e){let t=e.getLastDescendant();(0,ed.$isTextNode)(t)?t.select():(0,ed.$isElementNode)(t)?t.selectEnd():null!==t&&t.selectNext()}(a)),e()}})},w=()=>{o.update(()=>{(0,ec.$unmergeCell)()})},x=(0,X.useCallback)(t=>{o.update(()=>{(0,ec.$insertTableRow__EXPERIMENTAL)(t),e()})},[o,e]),C=(0,X.useCallback)(t=>{o.update(()=>{for(let r=0;r<d.columns;r++)(0,ec.$insertTableColumn__EXPERIMENTAL)(t);e()})},[o,e,d.columns]),y=(0,X.useCallback)(()=>{o.update(()=>{(0,ec.$deleteTableRow__EXPERIMENTAL)(),e()})},[o,e]),N=(0,X.useCallback)(()=>{o.update(()=>{let t=(0,ec.$getTableNodeFromLexicalNodeOrThrow)(c);t.remove(),E(),e()})},[o,c,E,e]),M=(0,X.useCallback)(()=>{o.update(()=>{(0,ec.$deleteTableColumn__EXPERIMENTAL)(),e()})},[o,e]),O=(0,X.useCallback)(()=>{o.update(()=>{let t=(0,ec.$getTableNodeFromLexicalNodeOrThrow)(c),r=(0,ec.$getTableRowIndexFromTableCellNode)(c),l=t.getChildren();if(r>=l.length||r<0)throw Error("Expected table cell to be inside of table row.");let n=l[r];if(!(0,ec.$isTableRowNode)(n))throw Error("Expected table row");n.getChildren().forEach(e=>{if(!(0,ec.$isTableCellNode)(e))throw Error("Expected table cell");e.toggleHeaderStyle(ec.TableCellHeaderStates.ROW)}),E(),e()})},[o,c,E,e]),k=(0,X.useCallback)(()=>{o.update(()=>{let t=(0,ec.$getTableNodeFromLexicalNodeOrThrow)(c),r=(0,ec.$getTableColumnIndexFromTableCellNode)(c),l=t.getChildren(),n=Math.max(...l.map(e=>e.getChildren().length));if(r>=n||r<0)throw Error("Expected table cell to be inside of table row.");for(let a=0;a<l.length;a++){let i=l[a];if(!(0,ec.$isTableRowNode)(i))throw Error("Expected table row");let o=i.getChildren();if(r>=o.length)continue;let s=o[r];if(!(0,ec.$isTableCellNode)(s))throw Error("Expected table cell");s.toggleHeaderStyle(ec.TableCellHeaderStates.COLUMN)}E(),e()})},[o,c,E,e]),S=(0,X.useCallback)(e=>{o.update(()=>{let t=(0,ed.$getSelection)();if((0,ed.$isRangeSelection)(t)||(0,ec.$isTableSelection)(t)){let[r]=(0,ec.$getNodeTriplet)(t.anchor);if((0,ec.$isTableCellNode)(r)&&r.setBackgroundColor(e),(0,ec.$isTableSelection)(t)){let l=t.getNodes();for(let n=0;n<l.length;n++){let a=l[n];(0,ec.$isTableCellNode)(a)&&a.setBackgroundColor(e)}}}})},[o]),A=null;return n&&(h?A=X.createElement(rT.A,{className:"item",onClick:()=>v(),"data-test-id":"table-merge-cells"},i.formatMessage({id:"rich_text_editor_merge_cells"})):g&&(A=X.createElement(rT.A,{className:"item",onClick:()=>w(),"data-test-id":"table-unmerge-cells"},i.formatMessage({id:"rich_text_editor_unmerge_cells"})))),X.createElement(P.A,null,A,X.createElement(rT.A,{className:"item",onClick:()=>a(i.formatMessage({id:"rich_text_editor_cell_background_color"}),()=>X.createElement(eh.sk,{color:f,onChange:S})),"data-test-id":"table-background-color"},X.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_background_color"}))),X.createElement("hr",null),X.createElement(rT.A,{className:"item",onClick:()=>x(!1),"data-test-id":"table-insert-row-above"},X.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_insert_value_row_above"},{value:d.rows}))),X.createElement(rT.A,{className:"item",onClick:()=>x(!0),"data-test-id":"table-insert-row-below"},X.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_insert_value_row_below"},{value:d.rows}))),X.createElement("hr",null),X.createElement(rT.A,{className:"item",onClick:()=>C(!1),"data-test-id":"table-insert-column-before"},X.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_insert_value_column_left"},{value:d.rows}))),X.createElement(rT.A,{className:"item",onClick:()=>C(!0),"data-test-id":"table-insert-column-after"},X.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_insert_value_column_right"},{value:d.rows}))),X.createElement("hr",null),X.createElement(rT.A,{className:"item",onClick:()=>M(),"data-test-id":"table-delete-columns"},X.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_delete_column"}))),X.createElement(rT.A,{className:"item",onClick:()=>y(),"data-test-id":"table-delete-rows"},X.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_delete_row"}))),X.createElement(rT.A,{className:"item",onClick:()=>N(),"data-test-id":"table-delete"},X.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_delete_table"}))),X.createElement("hr",null),X.createElement(rT.A,{className:"item",onClick:()=>O()},X.createElement("span",{className:"text"},i.formatMessage({id:(c.__headerState&ec.TableCellHeaderStates.ROW)===ec.TableCellHeaderStates.ROW?"rich_text_editor_remove_row_header_table":"rich_text_editor_add_row_header_table"}))),X.createElement(rT.A,{className:"item",onClick:()=>k(),"data-test-id":"table-column-header"},X.createElement("span",{className:"text"},i.formatMessage({id:(c.__headerState&ec.TableCellHeaderStates.COLUMN)===ec.TableCellHeaderStates.COLUMN?"rich_text_editor_remove_column_header_table":"rich_text_editor_add_column_header_table"}))))}function rz({anchorElem:e,cellMerge:t}){let[r]=(0,ea.useLexicalComposerContext)(),l=(0,X.useRef)(null),n=(0,X.useRef)(null),[a,i]=(0,X.useState)(!1),[o,s]=(0,X.useState)(null),[c,u]=(0,em.A)(),d=(0,X.useCallback)(()=>{let e=l.current,t=(0,ed.$getSelection)(),n=window.getSelection(),a=document.activeElement;if(null==t||null==e){s(null);return}let i=r.getRootElement();if((0,ed.$isRangeSelection)(t)&&null!==i&&null!==n&&i.contains(n.anchorNode)){let o=(0,ec.$getTableCellNodeFromLexicalNode)(t.anchor.getNode());if(null==o){s(null);return}let c=r.getElementByKey(o.getKey());if(null==c){s(null);return}s(o)}else a||s(null)},[r]);(0,X.useEffect)(()=>r.registerUpdateListener(()=>{r.getEditorState().read(()=>{d()})})),(0,X.useEffect)(()=>{let t=l.current;if(null!=t&&null!=o){let n=r.getElementByKey(o.getKey());if(null!=n){let a=n.getBoundingClientRect(),i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),c=a.top-s.top+4,u=a.right-i.width-10-s.left;t.style.opacity="1",t.style.transform=`translate(${u}px, ${c}px)`}else t.style.opacity="0",t.style.transform="translate(-10000px, -10000px)"}},[l,o,r,e]);let m=(0,X.useRef)(o);return(0,X.useEffect)(()=>{m.current!==o&&i(!1),m.current=o},[m,o]),X.createElement("div",{className:"table-cell-action-button-container",ref:l},null!=o&&X.createElement(X.Fragment,null,X.createElement(rA,{icon:"ico-angle-down",setIsMenuOpen:i,isMenuOpen:a},X.createElement(rD,{contextRef:n,setIsMenuOpen:i,isMenuOpen:a,onClose:()=>i(!1),tableCellNode:o,cellMerge:t,showColorPickerModal:u})),c))}function rP({anchorElem:e=document.body,cellMerge:t=!1}){let r=rk()();return(0,t3.createPortal)(r?X.createElement(rz,{anchorElem:e,cellMerge:t}):null,e)}function rI({editor:e}){let t=(0,X.useRef)(null),r=(0,X.useRef)(null),l=(0,X.useRef)(null),n=(0,X.useRef)(null),[a,i]=(0,X.useState)(null),[o,s]=(0,X.useState)(null),[c,u]=(0,X.useState)(!1),[d,m]=(0,X.useState)(null);(0,X.useEffect)(()=>e.registerCommand(ed.SELECTION_CHANGE_COMMAND,e=>{let t=(0,ed.$getSelection)(),r=(0,ec.$isTableSelection)(t);return c!==r&&u(r),!1},ed.COMMAND_PRIORITY_HIGH));let h=(0,X.useCallback)(()=>{s(null),t.current=null,m(null),n.current=null,l.current=null},[]);(0,X.useEffect)(()=>{let n=n=>{setTimeout(()=>{let a=n.target;if(d){i({x:n.clientX,y:n.clientY});return}if(!(r.current&&r.current.contains(a))&&t.current!==a){t.current=a;let c=(0,ec.getDOMCellFromTarget)(a);c&&o!==c?e.update(()=>{let r=(0,ed.$getNearestNodeFromDOMNode)(c.elem);if(!r)throw Error("TableCellResizer: Table cell node not found.");let n=(0,ec.$getTableNodeFromLexicalNodeOrThrow)(r),i=e.getElementByKey(n.getKey());if(!i)throw Error("TableCellResizer: Table element not found.");t.current=a,l.current=i.getBoundingClientRect(),s(c)}):null==c&&h()}},0)};return document.addEventListener("mousemove",n),()=>{document.removeEventListener("mousemove",n)}},[o,d,e,h]);let p=e=>"bottom"===e,g=(0,X.useCallback)(t=>{if(!o)throw Error("TableCellResizer: Expected active cell.");e.update(()=>{let e=(0,ed.$getNearestNodeFromDOMNode)(o.elem);if(!(0,ec.$isTableCellNode)(e))throw Error("TableCellResizer: Table cell node not found.");let r=(0,ec.$getTableNodeFromLexicalNodeOrThrow)(e),l=(0,ec.$getTableRowIndexFromTableCellNode)(e),n=r.getChildren();if(l>=n.length||l<0)throw Error("Expected table cell to be inside of table row.");let a=n[l];if(!(0,ec.$isTableRowNode)(a))throw Error("Expected table row");a.setHeight(t)})},[o,e]),_=(0,X.useCallback)(t=>{if(!o)throw Error("TableCellResizer: Expected active cell.");e.update(()=>{let e=(0,ed.$getNearestNodeFromDOMNode)(o.elem);if(!(0,ec.$isTableCellNode)(e))throw Error("TableCellResizer: Table cell node not found.");let r=(0,ec.$getTableNodeFromLexicalNodeOrThrow)(e),l=(0,ec.$getTableColumnIndexFromTableCellNode)(e),n=r.getChildren();for(let a=0;a<n.length;a++){let i=n[a];if(!(0,ec.$isTableRowNode)(i))throw Error("Expected table row");let s=i.getChildren(),c=s.map(e=>e.getColSpan()),u=c.reduce((e,t)=>{var r;let l=null!==(r=e[e.length-1])&&void 0!==r?r:0;return e.push(l+t),e},[]),d=u.findIndex(e=>e>l);if(d>=s.length||d<0)throw Error("Expected table cell to be inside of table row.");let m=s[d];if(!(0,ec.$isTableCellNode)(m))throw Error("Expected table cell");m.setWidth(t)}})},[o,e]),f=(0,X.useCallback)(e=>{let t=r=>{if(r.preventDefault(),r.stopPropagation(),!o)throw Error("TableCellResizer: Expected active cell.");if(n.current){let{x:l,y:a}=n.current;if(null===o)return;if(p(e)){let i=o.elem.getBoundingClientRect().height,s=Math.abs(r.clientY-a),c="bottom"===e&&a>r.clientY;g(Math.max(c?i-s:s+i,33))}else{let u=getComputedStyle(o.elem),d=o.elem.clientWidth;d-=parseFloat(u.paddingLeft)+parseFloat(u.paddingRight);let m=Math.abs(r.clientX-l),f="right"===e&&l>r.clientX;_(Math.max(f?d-m:m+d,50))}h(),document.removeEventListener("mouseup",t)}};return t},[o,h,_,g]),b=(0,X.useCallback)(e=>t=>{if(t.preventDefault(),t.stopPropagation(),!o)throw Error("TableCellResizer: Expected active cell.");n.current={x:t.clientX,y:t.clientY},i(n.current),m(e),document.addEventListener("mouseup",f(e))},[o,f]),E=(0,X.useCallback)(()=>{if(o){let{height:e,width:t,top:r,left:n}=o.elem.getBoundingClientRect(),i={bottom:{backgroundColor:"none",cursor:"row-resize",height:"10px",left:`${window.pageXOffset+n}px`,top:`${window.pageYOffset+r+e}px`,width:`${t}px`},right:{backgroundColor:"none",cursor:"col-resize",height:`${e}px`,left:`${window.pageXOffset+n+t}px`,top:`${window.pageYOffset+r}px`,width:"10px"}},s=l.current;return d&&a&&s&&(p(d)?(i[d].left=`${window.pageXOffset+s.left}px`,i[d].top=`${window.pageYOffset+a.y}px`,i[d].height="3px",i[d].width=`${s.width}px`):(i[d].top=`${window.pageYOffset+s.top}px`,i[d].left=`${window.pageXOffset+a.x}px`,i[d].width="3px",i[d].height=`${s.height}px`),i[d].backgroundColor="#adf"),i}return{bottom:null,left:null,right:null,top:null}},[o,d,a]),v=E();return X.createElement("div",{ref:r},null!=o&&!c&&X.createElement(X.Fragment,null,X.createElement(P.A,{sx:{position:"absolute"},className:"TableCellResizer__resizer TableCellResizer__ui",style:v.right||void 0,onMouseDown:b("right")}),X.createElement(P.A,{sx:{position:"absolute"},className:"TableCellResizer__resizer TableCellResizer__ui",style:v.bottom||void 0,onMouseDown:b("bottom")})))}function rH(){let[e]=(0,ea.useLexicalComposerContext)(),t=rk()();return(0,X.useMemo)(()=>t?(0,t3.createPortal)(X.createElement(rI,{editor:e}),document.body):null,[e,t])}function rF(){return(rF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let rW="RichtextEditor",rj=(0,e2.Ay)(P.A,{name:rW,slot:"PlaceholderRoot"})(({theme:e})=>({position:"absolute",color:e.palette.text.hint,overflow:"hidden",textOverflow:"ellipsis",top:"8px",left:"0",userSelect:"none",display:"inlineBlock",pointerEvents:"none",...e.typography.body2})),rB=(0,e2.Ay)(P.A,{name:rW,slot:"EditorContainer"})(({theme:e})=>({position:"relative","& .ltr":{textAlign:"left"},"& .rtl":{textAlign:"right"},"svg path":{fill:e.palette.text.primary}})),rV=(0,e2.Ay)(P.A,{name:rW,slot:"EditorInner"})(({theme:e})=>({position:"relative","& .editor-input":{caretColor:e.palette.text.primary,minHeight:"150px",resize:"none",position:"relative",tabSize:1,outline:0,padding:`${e.spacing(1)} 0`}})),rX=(e,t)=>{let r=(0,ed.$getRoot)();if(r.clear(),!t){let l=(0,ed.$createParagraphNode)();r.append(l);return}let n=new DOMParser,a=n.parseFromString((t||"").replace(/\n/g,"<br>"),"text/html"),i=(0,rn.$generateNodesFromDOM)(e,a);i.forEach(e=>{try{r.append(e)}catch(l){let t=(0,ed.$createParagraphNode)();"linebreak"===e.getType()?r.append(t):r.append(t.append(e))}})};function rY({text:e}){return e?X.createElement(rj,null,e):null}function rK(e){let t={theme:K,onError(e){throw e},nodes:[...rM],editorState(t){rX(t,(null==e?void 0:e.value)||"")},...(null==e?void 0:e.initEditorConfig)||{}};return X.createElement(U.LexicalComposer,{initialConfig:t},X.createElement(rs,{mt:0},X.createElement(rU,rF({},e))))}let rU=e=>{let{placeholder:t,onChange:r,onBlur:l,onFocus:n,onClick:a,autoFocus:i=!1,value:o,disabled:s}=e,[c,u]=X.useState(!1),d=X.useRef(null),m=(0,ra.pt)(),h=X.useRef(!1),[p]=(0,ea.useLexicalComposerContext)(),g=X.useMemo(()=>({container:document.createElement("div"),elements:[]}),[]);X.useEffect(()=>{m?n():l()},[m]),X.useEffect(()=>{p.setEditable(!s),s&&p.dispatchCommand(ed.BLUR_COMMAND,"")},[s]);let[_,f]=X.useState(null),[b,E]=X.useState(!1),[v,w]=X.useState(!1),x=X.useRef(null);X.useEffect(()=>{setImmediate(()=>{h.current=!0})},[]),X.useEffect(()=>p.registerCommand(ed.CLICK_COMMAND,()=>(a(),!1),ed.COMMAND_PRIORITY_LOW),[]),X.useEffect(()=>{h.current&&p.update(()=>{if(m)return;let e=(0,rn.$generateHtmlFromNodes)(p,null);e!==o&&rX(p,o)})},[o]);let C=e=>{null!==e&&f(e)};X.useEffect(()=>{let e=()=>{let e=window.matchMedia("(max-width: 1025px)").matches;e!==b&&E(e)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[b]);let y=X.useCallback(()=>{p.getEditorState().read(()=>{let e=(0,ed.$getSelection)();if((0,ed.$isRangeSelection)(e)){x.current=e.clone();let t=e.anchor,r=e.focus,l=(0,es.createDOMRange)(p,t.getNode(),t.offset,r.getNode(),r.offset),n=d.current;if(null!==l&&null!==n){let{left:a,bottom:i,width:o}=l.getBoundingClientRect(),s=(0,es.createRectsFromDOMRange)(p,l),c=1===s.length?a+o/2-125:a-125;c<10&&(c=10),n.style.left=`${c}px`,n.style.top=`${i+20+(window.pageYOffset||document.documentElement.scrollTop)}px`;let u=s.length,{container:m}=g,h=g.elements,_=h.length;for(let f=0;f<u;f++){let b=s[f],E=h[f];void 0===E&&(E=document.createElement("span"),h[f]=E,m.appendChild(E));let v=`position:absolute;top:${b.top+(window.pageYOffset||document.documentElement.scrollTop)}px;left:${b.left}px;height:${b.height}px;width:${b.width}px;background-color:rgba(255, 212, 0, 0.3);pointer-events:none;z-index:5;`;E.style.cssText=v}for(let w=_-1;w>=u;w--){let C=h[w];m.removeChild(C),h.pop()}}}})},[p,g]);X.useLayoutEffect(()=>{y();let e=g.container,t=document.body;if(null!==t)return t.appendChild(e),()=>{t.removeChild(e)}},[g.container,y]),X.useEffect(()=>(window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)}),[y]);let N=X.useCallback((e,t)=>{e.read(()=>{let e=(0,rn.$generateHtmlFromNodes)(t,null),l=!(0,ra.Un)(t.isComposing(),!0);r(l?e:""),u(l)})},[u,r]);return X.createElement(rB,{className:"editor-shell"},X.createElement(tJ,{setIsLinkEditMode:w}),X.createElement(rV,null,X.createElement(G.RichTextPlugin,{contentEditable:X.createElement("div",{className:"editor-scroller"},X.createElement("div",{className:"editor",ref:C},X.createElement(J.ContentEditable,{className:"editor-input"}))),placeholder:X.createElement(rY,{text:t}),ErrorBoundary:ee()}),X.createElement(Z.HistoryPlugin,null),X.createElement(t2.OnChangePlugin,{onChange:N}),i?X.createElement(q.AutoFocusPlugin,null):null,X.createElement(tq.ListPlugin,null),X.createElement(tZ.LinkPlugin,null),X.createElement(tQ.CheckListPlugin,null),X.createElement(eI,null),X.createElement(eQ,null),X.createElement(t5,null),X.createElement(rc.TablePlugin,null),X.createElement(rH,null),X.createElement(ev,null),X.createElement(e$,null),X.createElement(eN,null),_&&!b&&X.createElement(X.Fragment,null,X.createElement(t9,{anchorElem:_,isLinkEditMode:v,setIsLinkEditMode:w}),X.createElement(rP,{anchorElem:_,cellMerge:!0}),X.createElement(rl,{anchorElem:_}))))},rG=(0,H.A)(e=>(0,F.A)({formLabel:{paddingLeft:"4px !important"},"formLabel-outlined":{backgroundColor:e.palette.background.paper,paddingRight:e.spacing(.5),paddingLeft:e.spacing(.5),marginLeft:e.spacing(-.5)},RDW:{position:"relative",padding:e.spacing(2,1.5)},"RDW-outlined":{"&:hover":{"& > fieldset":{borderColor:e.palette.text.primary}}},"RDW-outlined-focused":{"& > fieldset":{borderColor:`${e.palette.primary.main} !important`,border:"2px solid"},"& > label":{color:e.palette.primary.main}},"RDW-filled":{},"RDW-standard":{padding:e.spacing(1,0,0,0),borderWidth:"0 0 1px 0"},"RDW-error":{"& > fieldset":{borderColor:`${e.palette.error.main} !important`},"& > label":{color:e.palette.error.main}},hidePlaceholder:{"& .public-DraftEditorPlaceholder-root":{display:"none"}},hiddenToolbar:{display:"none !important"}})),rJ=({config:e,name:t,disabled:r,required:l,formik:n})=>{let{label:a,variant:i,color:o,required:s,fullWidth:c=!0,disabled:u,placeholder:d,margin:m="normal",emptyValue:h=""}=e,p=rG(),[g,_]=X.useState(!1),[f,b]=X.useState(!1),[E,v,{setValue:w,setTouched:x}]=(0,j.Mt)(null!=t?t:"RichTextEditorField"),C=X.useCallback(()=>{_(!0)},[]),y=X.useCallback(()=>{_(!1),f&&x(!0)},[f]),N=X.useCallback(()=>{b(!0)},[]),M=!!(v.error&&(v.touched||n.submitCount)),O=e=>{w(e||h)},k=u||r||n.isSubmitting;return X.createElement(z.A,{margin:m,required:s,disabled:k,fullWidth:c,"data-testid":V()(`field ${t}`)},X.createElement(P.A,{sx:{position:"relative"},className:(0,W.default)(p.RDW,p[`RDW-${i}`],g&&p[`RDW-${i}-focused`],M&&p["RDW-error"])},X.createElement(I.A,{required:s||l,shrink:!0,variant:i,"data-testid":V()(`input ${t}`),className:(0,W.default)(p.formLabel,p[`formLabel-${i}`],g&&p[`formLabel-${i}-focused`]),disabled:k,color:o},a),X.createElement(rK,{placeholder:d,onChange:O,onBlur:y,onFocus:C,onClick:N,value:E.value,disabled:k,initEditorConfig:{editable:!k}}),X.createElement(D._r,{children:a,variant:i,hoverState:g})),M?X.createElement(Y.A,{error:v.error}):null)},rZ=rJ},88182(e,t,r){r.d(t,{A:()=>u});var l=r(96540),n=r(73349),a=r(91557),i=r(3556),o=r(8051);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}let c=(0,i.Ay)(n.Cf,{name:"EditorRichTextModal",slot:"root"})(({theme:e})=>({padding:"0 !important",overflowY:"visible",display:"flex"}));function u(){let[e,t]=(0,l.useState)(null),{i18n:r}=(0,a.PCX)(),i=(0,l.useCallback)(()=>{t(null)},[]),u=(0,l.useMemo)(()=>{if(null===e)return null;let{title:t,content:a,props:u={}}=e;return l.createElement(n.lG,s({maxWidth:"xs",fullWidth:!0,scroll:"body",onClose:i,open:!0},u),t?l.createElement(n.L3,{onCancel:i},r.formatMessage({id:t})):null,l.createElement(c,null,l.createElement(o.A,{p:2,sx:{width:"100%"}},a)))},[e,i]),d=(0,l.useCallback)((e,r,l)=>{t({content:r(i),title:e,props:l})},[i]);return[u,d]}},35928(e,t,r){r.d(t,{Eh:()=>c,K1:()=>o,uC:()=>s});var l=r(53579),n=r(96540);let a=n.lazy(()=>r.e("packages_framework_metafox-lexical_src_components_ImageComponent_tsx").then(r.bind(r,8579)));function i(e){if(e instanceof HTMLImageElement){let{alt:t,src:r,width:l,height:n}=e,a=s({altText:t,height:n,src:r,width:l});return{node:a}}return null}class o extends l.DecoratorNode{static getType(){return"image"}static clone(e){return new o(e.__src,e.__altText,e.__maxWidth,e.__width,e.__height,e.__showCaption,e.__caption,e.__captionsEnabled,e.__key)}static importJSON(e){let{altText:t,height:r,width:l,maxWidth:n,caption:a,src:i,showCaption:o}=e,c=s({altText:t,height:r,maxWidth:n,showCaption:o,src:i,width:l}),u=c.__caption,d=u.parseEditorState(a.editorState);return d.isEmpty()||u.setEditorState(d),c}exportDOM(){let e=document.createElement("img");return e.setAttribute("src",this.__src),e.setAttribute("alt",this.__altText),e.setAttribute("width",this.__width.toString()),e.setAttribute("height",this.__height.toString()),{element:e}}static importDOM(){return{img:e=>({conversion:i,priority:0})}}exportJSON(){return{altText:this.getAltText(),caption:this.__caption.toJSON(),height:"inherit"===this.__height?0:this.__height,maxWidth:this.__maxWidth,showCaption:this.__showCaption,src:this.getSrc(),type:"image",version:1,width:"inherit"===this.__width?0:this.__width}}setWidthAndHeight(e,t){let r=this.getWritable();r.__width=e,r.__height=t}setShowCaption(e){let t=this.getWritable();t.__showCaption=e}createDOM(e){let t=document.createElement("span"),r=e.theme,l=r.image;return void 0!==l&&(t.className=l),t}updateDOM(){return!1}getSrc(){return this.__src}getAltText(){return this.__altText}decorate(){return n.createElement(n.Suspense,{fallback:null},n.createElement(a,{src:this.__src,altText:this.__altText,width:this.__width,height:this.__height,maxWidth:this.__maxWidth,nodeKey:this.getKey(),showCaption:this.__showCaption,caption:this.__caption,captionsEnabled:this.__captionsEnabled,resizable:!0}))}constructor(e,t,r,n,a,i,o,s,c){super(c),this.__src=e,this.__altText=t,this.__maxWidth=r,this.__width=n||"auto",this.__height=a||"auto",this.__showCaption=i||!1,this.__caption=o||(0,l.createEditor)(),this.__captionsEnabled=s||void 0===s}}function s({altText:e,height:t,maxWidth:r,captionsEnabled:n,src:a,width:i,showCaption:s,caption:c,key:u}){return(0,l.$applyNodeReplacement)(new o(a,e,r,i,t,s,c,n,u))}function c(e){return e instanceof o}},90894(e,t,r){r.d(t,{sk:()=>u,ar:()=>b,ii:()=>E,Ck:()=>R,Ho:()=>A,Zs:()=>L,wz:()=>P,Or:()=>I,ks:()=>i});var l=r(96540),n=r(20687),a=r(54358);function i({label:e,value:t,onChange:r,placeholder:i="","data-test-id":o,type:s="text",fullWidth:c=!0,margin:u="normal"}){return l.createElement(n.A,{margin:u,fullWidth:c},l.createElement(a.A,{label:e,type:s,InputLabelProps:{shrink:"number"===s||void 0},placeholder:i,value:t,onChange(e){r(e.target.value)},"data-test-id":o}))}var o=r(8051);let s=!1,c=["#d0021b","#f5a623","#f8e71c","#8b572a","#7ed321","#417505","#bd10e0","#9013fe","#4a90e2","#50e3c2","#b8e986","#000000","#4a4a4a","#9b9b9b","#ffffff"];function u({color:e,onChange:t}){let r=l.useRef(_("hex",e)),[n,a]=(0,l.useState)(_("hex",e)),[u,m]=(0,l.useState)(e),h=(0,l.useRef)(null),p=(0,l.useMemo)(()=>({x:n.hsv.s/100*214,y:(100-n.hsv.v)/100*150}),[n.hsv.s,n.hsv.v]),g=(0,l.useMemo)(()=>({x:n.hsv.h/360*214}),[n.hsv]),f=e=>{if(m(e),/^#[0-9A-Fa-f]{6}$/i.test(e)){let t=_("hex",e);a(t)}},b=({x:e,y:t})=>{let r={...n.hsv,s:e/214*100,v:100-t/150*100},l=_("hsv",r);a(l),m(l.hex)},E=({x:e})=>{let t={...n.hsv,h:e/214*360},r=_("hsv",t);a(r),m(r.hex)};return(0,l.useEffect)(()=>{if(null!==h.current&&t){var e;(null==r?void 0:null===(e=r.current)||void 0===e?void 0:e.hex)!==n.hex&&t(n.hex,s),m(n.hex)}},[n,t]),(0,l.useEffect)(()=>{if(void 0===e)return;let t=_("hex",e);a(t),m(t.hex)},[e]),l.createElement(o.A,null,l.createElement("div",{className:"color-picker-wrapper",style:{width:214},ref:h},l.createElement(i,{label:"Hex",onChange:f,value:u}),l.createElement("div",{className:"color-picker-basic-color"},c.map(e=>l.createElement("button",{className:e===n.hex?" active":"",key:e,style:{backgroundColor:e},onClick(){m(e),a(_("hex",e))}}))),l.createElement(d,{className:"color-picker-saturation",style:{backgroundColor:`hsl(${n.hsv.h}, 100%, 50%)`},onChange:b},l.createElement("div",{className:"color-picker-saturation_cursor",style:{backgroundColor:n.hex,left:p.x,top:p.y}})),l.createElement(d,{className:"color-picker-hue",onChange:E},l.createElement("div",{className:"color-picker-hue_cursor",style:{backgroundColor:`hsl(${n.hsv.h}, 100%, 50%)`,left:g.x}})),l.createElement("div",{className:"color-picker-color",style:{backgroundColor:n.hex}})))}function d({className:e,style:t,onChange:r,children:n}){let a=(0,l.useRef)(null),i=(0,l.useRef)(!1),o=e=>{if(a.current){var t,l;let{current:n}=a,{width:i,height:o,left:s,top:c}=n.getBoundingClientRect(),u=(t=e.clientX-s)>i?i:t<0?0:t,d=(l=e.clientY-c)>o?o:l<0?0:l;r({x:u,y:d})}},c=e=>{if(0!==e.button)return;o(e);let t=e=>{i.current=!0,s=!0,o(e)},r=e=>{i.current&&(s=!1),document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",r,!1),o(e),i.current=!1};document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",r,!1)};return l.createElement("div",{ref:a,className:e,style:t,onMouseDown:c},n)}function m(e){if(e.startsWith("#")){if(4===e.length||5===e.length)return e=e.split("").map((e,t)=>t?e+e:"#").join("");if(7===e.length||9===e.length)return e}else{let t=document.createElement("canvas").getContext("2d");if(!t)throw Error("2d context not supported or canvas already initialized");return t.fillStyle=e,t.fillStyle}return"#000000"}function h(e){let t=(e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,r,l)=>`#${t}${t}${r}${r}${l}${l}`).substring(1).match(/.{2}/g)||[]).map(e=>parseInt(e,16));return{b:t[2],g:t[1],r:t[0]}}function p({r:e,g:t,b:r}){e/=255,t/=255,r/=255;let l=Math.max(e,t,r),n=l-Math.min(e,t,r),a=n?(l===e?(t-r)/n+(t<r?6:0):l===t?2+(r-e)/n:4+(e-t)/n)*60:0;return{h:a,s:l?n/l*100:0,v:100*l}}function g({b:e,g:t,r}){return`#${[r,t,e].map(e=>e.toString(16).padStart(2,"0")).join("")}`}function _(e,t){let r=m("#121212"),l=h(r),n=p(l);return"hex"===e?n=p(l=h(r=m(t))):"rgb"===e?(r=g(l=t),n=p(l)):"hsv"===e&&(r=g(l=function({h:e,s:t,v:r}){t/=100,r/=100;let l=~~(e/60),n=e/60-l,a=r*(1-t),i=r*(1-t*n),o=r*(1-t*(1-n)),s=l%6,c=Math.round(255*[r,i,a,a,o,r][s]),u=Math.round(255*[o,r,r,i,a,a][s]),d=Math.round(255*[a,a,o,r,r,i][s]);return{b:d,g:u,r:c}}(n=t))),{hex:r,hsv:n,rgb:l}}var f=r(7256);function b({className:e}){return l.createElement(f.ContentEditable,{className:e||"ContentEditable__root"})}function E({"data-test-id":e,children:t}){return l.createElement("div",{className:"DialogActions","data-test-id":e},t)}var v=r(40961),w=r(44371),x=r(3556),C=r(60780),y=r(57660),N=r(87773),M=r(18799);let O=(0,x.Ay)(M.A,{name:"RichtextEditorAction",slot:"DropdownWrapper"})(({theme:e})=>({zIndex:e.zIndex.tooltip-1,display:"block",position:"fixed",minHeight:"40px"})),k=l.createContext(null),S=(0,x.Ay)(C.A,{name:"RichtextEditorAction",slot:"ButtonAction"})(({theme:e})=>({border:0,color:e.palette.text.primary,display:"flex",background:"none",borderRadius:"8px",padding:"8px",cursor:"pointer",verticalAlign:"middle",alignItems:"center",justifyContent:"space-between",minWidth:"48px","&:hover:not([disabled])":{backgroundColor:"rgba(0,0,0,0.1)"}}));function A({children:e,className:t,onClick:r,title:n,selected:a}){let i=(0,l.useRef)(null),o=l.useContext(k);if(null===o)throw Error("DropDownItem must be used within a DropDown");let{registerItem:s}=o;return(0,l.useEffect)(()=>{i&&i.current&&s(i)},[i,s]),l.createElement(y.A,{className:t,onClick:r,selected:a,ref:i,title:n},e)}function T({children:e,dropDownRef:t,onClose:r,sxDropdownWrapper:n={}}){let[a,i]=(0,l.useState)(),[o,s]=(0,l.useState)(),c=(0,l.useCallback)(e=>{i(t=>t?[...t,e]:[e])},[i]),u=e=>{if(!a)return;let t=e.key;["Escape","ArrowUp","ArrowDown","Tab"].includes(t)&&e.preventDefault(),"Escape"===t||"Tab"===t?r():"ArrowUp"===t?s(e=>{if(!e)return a[0];let t=a.indexOf(e)-1;return a[-1===t?a.length-1:t]}):"ArrowDown"===t&&s(e=>e?a[a.indexOf(e)+1]:a[0])},d=(0,l.useMemo)(()=>({registerItem:c}),[c]);return(0,l.useEffect)(()=>{a&&!o&&s(a[0]),o&&o.current&&o.current.focus()},[a,o]),l.createElement(k.Provider,{value:d},l.createElement(O,{className:"dropdown",ref:t,onKeyDown:u,sx:n},e))}function R({disabled:e=!1,buttonLabel:t,buttonAriaLabel:r,buttonIcon:n,children:a,stopCloseOnClickSelf:i,sxDropdownWrapper:o}){let s=(0,l.useRef)(null),c=(0,l.useRef)(null),[u,d]=(0,l.useState)(!1),m=()=>{d(!1),c&&c.current&&c.current.focus()};return(0,l.useEffect)(()=>{let e=c.current,t=s.current;if(u&&null!==e&&null!==t){let{top:r,left:l}=e.getBoundingClientRect();t.style.top=`${r+e.offsetHeight+4}px`,t.style.left=`${Math.min(l,window.innerWidth-t.offsetWidth-20)}px`}},[s,c,u]),(0,l.useEffect)(()=>{let e=c.current;if(null!==e&&u){let t=t=>{let r=t.target;!(i&&s.current&&s.current.contains(r))&&(e.contains(r)||d(!1))};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}}},[s,c,u,i]),(0,l.useEffect)(()=>{let e=()=>{if(u){let e=c.current,t=s.current;if(null!==e&&null!==t){let{top:r}=e.getBoundingClientRect(),l=r+e.offsetHeight+4;l!==t.getBoundingClientRect().top&&(t.style.top=`${l}px`)}}};return document.addEventListener("scroll",e),()=>{document.removeEventListener("scroll",e)}},[c,s,u]),l.createElement(l.Fragment,null,l.createElement(S,{type:"button",disabled:e,"aria-label":r||t,onClick:()=>d(!u),ref:c,variant:"text"},n||null,t&&l.createElement(N.A,{variant:"body2",component:"span",ml:1},t),l.createElement(w.s4,{sx:{ml:1},icon:"ico-caret-down"})),u&&(0,v.createPortal)(l.createElement(T,{dropDownRef:s,onClose:m,sxDropdownWrapper:o},a),document.body))}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function L({disabled:e=!1,stopCloseOnClickSelf:t=!0,color:r,onChange:n,...a}){return l.createElement(R,$({},a,{disabled:e,stopCloseOnClickSelf:t}),l.createElement(o.A,{p:2},l.createElement(u,{color:r,onChange:n})))}function D(e,t,r){return Math.min(Math.max(e,t),r)}let z={east:1,north:8,south:2,west:4};function P({onResizeStart:e,onResizeEnd:t,buttonRef:r,imageRef:n,maxWidth:a,editor:i,showCaption:o,setShowCaption:s,captionsEnabled:c}){let u=(0,l.useRef)(null),d=(0,l.useRef)({priority:"",value:"default"}),m=(0,l.useRef)({currentHeight:0,currentWidth:0,direction:0,isResizing:!1,ratio:0,startHeight:0,startWidth:0,startX:0,startY:0}),h=i.getRootElement(),p=a||(null!==h?h.getBoundingClientRect().width-20:100),g=null!==h?h.getBoundingClientRect().height-20:100,_=e=>{let t=e===z.east||e===z.west,r=e===z.north||e===z.south,l=e&z.north&&e&z.west||e&z.south&&e&z.east,n=t?"ew":r?"ns":l?"nwse":"nesw";null!==h&&h.style.setProperty("cursor",`${n}-resize`,"important"),null!==document.body&&(document.body.style.setProperty("cursor",`${n}-resize`,"important"),d.current.value=document.body.style.getPropertyValue("-webkit-user-select"),d.current.priority=document.body.style.getPropertyPriority("-webkit-user-select"),document.body.style.setProperty("-webkit-user-select","none","important"))},f=()=>{null!==h&&h.style.setProperty("cursor","text"),null!==document.body&&(document.body.style.setProperty("cursor","default"),document.body.style.setProperty("-webkit-user-select",d.current.value,d.current.priority))},b=(t,r)=>{if(!i.isEditable())return;let l=n.current,a=u.current;if(null!==l&&null!==a){t.preventDefault();let{width:o,height:s}=l.getBoundingClientRect(),c=m.current;c.startWidth=o,c.startHeight=s,c.ratio=o/s,c.currentWidth=o,c.currentHeight=s,c.startX=t.clientX,c.startY=t.clientY,c.isResizing=!0,c.direction=r,_(r),e(),a.classList.add("image-control-wrapper--resizing"),l.style.height=`${s}px`,l.style.width=`${o}px`,document.addEventListener("pointermove",E),document.addEventListener("pointerup",v)}},E=e=>{let t=n.current,r=m.current,l=r.direction&(z.east|z.west),a=r.direction&(z.south|z.north);if(null!==t&&r.isResizing){if(l&&a){let i=Math.floor(r.startX-e.clientX);i=r.direction&z.east?-i:i;let o=D(r.startWidth+i,100,p),s=o/r.ratio;t.style.width=`${o}px`,t.style.height=`${s}px`,r.currentHeight=s,r.currentWidth=o}else if(a){let c=Math.floor(r.startY-e.clientY);c=r.direction&z.south?-c:c;let u=D(r.startHeight+c,100,g);t.style.height=`${u}px`,r.currentHeight=u}else{let d=Math.floor(r.startX-e.clientX);d=r.direction&z.east?-d:d;let h=D(r.startWidth+d,100,p);t.style.width=`${h}px`,r.currentWidth=h}}},v=()=>{let e=n.current,r=m.current,l=u.current;if(null!==e&&null!==l&&r.isResizing){let a=r.currentWidth,i=r.currentHeight;r.startWidth=0,r.startHeight=0,r.ratio=0,r.startX=0,r.startY=0,r.currentWidth=0,r.currentHeight=0,r.isResizing=!1,l.classList.remove("image-control-wrapper--resizing"),f(),t(a,i),document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",v)}};return l.createElement("div",{ref:u},l.createElement("div",{className:"image-resizer image-resizer-n",onPointerDown(e){b(e,z.north)}}),l.createElement("div",{className:"image-resizer image-resizer-ne",onPointerDown(e){b(e,z.north|z.east)}}),l.createElement("div",{className:"image-resizer image-resizer-e",onPointerDown(e){b(e,z.east)}}),l.createElement("div",{className:"image-resizer image-resizer-se",onPointerDown(e){b(e,z.south|z.east)}}),l.createElement("div",{className:"image-resizer image-resizer-s",onPointerDown(e){b(e,z.south)}}),l.createElement("div",{className:"image-resizer image-resizer-sw",onPointerDown(e){b(e,z.south|z.west)}}),l.createElement("div",{className:"image-resizer image-resizer-w",onPointerDown(e){b(e,z.west)}}),l.createElement("div",{className:"image-resizer image-resizer-nw",onPointerDown(e){b(e,z.north|z.west)}}))}function I({children:e,className:t}){return l.createElement("div",{className:t||"Placeholder__root"},e)}}}]);