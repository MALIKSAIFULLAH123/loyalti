"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["formExtras"],{95376(e,t,l){l.r(t),l.d(t,{default:()=>O});var n=l(91557),a=l(44371),r=l(38860),i=l(3556),o=l(60780),u=l(8051),d=l(81502),s=l(20687),c=l(30261),m=l(16535),p=l(84058),v=l.n(p),g=l(58156),f=l.n(g),h=l(97200),b=l.n(h),E=l(85015),y=l.n(E),A=l(96540),x=l(59262);let C={width:2,position:"absolute",right:0,opacity:0,display:"none"},w=(0,i.Ay)(a.s4,{name:"AttachmentIcon"})(({theme:e})=>({paddingRight:e.spacing(.5),fontSize:e.mixins.pxToRem(15)})),S=(0,i.Ay)(o.A,{name:"AttachmentButton"})(({theme:e})=>({fontWeight:"bold"})),k=(0,i.Ay)("div",{name:"AttachmentAction",shouldForwardProp:e=>"disabled"!==e})(({theme:e,disabled:t})=>({color:t?e.palette.text.disabled:e.palette.primary.main,marginLeft:e.spacing(1.5),cursor:"pointer",alignSelf:"center","&:hover":{textDecoration:"underline"}})),_=(0,i.Ay)(u.A,{name:"AttachmentItem",slot:"FormItem"})(({theme:e})=>({display:"flex",marginTop:e.spacing(1),fontSize:e.mixins.pxToRem(13),lineHeight:1.5,"& .info":{display:"flex",alignItems:"center"}})),R=(0,i.Ay)("div")(({theme:e})=>({overflowWrap:"anywhere"}));function M({item:e,index:t,handleDelete:l,error:i,isSubmitting:o,name:s,progress:c}){let{i18n:m}=(0,n.PCX)();return"remove"===e.status?null:A.createElement("div",null,A.createElement(_,null,A.createElement("div",{className:"info","data-testid":v()(`attachmentFile ${t}`)},A.createElement(w,{icon:"ico-paperclip-alt"}),(null==e?void 0:e.status)==="new"&&A.createElement(a.p2,{text:m.formatMessage({id:"new"}),sx:{mr:.5}}),A.createElement(R,null,(0,r.Tu)(e.file_name,30))),o?A.createElement(u.A,{sx:{marginLeft:"auto",minWidth:"100px",pl:1,mt:1}},A.createElement(d.A,{variant:"determinate",value:c||0})):A.createElement(k,{onClick:()=>l(t),disabled:o,"data-testid":v()(`button_remove ${s}`)},m.formatMessage({id:"remove"}))),i?A.createElement(x.A,{error:i}):null)}function O({config:e,name:t,disabled:l,formik:i}){let{dialogBackend:o,i18n:u}=(0,n.PCX)(),[d,p,{setValue:g,setTouched:h}]=(0,c.Mt)(null!=t?t:"AttachmentField"),[E,w]=A.useState({}),{upload_url:k,item_type:_,fullWidth:R=!0,margin:O="normal",size:T,max_upload_filesize:I,disabled:F,accept:z,storage_id:P}=e,$=(0,A.useRef)(),B=e.placeholder||"attach_files",j=A.useMemo(()=>d.value||[],[d.value]),W=Array.isArray(j)&&j.length>0,L=e=>{e.currentTarget.value=null},D=(0,A.useCallback)(e=>{o.confirm({message:u.formatMessage({id:"are_you_sure_you_want_to_delete_attachment_file"}),title:u.formatMessage({id:"are_you_sure"})}).then(t=>{if(!t)return;let l=(0,m.Ay)(j,t=>{t[e].id?t[e].status="remove":t.splice(e,1)});g(l)})},[j]),q=(e,t)=>{let l=Math.round(100*e.loaded/e.total);w(e=>({...e,[t]:l}))},N=(0,A.useCallback)(()=>{(null==p?void 0:p.touched)||h(!0);let e=$.current.files;if(!(null==e?void 0:e.length))return;let t=[];for(let l of Object.keys(e)){let n={status:"new",upload_url:k,download_url:URL.createObjectURL(e[l]),source:URL.createObjectURL(e[l]),file:e[l],file_name:e[l].name,file_size:e[l].size,file_type:e[l].type,uid:b()("file"),fileItemType:_,extension:(0,r.QC)(e[l].name),storage_id:null!=P?P:null},a=n.file.size,i=n.file_name;if(a>I&&0!==I){o.alert({message:u.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,r.Tu)(i,30),fileSize:(0,r.lT)(n.file.size),maxSize:(0,r.lT)(I)})});break}t.push(n)}(null==t?void 0:t.length)>0&&g([...j,...t].map((e,t)=>({...e,onUploadProgress:e=>q(e,t)})))},[j]),H=(0,A.useCallback)(()=>{$.current.click()},[]);return A.createElement(s.A,{fullWidth:R,margin:O,size:T,"data-testid":v()(`field ${t}`)},A.createElement("div",null,A.createElement(S,{variant:"outlined",size:"small",color:"primary","data-testid":v()(`button_add ${t}`),onClick:H,disabled:F||l||i.isSubmitting,startIcon:A.createElement(a.s4,{icon:"ico-paperclip-alt"})},u.formatMessage({id:B}))),W&&j.map((e,l)=>A.createElement(M,{key:l.toString(),handleDelete:D,index:l,item:e,name:t,error:y()(p.error)?"":f()(p.error,l),isSubmitting:i.isSubmitting,progress:E[l]})),y()(p.error)?A.createElement(x.A,{error:p.error}):null,A.createElement("input",{onClick:L,"data-testid":v()(`input ${t}`),ref:$,style:C,accept:z,"aria-hidden":!0,type:"file",multiple:!0,onChange:N,hidden:!0}))}},7461(e,t,l){l.r(t),l.d(t,{default:()=>x});var n=l(91557),a=l(44371),r=l(8051),i=l(20687),o=l(18727),u=l(89481),d=l(54358),s=l(88631),c=l(30261),m=l(84058),p=l.n(m),v=l(62193),g=l.n(v),f=l(23805),h=l.n(f),b=l(96540);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let y=(e,t)=>b.createElement("li",E({"data-value":null==t?void 0:t.value},e),b.createElement(r.A,{sx:{overflow:"hidden"}},b.createElement(a.mE,{lines:1},t.label),t.caption?b.createElement(r.A,null,b.createElement(a.mE,{lines:1,color:"text.secondary",variant:"body2",fontSize:12,component:"span"},t.caption)):null)),A=({config:e,name:t,disabled:l,required:a,formik:m})=>{let{variant:v="outlined",label:f,size:A="medium",fieldValue:x="value",margin:C="normal",sxFieldWrapper:w,disabled:S,placeholder:k,required:_,fullWidth:R=!0,search_endpoint:M,search_params:O,option_default:T=[]}=e,{values:I}=(0,c.j7)(),{compactData:F,i18n:z}=(0,n.PCX)(),[P,$,{setValue:B,setTouched:j}]=(0,c.Mt)(t||"autoComplete"),[W,L]=b.useState(null),D=!!($.error&&($.touched||m.submitCount)),q=b.useMemo(()=>F(O,I),[O,I]),[N,H]=(0,n.Pth)({apiUrl:M,initialParams:q,option_default:T});b.useEffect(()=>{P.value&&"object"==typeof P.value&&!Array.isArray(P.value)&&B(P.value?P.value[x]:null)},[]),b.useEffect(()=>{if(!P.value){L(null);return}if(h()(P.value))L(P.value);else{let e=N.items.filter(e=>e.value==P.value)[0];L(e)}},[P.value,null==N?void 0:N.items]);let X=e=>{P.onBlur(e),j(!0)},U=()=>{g()(T)&&H("")};return b.createElement(i.A,{variant:v,margin:C,fullWidth:R,required:_||a,size:A,"data-testid":p()(`field ${t}`),error:D,sx:w},b.createElement(o.A,{autoHighlight:!0,openOnFocus:!0,onBlur:X,onChange(e,t){B((null==t?void 0:t[x])||null),L(t)},noOptionsText:z.formatMessage({id:"no_options"}),disabled:S||l||m.isSubmitting,value:W,placeholder:k,getOptionLabel:e=>null==e?void 0:e.label,options:N.items,loading:N.loading,renderOption:y,loadingText:b.createElement(r.A,{sx:{display:"flex",justifyContent:"center"}},b.createElement(u.A,null)),renderInput:e=>b.createElement(d.A,E({onFocus:U,onChange(e){var t;let l=(null===(t=e.target)||void 0===t?void 0:t.value)||"";H(l)}},e,{label:f,"data-testid":p()(`field ${t}`),error:D,size:A,required:_||a,InputProps:{...e.InputProps}}))}),D&&b.createElement(s.A,null,null==$?void 0:$.error))},x=A},85458(e,t,l){l.r(t),l.d(t,{default:()=>x});var n=l(91557),a=l(44371),r=l(38860),i=l(3556),o=l(8051),u=l(63461),d=l(20687),s=l(30261),c=l(84058),m=l.n(c),p=l(97200),v=l.n(p),g=l(96540),f=l(59262);let h=e=>new Promise(t=>{let l=new FileReader;l.addEventListener("load",()=>t(l.result),!1),l.readAsDataURL(e)}),b={width:2,position:"absolute",right:0,opacity:0},E=(0,i.Ay)(o.A,{name:"AvatarWrapper"})(({theme:e})=>({borderRadius:"100%",position:"relative",background:"dark"===e.palette.mode?e.palette.grey[600]:e.palette.grey[100]})),y=(0,i.Ay)(u.A,{name:"AvatarButtonIcon"})(({theme:e})=>({width:"100%",height:"100%",fontSize:"40px",position:"absolute",left:0,top:0,zIndex:3})),A=(0,i.Ay)(u.A,{name:"AvatarRemoveButton"})(({theme:e})=>({width:"100%",height:"100%",fontSize:"40px",position:"absolute",left:0,top:0,zIndex:3,opacity:0,"&:hover":{opacity:1}}));function x({config:e,name:t,disabled:l,formik:i}){let{dialogBackend:o,i18n:u}=(0,n.PCX)(),[c,p,{setValue:x}]=(0,s.Mt)(null!=t?t:"avatarUpload"),{item_type:C,max_upload_filesize:w,disabled:S,accept:k,margin:_}=e,[R,M]=(0,g.useState)(c.value),O=(0,g.useRef)();(0,g.useEffect)(()=>{(null==R?void 0:R.file)?z(null==R?void 0:R.file,e=>{x({base64:e})}):(null==R?void 0:R.url)?x({}):x({is_delete:!0})},[R]);let T=e=>!k||k.replace(/\s/g,"").split(",").filter(t=>RegExp(t.replace("*",".*")).test(e)).length>0,I=e=>{e.currentTarget.value=null},F=(0,g.useCallback)(()=>{M(null)},[]),z=async(e,t)=>{if(e){let l=await h(e);t(l)}},P=(0,g.useCallback)(()=>{let e=O.current.files;if(0===e.length)return;if(!T(e.item(0).type)){o.alert({message:u.formatMessage({id:"picture_format_is_not_correct"})}),O.current.value=null;return}let t={file_name:e.item(0).name,download_url:URL.createObjectURL(e.item(0)),file:e.item(0),key:v()("file"),fileItemType:C},l=t.file.size,n=t.file_name;if(l>w&&0!==w){o.alert({message:u.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,r.Tu)(n,30),fileSize:(0,r.lT)(t.file.size),maxSize:(0,r.lT)(w)})});return}t&&M(t)},[R]),$=(0,g.useCallback)(()=>{O.current.click()},[]),B=!!(p.error&&(p.touched||i.submitCount));return g.createElement(d.A,{margin:_,"data-testid":m()(`field ${t}`)},g.createElement(E,{sx:{width:"160px",height:"160px"}},(null==R?void 0:R.download_url)||(null==R?void 0:R.url)?g.createElement(g.Fragment,null,g.createElement(a._V,{shape:"circle",src:(null==R?void 0:R.download_url)||(null==R?void 0:R.url),aspectRatio:"11"}),g.createElement(A,{onClick:()=>F(),disabled:S||l||i.isSubmitting,sx:{color:"white",background:"rgba(0,0,0,0.3)"}},g.createElement(a.s4,{icon:"ico-trash"}))):g.createElement(y,{"data-testid":m()(`button ${t}`),onClick:$,disabled:S||l||i.isSubmitting},g.createElement(a.s4,{icon:"ico-camera"}))),B&&g.createElement(f.A,{error:p.error}),g.createElement("input",{onClick:I,"data-testid":m()(`input ${t}`),ref:O,style:b,accept:k,"aria-hidden":!0,type:"file",multiple:!1,onChange:P,hidden:!0}))}},8367(e,t,l){l.r(t),l.d(t,{default:()=>m});var n=l(3556),a=l(24099),r=l(8051),i=l(87773),o=l(77298),u=l(30261),d=l(96540);let s=(0,n.Ay)(a.A,{slot:"StackContent"})(({theme:e})=>({flexWrap:"wrap","& .MuiChip-root":{margin:e.spacing(.5)}})),c=({config:e,name:t})=>{let[l,,{setValue:n}]=(0,u.Mt)(null!=t?t:"ChipField"),{options:a=[],direction:c="row",spacing:m=1,label:p}=e;if(!l.value){var v;l.value=null!==(v=e.defaultValue)&&void 0!==v?v:""}let g=e=>{n(e)};return d.createElement(r.A,null,p&&d.createElement(i.A,{sx:{paddingBottom:1},variant:"h5"},p),d.createElement(s,{direction:c,spacing:m},a.map((e,t)=>d.createElement(o.A,{onClick:()=>g(e),key:t,label:e.title,variant:"outlined"}))))},m=c},5501(e,t,l){l.r(t),l.d(t,{default:()=>I});var n=l(91557),a=l(8051),r=l(89481),i=l(20687),o=l(18727),u=l(54358),d=l(88631),s=l(30261),c=l(84058),m=l.n(c),p=l(58156),v=l.n(p),g=l(90179),f=l.n(g),h=l(23805),b=l.n(h),E=l(38221),y=l.n(E),A=l(42194),x=l.n(A),C=l(69843),w=l.n(C),S=l(2404),k=l.n(S),_=l(96540);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let M=(e,t)=>v()(e,"value")==v()(t,"value"),O=(e,t)=>_.createElement(a.A,R({"data-value":null==t?void 0:t.value,component:"li"},e,{key:`${null==t?void 0:t.value}${null==t?void 0:t.label}`}),t.label),T=({config:e,name:t,disabled:l,formik:c})=>{var p,v;let{variant:g="outlined",label:h,size:E="medium",margin:A="normal",disabled:C,placeholder:S,required:T,fullWidth:I=!0,search_endpoint:F,search_params:z,sxFieldWrapper:P}=e,{values:$}=(0,s.j7)(),{compactData:B}=(0,n.PCX)(),[j,W]=_.useState(""),L=_.useRef(!1),D=L.current,[q,N]=_.useState(1),[H,X,{setValue:U}]=(0,s.Mt)(t||"autoComplete"),V=!!(X.error&&(X.touched||c.submitCount)),K=_.useMemo(()=>{let e=b()($)?$:{};return x()(B(z,f()(e,["q",L.current?t:void 0])),w())},[z,$,j]),Z=(0,n.ZCR)(K),[Q,G]=(0,n.Pth)({apiUrl:F,initialParams:K}),J=e=>{H.onBlur(e),j||U(null)},Y=_.useMemo(()=>{let e=()=>{G(j,K)};return y()(e,200)},[j,K]),ee=()=>{Y()};return(_.useEffect(()=>{D&&Y()},[j]),_.useEffect(()=>{!D||k()(K,Z)||Y()},[K]),_.useEffect(()=>{H.value||W("")},[H.value]),_.useEffect(()=>{var e;if(D)return;let t=!H.value||(null==Q?void 0:Q.loading)?"":Q.items.find(e=>e.value==H.value);if(t){L.current=!0,W(null==t?void 0:t.label);return}(null==Q?void 0:Q.loading)&&!((null==Q?void 0:null===(e=Q.items)||void 0===e?void 0:e.length)>0)||(N(Math.random()),L.current=!0)},[null==Q?void 0:Q.items,D]),D)?j||(null===(p=Q.items)||void 0===p?void 0:p.length)||Q.loading?_.createElement(i.A,{variant:g,margin:A,fullWidth:I,required:T,size:E,"data-testid":m()(`field ${t}`),error:V,sx:P},_.createElement(o.A,{freeSolo:!0,key:q,size:E,autoHighlight:!0,openOnFocus:!0,onBlur:J,onFocus:ee,onChange(e,t){U(null==t?void 0:t.value)},renderOption:O,disabled:C||l||c.isSubmitting,placeholder:S,isOptionEqualToValue:M,options:null===(v=Q.items)||void 0===v?void 0:v.slice(0,20),loading:Q.loading,loadingText:_.createElement(a.A,{sx:{display:"flex",justifyContent:"center"}},_.createElement(r.A,null)),onInputChange(e,t){W(t)},inputValue:j||"",renderInput:e=>_.createElement(u.A,R({},e,{label:h,"data-testid":m()(`field ${t}`),error:V}))}),V&&_.createElement(d.A,null,null==X?void 0:X.error)):null:_.createElement(a.A,{sx:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"}},_.createElement(r.A,{color:"inherit",size:20}))},I=T},38530(e,t,l){l.r(t),l.d(t,{default:()=>v});var n=l(91557),a=l(20687),r=l(18727),i=l(54358),o=l(8051),u=l(30261),d=l(84058),s=l.n(d),c=l(96540);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let p=({name:e,config:t,disabled:l,required:d,formik:p})=>{let{margin:v="normal",fieldLabel:g="label",fieldValue:f="value",options:h,disabled:b,suboptions:E,countryFieldName:y,stateFieldName:A,cityFieldName:x="country_city_code",required:C,label:w,size:S,sx:k,sxFieldWrapper:_,fullWidth:R,inline:M}=t,{i18n:O}=(0,n.PCX)(),[T,I,{setValue:F,setTouched:z}]=(0,u.Mt)(y),[P,,{setValue:$}]=(0,u.Mt)(A),B=c.useMemo(()=>T.value?h.find(e=>(null==e?void 0:e.value)===T.value):null,[T.value,h]),j=c.useMemo(()=>{var e;return T.value&&(null===(e=E[T.value])||void 0===e?void 0:e.find(e=>(null==e?void 0:e.value)==P.value))||null},[P.value,E,T]),W=E[T.value],L=e=>{I.touched||z(!0),F((null==e?void 0:e[f])||null),$(null),x&&p.setFieldValue(x,null)},D=e=>{$((null==e?void 0:e[f])||null),x&&p.setFieldValue(x,null)},q=e=>e[g],N=()=>{z(!0)},H=!!(I.error&&(I.touched||p.submitCount));return M?c.createElement(c.Fragment,null,c.createElement(a.A,{margin:v,fullWidth:R,"data-testid":s()(`field ${e}`),sx:_},c.createElement(r.A,{sx:k,openOnFocus:!0,autoHighlight:!0,value:B,disabled:b||l||p.isSubmitting,onChange:(e,t)=>L(t),onBlur:T.onBlur,id:s()(`select-${e}`),multiple:!1,options:h,noOptionsText:O.formatMessage({id:"no_options"}),getOptionLabel:q,renderInput:t=>c.createElement(i.A,m({"data-testid":s()(`field ${e}`),label:w,required:C||d,error:H,helperText:H?I.error:null,onBlur:N},t,{size:S}))})),(null==W?void 0:W.length)>0&&c.createElement(a.A,{margin:v,fullWidth:R,"data-testid":s()(`field ${A}`),sx:_},c.createElement(o.A,null,c.createElement(r.A,{sx:k,openOnFocus:!0,autoHighlight:!0,disabled:b||l||p.isSubmitting,value:j,onChange:(e,t)=>D(t),onBlur:P.onBlur,id:`select-${e}`,multiple:!1,getOptionLabel:q,options:W,noOptionsText:O.formatMessage({id:"no_options"}),renderInput:e=>c.createElement(i.A,m({label:O.formatMessage({id:"state"})},e,{size:S}))})))):c.createElement(a.A,{margin:v,fullWidth:R,"data-testid":s()(`field ${e}`),sx:_},c.createElement(r.A,{sx:k,openOnFocus:!0,autoHighlight:!0,value:B,disabled:b||l||p.isSubmitting,onChange:(e,t)=>L(t),onBlur:T.onBlur,id:s()(`select-${e}`),multiple:!1,options:h,noOptionsText:O.formatMessage({id:"no_options"}),getOptionLabel:q,renderInput:t=>c.createElement(i.A,m({"data-testid":s()(`field ${e}`),label:w,required:C||d,error:H,helperText:H?I.error:null,onBlur:N},t,{size:S}))}),(null==W?void 0:W.length)>0&&c.createElement(o.A,{mt:2},c.createElement(r.A,{sx:k,openOnFocus:!0,autoHighlight:!0,disabled:b||l||p.isSubmitting,value:j,onChange:(e,t)=>D(t),onBlur:P.onBlur,id:`select-${e}`,multiple:!1,getOptionLabel:q,options:W,noOptionsText:O.formatMessage({id:"no_options"}),renderInput:e=>c.createElement(i.A,m({label:O.formatMessage({id:"state"})},e,{size:S}))})))},v=p},59560(e,t,l){l.r(t),l.d(t,{default:()=>P});var n,a,r=l(3556),i=l(60780),o=l(8051),u=l(54358),d=l(65467),s=l(20687),c=l(30261),m=l(84058),p=l.n(m),v=l(64889),g=l.n(v),f=l(62193),h=l.n(f),b=l(2404),E=l.n(b),y=l(44383),A=l.n(y),x=l(96540),C=l(44371),w=l(91557),S=l(59262),k=l(5079),_=l(58410);let R={ROW:"row"},M=(0,r.Ay)(o.A,{name:"FieldStyled",slot:"FieldSortable",shouldForwardProp:e=>"error"!==e})(({theme:e,error:t})=>({width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1),"&:hover":{cursor:"move",backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius},...t&&{flexDirection:"column"}})),O=(0,r.Ay)(o.A)(({theme:e})=>({display:"flex",alignItems:"center",width:32,minWidth:32,padding:e.spacing(1.25,.5),textAlign:"left",justifyContent:"left",overflow:"hidden"})),T=function({id:e,children:t,index:l,moveRow:n,handleDrop:a,sortable:r=!1,error:i,disable:u=!1}){let d=x.useRef(null),[{handlerId:s},c]=(0,k.H)({accept:R.ROW,collect:e=>({handlerId:e.getHandlerId()}),drop(){a()},hover(e,t){var a;if(!d.current)return;let r=e.index;if(r===l)return;let i=null===(a=d.current)||void 0===a?void 0:a.getBoundingClientRect(),o=(i.bottom-i.top)/2,u=t.getClientOffset(),s=u.y-i.top;r<l&&s<o||r>l&&s>o||(n(r,l),e.index=l)}}),[{isDragging:m},p]=(0,_.i)({type:R.ROW,item:()=>({id:e,index:l}),collect:e=>({isDragging:e.isDragging()}),canDrag:!u,end(e,t){let l=t.didDrop();l||a()}});return(p(c(d)),r)?x.createElement(M,{pt:2,ref:d,"data-handler-id":s,style:{opacity:m?0:1},error:i},x.createElement(o.A,{sx:{display:"flex",width:"100%"}},x.createElement(O,null,x.createElement(C.s4,{icon:"ico-arrows-move"})),t),!h()(i)&&x.createElement(o.A,{pl:4,width:"100%"},x.createElement(S.A,{error:i}))):x.createElement(o.A,{pt:2},t)};(n=a||(a={})).Create="new",n.Remove="remove",n.Edit="update";let I=(0,r.Ay)(i.A)(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,fontSize:e.mixins.pxToRem(13),color:e.palette.primary.main,cursor:"pointer",display:"flex",alignItems:"center",marginTop:e.spacing(.5),width:"fit-content","&:hover":{textDecoration:"underline"}})),F=(0,r.Ay)("div",{name:"AnswerItem",slot:"IconClose",shouldForwardProp:e=>"enable"!==e})(({theme:e,enable:t})=>({cursor:t?"pointer":"default",pointerEvents:t?"auto":"none",display:"flex",justifyContent:"center",alignItems:"center",width:e.spacing(5),height:e.spacing(5),margin:e.spacing(0,.5),"& .ico":{fontSize:e.mixins.pxToRem(16),color:e.palette.text.hint}})),z=({config:e,disabled:t,name:l,formik:n})=>{let{margin:r,disabled:i,fullWidth:m,hiddenLabel:v,required:f,variant:b,size:y,style:k,minLength:_,sxFieldWrapper:R,sortable:M=!0}=e,[O,z,{setValue:P,setTouched:$}]=(0,c.Mt)(null!=l?l:"DropdownField"),{i18n:B}=(0,w.PCX)(),j=x.useRef(O.value);x.useEffect(()=>{if(!O.value){var e;P([{label:"",status:a.Create,ordering:(null===(e=O.value)||void 0===e?void 0:e.length)||1}])}},[O.value]);let W=()=>{var e,t,l;let n=(null===(t=O.value)||void 0===t?void 0:null===(l=t[(null===(e=O.value)||void 0===e?void 0:e.length)-1])||void 0===l?void 0:l.ordering)+1||1,r=[...O.value,{label:"",status:a.Create,ordering:n}];P(r)},L=(e,t)=>{let l=[...O.value];l[t].label=e.target.value,O.value[t].status!==a.Create&&(l[t].status=a.Edit),P(l)},D=e=>{if(n.isSubmitting)return;let t=[...O.value];O.value[e].status===a.Create?t.splice(e,1):t[e].status=a.Remove,P(t)},q=(e,t)=>{let l=[...O.value];l.splice(t,0,l.splice(e,1)[0]),P(l=null==l?void 0:l.map((e,t)=>({...e,ordering:t+1})))},N=()=>{if(!(h()(O.value)||E()(j.current,O.value)))try{let e=g()(j.current,O.value,E()),t=[...O.value];t=null==t?void 0:t.map(t=>{let l=e.findIndex(e=>(null==t?void 0:t.id)===(null==e?void 0:e.id)),n=j.current.findIndex(e=>(null==t?void 0:t.id)===(null==e?void 0:e.id));if((null==t?void 0:t.id)&&(null==t?void 0:t.status)!==a.Remove&&l>-1){var r;return E()(A()(null===(r=j.current)||void 0===r?void 0:r[n],["id","ordering","label"]),A()(t,["id","ordering","label"]))?(delete t.status,t):{...t,status:a.Edit}}return t}),P(t)}catch(l){}},H=(e,t)=>{var l,r,i;return e&&(null==e?void 0:e.status)!==a.Remove?x.createElement(T,{sortable:M,key:null==e?void 0:e.id,index:t,id:null==e?void 0:e.id,error:z.error&&(null===(l=z.error[t])||void 0===l?void 0:l.label),moveRow:q,handleDrop:N,disable:n.isSubmitting},x.createElement(o.A,{sx:{display:"flex",width:"100%"}},x.createElement(u.A,{size:"small",fullWidth:!0,id:"outlined-basic",value:e.label,variant:"outlined",onChange:e=>L(e,t),error:(null==z?void 0:null===(r=z.error)||void 0===r?void 0:r.length)&&z.error[t],disabled:n.isSubmitting}),x.createElement(F,{onClick:()=>D(t),enable:O.value.filter(e=>e.status!==a.Remove).length>_},x.createElement(d.A,{title:B.formatMessage({id:"remove"}),placement:"top"},x.createElement(C.s4,{icon:"ico-close"})))),!M&&z.error&&x.createElement(o.A,{ml:1},x.createElement(S.A,{error:null===(i=z.error[t])||void 0===i?void 0:i.label}))):null};return x.createElement(s.A,{margin:null!=r?r:"none",disabled:i,fullWidth:m,hiddenLabel:v,required:f,style:k,size:y,variant:b,"data-testid":p()(`field ${l}`),sx:R},x.createElement(o.A,{ml:2},(O.value||[]).map((e,t)=>H(e,t)),x.createElement(I,{onClick:W,variant:"text",color:"primary",size:"small",disabled:n.isSubmitting},B.formatMessage({id:"add_options"}))))},P=z},19471(e,t,l){l.d(t,{A:()=>m});var n=l(91557),a=l(88631),r=l(8051),i=l(56449),o=l.n(i),u=l(85015),d=l.n(u),s=l(96540),c=l(90243);function m({text:e,sx:t,error:l=!1,component:i="span"}){let{i18n:u}=(0,n.PCX)();if(!e)return null;if(d()(e)&&e.startsWith("<html>"))return s.createElement(a.A,{sx:t,error:l},u.formatMessage({id:"[placeholder]",defaultMessage:e}));let m=o()(e)?e[0]:e;return s.createElement(a.A,{sx:t,error:l},s.createElement(r.A,{component:i,sx:{whiteSpace:"normal",wordBreak:"break-word",mb:.5}},s.createElement(c.Ay,{html:m})))}},59262(e,t,l){l.d(t,{A:()=>o});var n=l(96540),a=l(23805),r=l.n(a);let i=e=>e?r()(e)?i(Object.values(e)[0]):e.toString():null;function o({error:e,className:t="invalid-feedback order-last"}){return e?n.createElement("div",{"data-testid":"error",className:t},i(e)):null}},41490(e,t,l){l.r(t),l.d(t,{default:()=>s});var n=l(6325),a=l(3556),r=l(65467),i=l(30261),o=l(96540);let u=(0,a.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center"})),d=({children:e,name:t,showErrorTooltip:l})=>{let[a,d]=(0,o.useState)(!1),[,s]=(0,i.Mt)(t);return l?o.createElement(r.A,{disableHoverListener:!0,open:a&&!!(null==s?void 0:s.error),onClose:()=>d(!1),onOpen:()=>d(!0),componentsProps:{tooltip:{sx:{backgroundColor:e=>e.palette.background.paper,borderStyle:"solid",color:e=>e.palette.error.main,"& .MuiTooltip-arrow":{color:e=>e.palette.error.main}}}},title:o.createElement(u,null,o.createElement(n.A,{sx:{marginRight:.5},fontSize:"inherit"})," ",null==s?void 0:s.error)},e):e},s=d},41496(e,t,l){l.r(t),l.d(t,{default:()=>V});var n,a,r,i,o=l(3556),u=l(14767),d=l(60780),s=l(20687),c=l(8051),m=l(30261),p=l(84058),v=l.n(p),g=l(97200),f=l.n(g),h=l(58156),b=l.n(h),E=l(23181),y=l.n(E),A=l(23805),x=l.n(A),C=l(96540),w=l(91557),S=l(63461),k=l(54358),_=l(92885),R=l(65467),M=l(44371),O=l(59262),T=l(5079),I=l(58410);let F={ROW:"row"},z=(0,o.Ay)(c.A,{name:"FreeOptionsSortItem",slot:"FieldSortable",shouldForwardProp:e=>"sortable"!==e})(({theme:e,sortable:t})=>({width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1),"&:not(:first-of-type)":{marginTop:e.spacing(1)},...t&&{"&:hover":{cursor:"move"}}})),P=function({children:e,index:t,onMoveRow:l,handleDrop:n,sortable:a=!1,disabled:r=!1}){let i=C.useRef(null),[{handlerId:o},u]=(0,T.H)({accept:F.ROW,collect:e=>({handlerId:e.getHandlerId()}),drop(){n()},hover(e,n){var a;if(!i.current)return;let r=e.index;if(r===t)return;let o=null===(a=i.current)||void 0===a?void 0:a.getBoundingClientRect(),u=(o.bottom-o.top)/2,d=n.getClientOffset(),s=d.y-o.top;r<t&&s<u||r>t&&s>u||(l(r,t),e.index=t)}}),[{isDragging:d},s]=(0,I.i)({type:F.ROW,item:()=>({index:t}),collect:e=>({isDragging:e.isDragging()}),canDrag:!r,end(e,t){let l=t.didDrop();l||n()}});return(s(u(i)),a)?C.createElement(z,{sortable:!0,ref:i,"data-handler-id":o,style:{opacity:d?0:1}},e):C.createElement(z,null,e)};(n=r||(r={})).Create="new",n.Remove="remove",n.Edit="update";let $="FreeOptionsField",B=(0,o.Ay)(S.A,{name:$,slot:"IconClose",shouldForwardProp:e=>"enable"!==e})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",width:e.spacing(5),height:e.spacing(5),margin:e.spacing(0,.5),"& .ico":{fontSize:e.mixins.pxToRem(16),color:e.palette.text.hint}})),j=(0,o.Ay)(c.A,{name:$,slot:"MutipleLanguage",shouldForwardProp:e=>"minimal"!==e})(({theme:e,minimal:t})=>({display:"block",padding:e.spacing(2,1,1,1),border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,...t?{"& > .item-optional":{display:"none !important"}}:{}})),W=(0,o.Ay)(c.A,{name:$,slot:"RowItem"})(({theme:e})=>({width:"100%"})),L=e=>{let{option:t,error:l,disabled:n,onChange:a,onRemove:i,canRemove:o,sortable:u,index:d,onMoveRow:s,handleDrop:m,setTouched:p,translatableOptions:v,collapseOptions:g=!0}=e,{i18n:f}=(0,w.PCX)(),[h,E]=C.useState(!!g);if(!t||(null==t?void 0:t.status)===r.Remove)return null;let{removable:y=!0,value:A}=t;return C.createElement(P,{sortable:u,index:d,onMoveRow:s,handleDrop:m,disabled:n},C.createElement(W,null,C.createElement(c.A,{sx:{display:"flex",width:"100%",alignItems:"center"}},u?C.createElement(c.A,{sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"32px"}},C.createElement(M.s4,{icon:"ico-arrows-move",sx:{mr:1}})):null,v?C.createElement(j,{sx:{flex:1,minWidth:0,"& > .item":{"& + .item":{mt:2}}},minimal:h},v.map(e=>C.createElement(c.A,{key:e.value,className:e.required?"item":"item item-optional"},C.createElement(k.A,{size:"small",fullWidth:!0,id:"outlined-basic",value:b()(A,e.value),variant:"outlined",onChange:t=>a({[e.value]:t.target.value}),error:b()(l,`value.${e.value}`),disabled:n,onBlur(){p(!0)},required:e.required,label:e.label}),b()(l,`value.${e.value}`)?C.createElement(O.A,{error:b()(l,`value.${e.value}`)}):null)),g?C.createElement(c.A,{mt:1},C.createElement(_.A,{color:"primary",component:"span",onClick(){E(e=>!e)},style:{cursor:"pointer"},variant:"body2"},f.formatMessage({id:h?(null==g?void 0:g.more_label)||"view_more":(null==g?void 0:g.less_label)||"view_less"}))):null):C.createElement(c.A,{sx:{flex:1,minWidth:0,width:"100%"}},C.createElement(k.A,{size:"small",fullWidth:!0,id:"outlined-basic",value:A,variant:"outlined",onChange:e=>a(e.target.value),error:l,disabled:n,onBlur(){p(!0)}}),b()(l,"value")?C.createElement(O.A,{error:b()(l,"value")}):null),C.createElement(R.A,{title:f.formatMessage({id:"remove"}),placement:"top"},C.createElement(B,{onClick:i,disabled:!o||!y},C.createElement(M.s4,{icon:"ico-close"}))))))};var D=l(16535),q=l(19471);(a=i||(i={})).Create="new",a.Remove="remove",a.Edit="update";let N="FreeOptionsField",H=(0,o.Ay)(u.A,{name:N})(({theme:e})=>({display:"block",marginBottom:e.spacing(1)})),X=(0,o.Ay)(d.A,{name:N,slot:"MoreButton"})(({theme:e})=>({marginTop:e.spacing(.5)})),U=({config:e,disabled:t,required:l,name:n,formik:a})=>{let{label:r,margin:o,disabled:u,fullWidth:d,required:p,variant:g,size:h,style:E,minLength:A,sxFieldWrapper:S,sortable:k,translatableOptions:_,description:R,collapseOptions:M}=e,[O,T,{setValue:I,setTouched:F}]=(0,m.Mt)(null!=n?n:"DropdownField"),z=t||u||a.isSubmitting,P=(null==O?void 0:O.value)||[],$=!!_,{i18n:B}=(0,w.PCX)();C.useEffect(()=>{(null==O?void 0:O.value)||!(A>0)||I(y()(0,A).map((e,t)=>({uid:f()("freeOption"),value:$?{}:"",status:i.Create,ordering:t+1})))},[]);let j=()=>{let e=[...P.filter(e=>e.status!==i.Remove),{uid:f()("freeOption"),value:"",status:i.Create},...P.filter(e=>e.status===i.Remove)].map((e,t)=>({...e,ordering:t+1}));I(e)},W=(e,t)=>{P[t]&&I((0,D.Ay)(P,l=>{var n;l[t]={status:i.Edit,...l[t],value:x()(e)?{...null===(n=l[t])||void 0===n?void 0:n.value,...e}:e}}))},N=e=>{!z&&P[e]&&I((0,D.Ay)(P,t=>{t[e].status===i.Create?t.splice(e,1):(t[e].status=i.Remove,t.push(t.splice(e,1)[0])),t.forEach((e,l)=>{let n=l+1;if(t[l].ordering!==n){var a;t[l].ordering=n,t[l].status=null!==(a=t[l].status)&&void 0!==a?a:i.Edit}})}))},U=(e,t)=>{let l=[...O.value];l.splice(t,0,l.splice(e,1)[0]),I(l=null==l?void 0:l.map((e,t)=>({status:i.Edit,...e,ordering:t+1})))},V=()=>{},K=P.filter(e=>e.status!==i.Remove).length>A,Z=!!(T.error&&(T.touched||a.submitCount));return C.createElement(s.A,{margin:null!=o?o:"none",disabled:z,fullWidth:d,required:p,style:E,size:h,variant:g,"data-testid":v()(`field ${n}`),sx:S},C.createElement(c.A,null,r?C.createElement(H,{focused:!1,required:p||l},r):null,R?C.createElement(q.A,{text:R,sx:{mb:1}}):null,P.map((e,t)=>C.createElement(L,{index:t,option:e,error:Z?b()(T.error,`${t}`):void 0,disabled:z,onChange:e=>W(e,t),onRemove:()=>N(t),canRemove:K,sortable:k,key:(null==e?void 0:e.id)||(null==e?void 0:e.uid),onMoveRow:U,handleDrop:V,setTouched:F,translatableOptions:_,collapseOptions:M})),C.createElement(X,{onClick:j,variant:"text",color:"primary",size:"small",disabled:z},B.formatMessage({id:"add_options"}))))},V=U},13948(e,t,l){l.r(t),l.d(t,{StyledTextField:()=>A,default:()=>w});var n=l(91557),a=l(3556),r=l(54358),i=l(18727),o=l(30261),u=l(84058),d=l.n(u),s=l(38221),c=l.n(s),m=l(56449),p=l.n(m),v=l(96540),g=l(44371),f=l(8051);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let b=(0,a.Ay)("div",{name:"ItemWrapper"})(({theme:e})=>({marginLeft:e.spacing(1),flex:1,minWidth:0})),E=({props:e,value:t})=>{if(!t)return null;let{statistic:l,full_name:n,title:a}=t;return v.createElement(f.A,h({component:"div"},e),v.createElement(g.Qm,null,v.createElement(g.H8,{user:t,size:40})),v.createElement(b,null,v.createElement(g.p4,null,v.createElement(g.Et,null,n||a),v.createElement(g.CN,null,v.createElement(g.C8,{values:l,display:"total_mutual"})))))};function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let A=(0,a.Ay)(r.A,{name:"StyledTextField"})(({theme:e})=>({"& input::placeholder":{color:e.palette.text.secondary},"& .MuiInputLabel-outlined":{transform:"translate(16px, 16px)"},"& .MuiInputLabel-outlined.MuiInputLabel-shrink":{transform:"translate(14px, -6px) scale(0.8667)",backgroundColor:e.palette.background.paper,paddingRight:e.spacing(.5)},"& .MuiOutlinedInput-root":{minHeight:e.spacing(6),borderRadius:e.spacing(.5),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},"& .MuiFormHelperText-root":{color:e.palette.grey[500]},"& .MuiOutlinedInput-input":{padding:e.spacing(0,2),height:13},"& .MuiAutocomplete-endAdornment":{top:"auto"}})),x=(0,a.Ay)("div",{name:"FriendPickerField"})(({theme:e})=>({padding:e.spacing(2,0,1)})),C=({config:e,name:t,disabled:l,formik:a})=>{var r,u;let{label:s,placeholder:m,multiple:g,disabled:f,api_endpoint:h="/friend",apiParams:b={limit:10},resetWhenUnmount:C=!1,noOptionsText:w}=e,S=v.useRef(""),[k,_,{setValue:R,setTouched:M}]=(0,o.Mt)(null!=t?t:"FriendPickerField"),{apiClient:O,i18n:T}=(0,n.PCX)(),[I,F]=v.useState([]),[z,P]=v.useState(g?[]:null),[$,B]=v.useState(!1),j=v.useMemo(()=>{let e=()=>{B(!0),O.get(h,{params:{...b,q:S.current||void 0}}).then(e=>e.data.data).then(e=>p()(e)&&F(e)).finally(()=>{B(!1)})};return c()(e,200)},[O,S]),W=(e,t)=>{S.current=t,j()},L=e=>{13===e.keyCode&&e.preventDefault()},D=(e,t)=>{(null==_?void 0:_.touched)||M(!0),t&&(P(t),R(t))};return(0,v.useEffect)(()=>{j()},[]),(0,v.useEffect)(()=>{if(k.value)return P(k.value),()=>{C&&R({})}},[]),v.createElement(x,null,v.createElement(i.A,{clearText:T.formatMessage({id:"clear"}),closeText:T.formatMessage({id:"close"}),openText:T.formatMessage({id:"open"}),multiple:g,id:k.name,options:I,loading:$,loadingText:T.formatMessage({id:"loading_dots"}),disabled:f||l||a.isSubmitting,value:z,onChange:D,onInputChange:W,"data-testid":d()(`field ${t}`),disableCloseOnSelect:g,limitTags:3,isOptionEqualToValue:(e,t)=>(null==e?void 0:e.id)===(null==t?void 0:t.id),getOptionLabel:e=>null!==(u=null!==(r=null==e?void 0:e.full_name)&&void 0!==r?r:null==e?void 0:e.title)&&void 0!==u?u:"",filterSelectedOptions:g,noOptionsText:w||T.formatMessage({id:"no_friends_found"}),renderOption:(e,t)=>v.createElement(E,{key:t.id,props:e,value:t}),renderInput:e=>v.createElement(A,y({},e,{onKeyDown:L,variant:"outlined",label:s,"data-testid":d()(`input ${t}`),placeholder:g&&(null==z?void 0:z.length)?"":m}))}))},w=C},51766(e,t,l){l.r(t),l.d(t,{default:()=>s});var n=l(87773),a=l(96540),r=l(84058),i=l.n(r),o=l(91557);let u=({price:e,pattern:t,label:l})=>e&&t?`${l} <b>${t.replace(/{3\}/gi,e)}</b>`:l,d=({config:e,name:t,disabled:l,formik:r})=>{let{i18n:d}=(0,o.PCX)(),{feePercentage:s,exchangeRate:c,exchangeRatePattern:m={decimal_separator:".",pattern:"",precision:2,thousand_separator:","},relatedField:p="points",testid:v,label:g,variant:f,tagName:h="span"}=e,b=isNaN(r.values[p])?0:r.values[p];return a.createElement(n.A,{"data-testid":i()(`field ${v}`),variant:f,component:h},a.createElement("div",{dangerouslySetInnerHTML:{__html:u({price:d.formatNumber(b*c*(1-s),{maximumFractionDigits:m.precision,minimumFractionDigits:m.precision}),pattern:m.pattern,label:g})}}))},s=d},73696(e,t,l){l.r(t),l.d(t,{default:()=>r});var n=l(26287);let a=(0,n.Ay)({resolved:{},chunkName:()=>"FormEditor",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!l.m[t]},importAsync:()=>Promise.all([l.e("vendors-node_modules_lexical_code_LexicalCode_js-node_modules_lexical_mark_LexicalMark_js-nod-dd6432"),l.e("FormEditor")]).then(l.bind(l,70418)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return l(t)},resolve:()=>70418}),r=a},75622(e,t,l){l.r(t),l.d(t,{default:()=>S});var n=l(3556),a=l(8051),r=l(87773),i=l(67131),o=l(30261),u=l(84058),d=l.n(u),s=l(96540),c=l(91557),m=l(44371),p=l(63461),v=l(20053),g=l(62193),f=l.n(g);let h=(0,n.Ay)("div",{name:"SimpleCategoryField",slot:"itemLink",overridesResolver:(e,t)=>[t.itemLink]})(({theme:e})=>({cursor:"pointer",fontSize:e.mixins.pxToRem(15),display:"flex",flexDirection:"row",alignItems:"center",color:"light"===e.palette.mode?e.palette.text.primary:e.palette.text.secondary,textDecoration:"none",position:"relative"}));function b({item:e,handleSelect:t,active:l,classes:n}){var a;let[r,i]=s.useState(!1),{usePageParams:o}=(0,c.PCX)(),{category_id:u,forum_id:d}=o(),g=null!=u?u:d,[E,y]=s.useState(!1);s.useEffect(()=>{var t;if((null==e?void 0:null===(t=e.subs)||void 0===t?void 0:t.length)>0&&e.subs.filter(e=>e.id.toString()===g).length>0){i(!0),y(!0);return}y(!1)},[g]);let A=s.useCallback(()=>{i(e=>!e)},[]);return s.createElement("div",{className:n.item},s.createElement("div",{className:(0,v.default)(!f()(e.subs)&&n.hasSubs,(l||E&&!r)&&n.itemActive)},s.createElement(h,{"data-testid":"itemCategory",onClick:()=>t(e.id,e.resource_name),className:n.link,color:"inherit","aria-selected":l,"aria-label":e.name},s.createElement("span",{className:n.span},e.name)),f()(e.subs)?null:s.createElement(p.A,{size:"small",className:n.icon,onClick:A},s.createElement(m.s4,{icon:r?"ico-angle-up":"ico-angle-down"}))),r&&(null==e?void 0:null===(a=e.subs)||void 0===a?void 0:a.length)>0?s.createElement("ul",{className:n.subCategory},null==e?void 0:e.subs.map((e,l)=>s.createElement(b,{item:e,key:l.toString(),classes:n,handleSelect:()=>t(e.id,e.resource_name),active:e.id.toString()===g}))):null)}var E=l(56525),y=l(85838);let A=(0,E.A)(e=>(0,y.A)({item:{"& $link":{height:e.spacing(7),padding:e.spacing(0,0,0,2),flex:1,minWidth:0,"&:hover":{backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius}}},hasSubs:{display:"flex",alignItems:"center"},link:{},itemActive:{"& $link":{color:e.palette.primary.main,fontWeight:e.typography.fontWeightBold}},span:{},subCategory:{paddingLeft:e.spacing(0),margin:0,listStyle:"none","& span":{paddingLeft:e.spacing(2)}},icon:{position:"absolute",width:32,height:32,right:e.spacing(1),"& .ico":{fontSize:e.mixins.pxToRem(15)}}})),x="SimpleCategoryField",C=(0,n.Ay)(a.A,{name:x,slot:"boxDivider",overridesResolver:(e,t)=>[t.boxDivider]})(({theme:e})=>({paddingTop:e.spacing(2),paddingBottom:e.spacing(2)})),w=(0,n.Ay)(r.A,{name:x,slot:"titleCategoryField",overridesResolver:(e,t)=>[t.titleCategoryField]})(({theme:e})=>({paddingBottom:e.spacing(1)}));function S({config:{label:e,dataSource:t=[],defaultValue:l},name:n}){let a=A(),[r,,{setValue:u}]=(0,o.Mt)(n),c=s.useCallback(e=>{u(e)},[]);return s.createElement("div",{"data-testid":d()(`field ${n}`)},s.createElement(C,null,s.createElement(i.A,null)),s.createElement(w,{component:"h4",variant:"h4",color:"textPrimary"},e),s.createElement("div",null,t.map(e=>s.createElement(b,{classes:a,item:e,handleSelect:c,key:e.id,active:e.id===r.value}))))}},2048(e,t,l){l.r(t),l.d(t,{default:()=>x});var n=l(91557),a=l(3556),r=l(54358),i=l(20687),o=l(18727),u=l(87773),d=l(30261),s=l(84058),c=l.n(s),m=l(56449),p=l.n(m),v=l(63375),g=l.n(v),f=l(96540),h=l(59262);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let E=(0,a.Ay)(r.A,{name:"Text"})(({theme:e})=>({"& p, input::placeholder":{color:e.palette.text.hint}})),y={size:"small",variant:"outlined"},A=e=>{let t=e.filter(e=>e.trim().length>0);return t},x=function({config:e,name:t,disabled:l,formik:a}){let{variant:r="outlined",label:s,size:m="medium",margin:v="normal",disabled:x,placeholder:C,description:w,required:S,fullWidth:k=!0,search_endpoint:_,disableSuggestion:R=!1,allowSpaceNewTag:M=!1}=e,{i18n:O}=(0,n.PCX)(),[T,I,{setValue:F,setTouched:z}]=(0,d.Mt)(null!=t?t:"tags"),[P,$]=f.useState(""),B=(null==T?void 0:T.value)||[],j=!!(I.error&&(I.touched||a.submitCount)),W=f.useMemo(()=>T.value&&p()(T.value)?T.value:[],[]),L=(e,t)=>{null==e||e.preventDefault(),(null==e?void 0:e.type)!=="blur"&&(F(A(t)),$(""))},[D,q]=(0,n.Pth)({apiUrl:_}),N=e=>{T.onBlur(e),z(!0),P&&!(T.value||[]).includes(P)&&(F(A((T.value||[]).concat([P]))),$(""))},H=e=>{if(P)switch(null==e?void 0:e.keyCode){case 9:if(e.preventDefault(),(T.value||[]).includes(P))break;L(e,(T.value||[]).concat([P])),$("");break;case 32:if(M){if(e.preventDefault(),(T.value||[]).includes(P))break;L(e,(T.value||[]).concat([P])),$("")}}},X=(e,t)=>{L(e,B.concat(g()(t.map(e=>e.trim())).filter(e=>e&&!B.includes(e))))};return f.createElement(i.A,{variant:r,margin:v,fullWidth:k,size:m,"data-testid":c()(`field ${t}`)},f.createElement(o.A,{clearText:O.formatMessage({id:"clear"}),closeText:O.formatMessage({id:"close"}),openText:O.formatMessage({id:"open"}),multiple:!0,freeSolo:!0,autoSelect:!0,value:T.value||[],selectOnFocus:!1,filterSelectedOptions:!0,onBlur:N,id:`tags-${t}`,options:R?[]:D.items,ChipProps:y,disabled:x||l||a.isSubmitting,onInputChange(e,t){let l=t.split(",");if(l.length>1){X(e,l);return}$(t||""),R||q(t,{})},inputValue:P||"",defaultValue:W,onChange:(e,t)=>L(e,t),renderInput(e){var l;return f.createElement(E,b({},e,{required:S,label:s,placeholder:(null==T?void 0:null===(l=T.value)||void 0===l?void 0:l.length)?"":C,inputProps:{...e.inputProps,"data-testid":c()(`input ${t}`)},error:j,onKeyDown:H}))}}),j?f.createElement(h.A,{error:I.error}):null,w?f.createElement(u.A,{sx:{fontSize:"13px"},color:"text.hint",mt:1},w):null)}},22269(e,t,l){l.r(t),l.d(t,{default:()=>A});var n=l(30261),a=l(84058),r=l.n(a),i=l(85015),o=l.n(i),u=l(96540),d=l(91557),s=l(44371),c=l(3556),m=l(63461),p=l(65467);let v=(0,c.Ay)(m.A,{name:"TextareaControl",slot:"IconButtonStyled"})(({theme:e})=>({padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",width:e.spacing(3.5),height:e.spacing(3.5),minWidth:e.spacing(3.5),color:`${e.palette.text.secondary} !important`})),g=(0,c.Ay)(s.s4,{name:"TextAreaControlEmoji",slot:"LineIconStyled"})(({theme:e})=>({fontSize:e.mixins.pxToRem(14),[e.breakpoints.down("sm")]:{fontSize:e.mixins.pxToRem(16)}})),f=u.forwardRef(function({title:e,icon:t,onClick:l,testid:n},a){return u.createElement(p.A,{title:e},u.createElement(v,{onClick:l,size:"smaller",ref:a,"data-testid":n,role:"button"},u.createElement(g,{icon:t})))});var h=l(54358),b=l(8051);let E=(0,c.Ay)(h.A,{name:"Text"})(({theme:e})=>({"& p, textarea::placeholder":{color:e.palette.text.hint}})),y=({config:e,disabled:t,required:l,name:a,formik:i})=>{let[s,c,{setValue:m}]=(0,n.Mt)(null!=a?a:"TextField"),p=u.useRef(),{label:v,disabled:g,labelProps:h,placeholder:y,variant:A,margin:x="normal",fullWidth:C,type:w="text",rows:S=5,description:k,autoFocus:_,required:R,maxLength:M,enableEmoji:O=!1}=e,{jsxBackend:T}=(0,d.PCX)(),I=T.get("textArea.control.attachEmoji");if(!s.value){var F;s.value=null!==(F=e.defaultValue)&&void 0!==F?F:""}let z=Boolean(c.error&&(c.touched||i.submitCount)),P=e=>{let t;if(!(null==p?void 0:p.current))return;let l=p.current,n=l.selectionEnd;m(t=n||0===n?l.value.substring(0,n)+e+l.value.substring(n,l.value.length):(l.value||"")+e),l.value=t,l.selectionEnd=n+e.length},$=e=>{o()(s.value)&&m(s.value.trim()),s.onBlur(e)};return(0,u.createElement)(E,{...s,required:R||l,multiline:!0,disabled:g||t||i.isSubmitting,variant:A,label:v,"data-testid":r()(`field ${a}`),autoFocus:_,inputProps:{"data-testid":r()(`input ${a}`),maxLength:M,ref:p},rows:S,InputLabelProps:h,placeholder:y,margin:x,error:!!z&&c.error,fullWidth:C,type:w,helperText:z?c.error:k,onBlur:$,InputProps:{endAdornment:O&&I?u.createElement(b.A,{sx:{position:"absolute",bottom:0,right:"8px"}},u.createElement(I,{control:f,onChange:P})):null}})},A=y},38581(e,t,l){l.d(t,{A:()=>i});var n=l(87116),a=l(96540),r=l(90243);function i({warning:e}){return e?a.createElement(n.A,{color:"warning",variant:"standard",sx:{fontSize:"small",my:1,p:.5,alignItems:"center"}},a.createElement(r.Ay,{html:e||""})):null}},56753(e,t,l){l.r(t),l.d(t,{default:()=>O});var n=l(3556),a=l(54358),r=l(20687),i=l(87773),o=l(57315),u=l(30261),d=l(84058),s=l.n(d),c=l(58156),m=l.n(c),p=l(62193),v=l.n(p),g=l(85015),f=l.n(g),h=l(99374),b=l.n(h),E=l(19471),y=l(41490),A=l(38581),x=l(96540),C=l(91557),w=l(34978),S=l(90243);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let _=({price:e,pattern:t})=>!e||v()(t)?0:t.replace(/{3\}/gi,`<b>${e}</b>`),R=(0,n.Ay)(a.A,{name:"Text"})(({theme:e})=>({"& p, input::placeholder":{color:e.palette.text.hint}})),M=({config:e,disabled:t,required:l,name:n,formik:a})=>{var d,c;let[p,v,{setValue:g}]=(0,u.Mt)(null!=n?n:"TextField"),[h]=(0,u.Mt)(null==e?void 0:e.relatedFieldName),{relatedFieldConfigs:M}=e,O=h?m()(M,null==h?void 0:h.value):{},T={...e,...O},{label:I,disabled:F,autoComplete:z,placeholder:P,variant:$,margin:B,fullWidth:j,type:W="number",rows:L,size:D,required:q,multiline:N,description:H,autoFocus:X,readOnly:U,maxLength:V,hasFormLabel:K=!1,showErrorTooltip:Z=!1,sx:Q,sxFieldWrapper:G,preventScrolling:J=!1,startAdornment:Y,endAdornment:ee,min:et,max:el,warning:en,defaultValue:ea,inputLabelProps:er={},className:ei,balanceDescription:eo,amountCalculation:eu,...ed}=T,{percentageFee:es,currencyFormattedPattern:ec,totalPhrase:em,description:ep}=eu||{},{i18n:ev}=(0,C.PCX)(),eg="number"===W,ef=!!(v.error&&(v.touched||a.submitCount));z&&X&&(ef=ef&&void 0!==p.value),x.useEffect(()=>{void 0===p.value&&a.submitCount&&z&&X&&g("")},[a.submitCount]);let eh=e=>{f()(p.value)&&g(p.value.trim()),p.onBlur(e)},eb=!Z&&ef&&v.error;return x.createElement(r.A,{margin:B,variant:$,fullWidth:j,"data-testid":s()(`field ${n}`),sx:G,id:n},eo?x.createElement(i.A,{mb:2},x.createElement(S.Ay,{html:eo||""})):null,x.createElement(y.default,{name:p.name,showErrorTooltip:Z},x.createElement(R,k({},ed,{value:null!==(d=p.value)&&void 0!==d?d:"",name:p.name,onChange:p.onChange,onKeyDown:eg?e=>{e.ctrlKey||e.metaKey||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Delete"===e.key||"Backspace"===e.key||"Tab"===e.key||"Enter"===e.key||"."===e.key||/[0-9]/.test(e.key)||e.preventDefault()}:void 0,onWheel(e){var t;return J&&(null===(t=e.target)||void 0===t?void 0:t.blur())},error:ef,multiline:!!(L&&N),disabled:F||t||a.isSubmitting,required:q||l,size:D,onBlur:eh,InputProps:{startAdornment:Y?x.createElement(o.A,{position:"start"},Y):null,endAdornment:ee?x.createElement(o.A,{position:"end"},ee):null},inputProps:{..."number"===W?{min:et,max:el}:{},readOnly:U,autoFocus:X,autoComplete:z,maxLength:V,"data-testid":s()(`input ${n}`)},InputLabelProps:{shrink:p.value||eg&&ef||void 0,...Object.assign({},er)},label:K?void 0:I,rows:L,placeholder:null!=P?P:I,type:W,defaultValue:null!==(c=p.value)&&void 0!==c?c:ea,helperText:x.createElement(x.Fragment,null,H?x.createElement(E.A,{text:H}):null,eb?x.createElement(E.A,{text:v.error,error:!0}):null),variant:$,sx:Q,className:ei}))),ep?x.createElement(i.A,{mt:1},x.createElement(S.Ay,{html:ep||""})):null,em?x.createElement(i.A,{mt:1},x.createElement("div",{dangerouslySetInnerHTML:{__html:ev.formatMessage({id:em},{value:_({price:(0,w.CZ)({number:b()(p.value||0)*(1-es),thousand_separator:null==ec?void 0:ec.thousand_separator,precision:null==ec?void 0:ec.precision,decimal_separator:null==ec?void 0:ec.decimal_separator}),pattern:null==ec?void 0:ec.pattern})})}})):null,x.createElement(A.A,{warning:en}))},O=M},34978(e,t,l){l.d(t,{CZ:()=>m,Cq:()=>c,T3:()=>s}),l(87612);var n=l(56449),a=l.n(n);l(62193),l(1882),l(64846);var r=l(11741),i=l.n(r),o=l(98023),u=l.n(o);l(85015),l(75866),l(40860);let d=e=>{let{type:t,elements:l,name:n,renderer:a,validation:r}=e;if("field"===t&&r)return{[n]:r};let i=reduce(l,(e={},t,l)=>({...e,...d(t)}),{}),o={};return"editable-grid"!==a||isEmpty(i)?!isEmpty(i)&&n?o[n]=[["object",i]]:o={...o,...i}:o[n]=[["array",[["object",i]]]],o};function s(e,t="-"){if(!e)return"";let l={"&":"and"};return e=encodeURIComponent(e=(e=(e=(e=(e=e.replace(/[&]/g,e=>l[e])).toLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d").replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"").replace(/\u02C6|\u0306|\u031B/g,"")).normalize("NFKD").replace(RegExp("\\p{Diacritic}","gu"),"")).replace(/[^a-zA-Z0-9 ]/g,"")).trim().replaceAll(/\s+/g,t))}function c(e,t=[],l="-"){if(!e)return"";let n="[]";t&&a()(t)&&(n=`[${t.join("")}]`);let r=RegExp(n,"g");return e=(e=e.trim().replaceAll(/\s+/g,l)).replaceAll(r,l)}function m({number:e,thousand_separator:t=",",decimal_separator:l=".",precision:n}){(i()(e)||!u()(e))&&(e=0),e=n?e.toFixed(n):e;let a=e.toString().split("."),r=a[0],o=a[1];return r.replace(/\B(?=(\d{3})+(?!\d))/g,t)+(o?`${l}${o}`:"")}}}]);