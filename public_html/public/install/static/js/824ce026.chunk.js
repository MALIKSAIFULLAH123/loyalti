"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["formElement"],{46112(e,t,l){l.r(t),l.d(t,{default:()=>x});var a=l(3556),n=l(8051),i=l(30719),r=l(20687),o=l(54358),s=l(89481),d=l(63461),u=l(30261),c=l(84058),m=l.n(c),p=l(62193),g=l.n(p),v=l(96540),f=l(59262),h=l(91557),y=l(44371);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e}).apply(this,arguments)}let E=(0,a.Ay)(n.A,{name:"CaptchaContent"})(({theme:e})=>({"& img":{maxWidth:"100%"}})),A=({config:e,disabled:t,required:l,name:a,formik:c})=>{let{margin:p,fullWidth:A,disabled:x,img:_,key:C,required:w=!0,label:S,placeholder:k,actionName:M,autoFocus:I}=e,[R,T]=(0,u.Mt)(null!=a?a:"image_captcha"),{apiClient:z,compactData:$}=(0,h.PCX)(),[P,F]=v.useState(!1),[W,B]=v.useState(_),O=v.useRef(!1),L=(0,i.A)(),[q,j]=v.useState(C),D=(0,h.IgF)("captcha","image_captcha","refreshCaptcha"),N=()=>{!P&&D&&(F(!0),z.request({method:D.apiMethod||"POST",url:D.apiUrl,data:$(D.apiParams,{action_name:M})}).then(e=>e.data.data).then(e=>{e&&(j(null==e?void 0:e.key),B(null==e?void 0:e.img))}).finally(()=>{F(!1)}))},V=Boolean(T.error&&(T.touched||c.submitCount));return(v.useEffect(()=>{(null==c?void 0:c.isSubmitting)&&(null==c?void 0:c.isValid)&&(O.current=!0)},[null==c?void 0:c.isSubmitting,null==c?void 0:c.isValid]),v.useEffect(()=>{(null==c?void 0:c.isSubmitting)||!O.current||g()(null==c?void 0:c.errors)||(O.current=!1,N())},[O.current,null==c?void 0:c.isSubmitting,null==c?void 0:c.errors]),v.useEffect(()=>{((null==T?void 0:T.touched)||I)&&q&&c.setFieldValue("image_captcha_key",q,!1)},[null==T?void 0:T.touched,q,I]),v.useEffect(()=>{q||N()},[]),x||t)?null:v.createElement(r.A,{margin:p,fullWidth:A,"data-testid":m()(`field ${a}`)},v.createElement(n.A,{sx:{display:"flex"}},v.createElement(n.A,{sx:{display:"flex",alignItems:"center"}},v.createElement(n.A,{sx:{maxWidth:"50%"}},v.createElement(o.A,b({},R,{error:V,required:w||l,inputProps:{"data-testid":m()(`input ${a}`)},label:S,placeholder:k,autoFocus:I}))),v.createElement(E,{ml:1,sx:{flex:1,minWidth:0,position:"relative",display:"flex"}},P?v.createElement(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,right:0,bottom:0,background:"dark"===L.palette.mode?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.5)"}},v.createElement(s.A,{size:16})):null,v.createElement("img",{src:W,alt:""})),v.createElement(n.A,{sx:{minWidth:"40px"}},v.createElement(d.A,{size:"medium",color:"primary",onClick:N},v.createElement(y.s4,{icon:"ico-rotate-right"}))))),V?v.createElement(f.A,{error:T.error}):null)},x=A},59262(e,t,l){l.d(t,{A:()=>o});var a=l(96540),n=l(23805),i=l.n(n);let r=e=>e?i()(e)?r(Object.values(e)[0]):e.toString():null;function o({error:e,className:t="invalid-feedback order-last"}){return e?a.createElement("div",{"data-testid":"error",className:t},r(e)):null}},60784(e,t,l){l.r(t),l.d(t,{default:()=>I});var a=l(91557),n=l(3556),i=l(8051),r=l(87773),o=l(67131),s=l(30261),d=l(84058),u=l.n(d),c=l(58156),m=l.n(c),p=l(96540),g=l(44371),v=l(63461),f=l(20053),h=l(62193),y=l.n(h);let b=(0,n.Ay)("div",{name:"FilterCategoryField",slot:"itemCategoryFilter",overridesResolver:(e,t)=>[t.itemCategoryFilter]})(({theme:e})=>({"&.hasSubs":{display:"flex",alignItems:"center","& > div":{paddingRight:e.spacing(5)}},"&.itemActive":{"& > div":{color:e.palette.primary.main,fontWeight:e.typography.fontWeightBold}}})),E=(0,n.Ay)("div")(({theme:e})=>({minHeight:e.spacing(7),flex:1,minWidth:0,padding:e.spacing(1,2),"&:hover":{backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius},cursor:"pointer",fontSize:e.mixins.pxToRem(15),display:"flex",flexDirection:"row",alignItems:"center",color:"light"===e.palette.mode?e.palette.text.primary:e.palette.text.secondary,textDecoration:"none",position:"relative"})),A=(0,n.Ay)(v.A)(({theme:e})=>({position:"absolute",width:32,height:32,right:e.spacing(1),"& .ico":{fontSize:e.mixins.pxToRem(15),paddingLeft:0}})),x=(0,n.Ay)("ul")(({theme:e})=>({borderLeft:`1px solid ${e.palette.border.secondary}`,listStyle:"none",margin:e.spacing(0,0,0,2),padding:"0 0 0 2px"})),_=(e,t)=>{var l;return!!((null==e?void 0:null===(l=e.subs)||void 0===l?void 0:l.length)>0&&e.subs.some(e=>e.id.toString()===t||_(e,t)))};function C({item:e,handleSelect:t,active:l,classes:a,category_id:n}){var r;let[o,s]=p.useState(!1);p.useEffect(()=>{if(_(e,n)){s(!0);return}},[n]);let d=p.useCallback(()=>{s(e=>!e)},[]),u=(e,l)=>{t(e,l)};return p.createElement(i.A,null,p.createElement(b,{className:(0,f.default)(!y()(e.subs)&&"hasSubs",l&&"itemActive")},p.createElement(E,{onClick:()=>u(e.id,e.resource_name),"data-testid":"itemCategory",color:"inherit","aria-selected":l,"aria-label":e.name},p.createElement("span",null,e.name)),y()(e.subs)?null:p.createElement(A,{size:"small",onClick:d},p.createElement(g.s4,{icon:o?"ico-angle-up":"ico-angle-down"}))),o&&(null==e?void 0:null===(r=e.subs)||void 0===r?void 0:r.length)>0?p.createElement(x,null,null==e?void 0:e.subs.map((e,t)=>p.createElement("div",{key:e.id},p.createElement(C,{item:e,classes:a,handleSelect:u,active:e.id.toString()===n,category_id:n})))):null)}let w="FilterCategoryField",S=(0,n.Ay)(i.A,{name:w,slot:"dividerCategory",overridesResolver:(e,t)=>[t.dividerCategory]})(({theme:e})=>({paddingTop:e.spacing(2),paddingBottom:e.spacing(2)})),k=(0,n.Ay)(r.A,{name:w,slot:"titleCategoryFilter",overridesResolver:(e,t)=>[t.titleCategoryFilter]})(({theme:e})=>({paddingBottom:e.spacing(1)})),M=(0,n.Ay)(i.A,{name:w,slot:"menuCategoryFilter",overridesResolver:(e,t)=>[t.menuCategoryFilter]})(({theme:e})=>({paddingBottom:e.spacing(3)}));function I({config:{label:e,apiUrl:t,dataSource:l=[],defaultValue:n},name:i}){let[,,{setValue:r}]=(0,s.Mt)(i),{useFetchItems:d,usePageParams:c,i18n:g}=(0,a.PCX)(),v=c(),f=m()(v,i),[h]=d({dataSource:{apiUrl:t},data:[],cache:!0}),y=h.length>0?h:l,b=p.useCallback(e=>{r(e)},[]),E=p.useCallback(()=>{r(void 0)},[]);return p.createElement("div",{"data-testid":u()(`field ${i}`)},p.createElement(S,{sx:{pt:2,pb:2}},p.createElement(o.A,null)),p.createElement(k,{component:"h4",variant:"h4",color:"textPrimary",sx:{pb:1}},e),p.createElement(M,null,y&&y.length?p.createElement(C,{item:{name:g.formatMessage({id:"all"})},handleSelect:E,key:"all",active:!f,category_id:f}):null,y.map(e=>p.createElement(C,{item:e,handleSelect:b,key:e.id,active:f===String(e.id),category_id:f}))))}},96456(e,t,l){l.r(t),l.d(t,{default:()=>b});var a=l(72871),n=l(91557),i=l(3556),r=l(8051),o=l(60780),s=l(84058),d=l.n(s),u=l(62193),c=l.n(u),m=l(55378),p=l.n(m),g=l(96540);let v=(0,i.Ay)("div",{name:"StyledItemView"})(({theme:e})=>{var t;return{display:"flex",alignItems:"baseline",width:"100%",justifyContent:"flex-start",padding:e.spacing(2.75,0),[e.breakpoints.down("sm")]:{display:"block"},"&+div":{borderTop:"solid 1px",borderTopColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary}}}),f=(0,i.Ay)("div",{name:"StyledItemView",slot:"StyledTitle"})(({theme:e})=>({width:300,fontSize:e.typography.body1.fontSize,lineHeight:1.6,fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary})),h=(0,i.Ay)("div",{name:"StyledItemView",slot:"StyledContent"})(({theme:e})=>({padding:e.spacing(0,2),width:"100%",fontSize:e.typography.body1.fontSize,lineHeight:1.6,color:e.palette.text.primary})),y=(0,i.Ay)("div",{name:"StyledItemView",slot:"StyledContentInner"})(({theme:e})=>({display:"flex",flexDirection:"column","& button":{marginRight:e.spacing(1)},"& div:first-of-type":{marginTop:0,marginBottom:0}}));function b({config:e,formik:t,name:l}){let{i18n:i}=(0,n.PCX)(),[s,u]=(0,g.useState)(!1),m=()=>u(!0),b=()=>{t.submitForm().then(e=>{c()(t.errors)&&u(!1)})},E=()=>u(!1),{label:A,value:x,elements:_}=e;return g.createElement(v,{"data-testid":d()(`field ${l}`)},g.createElement(f,null,A),g.createElement(h,null,s?g.createElement(y,null,p()(_,(e,l)=>g.createElement(a.Hg,{formik:t,key:l.toString(),config:e})),g.createElement(r.A,{sx:{my:1}},g.createElement(o.A,{variant:"contained",onClick:b},i.formatMessage({id:"save"})),g.createElement(o.A,{variant:"outlined",onClick:E},i.formatMessage({id:"cancel"})))):g.createElement("p",null,x)),!s&&g.createElement(o.A,{variant:"text",onClick:m},i.formatMessage({id:"edit"})))}},51704(e,t,l){l.r(t),l.d(t,{default:()=>z});var a=l(91557),n=l(44371),i=l(38860),r=l(3556),o=l(60780),s=l(20687),d=l(87773),u=l(65467),c=l(92885),m=l(30261),p=l(84058),g=l.n(p),v=l(97200),f=l.n(v),h=l(96540),y=l(59262),b=l(89481);let E=(0,r.Ay)("div",{name:"ProgressWrapperField",slot:"icon",shouldForwardProp:e=>"hide"!==e})(({theme:e})=>({background:"light"===e.palette.mode?"rgba(255, 255, 255, 0.6) !important":"rgba(0, 0, 0, 0.3) !important",position:"absolute",left:0,right:0,bottom:0,top:0,zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}));function A({value:e,uploading:t,size:l="56px",sx:a}){return t?h.createElement(E,{sx:a},h.createElement(b.A,{sx:{width:`${l} !important`,height:`${l} !important`},variant:"determinate",value:e||0})):null}let x={width:2,right:0,position:"absolute",opacity:0,display:"none"},_=(0,r.Ay)(o.A,{name:"AddPhotoButton"})(({theme:e})=>({fontWeight:"bold",margin:e.spacing(0,2),height:"auto"})),C=(0,r.Ay)(s.A,{name:"Root"})(({theme:e})=>({margin:e.spacing(2,0,1),overflow:"hidden"})),w=(0,r.Ay)("div",{name:"Preview"})(({theme:e})=>({marginTop:-5,borderRadius:4,width:"100%",maxWidth:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",position:"relative","& button":{"& + button":{marginLeft:e.spacing(1)}}})),S=(0,r.Ay)("div",{name:"RemoveBtn",slot:"removeBtn"})(({theme:e})=>({width:e.spacing(3),height:e.spacing(3),borderRadius:e.spacing(1.5),backgroundColor:"rgba(0,0,0,0.89)",color:"#fff",position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"})),k=(0,r.Ay)("div",{name:"Controls",slot:"Controls"})(({theme:e})=>({borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:0,left:0,width:"100%",height:"100%"})),M=(0,r.Ay)("div",{name:"ImageWrapper",slot:"ImageWrapper",shouldForwardProp:e=>"widthPhoto"!==e&&"haveError"!==e&&"isMobile"!==e&&"hoverState"!==e})(({theme:e,haveError:t,hoverState:l,widthPhoto:a,isMobile:n})=>({width:n?"100%":a,maxWidth:n?"100%":a,overflow:"hidden",position:"relative",borderStyle:"solid",borderWidth:"1px",borderColor:"light"===e.palette.mode?"#0000003b":"rgba(255, 255, 255, 0.23)",borderRadius:4,...l&&{borderColor:"light"===e.palette.mode?"#000":"#fff"},...t&&{borderColor:e.palette.error.main}})),I=(0,r.Ay)("div",{name:"LinkChange"})(({theme:e})=>({marginTop:e.spacing(1),marginBottom:e.spacing(1),cursor:"pointer"})),R=(0,r.Ay)(d.A,{name:"LabelStyled",shouldForwardProp:e=>"haveError"!==e})(({theme:e,haveError:t})=>({marginBottom:e.spacing(1),fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,...t&&{color:e.palette.error.main}})),T=e=>new Promise(t=>{let l=new FileReader;l.addEventListener("load",()=>t(l.result),!1),l.readAsDataURL(e)});function z({name:e,config:t,disabled:l,formik:r}){let{required:o,variant:s="outlined",item_type:p,max_upload_filesize:v,upload_url:b,preview_url:E,disabled:z,returnBase64:$=!1,thumbnail_sizes:P,aspectRatio:F="1:1",widthPhoto:W="200px",accept:B="image/*",isDropFile:O=!1}=t,{dialogBackend:L,i18n:q,useIsMobile:j,ParserPreviewPhoto:D}=(0,a.PCX)(),[N,V,{setValue:U,setTouched:X}]=(0,m.Mt)(null!=e?e:"ItemPhotoField"),H=t.placeholder||"add_photo",[Q,G]=(0,h.useState)(E),[J,K]=(0,h.useState)(Boolean(Q)),Y=(0,h.useRef)(),[Z,ee]=(0,h.useState)(!1),et=F.replace(":",""),el=j(),[ea,en]=h.useState($?100:0),ei=async(e,t)=>{if(e){let l=await T(e);t(l)}},er=()=>{Y.current.click()},eo=e=>{let t=Math.round(100*e.loaded/e.total);en(t)},es=(e,t)=>{var l;(null==V?void 0:V.touched)||X(!0);let a=t||Y.current.files;if(!a&&!a.length)return;let n=(0,i.EL)(a[0].type)?"video":"photo",r={id:0,uid:f()("file"),source:URL.createObjectURL(a[0]),file:a[0],file_name:a[0].name,file_size:a[0].size,file_type:n,fileItemType:p,status:"update",upload_url:b,extension:(0,i.QC)(a[0].name),thumbnail_sizes:P,onUploadProgress:eo},o=r.file.size;if(o>v&&0!==v){L.alert({message:q.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,i.Tu)(r.file_name,30),fileSize:(0,i.lT)(r.file.size),maxSize:(0,i.lT)(v)})});return}if(!(0,i.HH)(null==r?void 0:null===(l=r.file)||void 0===l?void 0:l.type,B)){L.alert({message:q.formatMessage({id:"file_accept_type_fail"})}),(null==Y?void 0:Y.current)&&(Y.current.value=null);return}r&&(G(r.source),K(!0),$?ei(null==r?void 0:r.file,e=>{U({base64:e})}):U(r))},ed=()=>{G(null),K(!1),U(E?{status:"remove",temp_file:0}:void 0)},eu=e=>{e.currentTarget.value=null},ec=e=>{if(!e.length)return;let t=Object.assign({length:e.length},e);t&&es(null,t)},em=e=>{var t;U({...e.preUploadFile,status:"update"}),G(null==e?void 0:null===(t=e.preUploadFile)||void 0===t?void 0:t.url),K(!0)},ep=Boolean(V.error&&(V.touched||r.submitCount));return J?h.createElement(h.Fragment,null,h.createElement(C,{fullWidth:!0,variant:s,margin:"normal","data-testid":g()(`field ${e}`)},h.createElement(R,{haveError:ep},t.label,o?"(*)":""),h.createElement(M,{haveError:ep,hoverState:Z,widthPhoto:W,isMobile:el},h.createElement(D,{item:N.value,onParse:em},h.createElement(w,{onMouseOver:()=>ee(!0),onMouseLeave:()=>ee(!1)},h.createElement(n._V,{src:Q,aspectRatio:et,backgroundImage:!0}),r.isSubmitting?h.createElement(A,{uploading:r.isSubmitting,value:ea}):h.createElement(u.A,{title:q.formatMessage({id:"remove"})},h.createElement(S,{onClick:ed,"data-testid":g()(`button_remove ${e}`)},h.createElement(n.s4,{icon:"ico-close"})))))),h.createElement(I,null,h.createElement(c.A,{onClick:er,color:"primary","data-testid":g()(`button add ${e}`),disabled:z||l||r.isSubmitting},q.formatMessage({id:"change"})))),ep?h.createElement(y.A,{error:V.error}):null,h.createElement("input",{onClick:eu,ref:Y,type:"file","aria-hidden":!0,accept:B,style:x,"data-testid":g()(`input ${e}`),onChange:es})):h.createElement(C,{variant:s,margin:"normal","data-testid":g()(`field ${e}`)},h.createElement(R,{haveError:ep},t.label,o?"(*)":""),O?h.createElement(n.dl,{onDrop:e=>ec(e),render:({canDrop:t,isOver:a})=>h.createElement(M,{haveError:ep,hoverState:Z,widthPhoto:W,isMobile:el},h.createElement(n._V,{src:Q,aspectRatio:et,backgroundImage:!0}),h.createElement(k,{role:"button",onClick:er,onMouseOver:()=>ee(!0),onMouseLeave:()=>ee(!1)},h.createElement(_,{size:"small",color:"primary",variant:"outlined","data-testid":g()(`button add ${e}`),disabled:z||l||r.isSubmitting,startIcon:h.createElement(n.s4,{icon:"ico-photo-plus-o"})},q.formatMessage({id:H}))))}):h.createElement(M,{haveError:ep,hoverState:Z,widthPhoto:W,isMobile:el},h.createElement(n._V,{src:Q,aspectRatio:et,backgroundImage:!0}),h.createElement(k,{role:"button",onClick:er,onMouseOver:()=>ee(!0),onMouseLeave:()=>ee(!1)},h.createElement(_,{size:"small",color:"primary",variant:"outlined","data-testid":g()(`button add ${e}`),disabled:z||l||r.isSubmitting,startIcon:h.createElement(n.s4,{icon:"ico-photo-plus-o"})},q.formatMessage({id:H})))),ep?h.createElement(y.A,{error:V.error}):null,t.description?h.createElement(d.A,{sx:{fontSize:"13px"},color:"text.hint",mt:1,mb:1},t.description):null,h.createElement("input",{onClick:eu,ref:Y,type:"file","aria-hidden":!0,accept:B,"data-testid":g()(`input ${e}`),onChange:es,style:x}))}},82453(e,t,l){l.r(t),l.d(t,{default:()=>h});var a=l(91557),n=l(44371),i=l(60780),r=l(65467),o=l(30261),s=l(84058),d=l.n(s),u=l(97200),c=l.n(u),m=l(96540),p=l(45003),g=l(56525),v=l(85838);let f=(0,g.A)(e=>(0,v.A)({root:{margin:e.spacing(2,0,1),"& button":{fontSize:e.mixins.pxToRem(13),border:e.mixins.border("primary"),borderRadius:4,padding:e.spacing(.5,2)},"& .ico":{fontSize:e.mixins.pxToRem(15)}},addPhotoWrapper:{},previewList:{display:"flex",margin:e.spacing(1,-.5,0)},previewItem:{margin:e.spacing(0,.5),position:"relative","& img":{width:48,height:48,minWidth:48,minHeight:48,objectFit:"cover",borderRadius:4}},deletePhoto:{position:"absolute",top:4,right:4,borderRadius:"50%",width:16,height:16,opacity:.7,backgroundColor:e.mixins.backgroundColor("paper"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px !important",cursor:"pointer","&:hover":{opacity:1}},totalPhoto:{marginTop:e.spacing(.5)},controls:{height:120,border:"solid 1px rgba(0, 0, 0, 0.23)",borderRadius:4,padding:e.spacing(.5,2),marginTop:e.spacing(1),display:"flex",alignItems:"center",justifyContent:"center","&:hover":{border:"1px solid",borderColor:e.palette.border.primary}}}),{name:"ItemPhotoGalleryField"});function h({name:e,config:t}){let l=f(),[,,{setValue:s}]=(0,o.Mt)(null!=e?e:"ItemPhotoGalleryField"),{i18n:u}=(0,a.PCX)(),g=t.placeholder||"Add Photos",[v,h]=(0,m.useState)([]),[y,b]=(0,m.useState)(Boolean(v.length-1>0)),E=(0,m.useRef)(),A=(0,m.useCallback)(()=>{E.current.click()},[]),x=(0,m.useCallback)(()=>{let e=E.current.files;if(!e)return;let t=[];for(let l=0;l<e.length;++l)t.push({uid:c()("file"),source:URL.createObjectURL(e.item(l)),file:e.item(l)});t&&(h(t),s(v),b(!0))},[v,s]),_=(0,m.useCallback)(e=>{h(t=>t.filter(t=>t.uid!==e.uid)),s(v),b(Boolean(v.length-1>0))},[v,s]);return m.createElement("div",{className:l.root,"data-testid":d()(`field ${e}`)},m.createElement("div",{className:l.addPhotoWrapper},m.createElement(p.A,null,t.label),m.createElement("div",{className:l.controls,role:"button",onClick:A},m.createElement(i.A,{size:"small",color:"primary",variant:"outlined",startIcon:m.createElement(n.s4,{icon:"ico-photos-plus-o"})},g)),m.createElement("input",{ref:E,type:"file",multiple:!0,"aria-hidden":!0,className:"srOnly",accept:"image/*",onChange:x})),y&&m.createElement(m.Fragment,null,m.createElement("div",{className:l.previewList},v.map((e,t)=>m.createElement("div",{className:l.previewItem,key:t.toString()},m.createElement("img",{src:e.source,alt:""}),m.createElement(r.A,{title:u.formatMessage({id:"remove"})},m.createElement(n.s4,{icon:"ico-close",onClick:()=>_(e),className:l.deletePhoto}))))),m.createElement("div",{className:l.totalPhoto},v.length,"/10"," ",u.formatMessage({id:"photos_uploaded"}))))}},45003(e,t,l){l.d(t,{A:()=>i});var a=l(91557),n=l(96540);function i({text:e}){let{i18n:t}=(0,a.PCX)();return e?e.startsWith("<html>")?n.createElement(n.Fragment,null,t.formatMessage({id:"[placeholder]",defaultMessage:e})):n.createElement(n.Fragment,null,e):null}},45357(e,t,l){l.r(t),l.d(t,{default:()=>C});var a=l(91557),n=l(44371),i=l(3556),r=l(54358),o=l(8051),s=l(83445),d=l(18799),u=l(15292),c=l(52705),m=l(87773),p=l(30261),g=l(84058),v=l.n(g),f=l(23805),h=l.n(f),y=l(96540),b=l(56525),E=l(85838);let A=(0,b.A)(e=>(0,E.A)({root:{display:"block",position:"relative"},map:{display:"block",height:300,backgroundColor:e.palette.action.focus},hideMap:{display:"none !important"},popper:{zIndex:1300,width:"100%"},paper:{padding:e.spacing(1,1)},suggestItem:{display:"flex",flexDirection:"row",padding:e.spacing(1,1),fontSize:e.mixins.pxToRem(15),cursor:"pointer","&:hover":{backgroundColor:e.palette.action.focus}},suggestIcon:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),paddingRight:e.spacing(1),paddingTop:e.spacing(.5)},suggestName:{color:e.palette.text.primary},suggestAddress:{color:e.palette.text.secondary}}),{name:"formFooter"}),x=e=>e?h()(e)?x(Object.values(e)[0]):e.toString():null,_=(0,i.Ay)(r.A,{name:"Text"})(({theme:e})=>({"& input::placeholder":{color:e.palette.text.hint}})),C=function({config:e,disabled:t,required:l,name:i,formik:r}){var g,f,h;let[b,E,{setValue:C,setTouched:w}]=(0,p.Mt)(null!=i?i:"location"),{label:S,labelProps:k={},placeholder:M,variant:I,disabled:R,margin:T="normal",fullWidth:z,required:$,description:P,autoFocus:F,hideMap:W=!1,requiredMap:B=!1,searchOptions:O}=e,L=y.useRef(),q=y.useRef(),j=A(),D=y.useRef(),[N,V="",U,,X,H,{loading:Q,error:G}]=(0,a._gs)(D,{lat:null===(g=b.value)||void 0===g?void 0:g.lat,lng:null===(f=b.value)||void 0===f?void 0:f.lng,address:null===(h=b.value)||void 0===h?void 0:h.address},O),J=y.useCallback(e=>{U(e),B||C({address:e}),""===e&&C(null)},[]),[K,Y]=y.useState(!1),Z=(e,t)=>{let{address_components:l}=t,a=l[0];C({...e,short_name:a.short_name})},ee=({address:e,name:t})=>e?e.includes(t)?`${e}`:`${t}, ${e}`:t,et=e=>{let t={address:ee(e),lat:e.lat,lng:e.lng};C(t),X(e),U(t.address),H(e,e=>Z(t,e))},el=e=>{Y(!0)},ea=e=>{(null==E?void 0:E.touched)||w(!0),setTimeout(()=>{Y(!1),b.onBlur(e)},200)},en=y.useCallback(()=>{setTimeout(()=>{Y(!1)},200)},[]),ei=Boolean(E.error&&(E.touched||r.submitCount)),er=a.uO7;return y.createElement("div",{className:j.root},y.createElement(n.qB,{excludeRef:L,onClickAway:en},y.createElement(o.A,null,y.createElement(_,{label:S,autoComplete:"off",required:l||$,inputRef:q,onFocus:el,onBlur:ea,onChange:e=>J(e.target.value),value:V,disabled:e.disabled||R,autoFocus:F,variant:I,error:ei,inputProps:{"data-testid":v()(`input ${i}`)},InputLabelProps:{shrink:V||b.value||void 0,...Object.assign({},k)},placeholder:M,margin:T,"data-testid":v()(`field ${i}`),fullWidth:z,helperText:ei?x(E.error):P}),er?y.createElement("div",{className:W?j.hideMap:j.map,ref:D}):null)),er?y.createElement(s.A,{open:K,anchorEl:q.current,disablePortal:!0,placement:"bottom-start",className:j.popper},y.createElement(d.A,{className:j.paper},y.createElement(u.A,{in:K},Q?y.createElement(o.A,null,y.createElement(c.A,{animation:"wave",height:30,width:"50%"}),y.createElement(c.A,{animation:"wave",height:30,width:"30%"}),y.createElement(c.A,{animation:"wave",height:30,width:"40%"})):N.map((e,t)=>y.createElement("div",{key:`${t}${e.lat}${e.lng}`,className:j.suggestItem,onClick:()=>et(e)},y.createElement(n.s4,{icon:"ico-checkin",className:j.suggestIcon}),y.createElement(o.A,null,y.createElement(m.A,{color:"text.primary"},e.name),y.createElement(m.A,{color:"text.secondary"},e.address)))),G&&y.createElement("div",null,G)))):null)}},17244(e,t,l){l.r(t),l.d(t,{default:()=>E});var a,n,i=l(91557),r=l(44371),o=l(3556),s=l(43546),d=l(27155),u=l(8051),c=l(54358),m=l(65467),p=l(62193),g=l.n(p),v=l(96540),f=l(59262);let h=(0,o.Ay)("div",{name:"StyledAnswer"})(({theme:e})=>({display:"flex",alignItems:"center",paddingTop:e.spacing(2)})),y=(0,o.Ay)("div",{name:"AnswerItem",slot:"IconClose"})(({theme:e})=>({cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",width:e.spacing(5),height:e.spacing(5),margin:e.spacing(0,.5),"& .ico":{fontSize:e.mixins.pxToRem(16),color:e.palette.text.hint}}));(a=n||(n={}))[a.FreeAnswer=0]="FreeAnswer",a[a.Select=1]="Select",a[a.CheckBox=2]="CheckBox";let b=({formik:e,type:t,value:l,onRemove:a,onChange:o,onBlur:p,error:b,minAnswer:E})=>{let{i18n:A,dialogBackend:x}=(0,i.PCX)(),[_,C]=(0,v.useState)(t===n.FreeAnswer),[w,S]=(0,v.useState)(l||""),[k,M]=(0,v.useState)(null);v.useEffect(()=>{g()(b)||M(b)},[b]);let I=e=>{g()(e)?M(A.formatMessage({id:"error_the_field_is_required"},{field:"answer"})):M(null)},R=e=>{let{value:t}=e.target;p&&p(e),I(t)},T=e=>{let{value:t}=e.target;I(t),S(t),o&&o(e)},z=(0,v.useMemo)(()=>t===n.CheckBox?v.createElement(s.A,{disabled:!0}):t===n.Select?v.createElement(d.A,{disabled:!0}):void 0,[t]),$=()=>{var t;if((null===(t=e.values.options)||void 0===t?void 0:t.length)<=E){x.alert({message:A.formatMessage({id:"you_must_have_min_answer"},{value:E})});return}a&&a(),C(!0)};return _?null:v.createElement(h,null,v.createElement(u.A,{sx:{flex:1}},v.createElement(u.A,{sx:{display:"flex"}},z,v.createElement(c.A,{size:"small",fullWidth:!0,id:"outlined-basic",value:w,variant:"outlined",onChange:T,onBlur:R,inputProps:{maxLength:255},error:!!(e.submitCount&&k)}),v.createElement(y,{onClick:$},v.createElement(m.A,{title:A.formatMessage({id:"remove_answer"}),placement:"top"},v.createElement(r.s4,{icon:"ico-close"})))),k?v.createElement(u.A,{ml:5},v.createElement(f.A,{error:k})):null))},E=b},49881(e,t,l){l.r(t),l.d(t,{default:()=>k});var a,n,i=l(91557),r=l(3556),o=l(60780),s=l(20687),d=l(8051),u=l(54358),c=l(50203),m=l(57660),p=l(30261),g=l(84058),v=l.n(g),f=l(62193),h=l.n(f),y=l(85015),b=l.n(y),E=l(96540),A=l(59262),x=l(17244);(a=n||(n={}))[a.FreeAnswer=0]="FreeAnswer",a[a.Select=1]="Select",a[a.CheckBox=2]="CheckBox";var _=l(44371);let C=(0,r.Ay)(o.A)(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,fontSize:e.mixins.pxToRem(13),color:e.palette.primary.main,cursor:"pointer",display:"flex",alignItems:"center",marginTop:e.spacing(.5),marginLeft:e.spacing(1.2),width:"fit-content","&:hover":{textDecoration:"underline"},"& .ico":{marginRight:e.spacing(1)}})),w=[{value:n.CheckBox,label:"checkbox"},{value:n.Select,label:"multiple_choice"},{value:n.FreeAnswer,label:"written_answer"}],S=({name:e,formik:t,disabled:l})=>{var a,r,o,g,f,y;let{i18n:S,getSetting:k}=(0,i.PCX)(),M=(0,p.j7)(),I=parseInt(k("group.minimum_membership_question_option")||1);E.useEffect(()=>{var e,l,a,i,r,o;let s=[];h()(null===(e=M.initialValues)||void 0===e?void 0:e.options)&&(s=Array(I).fill(0).map((e,t)=>({title:"",id:new Date().getMilliseconds()+t,status:"new"}))),h()(null===(l=M.initialValues)||void 0===l?void 0:l.options)||(s=null===(r=M.initialValues)||void 0===r?void 0:r.options),h()(null===(a=M.values)||void 0===a?void 0:a.options)||(s=null===(o=M.values)||void 0===o?void 0:o.options),(null===(i=M.values)||void 0===i?void 0:i.type_id)===n.FreeAnswer&&(s=void 0),t.setFieldValue("options",s,!0)},[null===(a=M.values)||void 0===a?void 0:a.type_id]);let R=()=>{var e;let l=[...null===(e=M.values)||void 0===e?void 0:e.options,{title:"",id:new Date().getMilliseconds(),status:"new"}];t.setFieldValue("options",l)},T=(e,l)=>{var a;let{value:n}=e.target,i=null===(a=M.values.options)||void 0===a?void 0:a.map(e=>e.id===l.id?{...e,title:n.trim(),status:"new"!==l.status?"update":"new"}:e);t.setFieldValue("options",i)},z=e=>{var l,a;(null===(l=M.values)||void 0===l?void 0:null===(a=l.question)||void 0===a?void 0:a.trim())||t.setFieldValue("question",""),t.handleBlur(e)},$=e=>{var l;let a=null===(l=M.values.options)||void 0===l?void 0:l.map(t=>t.id===e?(null==t?void 0:t.status)==="new"?{...t,status:"delete"}:{...t,status:"remove"}:t);t.setFieldValue("options",a.filter(e=>(null==e?void 0:e.status)!=="delete"))};return E.createElement(s.A,{fullWidth:!0,margin:"normal","data-testid":v()(`field ${e}`)},E.createElement(d.A,null,E.createElement(d.A,{sx:{height:"40px",display:"flex"}},E.createElement(u.A,{id:"question",name:"question",sx:{flex:1,minWidth:0,marginRight:2},size:"small",label:S.formatMessage({id:"add_a_question"}),variant:"outlined",inputProps:{maxLength:255},error:!!(t.submitCount&&t.errors.question),value:null===(r=M.values)||void 0===r?void 0:r.question,onChange:t.handleChange,onBlur:z}),E.createElement(c.A,{id:"type_id",name:"type_id",sx:{height:"100%"},value:null===(o=M.values)||void 0===o?void 0:o.type_id,onChange:t.handleChange},w.map(({value:e,label:t},l)=>E.createElement(m.A,{key:l.toString(),value:e},S.formatMessage({id:t}))))),E.createElement(A.A,{error:null===(g=t.errors)||void 0===g?void 0:g.question})),M.values.type_id!==n.FreeAnswer?E.createElement(E.Fragment,null,null===(f=M.values)||void 0===f?void 0:null===(y=f.options)||void 0===y?void 0:y.map((e,l)=>{var a,n,i;return E.createElement(x.default,{minAnswer:I,formik:M||t,key:e.id.toString(),value:e.title,type:M.values.type_id,error:!h()(null===(a=t.errors)||void 0===a?void 0:a.options)&&(null===(n=t.errors)||void 0===n?void 0:null===(i=n.options)||void 0===i?void 0:i[l]),onRemove:()=>$(e.id),onChange:t=>T(t,e)})}),E.createElement(C,{onClick:R,variant:"text",color:"primary",size:"small",disabled:l},E.createElement(_.s4,{icon:"ico-plus"}),S.formatMessage({id:"add_answer"})),b()(t.errors)&&E.createElement(A.A,{error:t.errors})):null)},k=S},41095(e,t,l){l.r(t),l.d(t,{default:()=>N});var a=l(91557),n=l(44371),i=l(38860),r=l(60780),o=l(89335),s=l(87773),d=l(8051),u=l(81502),c=l(20687),m=l(3556),p=l(30261),g=l(16535),v=l(84058),f=l.n(v),h=l(97200),y=l.n(h),b=l(38221),E=l.n(b),A=l(85015),x=l.n(A),_=l(56449),C=l.n(_),w=l(62193),S=l.n(w),k=l(96540),M=l(59262),I=l(72871);let R=(0,m.Ay)("div",{name:"RootStyled"})(({theme:e})=>({padding:e.spacing(2),marginBottom:e.spacing(1.5),border:"1px solid #eeeeee","& > div":{width:"100%"}})),T=(e,t)=>{let l={};if(!S()(t))return Object.keys(e).forEach(a=>{t[a]!==e[a]&&(l[a]="string"==typeof t[a]?t[a].trim():t[a])}),l},z=function({initialValues:e,formSchema:t,dataSource:l,onChange:a}){let n=k.useCallback(t=>{let l=T(e,null==t?void 0:t.values);if(!S()(l))for(let n in l)Object.prototype.hasOwnProperty.call(l,n)&&a(null==l?void 0:l[n],n)},[a,e]);if(!(S()(t)&&S()(l)))return k.createElement(R,null,k.createElement(I.FF,{noHeader:!0,noTitle:!0,initialValues:e,formSchema:t,dataSource:l,onChange:n}))},$="MultiAudioField",P=(0,m.Ay)(r.A,{name:$,slot:"DropButton"})(({theme:e,isOver:t})=>({...t&&{backgroundColor:e.palette.action.hover}})),F=(0,m.Ay)("div",{name:$,slot:"AudioUploaded"})(({theme:e})=>({display:"flex",fontSize:e.mixins.pxToRem(13),justifyContent:"space-between",paddingBottom:e.spacing(1),"& .ico-music-note-o":{fontSize:e.mixins.pxToRem(15)}})),W=(0,m.Ay)("div",{name:$,slot:"IconAction"})(({theme:e})=>({display:"flex","& > span":{marginLeft:e.spacing(1)}})),B=(0,m.Ay)("div",{name:$,slot:"DropzoneBox"})(({theme:e})=>({width:"fit-content"})),O=(0,m.Ay)(o.A,{name:$,slot:"Label"})(({theme:e,haveError:t})=>({...t&&{color:e.palette.error.main}})),L=(0,m.Ay)(s.A,{name:$,slot:"Noti"})(({theme:e,haveError:t})=>({...t&&{color:e.palette.error.main}})),q=(0,m.Ay)(s.A,{name:$,slot:"TitleSong"})(({theme:e})=>({marginLeft:e.spacing(1),marginRight:e.spacing(1),overflowWrap:"anywhere"})),j=(0,m.Ay)("div",{name:$,slot:"WrapTitleStyled"})(({theme:e})=>({display:"flex",alignItems:"center"}));function D({item:e,index:t,handleChange:l,showEditAudio:a,handleEditAudio:r,handleRemoveAudio:o,error:c,enabled:m,progress:p,uploading:g,formSchemaEditItem:v,dataSourceEditItem:f}){if("remove"===e.status)return null;let h=C()(c)&&c[t],y=S()(v)&&S()(f);return k.createElement(k.Fragment,null,k.createElement(F,{"data-testid":`audioUploaded_${t}`},k.createElement(j,{"data-testid":`audioUploadedWrapTitle_${t}`},k.createElement(n.s4,{icon:"ico-music-note-o"}),k.createElement(q,{"data-testid":`audioUploadedTitle_${t}`,color:h?"error":null},(0,i.Tu)(null==e?void 0:e.file_name,70))),k.createElement(W,{"data-testid":`audioUploadedAction_${t}`},g?k.createElement(d.A,{sx:{minWidth:"100px",pl:1,mt:"6px"}},k.createElement(u.A,{"data-testid":`audioUploadedProgress_${t}`,variant:"determinate",value:p||0})):k.createElement(k.Fragment,null,y?null:k.createElement(s.A,{"data-testid":`audioUploadedEdit_${t}`,variant:"body2",color:"primary",component:"span",role:"button",onClick:()=>m&&r((null==e?void 0:e.id)||(null==e?void 0:e.uid))},k.createElement(n.s4,{icon:"ico-compose"})),k.createElement(s.A,{"data-testid":`audioUploadedRemove_${t}`,variant:"body2",color:"primary",component:"span",role:"button",onClick:()=>m&&o(t)},k.createElement(n.s4,{icon:"ico-close"}))))),y||a!==((null==e?void 0:e.id)||(null==e?void 0:e.uid))?null:k.createElement(z,{initialValues:e,formSchema:v,dataSource:f,onChange:(e,a)=>l(e,t,a)}))}function N({name:e,config:t,disabled:l,formik:r}){let{label:o="Select songs",description:s,item_type:u,accept:m="audio/mp3",max_upload_filesize:v,max_length_name:h=100,maxFilesPerUpload:b,maxFiles:A,upload_url:_,disabled:C,storage_id:w,placeholder:S,appName:I,resourceName:R,formEditItem:T,dataSourceName:z,messageAcceptFail:$}=t,{dialogBackend:F,i18n:W}=(0,a.PCX)(),q=(0,a.EkY)(I,R,T),j=(0,a.IgF)(I,R,z),[N,V]=k.useState(),U=(0,k.useRef)(),[X,H,{setValue:Q,setTouched:G}]=(0,p.Mt)(null!=e?e:"ItemPhotoField"),[J,K]=k.useState(X.value||[]),[Y,Z]=k.useState({}),ee=(e,t)=>{let l=Math.round(100*e.loaded/e.total);Z(e=>({...e,[t]:l}))},et=()=>{U.current.click()},el=e=>{let t=e.lastIndexOf(".");return e.slice(0,t)},ea=k.useCallback(e=>{F.confirm({message:W.formatMessage({id:"are_you_sure_you_want_to_delete_attachment_file"}),title:W.formatMessage({id:"are_you_sure"})}).then(t=>{t&&K(t=>(0,g.Ay)(t,t=>{t[e].id?t[e].status="remove":t.splice(e,1)}))})},[]),en=k.useCallback(e=>{N!==e?V(e):V(null)},[N]);k.useEffect(()=>{Q(J.map((e,t)=>({...e,onUploadProgress:e=>ee(e,t)})))},[J]);let ei=e=>{let t=[];for(let l of Object.keys(e)){var a;let n={id:0,status:"new",upload_url:_,name:el(e[l].name).slice(0,h),description:"",source:URL.createObjectURL(e[l]),file:e[l],file_name:e[l].name,file_size:e[l].size,file_type:e[l].type,uid:y()("file"),fileItemType:u,storage_id:null!=w?w:null},r=null==n?void 0:n.file_size;if(!(0,i.HH)(null===(a=e[l])||void 0===a?void 0:a.type,m)){F.alert({message:W.formatMessage({id:$||"file_accept_type_fail"})}),(null==U?void 0:U.current)&&(U.current.value=null);break}if(r>(null==v?void 0:v.music)&&(null==v?void 0:v.music)){F.alert({message:W.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,i.Tu)(n.file_name,30),fileSize:(0,i.lT)(n.file_size),maxSize:(0,i.lT)(null==v?void 0:v.music)})});return}t.push(n)}t.length&&K((0,g.Ay)(e=>{e.push(...t)}))},er=k.useCallback(()=>{let e=U.current.files;e&&(G(!0),ei(e))},[J]),eo=e=>{e&&ei(e)},es=E()((e,t,l)=>{K((0,g.Ay)(a=>{a[e].id&&(a[e].status="update"),a[e][l]=t}))},1e3),ed=(e,t,l)=>{es(t,e,l)},eu=e=>{e.currentTarget.value=null},ec=J.filter(e=>e.uid),em=!!(H.error&&(H.touched||r.submitCount));return k.createElement(c.A,{fullWidth:!0,margin:"normal","data-testid":f()(`field ${e}`)},k.createElement(O,{haveError:em,required:!0,variant:"outlined",shrink:"true"},o),k.createElement(d.A,{sx:{p:2,pt:2.5}},k.createElement(L,{variant:"body2",color:"text.hint",mb:1.5,component:"p"},s),k.createElement(B,null,k.createElement(n.dl,{onDrop:e=>eo(e),render:({isOver:t})=>k.createElement(P,{onClick:et,size:"small",color:"primary",sx:{fontWeight:"bold"},isOver:t,variant:"outlined",disabled:C||l||r.isSubmitting||J.length>=A||ec.length>=b,"data-testid":f()(`button ${e}`),startIcon:k.createElement(n.s4,{icon:"ico-upload"})},S)})),J.length>0&&k.createElement(d.A,{"data-testid":f()("audio uploaded list"),sx:{mt:2}},J.map((e,t)=>k.createElement(D,{i18n:W,key:t.toString(),handleRemoveAudio:ea,handleChange:ed,handleEditAudio:en,showEditAudio:N,index:t,item:e,error:H.error,enabled:!r.isSubmitting,progress:Y[t],uploading:r.isSubmitting,formSchemaEditItem:q,dataSourceEditItem:j}))),em&&x()(H.error)?k.createElement(M.A,{error:H.error}):null),k.createElement(n._r,{haveError:em,children:t.label,variant:"outlined"}),k.createElement("input",{ref:U,onClick:eu,className:"srOnly",type:"file","data-testid":f()(`input ${e}`),multiple:!0,accept:m,onChange:er}))}},62196(e,t,l){l.r(t),l.d(t,{default:()=>_});var a=l(91557),n=l(30261),i=l(16535),r=l(58156),o=l.n(r),s=l(56449),d=l.n(s),u=l(96540),c=l(59262),m=l(54358),p=l(60780),g=l(8051),v=l(56525),f=l(85838);let h=(0,v.A)(e=>(0,f.A)({answerInput:{width:"calc(100% - 130px)"},answerItem:{display:"flex"},input:{"&::placeholder":{color:e.palette.text.secondary,opacity:1}},endAdornment:{cursor:"pointer"},endAdornmentButton:{display:"flex",alignItems:"center",paddingLeft:e.spacing(2)},buttonWrapper:{display:"flex",width:"100%",justifyContent:"space-between",marginRight:e.spacing(1),marginTop:e.spacing(1),"& button":{minWidth:e.spacing(5)}},button:{"& + button":{marginLeft:e.spacing(1)},fontWeight:e.typography.fontWeightBold,fontSize:e.mixins.pxToRem(13),color:e.palette.primary.main,cursor:"pointer",display:"flex",alignItems:"center","&:hover":{textDecoration:"underline"}},visible:{visibility:"hidden"}}),{name:"AnswerPollItem"});var y=l(44371),b=l(84058),E=l.n(b);let A=({lastElement:e,index:t,item:l,handleDelete:n,handleAdd:i,handleChange:r,disabled:o,submitCount:s,error:d,maxLength:v,disabledAddMore:f,disableRemove:b,meta:A,setTouched:x,name:_,fieldName:C})=>{let w=h(),{i18n:S}=(0,a.PCX)(),k=Boolean(d&&(A.touched||s));return u.createElement(u.Fragment,null,u.createElement("div",{className:w.answerItem},u.createElement(m.A,{className:w.answerInput,required:!0,variant:"outlined",onBlur:()=>x(!0),fullWidth:!0,margin:"normal",disabled:o,inputProps:{maxLength:v,"data-testid":E()(`input ${_}`)},label:S.formatMessage({id:"option_answer"},{value:t+1}),defaultValue:l.answer,onChange:e=>r(e,l.id),error:k,"data-testid":E()(`field ${_}`)}),u.createElement("div",{className:w.endAdornmentButton},u.createElement("div",{className:w.buttonWrapper},u.createElement(p.A,{className:w.button,onClick:()=>n(l.order),disabled:b||o,variant:"outlined",color:"primary","data-testid":E()(`button_remove ${_}`)},u.createElement(g.A,{sx:{display:{sm:"block",xs:"none"}}},S.formatMessage({id:"remove"})),u.createElement(g.A,{sx:{display:{sm:"none"}}},u.createElement(y.s4,{icon:"ico-trash-alt"}))),u.createElement(p.A,{className:e?w.button:w.visible,onClick:()=>i(),variant:"outlined",color:"primary",disabled:f||o,"data-testid":e?E()(`button_add ${C}`):E()(`button_add ${_}`)},u.createElement(g.A,{sx:{display:{sm:"block",xs:"none"}}},S.formatMessage({id:"add"})),u.createElement(g.A,{sx:{display:{sm:"none"}}},u.createElement(y.s4,{icon:"ico-plus"})))))),k?u.createElement(c.A,{error:d}):null)},x=({config:e,name:t,disabled:l,formik:r})=>{var s,m;let{i18n:p,dialogBackend:g}=(0,a.PCX)(),{minAnswers:v,maxAnswers:f,disabled:h,maxLength:y}=e,[b,E,{setValue:x,setTouched:_}]=(0,n.Mt)(null!=t?t:"PollAnswer"),[C,w]=u.useState(null==b?void 0:b.value),S=u.useRef((null==b?void 0:null===(s=b.value)||void 0===s?void 0:s.length)||0),k=u.useCallback(e=>{w(t=>(0,i.Ay)(t,t=>{if(t.length===v)g.alert({message:p.formatMessage({id:"you_must_have_min_answer"},{value:v})});else if(e){let l=t.findIndex(t=>t.order===e);t.splice(l,1)}else t.pop()}))},[]),M=u.useCallback((e,t)=>{let l=e.target.value;w(e=>(0,i.Ay)(e,e=>{e[t]={...e[t],answer:l}}))},[]),I=u.useCallback(()=>{w(e=>(0,i.Ay)(e,e=>{if(e.length===f)g.alert({message:p.formatMessage({id:"you_must_have_max_answer"},{value:f})});else{let t={item:{answer:"",order:++S.current}};e.push(t.item)}}))},[]);u.useEffect(()=>{if(C.length<v)I();else{let e=C.map(e=>({...e,answer:e.answer.trim()}));x(e)}},[C]);let R=d()(E.error);return u.createElement("div",null,null==C?void 0:C.map((e,a)=>u.createElement(A,{lastElement:a===C.length-1,index:a,key:e.order.toString(),item:e,maxLength:y,handleAdd:I,submitCount:r.submitCount,meta:E,setTouched:_,handleDelete:k,disabled:h||l||r.isSubmitting,handleChange:e=>M(e,a),error:o()(E.error,`[${a}].answer`),disabledAddMore:C.length===f,disableRemove:C.length===v,name:`${t}_${a+1}`,fieldName:t})),E.error&&!R?u.createElement(c.A,{error:null===(m=E.error)||void 0===m?void 0:m.toString()}):null)},_=x},46735(e,t,l){l.r(t),l.d(t,{default:()=>S});var a,n,i=l(91557),r=l(44371),o=l(3556),s=l(57315),d=l(20687),u=l(50203),c=l(57660),m=l(89335),p=l(88631),g=l(87773),v=l(30261),f=l(84058),h=l.n(f),y=l(96540),b=l(59262),E=l(56525),A=l(85838);let x=(0,E.A)(e=>(0,A.A)({root:{paddingLeft:0,"& .MuiSelect-root":{paddingLeft:e.spacing(5)}},startIcon:{position:"absolute",left:e.spacing(2)}}),{name:"PrivacyField"});(a=n||(n={}))[a.Everyone=0]="Everyone",a[a.Friends=2]="Friends",a[a.Friends_of_friends=3]="Friends_of_friends",a[a.Only_me=4]="Only_me",a[a.Custom=10]="Custom",a[a.Community=1]="Community";let _=[{label:"Public",value:n.Everyone,icon:"ico-globe"},{label:"Community",value:n.Community,icon:"ico-user-circle"},{label:"Friends",value:n.Friends,icon:"ico-user-two-men"},{label:"Friends of Friends",value:n.Friends_of_friends,icon:"ico-user-man-three"},{label:"Only Me",value:n.Only_me,icon:"ico-lock"},{label:"Custom",value:n.Custom,icon:"ico-gear"}],C=e=>{var t;return null===(t=_.find(t=>t.value==e))||void 0===t?void 0:t.icon},w=(0,o.Ay)(s.A,{name:"AvatarWrapper"})(({theme:e})=>({position:"absolute",left:e.spacing(2),width:e.spacing(3),justifyContent:"center"}));function S({config:e,name:t,disabled:l,formik:a}){let[o,s,{setValue:f}]=(0,v.Mt)(null!=t?t:"PrivacyField"),{disabled:E,description:A,options:_,label:S,variant:k,fullWidth:M,defaultValue:I,minWidth:R,sx:T}=e,{dialogBackend:z}=(0,i.PCX)(),$=x(),[P,F]=y.useState(o.value||I||n.Everyone),W=y.useCallback(e=>{e===n.Custom?O():(F(e),f(e))},[P]),B=!!(s.error&&(s.touched||a.submitCount)),O=()=>{z.present({component:"dialog.DialogCustomListPrivacy",props:{value:P}}).then(e=>{e&&(f(e),F(e))})},L=_.find(e=>Array.isArray(P)?e.value===n.Custom:e.value===P);return y.createElement(d.A,{margin:"normal",fullWidth:M,variant:k,sx:{...T,minWidth:R},"data-testid":h()(`field ${t}`)},y.createElement(u.A,{className:$.root,value:Array.isArray(P)?n.Custom:P,sx:{paddingLeft:0},disabled:E||l||a.isSubmitting,onBlur:o.onBlur,label:S,startAdornment:y.createElement(w,{position:"start"},y.createElement(r.s4,{icon:C(Array.isArray(P)?n.Custom:P)})),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null,transformOrigin:{vertical:"top",horizontal:"left"},"data-testid":h()(`menu ${t}`),PaperProps:{style:{maxHeight:200}}}},_?_.map((e,t)=>y.createElement(c.A,{value:e.value,"data-value":e.value,key:t.toString(),onClick:()=>W(e.value)},e.label)):null),y.createElement(m.A,{id:`label-${t}`},S),(null==L?void 0:L.description)?y.createElement(p.A,null,null==L?void 0:L.description):null,A?y.createElement(g.A,{sx:{fontSize:"13px"},color:"text.hint",mt:1},A):null,B&&y.createElement(b.A,{error:s.error}))}},41661(e,t,l){l.r(t),l.d(t,{default:()=>N});var a=l(91557),n=l(44371),i=l(3556),r=l(60780),o=l(8051),s=l(87773),d=l(30261),u=l(16535),c=l(84058),m=l.n(c),p=l(58156),g=l.n(p),v=l(85015),f=l.n(v),h=l(96540),y=l(59262),b=l(54358),E=l(20889),A=l(3372),x=l(27155),_=l(65467);let C="AnswerItem",w=(0,i.Ay)("div",{name:"AnswerItem",slot:"IconClose"})(({theme:e})=>({cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",width:e.spacing(5),height:e.spacing(5),margin:e.spacing(0,.5),"& .ico":{fontSize:e.mixins.pxToRem(18),color:e.palette.text.hint}})),S=(0,i.Ay)("div",{name:C,slot:"Radiogroup"})(({theme:e})=>({display:"flex",alignItems:"center"})),k=(0,i.Ay)("div",{name:C,slot:"AnswerItemStyled"})(({theme:e})=>({display:"flex",alignItems:"center"})),M=(0,i.Ay)(b.A,{name:C,slot:"AnswerInput"})(({theme:e})=>({width:"calc(100% / 3 * 2)","& .MuiOutlinedInput-root":{borderRadius:e.spacing(.5)}})),I=(0,i.Ay)("div",{name:C,slot:"EndAdornmentButton"})(({theme:e})=>({width:"calc(100% / 3 * 1)",display:"flex",alignItems:"center"})),R=(0,i.Ay)("div",{name:C,slot:"ButtonWrapper"})(({theme:e})=>({display:"flex",width:"100%",justifyContent:"flex-start",alignItem:"center"})),T=(0,i.Ay)(x.A,{name:C,slot:"RadioButton"})(({theme:e})=>({width:40,height:40})),z=({lastElement:e,index:t,item:l,disabled:i,questionIndex:r,addMoreAnswer:o,handleDeleteAnswer:d,handleChangeAnswer:u,handleChangeCorrectAnswer:c,submitCount:p,error:g,handleTouched:v,maxLength:f})=>{let{i18n:b}=(0,a.PCX)(),[x,z]=h.useState(!1),$=Boolean(g&&(x||p)),P=()=>{v(),z(!0)};return h.createElement(h.Fragment,null,h.createElement(k,{key:t,"data-testid":`answer_${t+1}`},h.createElement(M,{onBlur:P,variant:"outlined",margin:"dense",disabled:i,required:!0,placeholder:b.formatMessage({id:"answer_index"},{index:t+1}),defaultValue:l.answer,error:$,onChange:e=>u(e,r,t),inputProps:{maxLength:f}}),h.createElement(I,null,h.createElement(R,null,h.createElement(w,{"data-testid":m()(`button_remove_answer ${C}`),onClick:d},h.createElement(_.A,{title:b.formatMessage({id:"remove_answer"}),placement:"top"},h.createElement(n.s4,{icon:"ico-close"}))),h.createElement(S,null,h.createElement(T,{checked:Boolean(l.is_correct),icon:h.createElement(A.A,null),checkedIcon:h.createElement(E.A,null),disabled:i,name:"checkedH",color:"primary","data-testid":m()(`radio_correct_answer ${C}`),onChange:e=>c(e,r,t)}),h.createElement(s.A,{variant:"body1",color:"text.hint",sx:{display:{sm:"block",xs:"none"}}},b.formatMessage({id:"correct_answer"})))))),$?h.createElement(y.A,{error:g}):null)},$=(0,h.memo)(z),P=(0,i.Ay)("div",{name:"QuizItem",slot:"wrapper-answer"})(({theme:e})=>({borderLeft:e.mixins.border("secondary"),paddingLeft:e.spacing(2),marginBottom:e.spacing(1.5)})),F=(0,i.Ay)(r.A)(({theme:e})=>({fontWeight:e.typography.fontWeightBold,fontSize:e.mixins.pxToRem(13),color:e.palette.primary.main,cursor:"pointer","&:hover":{textDecoration:"underline"}})),W=(0,i.Ay)(o.A)(({theme:e})=>({margin:e.spacing(1,0)})),B=({index:e,item:t,name:l,disabled:n,maxLength:i,lastElement:r,error:s,submitCount:d,formik:u,handleChangeAnswer:c,handleChangeQuestion:p,addMoreQuestion:v,handleDeleteQuestion:E,addMoreAnswer:A,handleDeleteAnswer:x,handleChangeCorrectAnswer:_,handleTouched:C,maxAnswerLength:w})=>{let{i18n:S}=(0,a.PCX)(),{question:k,answers:M}=t,I=h.useRef(!1),[R,T]=h.useState(!1);h.useEffect(()=>{u.isSubmitting&&(I.current=!0)},[u.isSubmitting]);let z=Boolean(g()(s,"question")&&(R||(I.current?d:0))),B=Boolean(g()(s,"answers.[0]")&&f()(g()(s,"answers.[0]"))&&(R||(I.current?d:0))),O=()=>{C(),T(!0)};return h.createElement("div",null,h.createElement(b.A,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,label:S.formatMessage({id:"question_with_index"},{value:e+1}),placeholder:S.formatMessage({id:"question_with_index"},{value:e+1}),disabled:n,defaultValue:k,onChange:t=>p(t,e),error:z,onBlur:O,inputProps:{maxLength:i,"data-testid":m()(`input question ${l}${e}`)},"data-testid":m()(`field question ${l}${e}`)}),z&&h.createElement(y.A,{error:g()(s,"question")}),h.createElement(P,{"data-testid":m()(`box question ${l}`)},h.createElement(o.A,{"data-testid":m()(`questionAnswer ${e}`)},M.length>0&&M.map((t,l)=>h.createElement($,{item:t,key:t.ordering,index:l,disabled:n,questionIndex:e,lastElement:l===M.length-1,addMoreAnswer:A,handleDeleteAnswer:()=>x(t.ordering),handleChangeAnswer:c,handleChangeCorrectAnswer:_,submitCount:I.current?d:0,error:g()(s,`answers.[${l}].answer`),handleTouched:C,maxLength:w}))),h.createElement("div",null,h.createElement(F,{onClick:()=>A(),variant:"text",color:"primary",size:"small",disabled:n,sx:{fontWeight:500},"data-testid":m()(`button_add_answer ${l}`)},S.formatMessage({id:"add_answer"})),h.createElement(F,{onClick:E,disabled:n,variant:"text",size:"small",color:"primary",sx:{fontWeight:500},"data-testid":m()(`button_remove_question ${l}`)},S.formatMessage({id:"remove_question"}))),B?h.createElement(W,null,h.createElement(y.A,{error:g()(s,"answers")})):null))},O=(0,h.memo)(B),L=(0,i.Ay)(r.A)(({theme:e})=>({fontSize:e.mixins.pxToRem(13),minWidth:e.spacing(6.25),fontWeight:e.typography.fontWeightBold,color:e.palette.primary.main,cursor:"pointer",display:"flex",alignItems:"center","&:hover":{textDecoration:"underline"},"& .ico.ico-plus-circle-o":{marginRight:e.spacing(.75),fontSize:e.mixins.pxToRem(15)}})),q=(0,i.Ay)(o.A)(({theme:e})=>({margin:e.spacing(1,0)})),j=(0,i.Ay)(o.A)(({theme:e})=>({marginBottom:e.spacing(1),"& input::placeholder":{color:e.palette.text.hint}})),D=({config:e,formik:t,name:l,disabled:i})=>{let{i18n:r,dialogBackend:o}=(0,a.PCX)(),{minQuestions:c,maxQuestions:p,minAnswers:v,maxAnswers:b,disabled:E,defaultAnswers:A,maxLength:x,maxAnswerLength:_}=e,[{value:C},w,{setValue:S,setTouched:k}]=(0,d.Mt)(null!=l?l:"QuizQuestion"),[M,I]=h.useState(C||[]),R=h.useRef((null==C?void 0:C.length)||0),T=h.useRef(M.map(e=>e.answers[e.answers.length-1].ordering)||[]),z=()=>{(null==w?void 0:w.touched)||k(!0)},$=(e,t)=>{let{value:l}=e.target;I(e=>(0,u.Ay)(e,e=>{e[t].question=l?l.trim():""}))},P=(e,t,l)=>{let{value:a}=e.target;I(e=>(0,u.Ay)(e,e=>{e[t].answers[l].answer=a?a.trim():""}))},F=e=>{if(b>0&&M[e].answers.length>=b){o.alert({title:r.formatMessage({id:"limit_reached"}),message:r.formatMessage({id:"you_have_reached_maximum_number_answers_allowed_question"})});return}T.current=T.current.map((t,l)=>l===e?++t:t),I(t=>(0,u.Ay)(t,t=>{let l={answer:"",ordering:T.current[e]};t[e].answers.push(l)}))},W=(e,t)=>{let l=M[e].answers;if(l){if(l.length<=Math.max(v,1)){o.alert({message:r.formatMessage({id:"you_must_have_min_answer"},{value:v})});return}I(a=>(0,u.Ay)(a,a=>{if(t){let n=a[e].answers.findIndex(e=>e.ordering===t);if(-1===n)return;let i=a[e].answers[n];a[e].answers.splice(n,1),i.is_correct&&(a[e].answers[0].is_correct=1)}else{let r=a[e].answers[l.length-1];r.is_correct&&(a[e].answers[0].is_correct=1),a[e].answers.pop()}}))}},B=()=>{if(p>0&&M.length>=p){o.alert({title:r.formatMessage({id:"limit_reached"}),message:r.formatMessage({id:"you_have_reached_maximum_number_allowed_question"})});return}let e=[],t=2;for(;e.length<(A||v);)0===e.length&&e.push({answer:"",is_correct:1,ordering:1}),e.push({answer:"",is_correct:0,ordering:t}),++t;I(t=>(0,u.Ay)(t,t=>{let l={answers:e,question:"",ordering:++R.current};t.push(l)}))},D=e=>{if(M.length<=Math.max(c,1)){o.alert({message:r.formatMessage({id:"you_must_have_min_question"},{value:c})});return}I(t=>(0,u.Ay)(t,t=>{if(e){let l=t.findIndex(t=>t.ordering===e);t.splice(l,1)}else t.pop()}))},N=(e,t,l)=>{I(e=>(0,u.Ay)(e,e=>{e[t].answers.forEach((e,t)=>{t===l?e.is_correct=1:e.is_correct=0})}))};h.useEffect(()=>{if(M.length<c)B();else{S(M);let e=M.map(e=>e.answers[e.answers.length-1].ordering);T.current=e}},[M]);let V=Boolean(w.error&&(w.touched||t.submitCount)),U=V&&f()(g()(w.error,"[0]"));return h.createElement(j,null,null==M?void 0:M.map((e,a)=>h.createElement(O,{index:a,key:e.ordering,maxLength:x,name:l,item:e,formik:t,disabled:E||i||t.isSubmitting,submitCount:t.submitCount,lastElement:a===M.length-1,handleChangeQuestion:$,handleChangeAnswer:P,addMoreQuestion:B,handleDeleteQuestion:()=>D(e.ordering),addMoreAnswer:()=>F(a),handleDeleteAnswer(e){W(a,e)},handleTouched:z,error:g()(w.error,`[${a}]`),handleChangeCorrectAnswer:N,maxAnswerLength:_})),U&&h.createElement(q,null,h.createElement(y.A,{error:w.error})),h.createElement("div",null,h.createElement(L,{variant:"outlined",color:"primary",disabled:E||i||t.isSubmitting,onClick:B,"data-testid":m()(`button_add_question ${l}`)},h.createElement(n.s4,{icon:"ico-plus-circle-o"}),h.createElement(s.A,{variant:"body1",sx:{fontWeight:"bold"}},r.formatMessage({id:"add_question"})))))},N=D},59311(e,t,l){l.r(t),l.d(t,{default:()=>C});var a=l(44371),n=l(3556),i=l(14767),r=l(8051),o=l(27155),s=l(87773),d=l(20687),u=l(77009),c=l(46772),m=l(30261),p=l(84058),g=l.n(p),v=l(96540),f=l(59262),h=l(45003);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e}).apply(this,arguments)}let b=(0,n.Ay)(i.A,{name:"Title"})(({theme:e})=>({marginBottom:e.spacing(1)})),E=(0,n.Ay)(r.A)(({theme:e})=>({display:"flex",alignItems:"center"})),A=(0,n.Ay)(o.A)(({theme:e})=>({height:42,width:42})),x=(0,n.Ay)(s.A)(({theme:e})=>({marginLeft:e.spacing(3.75)})),_=({config:e,name:t,disabled:l,required:n,formik:i})=>{var o;let[p,_]=(0,m.Mt)(null!=t?t:"RadioGroupField"),{options:C,label:w,margin:S="normal",variant:k,fullWidth:M,disabled:I,labelPlacement:R,inline:T,size:z,required:$,hasFormOrder:P=!1,order:F,description:W,titleConfig:B={},descriptionConfig:O,descriptionPlacement:L="top"}=e,q=P&&F?`${F}. `:null,j=!!(_.error&&(_.touched||i.submitCount));return v.createElement(d.A,{component:"fieldset",margin:S,variant:k,disabled:I||l||i.isSubmitting,fullWidth:M,size:z,"data-testid":g()(`field ${t}`),required:$},w||q?v.createElement(b,y({focused:!1,required:$||n},B),q,w):null,W&&"top"===L?v.createElement(s.A,y({my:1,color:"text.secondary",variant:"body2"},O),W):null,v.createElement(u.A,{"aria-label":w,name:p.name,value:null===(o=p.value)||void 0===o?void 0:o.toString(),onChange:p.onChange,style:T?{flexDirection:"row"}:void 0,sx:{alignItems:"start"}},C?C.map((e,t)=>{var n;return v.createElement(r.A,{key:t.toString()},v.createElement(c.A,{sx:{alignItems:"center"},labelPlacement:R,value:null===(n=e.value)||void 0===n?void 0:n.toString(),disabled:I||e.disabled||l||i.isSubmitting,control:v.createElement(A,{disabled:e.disabled}),label:v.createElement(E,{sx:{my:1}},e.icon?v.createElement(a.s4,{sx:{marginRight:"8px"},icon:e.icon}):null,v.createElement(h.A,{text:e.label,hint:e.hint}))}),(null==e?void 0:e.description)?v.createElement(x,{variant:"body2",color:I||e.disabled||l||i.isSubmitting?"text.disabled":"text.secondary"},e.description):null)}):null),W&&"bottom"===L?v.createElement(s.A,y({my:1,color:"text.secondary",variant:"body2"},O),W):null,j?v.createElement(f.A,{error:_.error}):null)},C=_},1266(e,t,l){l.r(t),l.d(t,{default:()=>x});var a=l(91557),n=l(44371),i=l(38860),r=l(3556),o=l(20687),s=l(60780),d=l(8051),u=l(30261),c=l(84058),m=l.n(c),p=l(97200),g=l.n(p),v=l(96540),f=l(59262);let h={width:2,position:"absolute",left:0,opacity:0},y=(0,r.Ay)(n.s4,{name:"AttachmentIcon"})(({theme:e})=>({paddingRight:e.spacing(.5),fontSize:e.mixins.pxToRem(15)})),b=(0,r.Ay)("div",{name:"AttachmentAction"})(({theme:e})=>({color:e.palette.primary.main,marginLeft:e.spacing(1.5),cursor:"pointer","&:hover":{textDecoration:"underline"}})),E=(0,r.Ay)("div",{name:"Item"})(({theme:e})=>({display:"flex",marginTop:e.spacing(1),fontSize:e.mixins.pxToRem(13),lineHeight:1.5})),A=(0,r.Ay)("div",{name:"ItemInfo"})(({theme:e})=>({display:"flex"}));function x({config:e,name:t,disabled:l,formik:r}){var c;let{dialogBackend:p,i18n:x}=(0,a.PCX)(),[_,C,{setValue:w}]=(0,u.Mt)(null!=t?t:"rawFile"),{item_type:S,fullWidth:k=!0,margin:M="normal",showPreview:I,preventRemove:R,size:T,max_upload_filesize:z,disabled:$,accept:P}=e,[F,W]=(0,v.useState)(_.value),B=(0,v.useRef)(),O=e.placeholder||"Attach File";(0,v.useEffect)(()=>{w(F)},[F]);let L=e=>{e.currentTarget.value=null},q=(0,v.useCallback)(()=>{p.confirm({message:x.formatMessage({id:"are_you_sure_you_want_to_delete_attachment_file"}),title:x.formatMessage({id:"are_you_sure"})}).then(e=>{e&&W(null)})},[]),j=(0,v.useCallback)(()=>{var e;let t=B.current.files;if(0===t.length)return;let l={file_name:t.item(0).name,download_url:URL.createObjectURL(t.item(0)),file:t.item(0),file_type:null===(e=t.item(0))||void 0===e?void 0:e.type,key:g()("file"),fileItemType:S,status:"new"},a=l.file.size,n=l.file_name;if(a>z&&0!==z){p.alert({message:x.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,i.Tu)(n,30),fileSize:(0,i.lT)(l.file.size),maxSize:(0,i.lT)(z)})});return}l&&W(l)},[F]),D=(0,v.useCallback)(()=>{B.current.click()},[]),N=null==F?void 0:null===(c=F.file_type)||void 0===c?void 0:c.match("image/*");return v.createElement(o.A,{fullWidth:k,margin:M,size:T,"data-testid":m()(`field ${t}`)},F?v.createElement(d.A,null,I&&N?v.createElement(d.A,{sx:{"& img":{width:"auto",maxWidth:"120px",maxHeight:"120px"}}},v.createElement(n._V,{src:(null==F?void 0:F.url)||(null==F?void 0:F.download_url)})):null,v.createElement(E,null,v.createElement(A,null,v.createElement(y,{icon:"ico-paperclip-alt"}),v.createElement("div",null,F.file_name)),R?v.createElement(b,{onClick:()=>D()},x.formatMessage({id:"edit"})):v.createElement(b,{onClick:()=>q()},x.formatMessage({id:"remove"})))):v.createElement("div",null,v.createElement(s.A,{variant:"outlined",size:"small",color:"primary","data-testid":m()(`button ${t}`),onClick:D,disabled:$||l||r.isSubmitting,startIcon:v.createElement(n.s4,{icon:"ico-paperclip-alt"})},O)),C.error&&v.createElement(f.A,{error:C.error}),v.createElement("input",{onClick:L,"data-testid":m()(`input ${t}`),ref:B,style:h,accept:P,"aria-hidden":!0,type:"file",multiple:!1,onChange:j}))}},3928(e,t,l){l.r(t),l.d(t,{default:()=>g});var a=l(3556),n=l(8051),i=l(20687),r=l(44371),o=l(84058),s=l.n(o),d=l(96540);let u=(0,a.Ay)(n.A,{name:"ImageWrapper"})(({theme:e})=>({width:"auto",maxWidth:e.mixins.pxToRem(240),maxHeight:e.mixins.pxToRem(150),margin:"0 auto",height:e.mixins.pxToRem(150),display:"flex",alignItems:"center","& img":{maxHeight:e.mixins.pxToRem(150)},[e.breakpoints.down("sm")]:{height:"auto"}})),c=(0,a.Ay)(r.s4,{name:"Icon"})(({theme:e})=>({fontSize:e.mixins.pxToRem(20),[e.breakpoints.down("sm")]:{padding:e.spacing(3,0),transform:"rotate(90deg)"}})),m=(0,a.Ay)(n.A,{name:"Wrapper"})(({theme:e})=>({display:"flex",justifyContent:"space-evenly",alignItems:"center",marginTop:e.spacing(2),[e.breakpoints.down("sm")]:{flexDirection:"column"}})),p=(0,a.Ay)(n.A,{name:"TitleWrapper"})(({theme:e})=>({width:"auto",maxWidth:e.mixins.pxToRem(240),wordBreak:"break-all"}));function g({config:e,name:t}){var l,a;let{fullWidth:o=!0,margin:g="normal",arrowConfig:v,from:f,to:h}=e,y=null===(l=null==f?void 0:f.dataSource.file_type)||void 0===l?void 0:l.match("image/*"),b=null===(a=null==h?void 0:h.dataSource.file_type)||void 0===a?void 0:a.match("image/*");return d.createElement(i.A,{fullWidth:o,margin:g,"data-testid":s()(`field ${t}`)},d.createElement(m,null,d.createElement(n.A,null,y?d.createElement(u,null,d.createElement(r._V,{src:null==f?void 0:f.dataSource.url})):d.createElement(p,null,null==f?void 0:f.dataSource.url)),d.createElement(c,{icon:v.icon}),d.createElement(n.A,null,b?d.createElement(u,null,d.createElement(r._V,{src:null==h?void 0:h.dataSource.url})):d.createElement(p,null,null==h?void 0:h.dataSource.url))))}},2912(e,t,l){l.r(t),l.d(t,{default:()=>g});var a=l(72871),n=l(91557),i=l(44371),r=l(3556),o=l(20687),s=l(30261),d=l(84058),u=l.n(d),c=l(96540);let m=(0,r.Ay)(i.s4,{name:"IconClearStyled"})(({theme:e})=>({marginRight:e.spacing(.5),cursor:"pointer",color:e.palette.text.hint})),p=(0,r.Ay)(i.Gd,{name:"SearchWrapper"})(({theme:e})=>({"& input::placeholder, .ico":{color:e.palette.text.hint}}));function g({config:{placeholder:e,size:t,margin:l="normal",fullWidth:i=!0,className:r,sx:d},name:g}){let{eventCenter:v}=(0,n.PCX)(),[f,,{setValue:h}]=(0,s.Mt)(g),[y,b]=(0,c.useState)(f.value||""),{usePageParams:E}=(0,n.PCX)(),A=E(),{formContext:x}=(0,a.$J)(),_=null==x?void 0:x.isSidebarAppMobile;(0,c.useEffect)(()=>{(null==A?void 0:A.q)&&(b(null==A?void 0:A.q),h(null==A?void 0:A.q))},[A]),(0,c.useEffect)(()=>{v.dispatch("minimizeGlobalSearchForm",!0)});let C=c.useCallback(e=>{"Enter"===e.key&&(y?h(y.trim()):h(""),e.preventDefault())},[y]),w=()=>{b(""),h("")},S=e=>{var t;let l=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value;b(l),_&&h(l)};return c.createElement(o.A,{size:t,margin:l,fullWidth:i,"data-testid":u()(`field ${g}`),sx:d},c.createElement(p,{name:"q",value:y,onChange:S,placeholder:e,onKeyDown:_?void 0:C,endAdornment:y?c.createElement(m,{icon:"ico-close",onClick:w}):null}))}},81296(e,t,l){l.r(t),l.d(t,{default:()=>x});var a=l(8051),n=l(92885),i=l(44383),r=l.n(i),o=l(90179),s=l.n(o),d=l(42194),u=l.n(d),c=l(38221),m=l.n(c),p=l(29132),g=l.n(p),v=l(98023),f=l.n(v),h=l(96540),y=l(72871),b=l(91557),E=l(30261);function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e}).apply(this,arguments)}function x({config:{excludeFields:e,component:t,label:l="reset",align:i="right",...o},name:d,formik:c}){let{i18n:p}=(0,b.PCX)(),{value:v,acceptPageParams:x}=(0,y.$J)(),{values:_={},setValues:C}=(0,E.j7)(),w=s()({...v},e),S=s()(Object.assign({},_),e),k=r()(Object.assign({},_),e),M=g()(w,u()(S,e=>!e),(e,t)=>{if(x&&(f()(e)||f()(t)))return e==t}),I=h.useCallback(()=>{if(M)return;let e={...k,...w};C(e)},[w,M,k]),R=m()(I,200),T=()=>{R()};return h.createElement(a.A,A({sx:{textAlign:i}},o),h.createElement(n.A,{color:"primary",component:"button",variant:"body2",onClick:T,disabled:M,type:"button"},l&&p.formatMessage({id:l})))}},56184(e,t,l){l.r(t),l.d(t,{default:()=>I});var a=l(3556),n=l(60780),i=l(30719),r=l(2491),o=l(20687),s=l(8051),d=l(44383),u=l.n(d),c=l(90179),m=l.n(c),p=l(84058),g=l.n(p),v=l(42194),f=l.n(v),h=l(69843),y=l.n(h),b=l(29132),E=l.n(b),A=l(98023),x=l.n(A),_=l(96540),C=l(72871),w=l(91557),S=l(30261);let k=(0,a.Ay)(n.A)(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,fontSize:e.mixins.pxToRem(13),color:e.palette.primary.main})),M=e=>y()(e)||""===e;function I({config:{excludeFields:e,label:t="reset",align:l="right",size:a="medium",margin:n,fullWidth:d,sxFieldWrapper:c,flexWidth:p},name:v}){let{i18n:h}=(0,w.PCX)(),{value:y,acceptPageParams:b}=(0,C.$J)(),{values:A={},setValues:I}=(0,S.j7)(),R=m()({...y},e),T=m()(Object.assign({},A),e),z=u()(Object.assign({},A),e),$=E()(f()(R,M),f()(T,M),(e,t)=>{if(b&&(x()(e)||x()(t)))return e==t}),P=(0,i.A)(),F=(0,r.A)(P.breakpoints.down("sm")),W=_.useCallback(()=>{$||I({...z,...R})},[$,R,z]);return _.createElement(o.A,{size:a,margin:n,fullWidth:d,"data-testid":g()(`field ${v}`),sx:{minWidth:!F&&p?"275px":"auto",...c}},_.createElement(s.A,{sx:{textAlign:l},component:"span"},_.createElement(k,{size:F?"medium":a,color:"primary",variant:"text",onClick:W,disabled:$},t&&h.formatMessage({id:t}))))}},71180(e,t,l){l.r(t),l.d(t,{default:()=>z});var a=l(38860),n=l(8051),i=l(54358),r=l(77298),o=l(20687),s=l(18727),d=l(87773),u=l(88631),c=l(59006),m=l(30261),p=l(84058),g=l.n(p),v=l(58156),f=l.n(v),h=l(56449),y=l.n(h),b=l(23181),E=l.n(b),A=l(80191),x=l.n(A),_=l(2404),C=l.n(_),w=l(96540),S=l(3556),k=l(91557),M=l(84680);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e}).apply(this,arguments)}let R=(0,S.Ay)("span")(({theme:e})=>({paddingLeft:e.spacing(1.5)})),T=({config:e,disabled:t,required:l,name:p,formik:v})=>{var h,b,A;let[_,S,{setValue:T,setTouched:z}]=(0,m.Mt)(null!=p?p:"SelectField"),{slotName:$}=(0,M.lA)(),{label:P,margin:F,disabled:W,fullWidth:B,hiddenLabel:O,required:L,variant:q,size:j,sx:D,sxFieldWrapper:N,description:V,defaultValue:U="",value_type:X,multiple:H=!1,autoComplete:Q="off",options:G=[],subOptionPrefix:J="  ",suboptions:K={},allowParent:Y=!0,subOptionKey:Z="options",labelProp:ee="label",valueProp:et="value",relatedFieldName:el,optionRelatedMapping:ea,alwaysShow:en,disableClearable:ei,disablePortal:er}=e,[eo]=(0,m.Mt)(null!=el?el:`${p}_child`),[es,ed]=w.useState([]),[eu,ec]=w.useState([]),{i18n:em,useIsMobile:ep}=(0,k.PCX)(),eg=ep();w.useEffect(()=>{if(el){if(ea){if(y()(null==eo?void 0:eo.value))return;let e=ea[null==eo?void 0:eo.value]||[];if(ec(e),e.some(e=>e.value===_.value))return;let t=e.find(e=>null==e?void 0:e.is_default);T((null==t?void 0:t.value)||null);return}y()(null==eo?void 0:eo.value)?ed(null==eo?void 0:eo.value):ed([null==eo?void 0:eo.value])}},[el,null==eo?void 0:eo.value]);let ev=!!(S.error&&(S.touched||v.submitCount)),ef=(0,c.Z)({stringify:({label:e})=>`${e}`}),eh=(e,t)=>f()(e,"value")==f()(t,"value"),ey=w.useCallback((e,t)=>{let l=t.prefix?1:0;return(null==t?void 0:t.level)&&(l=(null==t?void 0:t.level)-1),w.createElement(n.A,I({"data-value":null==t?void 0:t.value,component:"li"},e,{key:`${null==t?void 0:t.value}${null==t?void 0:t.label}`}),l?E()(0,l).map((e,t)=>w.createElement(R,{key:`indent${t}`})):"",t.label)},[]),eb=e=>{var t;return null!==(t=f()(e,"label"))&&void 0!==t?t:""},eE=w.useMemo(()=>{let e=[];return(y()(G)&&(e=eu.length&&ea?eu:G.filter(e=>!es.includes(e.value))),y()(G))?(0,a.kU)(e,K,Y,Z,J,0,et,ee):[]},[ea,eu,G,K,Z,Y,J,et,ee,es]),{optionsActive:eA,optionsUnactive:ex}=eE.reduce((e,t)=>(void 0!==t.is_active?t.is_active?e.optionsActive.push(t):e.optionsUnactive.push(t):e.optionsActive.push(t),e),{optionsActive:[],optionsUnactive:[]}),e_=w.useMemo(()=>{let e={};return eE.forEach(t=>{e[t.value]=t}),e},[eE]),eC=w.useMemo(()=>G.findIndex(e=>e.value===_.value),[_.value,G]),ew=e=>{y()(e)?T(e.map(e=>e.value)):T([])},eS=w.useCallback(e=>{if(e){let t=e.value;T("array"===X?[t]:t)}else T("array"===X?[]:null)},[]),ek=e=>((null==S?void 0:S.touched)||z(!0),H?ew(e):eS(e)),eM=w.useMemo(()=>{if(H)return y()(_.value)?_.value.map(e=>e_[e]).filter(e=>void 0!==e):[];{let e=y()(_.value)?_.value[0]:_.value;if(void 0!==e)return e_[e]}},[_.value,H,e_]),eI=w.useMemo(()=>{if(H)return y()(U)?U.map(e=>e_[e]).filter(e=>void 0!==e):[];{let e=y()(U)?U[0]:U;if(void 0!==e)return e_[e]}},[]);if(!eE.length&&!en)return null;let eR=e=>{13===e.keyCode&&e.preventDefault()},eT=e=>{_.onBlur(e),z(!0)},ez=e=>w.createElement(i.A,I({},e,{label:P,variant:q,size:j,fullWidth:!0,onKeyDown:eR,error:ev,required:L||l,inputProps:{...e.inputProps,"data-testid":g()(`input ${p}`),form:{autoComplete:Q}},sx:D})),e$=(e,t)=>e.map((e,l)=>w.createElement(r.A,I({},t({index:l}),{key:null==e?void 0:e.value,label:null==e?void 0:e.label,sx:{opacity:ex.map(e=>e.value).includes(null==e?void 0:e.value)?.5:void 0}}))),eP=x()(y()(eM)?eM:[eM],ex,C()),eF=eP.length;return w.createElement(o.A,{margin:null!=F?F:"normal",disabled:W,fullWidth:B,hiddenLabel:O,required:L||l,sx:N,error:ev,size:j,variant:q,"data-testid":g()(`field ${p}`)},w.createElement(s.A,{clearText:em.formatMessage({id:"clear"}),openText:em.formatMessage({id:"open"}),closeText:em.formatMessage({id:"close"}),filterOptions:ef,disableClearable:ei||L,openOnFocus:!0,value:null!==(A=null!=eM?eM:eI)&&void 0!==A?A:U,disabled:W||t||v.isSubmitting,defaultValue:null!=eI?eI:U,onChange:(e,t)=>ek(t),onBlur:eT,id:`select-${p}`,sx:D,isOptionEqualToValue:eh,options:eA,noOptionsText:em.formatMessage({id:"no_options"}),getOptionDisabled:e=>e.disabled,multiple:H,getOptionLabel:eb,autoHighlight:!0,renderInput:ez,renderOption:ey,renderTags:e$,ListboxProps:{"data-testid":g()(`menu ${p}`)},"data-testid":g()(`input ${p}`),disablePortal:null!=er?er:"side"===$&&!eg}),!V&&(null===(h=G[eC])||void 0===h?void 0:h.description)&&w.createElement(d.A,{sx:{fontSize:"13px"},color:"text.hint",mt:1},null===(b=G[eC])||void 0===b?void 0:b.description),V&&w.createElement(d.A,{sx:{fontSize:"13px"},color:"text.hint",mt:1},V),eF>0&&w.createElement(d.A,{mt:1,color:"warning.main",variant:"body2"},em.formatMessage({id:"the_following_option_s_have_been_deactivated"},{values:eP.map(e=>e.label).join(", "),total:eF})),ev&&w.createElement(u.A,null,null==S?void 0:S.error))},z=T},35173(e,t,l){l.r(t),l.d(t,{default:()=>I});var a=l(91557),n=l(44371),i=l(38860),r=l(60780),o=l(89335),s=l(20687),d=l(8051),u=l(87773),c=l(81502),m=l(92885),p=l(3556),g=l(30261),v=l(84058),f=l.n(v),h=l(97200),y=l.n(h),b=l(96540),E=l(59262);let A="SingleAudioField",x=(0,p.Ay)(r.A,{name:A,slot:"DropButton"})(({theme:e,isOver:t})=>({...t&&{backgroundColor:e.palette.action.hover}})),_=(0,p.Ay)("div",{name:A,slot:"AudioUploaded"})(({theme:e})=>({display:"flex",alignItems:"center",fontSize:e.mixins.pxToRem(13),"& .ico-music-note-o":{fontSize:e.mixins.pxToRem(15)}})),C=(0,p.Ay)("div",{name:A,slot:"WrapTitleStyled"})(({theme:e})=>({display:"flex",alignItems:"center"})),w=(0,p.Ay)("div",{name:A,slot:"DropzoneBox"})(({theme:e})=>({width:"fit-content"})),S=(0,p.Ay)(o.A,{name:A,slot:"Label"})(({theme:e,haveError:t})=>({...t&&{color:e.palette.error.main}})),k=(0,p.Ay)("div",{name:A,slot:"TitleSong"})(({theme:e})=>({marginLeft:e.spacing(1),marginRight:e.spacing(1),overflowWrap:"anywhere"})),M=e=>{let t=e.lastIndexOf(".");return e.slice(0,t)};function I({name:e,config:t,disabled:l,formik:r}){var o,p;let{label:v="Select Audio",description:h,item_type:A,accept:I="audio/*",max_upload_filesize:R,max_length_name:T,upload_url:z,disabled:$,storage_id:P,placeholder:F,autoFillValueName:W,messageAcceptFail:B}=t,{dialogBackend:O,i18n:L}=(0,a.PCX)(),[q,j,{setValue:D,setTouched:N}]=(0,g.Mt)(null!=e?e:"ItemPhotoField"),V=(0,b.useRef)(),[U,X]=b.useState(0),H=e=>{let t=Math.round(100*e.loaded/e.total);X(t)},Q=()=>{V.current.click()},G=()=>{D(void 0)},J=e=>{var t;let l={id:0,uid:y()("file"),source:URL.createObjectURL(e),file:e,file_name:e.name,file_type:e.type,file_size:e.size,fileItemType:A,upload_url:z,status:"new",storage_id:null!=P?P:null,onUploadProgress:H},a=l.file_size;if(a>(null==R?void 0:R.music)&&(null==R?void 0:R.music)){O.alert({message:L.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,i.Tu)(l.file_name,30),fileSize:(0,i.lT)(l.file_size),maxSize:(0,i.lT)(null==R?void 0:R.music)})});return}if(!(0,i.HH)(null==l?void 0:null===(t=l.file)||void 0===t?void 0:t.type,I)){O.alert({message:L.formatMessage({id:B||"file_accept_type_fail"})}),(null==V?void 0:V.current)&&(V.current.value=null);return}l&&(W&&r.setFieldValue(W,M(l.file_name).slice(0,T)),D(l))},K=()=>{(null==j?void 0:j.touched)||N(!0);let e=V.current.files;e&&J(e.item(0))},Y=e=>{if(!e)return;let t=e[0];J(t)},Z=e=>{e.currentTarget.value=null},ee=!!(j.error&&(j.touched||r.submitCount));return b.createElement(s.A,{fullWidth:!0,margin:"normal","data-testid":f()(`field ${e}`)},b.createElement(S,{haveError:ee,required:!0,variant:"outlined",shrink:"true"},v),b.createElement(d.A,{sx:{p:2,pt:2.5}},b.createElement(u.A,{variant:"body2",color:"text.hint",mb:.5,component:"p"},q.value?L.formatMessage({id:"audio_file_selected"}):h),q.value?b.createElement(_,{"data-testid":f()("audio uploaded")},b.createElement(C,{"data-testid":f()("audio uploaded wrapTitle")},b.createElement(n.s4,{icon:"ico-music-note-o"}),b.createElement(k,{"data-testid":f()("audio uploaded title")},(0,i.Tu)((null===(o=q.value)||void 0===o?void 0:o.file_name)||(null===(p=q.value)||void 0===p?void 0:p.name),30))),r.isSubmitting?b.createElement(d.A,{sx:{marginLeft:"auto",minWidth:"100px",pl:1,mt:1}},b.createElement(c.A,{"data-testid":f()("audio uploaded progress"),variant:"determinate",value:U})):b.createElement(m.A,{"data-testid":f()("audio uploaded remove"),variant:"body2",color:"primary",component:"span",role:"button",onClick:G},L.formatMessage({id:"remove"}))):b.createElement(w,null,b.createElement(n.dl,{onDrop:e=>Y(e),render:({canDrop:t,isOver:a})=>b.createElement(x,{onClick:Q,size:"small",color:"primary",sx:{fontWeight:"bold"},isOver:a,variant:"outlined",disabled:$||l||r.isSubmitting,"data-testid":f()(`button ${e}`),startIcon:b.createElement(n.s4,{icon:"ico-upload"})},F)})),ee?b.createElement(E.A,{error:j.error}):null),b.createElement(n._r,{haveError:ee,children:t.label,variant:"outlined"}),b.createElement("input",{ref:V,onClick:Z,className:"srOnly",type:"file","data-testid":f()(`input ${e}`),multiple:!1,accept:I,onChange:K}))}},57124(e,t,l){l.r(t),l.d(t,{default:()=>C});var a=l(91557),n=l(44371),i=l(38860),r=l(60780),o=l(20687),s=l(87773),d=l(8051),u=l(81502),c=l(92885),m=l(3556),p=l(30261),g=l(84058),v=l.n(g),f=l(97200),h=l.n(f),y=l(96540),b=l(59262);let E="SingleVideoField",A=(0,m.Ay)(r.A,{name:E,slot:"DropButton"})(({theme:e,isOver:t})=>({...t&&{backgroundColor:e.palette.action.hover}})),x=(0,m.Ay)("div",{name:E,slot:"VideoUploaded"})(({theme:e})=>({display:"flex",fontSize:e.mixins.pxToRem(13),"& .ico-video":{fontSize:e.mixins.pxToRem(15)}})),_=(0,m.Ay)("div",{name:E,slot:"DropzoneBox"})(({theme:e})=>({width:"fit-content"}));function C({name:e,config:t,disabled:l,formik:r}){var m,g;let{label:f="Select Video",description:E,item_type:C,accept:w="video/*",max_upload_filesize:S,upload_url:k,disabled:M,storage_id:I}=t,{dialogBackend:R,i18n:T}=(0,a.PCX)(),[z,$,{setValue:P,setTouched:F}]=(0,p.Mt)(null!=e?e:"ItemPhotoField"),[W,B]=y.useState(!1),O=(0,y.useRef)(),[L,q]=y.useState(0),j=e=>{let t=Math.round(100*e.loaded/e.total);q(t)},D=()=>{O.current.click()},N=()=>{B(!1),P(void 0)},V=e=>{var t;let l={id:0,uid:h()("file"),source:URL.createObjectURL(e),file:e,file_name:e.name,file_type:e.type,file_size:e.size,fileItemType:C,upload_url:k,storage_id:null!=I?I:null,status:"new",onUploadProgress:j},a=l.file.size;if(!(0,i.HH)(null==l?void 0:null===(t=l.file)||void 0===t?void 0:t.type,w)){R.alert({message:T.formatMessage({id:"file_accept_type_fail"})}),(null==O?void 0:O.current)&&(O.current.value=null);return}if(a>S&&0!==S){R.alert({message:T.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,i.Tu)(l.file_name,30),fileSize:(0,i.lT)(l.file.size),maxSize:(0,i.lT)(S)})});return}l&&(P(l),B(!0))},U=()=>{(null==$?void 0:$.touched)||F(!0);let e=O.current.files;e&&V(e.item(0))},X=e=>{if(!e)return;let t=e[0];V(t)},H=e=>{e.currentTarget.value=null},Q=!!($.error&&($.touched||r.submitCount));return y.createElement(o.A,{fullWidth:!0,margin:"normal","data-testid":v()(`field ${e}`)},y.createElement(s.A,{variant:"body2",color:"text.hint",mb:1.5,component:"p"},W?T.formatMessage({id:"video_file_selected"}):E),W?y.createElement(x,null,y.createElement(n.s4,{icon:"ico-video"}),y.createElement(d.A,{ml:1,mr:1},(0,i.Tu)(null===(m=z.value)||void 0===m?void 0:null===(g=m.file)||void 0===g?void 0:g.name,30)),r.isSubmitting?y.createElement(d.A,{sx:{marginLeft:"auto",minWidth:"100px",pl:1,mt:1}},y.createElement(u.A,{variant:"determinate",value:L})):y.createElement(c.A,{variant:"body2",color:"primary",component:"span",role:"button",onClick:N},T.formatMessage({id:"remove"}))):y.createElement(_,null,y.createElement(n.dl,{onDrop:e=>X(e),render:({canDrop:t,isOver:a})=>y.createElement(A,{onClick:D,size:"small",color:"primary",sx:{fontWeight:"bold"},isOver:a,variant:"outlined",disabled:M||l||r.isSubmitting,"data-testid":v()(`button ${e}`),startIcon:y.createElement(n.s4,{icon:"ico-upload"})},f)})),Q?y.createElement(b.A,{error:$.error}):null,y.createElement("input",{ref:O,onClick:H,className:"srOnly",type:"file","data-testid":v()(`input ${e}`),multiple:!1,accept:w,onChange:U}))}}}]);