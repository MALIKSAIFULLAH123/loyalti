"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-form-elements-VideoUrlField-VideoUrlField"],{19471(e,t,l){l.d(t,{A:()=>c});var r=l(91557),a=l(88631),n=l(8051),i=l(56449),o=l.n(i),d=l(85015),u=l.n(d),s=l(96540),m=l(90243);function c({text:e,sx:t,error:l=!1,component:i="span"}){let{i18n:d}=(0,r.PCX)();if(!e)return null;if(u()(e)&&e.startsWith("<html>"))return s.createElement(a.A,{sx:t,error:l},d.formatMessage({id:"[placeholder]",defaultMessage:e}));let c=o()(e)?e[0]:e;return s.createElement(a.A,{sx:t,error:l},s.createElement(n.A,{component:i,sx:{whiteSpace:"normal",wordBreak:"break-word",mb:.5}},s.createElement(m.Ay,{html:c})))}},45003(e,t,l){l.d(t,{A:()=>n});var r=l(91557),a=l(96540);function n({text:e}){let{i18n:t}=(0,r.PCX)();return e?e.startsWith("<html>")?a.createElement(a.Fragment,null,t.formatMessage({id:"[placeholder]",defaultMessage:e})):a.createElement(a.Fragment,null,e):null}},48248(e,t,l){l.r(t),l.d(t,{default:()=>_});var r=l(91557),a=l(3556),n=l(54358),i=l(8051),o=l(30261),d=l(84058),u=l.n(d),s=l(38221),m=l.n(s),c=l(62193),v=l.n(c),p=l(96540),f=l(19471),h=l(45003),b=l(67338),E=l(44371);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e}).apply(this,arguments)}let x="VideoEmbedView",A=(0,a.Ay)("div",{name:x,slot:"playerWrapper"})(({theme:e})=>({})),y=(0,a.Ay)("div",{name:x,slot:"title"})(({theme:e})=>({borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,border:e.mixins.border("secondary"),borderTop:"none",padding:e.spacing(2),display:"flex",flexDirection:"column"})),k=(0,a.Ay)(n.A,{name:"Text"})(({theme:e})=>({"& input::placeholder":{color:e.palette.text.hint}})),w=({config:e,disabled:t,name:l,formik:a})=>{let[n,d,{setValue:s,setTouched:c}]=(0,o.Mt)(null!=l?l:"VideoUrlField"),{apiClient:x,compactData:w}=(0,r.PCX)(),{label:_,hint:C,autoComplete:F,placeholder:M,noFeedback:S,variant:V,disabled:R,margin:P,fullWidth:B,type:O="text",rows:W,size:j,required:T,description:U,autoFocus:X,readOnly:$,maxLength:q,fetchEndpoint:D,autoFillValueFromLink:I={title:":title",text:":description"},showEmbed:L=!1}=e,N=p.useRef(""),[z,G]=p.useState(!1),[H,J]=p.useState(""),[K,Q]=p.useState({}),Y=p.useMemo(()=>{let e=()=>{""===N.current||d.error||z||(G(!0),a.setSubmitting(!0),x.request({url:D||"/link/fetch",method:"post",data:{link:N.current}}).then(e=>{var t;let l=null===(t=e.data)||void 0===t?void 0:t.data;if(J(""),L&&Q(l),!v()(I)){let r=w(I,l);Object.keys(r).forEach(e=>a.setFieldValue(e,r[e]))}}).catch(e=>{var t,l,r,a,n,i,o;let d=(null===(t=e.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:null===(r=l.error)||void 0===r?void 0:r.message)||(null===(a=e.response)||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.message)||(null===(i=e.response)||void 0===i?void 0:null===(o=i.data)||void 0===o?void 0:o.error)||e.message;J(d)}).finally(()=>{(null==d?void 0:d.touched)||c(!0),a.setSubmitting(!1),G(!1)}))};return m()(e,1e3)},[x,w,z,G,d.error]);if(p.useEffect(()=>{""===n.value||d.error||Y()},[null==d?void 0:d.error,n.value]),!n.value){var Z;n.value=null!==(Z=e.defaultValue)&&void 0!==Z?Z:""}let ee=e=>{s(e.target.value),N.current=e.target.value},et=H||d.error,el=Boolean(et&&(d.touched||a.submitCount)),er=(0,p.createElement)(k,{...n,disabled:R||t||a.isSubmitting||z,required:T,label:p.createElement(h.A,{hint:C,text:_}),autoFocus:X,variant:V,size:j,"data-testid":u()(`field ${l}`),inputProps:{"data-testid":u()(`input ${l}`),maxLength:q,autoComplete:F,readOnly:$},rows:W,placeholder:M,onChange:ee,margin:P,error:el,fullWidth:B,type:O,helperText:S?null:el?et:U?p.createElement(f.A,{text:U,hint:C}):null});return p.createElement(p.Fragment,null,er,!v()(K)&&L&&p.createElement(i.A,{mt:2},p.createElement(A,null,p.createElement(b.A,g({src:null==K?void 0:K.link,thumb_url:null==K?void 0:K.image,autoplayIntersection:!0,embed_code:null==K?void 0:K.embed_code},K))),p.createElement(y,{"data-testid":"embedview"},p.createElement(i.A,{mb:1,fontWeight:600},p.createElement(r.N_E,{to:null==K?void 0:K.link,asModal:!0},p.createElement(E.mE,{variant:"h4",lines:1},K.title))),p.createElement(i.A,{mb:1},p.createElement(E.mE,{variant:"body1",lines:2},K.description)))))},_=w}}]);