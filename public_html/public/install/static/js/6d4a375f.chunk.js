"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["components-ItemDetailInteractionInModal-ItemDetailInteractionInModal","metafox-core-components-ItemDetailInteractionInModal-TaggedFriends","metafox-core-components-ItemDetailInteractionInModal-TaggedPlace"],{51504(e,t,n){n.r(t),n.d(t,{default:()=>F});var l=n(77066),a=n(63455),r=n(62007),i=n(91557),o=n(84680),c=n(44371),m=n(8051),d=n(67131),s=n(52705),u=n(3556),p=n(96540),g=n(71468),f=n(56525),h=n(85838);let v=(0,f.A)(e=>(0,h.A)({profileLink:{fontWeight:e.typography.fontWeightBold},statusRoot:{display:"block",marginBottom:e.spacing(2),"& .profileLink, & .profileLink:active":{color:e.palette.text.primary},"& a":{color:e.palette.text.primary,"&:hover":{textDecoration:"underline"}}},headerHeadline:{fontSize:e.mixins.pxToRem(15),"& a:not(.simpleLink)":{fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary},"& a:hover":{textDecoration:"underline"}}}),{name:"ItemDetailInteractionInModal"});var E=n(81300),y=n(14992),x=n(78634);function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}let _="ItemDetailInteractionInModal",k=(0,u.Ay)(m.A,{name:_,slot:"root"})(({theme:e})=>({backgroundColor:e.palette.background.paper,paddingBottom:0,display:"flex",flexFlow:"column",height:"100%",justifyContent:"space-between",minWidth:"420px",[e.breakpoints.down("sm")]:{width:"100%",maxHeight:"none",borderRadius:0,minWidth:"auto"}})),w=(0,u.Ay)("div",{name:_,slot:"contentWrapper"})(({theme:e})=>({flex:1,minHeight:0,display:"flex",flexFlow:"column",position:"relative"})),I=(0,u.Ay)("div",{name:_,slot:"header"})(({theme:e})=>({padding:e.spacing(2),display:"flex",flexDirection:"row"})),C=(0,u.Ay)("div",{name:_,slot:"body"})(({theme:e})=>({flex:1,minHeight:0})),b=(0,u.Ay)("div",{name:_,slot:"footer",shouldForwardProp:e=>"maxHeight"!==e})(({theme:e,maxHeight:t})=>({backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),zIndex:99,minHeight:e.spacing(6),...t&&{maxHeight:t},[e.breakpoints.down("sm")]:{position:"unset",maxHeight:"none"}})),D=(0,u.Ay)("div",{name:_,slot:"ContentStyled"})(({theme:e})=>({marginBottom:e.spacing(1)})),H=(0,u.Ay)("div",{name:_,slot:"privacyBlock"})(({theme:e})=>({display:"flex",flexDirection:"row",alignItems:"center",color:e.palette.text.secondary})),M=(0,u.Ay)(c.xE,{name:_,slot:"profileLink"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),fontWeight:e.typography.fontWeightBold,paddingRight:e.spacing(.5),color:e.palette.text.primary})),N=(0,u.Ay)("span",{name:"HeadlineSpan"})(({theme:e})=>({paddingRight:e.spacing(.5),color:e.palette.text.secondary})),R=(0,u.Ay)("div",{name:_,slot:"AvatarWrapper"})(({theme:e})=>({marginRight:e.spacing(1.5)})),W=(0,u.Ay)(m.A,{name:"HeaderSubInfo"})(({theme:e})=>({display:"flex",flexDirection:"column",justifyContent:"center"})),P=(0,u.Ay)(m.A,{name:_,slot:"WrapAction"})(({theme:e})=>({display:"flex",flexDirection:"row"})),B=({identity:e,item:t,user:n,loading:s,commentlistingComponent:u,startFooterItems:f,commentComposerProps:h,statisticDisplay:_,menuName:H,searchParams:B,isShowIClose:F=!0})=>{var O;let S=p.useRef(),$=p.useRef(null),z=p.useRef(null),T=p.useRef(null),{ReactionActButton:j,CommentReaction:V,CommentActButton:X,ShareActButton:J,ItemActionMenu:Z,jsxBackend:q,useActionControl:G,i18n:K}=(0,i.PCX)(),[Q,U]=G(e,{commentFocused:!1,menuOpened:!1,commentOpened:!0,commentInputRef:S}),Y=(0,g.d4)(e=>(0,l.Vo)(e,t)),ee=(0,g.d4)(e=>(0,i.B_w)(e,null==t?void 0:t.owner)),et=v(),en=(0,i.tgz)(),el=(e,t)=>Q("comment/viewMoreComments",e,t);if(s&&!(null==t?void 0:t.extra))return p.createElement(L,null);let ea=q.get("core.itemView.pendingReviewCard");if(!t||!n)return null;let{statistic:er,most_reactions_information:ei,extra:eo,location:ec}=t,em=q.get("CommentComposer"),ed=q.get("core.ui.iconCloseVideo");return p.createElement(k,null,p.createElement(w,{ref:$},p.createElement(ea,{item:t,sx:{borderRadius:0}}),p.createElement(I,{ref:z},p.createElement(R,null,p.createElement(c.H8,{user:n,size:48,"data-testid":"author"})),p.createElement(W,{flex:1},p.createElement("div",{className:et.headerHeadline},p.createElement(M,{to:n.link,user:n,"data-testid":"headline"}),(null==ee?void 0:ee.resource_name)!==(null==n?void 0:n.resource_name)&&ee&&p.createElement(N,null,K.formatMessage({id:"to_parent_user"},{icon:()=>p.createElement(c.s4,{icon:"ico-caret-right",className:et.caretIcon}),parent_user:()=>p.createElement(a.A,{user:ee,className:et.profileLink})}))),p.createElement(c.J7,{sx:{color:"text.secondary",mt:.5}},p.createElement(c.h1,{value:t.creation_date,"data-testid":"creationDate"}),_?p.createElement(c.C8,{values:t.statistic,display:_,component:"span",skipZero:!1}):null,p.createElement(c.g6,{value:t.privacy,item:null==t?void 0:t.privacy_detail,"data-testid":"iconPrivacy"}))),p.createElement(P,null,p.createElement(Z,A({identity:e,state:U,handleAction:Q},H?{menuName:H}:null)),F&&ed?p.createElement(ed,null):null)),p.createElement(C,null,p.createElement(m.A,{sx:{maxHeight:"100%",display:"flex",flexDirection:"column",height:"100%"}},p.createElement(o.P,{autoHide:!0,autoHeight:!0,autoHeightMax:"100%"},p.createElement(m.A,{px:2},p.createElement(m.A,{sx:{"&:not(:empty)":{marginBottom:e=>e.spacing(2)}}},(null==t?void 0:t.text)||(null==t?void 0:t.description)?p.createElement(D,null,p.createElement(r.A,{status:null!==(O=null==t?void 0:t.text)&&void 0!==O?O:null==t?void 0:t.description})):null,(null==Y?void 0:Y.length)||(null==ec?void 0:ec.address)?p.createElement(N,{className:et.statusRoot},(null==Y?void 0:Y.length)?p.createElement(E.default,{item_type:t.resource_name,item_id:t.id,total:Y.length,users:Y,className:et.profileLink}):null,(null==ec?void 0:ec.address)?p.createElement(m.A,{component:"span",ml:.5},K.formatMessage({id:"at_tagged_place"},{name:ec.address,bold:()=>p.createElement(y.default,{place:ec})})):null):null),p.createElement(c.DN,{"id-tid":"statistic",handleAction:Q,identity:e,reactions:ei,statistic:er}),V?p.createElement(V,null,j&&(null==eo?void 0:eo.can_like)&&p.createElement(j,{"id-tid":"reaction",reacted:t.user_reacted,identity:e,handleAction:Q}),X&&(null==eo?void 0:eo.can_comment)&&p.createElement(X,{"id-tid":"comment",identity:e,handleAction:Q}),J&&(null==eo?void 0:eo.can_share)&&p.createElement(J,{handleAction:Q,"id-tid":"share",identity:e})):null,p.createElement(d.A,null),u||p.createElement(x.A,{"id-tid":"comment_list",handleAction:Q,data:t.related_comments,viewMoreComments:el,total_comment:null==er?void 0:er.total_comment,total_reply:null==er?void 0:er.total_reply,identity:e,open:null==U?void 0:U.commentOpened,isDetailPage:!0,searchParams:B}))))),p.createElement(b,{ref:T},f?q.render(f):null,en&&(null==eo?void 0:eo.can_comment)&&em?p.createElement(em,A({"id-tid":"comment_composer",identity:e,open:null==U?void 0:U.commentOpened,focus:U.commentFocused},h)):null)))},L=()=>p.createElement(k,null,p.createElement(m.A,null,p.createElement(I,null,p.createElement(m.A,{pr:1.5},p.createElement(s.A,{variant:"circular",width:40,height:40})),p.createElement(m.A,{py:.5,flex:1},p.createElement("div",null,p.createElement(s.A,{variant:"text",component:"div"})),p.createElement(H,null,p.createElement(s.A,{variant:"text",width:120})))),p.createElement(m.A,{px:2,mt:4},p.createElement(m.A,{sx:{display:"flex",margin:"0 -8px"}},p.createElement(m.A,{p:1,flex:1},p.createElement(s.A,{variant:"rounded",height:32})),p.createElement(m.A,{p:1,flex:1},p.createElement(s.A,{variant:"rounded",height:32})),p.createElement(m.A,{p:1,flex:1},p.createElement(s.A,{variant:"rounded",height:32})))),p.createElement(m.A,{px:2,mt:4},p.createElement(s.A,{variant:"text"}),p.createElement(s.A,{variant:"text"}),p.createElement(s.A,{variant:"text"}))));B.LoadingSkeleton=L;let F=B},81300(e,t,n){n.r(t),n.d(t,{default:()=>m});var l=n(91557),a=n(65467),r=n(96540),i=n(8051);function o({user:e,className:t}){if(!e)return null;if(null==e?void 0:e.is_deleted)return r.createElement(i.A,{component:"span",className:t},(null==e?void 0:e.full_name)||(null==e?void 0:e.title));let n=(null==e?void 0:e.link)?null==e?void 0:e.link:`/${null==e?void 0:e.resource_name}/${null==e?void 0:e.id}`,{resource_name:a,id:o}=e||{};return r.createElement(l.Wti,{to:n,className:t,hoverCard:`/${a}/${o}`},(null==e?void 0:e.full_name)||(null==e?void 0:e.title))}function c({children:e,className:t,item_type:n,item_id:i,users:o,excluded_ids:c,items:m}){let{dialogBackend:d}=(0,l.PCX)(),s=r.useCallback(e=>{e&&(e.stopPropagation(),e.preventDefault()),d.present({component:"friend.dialog.taggedFriendDialogs",props:{item_type:n,item_id:i,excluded_ids:c}})},[d,i,n]),u=()=>r.createElement("div",null,m.map(e=>r.createElement("div",{key:e.id},e.full_name)));return r.createElement(a.A,{title:r.createElement(u,null)},r.createElement("a",{href:"/",onClick:s,className:t},e))}function m({users:e,className:t,total:n,item_type:a,item_id:i}){let{i18n:m}=(0,l.PCX)();return(null==e?void 0:e.length)?1===n?r.createElement("span",null,m.formatMessage({id:"hyphen-with_tagged_friend"},{user0:()=>r.createElement(o,{user:e[0],className:t}),value:n-1})):2===n?r.createElement("span",null,m.formatMessage({id:"hyphen-with_tagged_friend_and_user"},{user0:()=>r.createElement(o,{user:e[0],className:t}),user1:()=>r.createElement(o,{user:e[1],className:t})})):r.createElement("span",null,m.formatMessage({id:"hyphen-with_tagged_friend_and_others"},{user0:()=>r.createElement(o,{user:e[0],className:t}),others(n){var l;return r.createElement(c,{children:n,className:t,item_type:a,item_id:i,users:e,items:e.slice(1),excluded_ids:[null===(l=e[0])||void 0===l?void 0:l.id]})},value:n-1})):null}},14992(e,t,n){n.r(t),n.d(t,{default:()=>o});var l=n(3556),a=n(87773),r=n(96540);let i=(0,l.Ay)(a.A,{name:"TaggedPlace",slot:"root"})(({theme:e})=>({fontWeight:e.typography.fontWeightBold}));function o({place:e}){return r.createElement(i,{component:"span"},r.createElement("a",{rel:"noopener noreferrer",href:`https://www.google.com/maps?daddr=${e.lat},${e.lng}`,target:"_blank"},e.address))}}}]);