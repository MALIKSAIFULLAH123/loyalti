"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["feed"],{8160(e,t,a){a.r(t),a.d(t,{default:()=>y});var l=a(91557),r=a(3556),n=a(8051),s=a(92885),o=a(89481),i=a(96540),u=a(50305),c=a(38860);let d="DetectLanguageButton",p=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/gm,f=(0,r.Ay)(n.A,{name:d,slot:"wrapper",overridesResolver:(e,t)=>[t.wrapper],shouldForwardProp:e=>"active"!==e})(({theme:e,active:t})=>({display:"block",...t&&{borderLeft:e.mixins.border("secondary"),borderWidth:"3px",paddingLeft:e.spacing(2)}})),m=(0,r.Ay)(s.A,{name:d,slot:"buttonTranslate",overridesResolver:(e,t)=>[t.buttonTranslate]})(({theme:e})=>({display:"inline-flex",color:`${e.palette.text.secondary} !important`,...e.typography.body2})),y=function(e){let{text:t,identity:a,onTranslateSuccess:r,sx:s,TranslateView:d}=e,{i18n:y,dispatch:b,getSetting:g}=(0,l.PCX)(),x=(0,l.wVH)(),{user:w}=x,v=g("translation.enable_translate"),[_,h]=i.useState(!1),[A,S]=i.useState(),[k,E]=i.useState(!1),[z,C]=i.useState(!0),L=null==w?void 0:w.language_id;i.useEffect(()=>{if(!L)return;let{length:e,cleanText:a}=function(e){let t=(0,c.Kq)(e).replace(p,""),a=null==t?void 0:t.replace(/\s/g,"").length;return{length:a,cleanText:t}}(t);e<20||b({type:u.wp,payload:{text:a},meta:{onSuccess(e){e&&h(L!==e)}}})},[]);let T=()=>{C(e=>!e)},Z=()=>{k||b({type:u.b4,payload:{identity:a},meta:{onStart(){E(!0)},onSuccess(e){S(e),r&&r(e)},onFinally(){E(!1)}}})};return v&&_&&a&&L?i.createElement(f,{sx:s,active:!!(A&&z)},z&&A?i.createElement(d,{result:A}):null,i.createElement(n.A,{sx:{display:"flex",alignItems:"center"},mt:1},i.createElement(m,{"data-testid":"buttonTranslate",role:"button",onClick:A?T:Z},y.formatMessage({id:A&&z?"hide_translation":"view_translation"})),k?i.createElement(o.A,{sx:{marginLeft:"4px",color:e=>e.palette.text.secondary},size:12}):null)):null}}}]);