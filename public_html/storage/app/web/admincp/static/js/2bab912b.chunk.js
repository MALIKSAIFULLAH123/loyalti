"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-forum-blocks-ThreadDetail-Block"],{97932(e,t,a){a.r(t),a.d(t,{default:()=>S});var i=a(91557),l=a(51949),n=a(90243),o=a(84680),r=a(40515),m=a(3556),s=a(30719),d=a(2491),c=a(77298),p=a(87773),u=a(8051),g=a(96540);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}var h=a(95070);let v="ThreadDetailView",y=(0,m.Ay)("div",{name:v,slot:"ContentWrapper"})(({theme:e})=>({backgroundColor:e.mixins.backgroundColor("paper"),borderRadius:e.shape.borderRadius})),x=(0,m.Ay)("div",{name:v,slot:"threadViewContainer"})(({theme:e})=>({width:"100%",marginLeft:"auto",marginRight:"auto",padding:`${e.spacing(2)} ${e.spacing(2)} 0 ${e.spacing(2)}`,position:"relative",borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius})),b=(0,m.Ay)("div",{name:v,slot:"threadContent"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),lineHeight:1.33})),E=(0,m.Ay)("div",{name:v,slot:"tagItem",overridesResolver:(e,t)=>[t.tagItem]})(({theme:e})=>({fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,borderRadius:e.shape.borderRadius/2,background:"light"===e.palette.mode?e.palette.background.default:e.palette.action.hover,marginRight:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(0,1.5),height:e.spacing(3),lineHeight:e.spacing(3),display:"block",color:"light"===e.palette.mode?"#121212":"#fff"})),k=(0,m.Ay)("div",{name:v,slot:"attachmentTitle"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),marginTop:e.spacing(2),color:e.palette.text.secondary,fontWeight:e.typography.fontWeightBold})),w=(0,m.Ay)("div",{name:v,slot:"attachment"})(({theme:e})=>({width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-between",[e.breakpoints.down("sm")]:{flexDirection:"column"}})),_=(0,m.Ay)("div",{name:v,slot:"attachmentItemWrapper"})(({theme:e})=>({marginTop:e.spacing(2),flexGrow:0,flexShrink:0,flexBasis:"calc(50% - 8px)",minWidth:300,maxWidth:"100%"})),A=(0,m.Ay)(r.s4,{name:v,slot:"IconTitle"})(({theme:e})=>({marginRight:e.spacing(1),color:e.palette.success.main,display:"inline-block",transform:"translateY(2px)"}));function R({user:e,identity:t,item:a,state:l,actions:m,handleAction:f}){let{ItemActionMenu:v,ItemDetailInteraction:R,useGetItems:C,useGetItem:S,i18n:F,jsxBackend:I}=(0,i.PCX)(),[T,W]=g.useState(!0),B=C(null==a?void 0:a.attachments),z=S(null==a?void 0:a.item),D=(0,s.A)(),L=(0,d.A)(D.breakpoints.down("sm")),P=(0,i.IgF)(h.q,h.a,"viewPosters"),V=I.get("core.itemView.pendingReviewCard"),$=I.get("poll.embedItem.insideFeedItem"),H=I.get("forum_post.block.detailListingBlock"),N=I.get("forum_post.block.addForm");if(!e||!a)return null;let{tags:M,description:O,item:j,is_closed:q,is_wiki:G}=a,J="";G&&(J="ico-file-word");let U=j&&j.startsWith("poll.")?j:null,X=()=>{W(e=>!e)};return g.createElement(g.Fragment,null,g.createElement(o.eB,{testid:`detailview ${a.resource_name}`},g.createElement(o.tD,null,g.createElement(y,null,V&&(null==a?void 0:a.is_pending)?g.createElement(V,{sxWrapper:{p:2},item:{...a}}):null,g.createElement(x,null,g.createElement(r.sZ,{sx:{position:"absolute",top:8,right:8}},g.createElement(v,{identity:t,icon:"ico-dottedmore-vertical-o",state:l,menuName:"detailActionMenu",handleAction:f,size:"smaller"})),g.createElement(r.Et,{variant:"h3",component:"div",my:0,showFull:!0},q&&g.createElement(c.A,{size:"small",label:F.formatMessage({id:"closed"}),variant:"filled",sx:{mr:1,mb:{sm:0,xs:1},color:"default.contrastText",backgroundColor:"dark"===D.palette.mode?D.palette.grey[600]:D.palette.text.secondary,fontSize:"13px"}}),J&&g.createElement(A,{icon:J}),g.createElement(r.rL,{variant:"itemView",value:a.is_featured}),g.createElement(r.FN,{variant:"itemView",value:a.is_sponsor,item:a}),g.createElement(p.A,{component:"h1",variant:"h3",sx:{pr:2.5,display:{sm:"inline",xs:"block"},verticalAlign:"middle"}},null==a?void 0:a.title)),g.createElement(r.at,{item:a,statisticDisplay:!1,privacyDisplay:!1}),g.createElement(b,null,g.createElement(r.np,null,g.createElement(n.Ay,{html:O||""})),(null==a?void 0:a.modification_date)?g.createElement(r.J7,{sx:{color:"text.secondary",mt:1,fontStyle:"italic"}},g.createElement(r.Gl,{"data-testid":"modifyDate",value:null==a?void 0:a.modification_date,format:"LL",phrase:"last_update_on_time"})):null),$&&U&&!(null==z?void 0:z.error)?g.createElement(u.A,{mt:4},g.createElement($,{identity:U,isShowPendingCard:!0})):null,(null==M?void 0:M.length)>0?g.createElement(u.A,{mt:4,display:"flex",flexWrap:"wrap"},M.map(e=>g.createElement(E,{key:e},g.createElement(i.N_E,{to:`/forum/search?q=%23${e}`},e)))):null,(null==B?void 0:B.length)>0&&g.createElement(g.Fragment,null,g.createElement(k,null,F.formatMessage({id:"attachments"})),g.createElement(w,null,B.map((e,t)=>g.createElement(_,{key:e.id.toString()},g.createElement(r.Hg,{fileName:e.file_name,downloadUrl:e.download_url,isImage:e.is_image,fileSizeText:e.file_size_text,size:L?"mini":"large",image:null==e?void 0:e.image,identity:null==e?void 0:e._identity,index:t}))))),g.createElement(R,{identity:t,state:l,handleAction:f,messageCommentStatistic:"total_reply",dataSourceCommentStatistic:P,forceHideCommentList:!0,handleActionCommentStatistic:X}))))),g.createElement(u.A,{sx:{borderRadius:1,overflow:"hidden"},className:!T&&"srOnly"},g.createElement(H,null),g.createElement(N,{blockLayout:"Forum Post Form Detail Thread"})))}R.LoadingSkeleton=function(e){return g.createElement(r.ne,f({},e))},R.displayName="ThreadItem_DetailView";let C=(0,i.$MH)((0,l.F)(R,l.m,{})),S=(0,i.WvA)({extendBlock:C,defaults:{blockProps:{titleComponent:"h2",titleVariant:"subtitle1",titleColor:"textPrimary",noFooter:!0,noHeader:!0,blockStyle:{sx:{mb:2,mt:2}},contentStyle:{sx:{borderRadius:1,bgcolor:"background.paper",pt:0,pb:0}}}}})},51949(e,t,a){a.d(t,{m:()=>l,F:()=>i.FB$});var i=a(91557);function l(e){return{deleteItem:()=>e("deleteItem"),approveItem:()=>e("approveItem")}}}}]);