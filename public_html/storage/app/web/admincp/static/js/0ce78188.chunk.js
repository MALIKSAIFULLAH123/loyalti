"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-story-blocks-StoryDetailMobile-Block"],{24774(e,t,i){i.d(t,{A:()=>h});var o=i(91557),a=i(85332),l=i(3556),n=i(8051),r=i(87773),s=i(96540);let d="PenddingView",c=(0,l.Ay)(n.A,{name:d,slot:"root",shouldForwardProp:e=>"isDetailPage"!==e})(({theme:e,isDetailPage:t})=>({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none",backgroundColor:"#000",paddingTop:e.spacing(1.5),flexDirection:"column",cursor:"pointer","& .MuiSkeleton-root":{..."light"===e.palette.mode&&{backgroundColor:e.palette.grey.A200}},...t&&{paddingTop:0}})),p=(0,l.Ay)(n.A,{name:d,slot:"ItemWrapper",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,width:t})=>({position:"relative",margin:"auto",height:"100%",display:"flex",justifyContent:"center",flexDirection:"column",width:t})),m=(0,l.Ay)(r.A)(({theme:e})=>({color:"#fff",fontSize:e.mixins.pxToRem(14),paddingBottom:e.spacing(1.5),textAlign:"center",width:"80%"})),y=(0,l.Ay)(n.A,{name:d,slot:"ItemInteractionStyled",shouldForwardProp:e=>"isDetailPage"!==e&&"isOwner"!==e&&"isMobile"!==e})(({theme:e,isDetailPage:t,isOwner:i,isMobile:o})=>({minHeight:t?54:64,...(i||t&&o)&&{display:"none"}})),u=(0,l.Ay)(n.A,{name:d,slot:"ContentStyled",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,height:t,width:i})=>({backgroundColor:e.palette.grey["900"],borderRadius:e.shape.borderRadius,height:t,width:i,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minWidth:"120px"}));function h({isDetailPage:e=!1,isOwner:t=!1}){let{i18n:i,useIsMobile:l,dispatch:n}=(0,o.PCX)(),{fire:r}=(0,a.vC)(),d=l(!0),h=s.useRef(),[g,f]=(0,a.Uf)(h),w=s.useCallback(()=>{r({type:"setReady",payload:!0}),r({type:"setMuted",payload:!1}),n({type:"story/updateMutedStatus",payload:!1})},[r]);return s.createElement(c,{isDetailPage:e},s.createElement(p,{ref:h,width:g},s.createElement(u,{height:f,width:g,onClick:w},s.createElement(m,{component:"span"},i.formatMessage({id:"click_to_view_story"})))),s.createElement(y,{isDetailPage:e,isOwner:t,isMobile:d}))}},73220(e,t,i){i.d(t,{A:()=>P,I:()=>M});var o=i(91557),a=i(84680),l=i(96540),n=i(88316),r=i(3556),s=i(8051),d=i(63461),c=i(97763),p=i(87773),m=i(32113),y=i(51147),u=i(24774),h=i(85332),g=i(40515);let f="StoryDetail",w=(0,r.Ay)(s.A,{name:f,slot:"RootStyled"})(({theme:e})=>({backgroundColor:e.palette.background.paper,padding:"0 !important",height:"100%",display:"flex",overflowX:"hidden",[e.breakpoints.down("md")]:{height:"auto",flexFlow:"column"}})),A=(0,r.Ay)("div",{name:f,slot:"DetailStory",shouldForwardProp:e=>"isOwner"!==e&&"isMobile"!==e})(({theme:e,isOwner:t,isMobile:i})=>({position:"relative",backgroundColor:"#000",width:"100%",overflow:"hidden",flex:1,minWidth:0,padding:e.spacing(1.5,0),"& iframe":{width:"100%",height:"100%"},[e.breakpoints.down("md")]:{width:"100%",height:"auto",borderRadius:0,overflow:"initial"},...(i||!t)&&{paddingBottom:0}})),b=(0,r.Ay)("div",{name:f,slot:"DetailStatistic"})(({theme:e})=>({height:"100%",width:"420px",[e.breakpoints.down("md")]:{width:"100%"},[e.breakpoints.down("xs")]:{width:"100%",height:"400px"}})),v=(0,r.Ay)(s.A,{name:f,slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%",padding:e.spacing(2),paddingTop:e.spacing(2.5),paddingBottom:0})),x=(0,r.Ay)(s.A,{name:f,slot:"HeaderBlock"})(({theme:e})=>({padding:e.spacing(2),paddingTop:0,display:"flex",alignItems:"center",justifyContent:"center"})),S=(0,r.Ay)(s.A,{name:f,slot:"HeaderTitle"})(()=>({})),k=(0,r.Ay)(s.A,{name:f,slot:"ContentBlock"})(({theme:e})=>({overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0})),E=(0,r.Ay)("div",{name:f,slot:"actionBar"})(({theme:e})=>({position:"absolute",right:0,top:0,padding:e.spacing(1),display:"flex",justifyContent:"space-between",zIndex:1,alignItems:"center"})),C=(0,r.Ay)(d.A,{name:f,slot:"TagFriend"})(({theme:e})=>({color:"#fff !important",width:32,height:32,fontSize:e.mixins.pxToRem(15)})),M=({item:e,isOwner:t=!1})=>{var i,o,a;let r=(0,h.vC)(),{isReady:s}=r||{};return(null==e?void 0:e.in_process)||s||null===(i=window.navigator)||void 0===i||!i.userActivation||(null===(o=window.navigator)||void 0===o?void 0:null===(a=o.userActivation)||void 0===a?void 0:a.hasBeenActive)?l.createElement(n.Lz,{story:e,isModal:!1,isOwner:t}):l.createElement(u.A,{isDetailPage:!0,isOwner:t})},P=(0,o.G5k)(function({item:e}){let{useGetItem:t,useSession:i,i18n:r,useIsMobile:d,navigate:u,getSetting:h}=(0,o.PCX)(),f=d(!0),P=h("comment"),[R,D]=l.useReducer(y.l,{...m.x6});l.useEffect(()=>{D({type:"setReady",payload:!1})},[]);let{user:I}=i(),O=t(null==e?void 0:e.user);if(!e)return null;let F=(null==O?void 0:O.id)===(null==I?void 0:I.id),W=()=>{u("/")};return l.createElement(a.eB,{testid:`detailview ${e.resource_name}`},l.createElement(a.tD,null,l.createElement(m.MO.Provider,{value:{...R,fire:D}},l.createElement(w,null,l.createElement(A,{isOwner:F,isMobile:f},f?null:l.createElement(E,null,l.createElement(s.A,null,l.createElement(c.A,{title:r.formatMessage({id:"close"})},l.createElement(C,{onClick:W},l.createElement(g.s4,{icon:"ico-close",color:"white"}))))),l.createElement(M,{item:e,isOwner:F})),P?l.createElement(b,null,l.createElement(v,null,l.createElement(x,null,l.createElement(S,null,l.createElement(p.A,{variant:"h4",color:"text.primary"},r.formatMessage({id:F?"story_details":"comments"})))),l.createElement(k,null,l.createElement(n.Dq,{item:e})))):null))))})},70764(e,t,i){i.r(t),i.d(t,{default:()=>O});var o=i(91557),a=i(84680),l=i(96540),n=i(88316),r=i(3556),s=i(8051),d=i(2491),c=i(85332),p=i(28472),m=i(44562),y=i(40515),u=i(87773);let h=(0,r.Ay)(s.A,{slot:"FooterOnwerStyled",shouldForwardProp:e=>"showView"!==e&&"width"!==e&&"isMobile"!==e&&"isMinHeight"!==e&&"isSmallWidth"!==e})(({theme:e,showView:t,width:i,isMobile:o,isMinHeight:a,isSmallWidth:l})=>({minHeight:"64px",display:"flex",alignItems:"center",justifyContent:"space-between",...t&&{cursor:"pointer"},...i&&{width:i},...o&&{padding:e.spacing(0,2),paddingRight:e.spacing(.5),...a&&{maxWidth:i},...l&&{width:"100%"},overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"}}})),g=(0,r.Ay)(s.A,{slot:"FooterStyled",shouldForwardProp:e=>"showView"!==e&&"width"!==e&&"isMobile"!==e&&"isMinHeight"!==e&&"isSmallWidth"!==e})(({theme:e,showView:t,width:i,isMobile:o,isMinHeight:a,isSmallWidth:l})=>({minHeight:"64px",display:"flex",alignItems:"center",...o&&{padding:e.spacing(0,2),...l&&{width:"100%"},...a&&{maxWidth:"560px"},overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"}}})),f=(0,r.Ay)(u.A)(({theme:e})=>({color:"#fff",fontSize:e.mixins.pxToRem(16)})),w=(0,r.Ay)(y.s4)(({theme:e})=>({color:"#fff",marginRight:e.spacing(1),fontSize:e.mixins.pxToRem(18),fontWeight:e.typography.fontWeightBold})),A=(0,r.Ay)(s.A,{name:"ItemInteractionMobile",slot:"ViewWrapper"})(({theme:e})=>({display:"flex",alignItems:"center"})),b=function({item:e,isMinHeight:t=!1,width:i,handleViewDetail:a,isOwner:r}){let{useIsMobile:s,i18n:y,getSetting:u}=(0,o.PCX)(),b=(0,c.vC)(),v=u("comment"),{extra:x}=e||{},S=!u("preaction")||!(null==x?void 0:x.can_like),k=(0,d.A)("(max-width:560px)"),E=s(),C=s(!0);return r?l.createElement(h,{isMobile:E,width:t?m.G9:i,isMinHeight:t,isSmallWidth:k},l.createElement(A,{onClick:a},l.createElement(w,{icon:"ico-angle-up"}),l.createElement(f,{variant:"h4",color:"text.primary"},y.formatMessage({id:"story_details"})))):l.createElement(g,{isMobile:E,width:t?m.G9:i,isMinHeight:t,isSmallWidth:k},v&&C?l.createElement(p.A,{item:e,onClick:a}):null,S?null:l.createElement(n.WR,{item:e,contextStory:b}))};var v=i(32113),x=i(51147),S=i(73220),k=i(91262);let E="StoryDetailMobile",C=(0,r.Ay)(s.A,{name:E,slot:"RootStyled",shouldForwardProp:e=>"isOwner"!==e&&"isMobile"!==e})(({theme:e,isOwner:t,isMobile:i})=>({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none",backgroundColor:"#000",flexDirection:"column",padding:e.spacing(1.5,0),...(i||!t)&&{paddingBottom:0}})),M=(0,r.Ay)(s.A,{name:E,slot:"ItemWrapper"})(({theme:e})=>({position:"relative",margin:"auto",backgroundColor:"#000",display:"flex",justifyContent:"center",borderRadius:e.shape.borderRadius,height:"100%",flex:1,minWidth:0})),P=(0,r.Ay)("div",{name:E,slot:"StoryImage",shouldForwardProp:e=>"width"!==e})(({theme:e,width:t})=>({height:"100%",width:t,position:"relative"})),R=(0,r.Ay)(s.A,{name:E,slot:"ContentWrapper"})(({theme:e})=>({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flex:1,minHeight:0})),D=(0,o.G5k)(function(e){let{item:t}=e||{},{useGetItem:i,useSession:r,useIsMobile:p}=(0,o.PCX)(),y=(0,d.A)("(max-height:667px)"),u=p(!0),[h,g]=l.useReducer(x.l,{...v.x6});l.useEffect(()=>{g({type:"setReady",payload:!1})},[]);let{openStoryDetail:f}=h||{},w=l.useRef(),{user:A}=r(),[E,D]=(0,c.Uf)(w),I=i(null==t?void 0:t.user),O=(null==I?void 0:I.id)===(null==A?void 0:A.id);if(l.useEffect(()=>{if(f){g({type:"setForcePause",payload:k.ZR.Force});return}g({type:"setForcePause",payload:k.ZR.No})},[f]),!t)return null;let F=()=>{g({type:"setOpenStoryDetail",payload:!f})};return l.createElement(a.eB,{testid:`detailview ${t.resource_name}`},l.createElement(a.tD,null,l.createElement(v.MO.Provider,{value:{...h,fire:g}},l.createElement(C,{isOwner:O,isMobile:u},l.createElement(R,null,l.createElement(M,{style:{...y&&{width:m.G9,flex:"unset"},height:D||"100%"}},l.createElement(P,{ref:w,width:E},l.createElement(S.I,{item:t,isOwner:O})))),l.createElement(n.Dq,{isMinHeight:y,item:t,setOpen:e=>g({type:"setOpenStoryDetail",payload:e}),open:f}),f?l.createElement(s.A,{minHeight:64}):l.createElement(b,{item:t,isMinHeight:y,width:E,handleViewDetail:F,isOwner:O})))))}),I=(0,o.$MH)(D),O=(0,o.WvA)({extendBlock:I,defaults:{placeholder:"Search",blockProps:{variant:"plained",titleComponent:"h2",titleVariant:"subtitle1",titleColor:"textPrimary",noFooter:!0,noHeader:!0,blockStyle:{height:"100%",position:"fixed !important",top:0,right:0,left:0},contentStyle:{borderRadius:"base",height:"100%"},headerStyle:{},footerStyle:{}}}})},51147(e,t,i){i.d(t,{l:()=>a});var o=i(16535);let a=(0,o.Ay)((e,t)=>{switch(t.type){case"setListUserStories":e.listUserStories=t.payload;break;case"setReactions":e.reactions=t.payload;break;case"setIdentityStoryActive":e.identityStoryActive=t.payload;break;case"setIdentityUserS_Active":e.identityUserStoryActive=t.payload;break;case"setForcePause":e.pauseStatus=t.payload;break;case"setOpenStoryDetail":e.openStoryDetail=t.payload;break;case"setOpenViewComment":e.openViewComment=t.payload;break;case"setOpenActionItem":e.openActionItem=t.payload;break;case"setReadyStateFile":e.readyStateFile=t.payload;break;case"setProgressVideoPlay":e.progressVideoPlay=t.payload;break;case"setIndexStoryActive":e.indexStoryActive=t.payload;break;case"setLastStory":e.isLastStory=t.payload;break;case"setReady":e.isReady=t.payload;break;case"setMuted":e.mutedStatus=t.payload;break;case"setDuration":e.durationVideo=t.payload;break;case"setBuffer":e.buffer=t.payload}})}}]);