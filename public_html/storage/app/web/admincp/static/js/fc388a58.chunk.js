"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["chat","metafox-chat-components-BlockRoomCard-LoadingSkeleton"],{23137(e,t,n){n.r(t),n.d(t,{default:()=>s});var l=n(40515),a=n(3556),i=n(52705),r=n(96540);let o=(0,a.Ay)(l.ne)(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",height:72}));function s({wrapAs:e,wrapProps:t}){return r.createElement(o,{wrapAs:e,wrapProps:t,testid:"skeleton_roomcard"},r.createElement(l.Qm,null,r.createElement(i.A,{variant:"avatar",width:40,height:40})),r.createElement(l.p4,null,r.createElement(l.Et,null,r.createElement(i.A,{variant:"text",width:"100%"})),r.createElement(l.Et,null,r.createElement(i.A,{width:120}))))}},12401(e,t,n){n.r(t),n.d(t,{default:()=>B});var l=n(91557),a=n(12561),i=n(97763),r=n(96540);function o({className:e,value:t,component:n="span",tooltip:o=!1,format:s="lll"}){let{moment:d}=(0,l.PCX)();if(!t)return null;let c=d(t),u=c.format("llll"),m=(0,a.rb)(c,s);return r.createElement(i.A,{title:u,open:o},r.createElement(n,{role:"link",className:e,"aria-label":u},m))}var s=n(19740),d=n(96610),c=n(40515),u=n(67725),m=n(3556),p=n(63461),g=n(56449),h=n.n(g),v=n(23137);let f="ItemView_BlockChatRoom",y=(0,m.Ay)(c.ne,{name:f,slot:"rootBuddyItemChat",overridesResolver:(e,t)=>[t.rootBuddyItemChat],shouldForwardProp:e=>"unread"!==e&&"isActive"!==e&&"variant"!==e})(({theme:e,unread:t,isActive:n,variant:l})=>({cursor:"pointer",transition:"background-color 300ms ease",display:"flex",alignItems:"center",justifyContent:"space-between",...(t||n)&&{background:e.palette.action.selected,borderRadius:e.shape.borderRadius},"& .MuiAvatar-root":{fontSize:e.mixins.pxToRem(16)},..."popper"!==l&&{"&:hover .itemSubtitle":{visibility:"hidden",transition:"visibility 0s linear 0s, opacity 300ms"},"&:hover":{background:e.palette.action.hover,"& > div:first-of-type":{flex:"unset",width:"calc(100% - 40px)"},"& .uiChatItemBtn":{opacity:1}}},"&:hover .uiItemUnReadDot":{display:"none"}})),_=(0,m.Ay)("div",{name:f,slot:"ItemWrapper"})(({theme:e})=>({flex:1,display:"flex",alignItems:"center",padding:e.spacing(1.5,0),color:e.palette.grey["700"],fontSize:e.spacing(1.75),cursor:"pointer",overflow:"hidden"})),E=(0,m.Ay)("div")(({theme:e})=>({flex:1,minWidth:"0"})),b=(0,m.Ay)("div")(({theme:e})=>({display:"flex",justifyContent:"space-between"})),w=(0,m.Ay)(c.Et)(({theme:e})=>({flex:1,marginRight:e.spacing(1)})),A=(0,m.Ay)("div")(({theme:e})=>({display:"flex",justifyContent:"space-between"})),x=(0,m.Ay)("div")(({theme:e})=>({color:e.palette.text.secondary,display:"inline-flex",alignItems:"center",fontSize:e.spacing(1.625),lineHeight:e.spacing(2.35)})),k=(0,m.Ay)(c.s4)(({theme:e})=>({marginRight:e.spacing(.5)})),C=(0,m.Ay)("div",{shouldForwardProp:e=>"unread"!==e})(({theme:e,unread:t})=>({display:"block",color:e.palette.text.secondary,padding:0,minWidth:0,maxWidth:"calc(100% - 12px)",overflow:"hidden",textOverflow:"ellipsis",fontSize:e.spacing(1.625),lineHeight:e.spacing(2.35),whiteSpace:"nowrap",...t&&{fontWeight:e.typography.fontWeightBold},br:{display:"none"}})),R=(0,m.Ay)(p.A,{slot:"UIChatItemBtn",shouldForwardProp:e=>"variant"!==e})(({theme:e,variant:t})=>({position:"relative",padding:e.spacing(1,.5),cursor:"pointer",minWidth:e.spacing(3),lineHeight:e.spacing(2.5),..."popper"===t&&{width:"35px",height:"35px",borderRadius:40,background:e.palette.background.paper}})),I=(0,m.Ay)("span",{name:f,slot:"UnReadDot"})(({theme:e})=>({display:"inline-block",width:12,height:12,backgroundColor:e.palette.primary.main,borderRadius:20,marginTop:e.spacing(.25)})),$=(0,m.Ay)(c.sZ,{name:f,slot:"ItemAction",shouldForwardProp:e=>"isSelfChat"!==e&&"variant"!==e})(({theme:e,isSelfChat:t,variant:n})=>({position:"absolute",right:8,opacity:0,"& .MuiActionMenu-menu":{overflow:"auto",maxHeight:"200px"},...t&&{minWidth:"24px",minHeight:"40px"},..."popper"===n&&{right:e.spacing(1),top:"50%",transform:"translateY(-50%)",position:"absolute"}})),M=({item:e,unread:t})=>{var n,a,i,o;let{i18n:s,useSession:c}=(0,l.PCX)(),{user:u}=c(),m=null==e?void 0:e.user,p=(null==u?void 0:u.id)===(null==m?void 0:m.id);if(!e&&!t)return null;let g=(0,d.XC)(e,m,p);if(!h()(g)&&(null==e?void 0:e.attachments)&&(null===(n=e.attachments)||void 0===n?void 0:n.length)>0){let v=e.attachments.filter(e=>null==e?void 0:e.is_image).length;g=e.attachments.length===v?r.createElement(r.Fragment,null,r.createElement(k,{icon:"ico-photo"}),v>1?s.formatMessage({id:"sent_multiple_photos"}):s.formatMessage({id:"sent_a_photo"})):r.createElement(r.Fragment,null,r.createElement(k,{icon:"ico-paperclip-alt"}),s.formatMessage({id:"sent_a_file"}))}return r.createElement(A,null,r.createElement(C,{unread:t},e&&g?r.createElement(r.Fragment,null,null==m?void 0:m.full_name,":"," ",h()(g)?s.formatMessage({id:(null===(a=g[0])||void 0===a?void 0:a.id)||"message_was_deleted"},{user:null===(i=g[0])||void 0===i?void 0:i.user}):(null==e?void 0:null===(o=e.attachments)||void 0===o?void 0:o.length)?g:r.createElement("span",{dangerouslySetInnerHTML:{__html:g}})):null),t?r.createElement(x,null,r.createElement(I,{className:"uiItemUnReadDot"})):null)};function S({item:e,actions:t,wrapAs:n,wrapProps:a,itemProps:d}){let{usePageParams:m,navigate:p,dispatch:g,useGetItem:h,usePopover:v,i18n:f,useScrollRef:A}=(0,l.PCX)(),{closePopover:k}=v(),C=m(),I=A(),S=(0,l.zy2)(),{rid:B}=C,P=null==e?void 0:e.other_members[0],F=h(P),W=null==e?void 0:e.last_message,H=(0,s.f3)(),N=r.useMemo(()=>(0,u.Ue)(H,{item:e}),[H,e]),[z]=(0,l.Vd3)(null==e?void 0:e.id,{}),T=r.useCallback(()=>{S.pathname.includes("/messages")||B?p({pathname:`/messages/${e.id}`}):(g({type:"chat/openRoomPanel",payload:{rid:e.id}}),k&&k())},[e]);return e?r.createElement(y,{wrapAs:n,wrapProps:a,testid:`${e.resource_name}`,"data-eid":e.id,isActive:Boolean(B==e.id),variant:null==d?void 0:d.type},r.createElement(_,{onClick:T},r.createElement(c.Qm,null,r.createElement(c.H8,{user:F,size:40,noLink:!0})),r.createElement(E,null,r.createElement(b,null,r.createElement(w,null,null==e?void 0:e.name),r.createElement(x,{className:"itemSubtitle"},r.createElement(o,{value:null==W?void 0:W.updated_at,format:"ll"}))),r.createElement(M,{item:W,unread:null==e?void 0:e.total_unseen}))),(null==d?void 0:d.showActionMenu)?r.createElement($,{visible:"hover",variant:null==d?void 0:d.type,className:"uiChatItemBtn"},r.createElement(c.pN,{items:N,placement:"bottom-end",handleAction:z,scrollRef:I,popperOptions:{strategy:"fixed"},control:r.createElement(i.A,{title:f.formatMessage({id:"more"}),placement:"top"},r.createElement(R,{variant:null==d?void 0:d.type,disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0},r.createElement(c.s4,{icon:"ico-dottedmore-vertical-o"})))})):null):null}S.displayName="Blocked_ChatRoomCard",S.LoadingSkeleton=v.default;let B=(0,l.FB$)(S,()=>{})},19740(e,t,n){n.d(t,{nb:()=>o,Zq:()=>s,iw:()=>r,In:()=>p,f3:()=>u,EH:()=>c,wg:()=>d,eL:()=>m,Dr:()=>i.A,iW:()=>g,oT:()=>h});var l=n(71468),a=n(99477),i=n(44031);function r(){return(0,l.d4)(e=>(0,a.Tr)(e))}let o=e=>(0,l.d4)(t=>(0,a.rS)(t,e)),s=e=>(0,l.d4)(t=>(0,a.vF)(t,e));function d(e){return(0,l.d4)(t=>(0,a.Ax)(t,e))}let c=()=>(0,l.d4)(a.x2),u=()=>(0,l.d4)(a.yr),m=()=>(0,l.d4)(a.Eq),p=()=>(0,l.d4)(a.pR),g=e=>(0,l.d4)(t=>(0,a.gQ)(t,e)),h=()=>(0,l.d4)(a.t8)},44031(e,t,n){n.d(t,{A:()=>r,a:()=>d});var l=n(91557),a=n(71468),i=n(1081);function r(){let{getSetting:e}=(0,l.PCX)(),t=e("preaction.reaction_list",[]).filter(e=>e.is_active),n=e("preaction.inactive_reaction_list",[]),a=[...t,...n];return(null==a?void 0:a.length)?a:[]}let o=e=>(e.preaction.data.reactions||[]).filter(e=>e.is_active),s=(0,i.Mz)(o,e=>e);function d(){return(0,a.d4)(s)}},96610(e,t,n){n.d(t,{Ay:()=>m,Nj:()=>u,XC:()=>p});var l=n(69709),a=n(12561),i=n(14425),r=n.n(i);function o(e){return e.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br/>$2")}function s(e,t={}){let{mentions:n=[]}=t,l=e.replace(/\[(\s)*\]\(([^\)]+)\)/gm,"");return n&&n.length>0&&(l=l.replace(/@([^\s\\#@:]+)/giu,(e,t)=>{let l=n.find(e=>e.username===t);return l&&l.name?`@${l.name}`:e})),l}function d(e,t={}){let{mentions:n=[]}=t,l=e.replace(/@\[([^\]]+)\]\(([^#@:]+)\)/giu,"<a onclick=\"triggerClick('$2')\">@$1</a>");return n&&n.length>0&&(l=l.replace(/@([^\s\\#@:]+)/giu,(e,t)=>{let l=n.find(e=>e.username===t);return l&&l.name?`<a onclick="triggerClick('/${t}')">@${l.name}</a>`:e})),l}window.triggerClick=a.NK;let c=e=>e.replace(/:\w+:/gi,e=>e),u=(e,t={})=>e?s(e,t):null;function m(e,t={}){var n;return e?o(c(d((n=s(e),r()(n)).replace(l._t,e=>{let t=e.startsWith("http")?e:`https://${e}`;return`<a href="${t}" target="_blank">${t}</a>`}),t))):null}function p(e,t=null,n=!0){var l;let a=null==e?void 0:e.type;if(["messageDelete","delete"].includes(a)){let i=[{id:"you_deleted_a_message"}];return n||(i=t?[{id:"user_message_is_removed",user:t.full_name||t.user_name}]:[{id:"message_was_deleted"}]),i}return(null==e?void 0:e.message)?o(c(d((l=s(null==e?void 0:e.message),r()(l)),{mentions:[]}))):null}}}]);