(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-chatplus-components-FlyBuddyPanel-Block","metafox-chatplus-components-Avatar"],{72761(e,t,a){"use strict";a.d(t,{A:()=>R});var r=a(98587),n=a(58168),o=a(96540),i=a(20053),l=a(5004),s=a(75659),c=a(38413),d=a(31609);function p(e){return(0,d.A)("MuiBadge",e)}(0,c.A)("MuiBadge",["root","badge","invisible"]);var u=a(99977),m=a(74848);let g=["badgeContent","component","children","invisible","max","slotProps","slots","showZero"],h=e=>{let{invisible:t}=e;return(0,s.A)({root:["root"],badge:["badge",t&&"invisible"]},p,void 0)},v=o.forwardRef(function(e,t){let{component:a,children:o,max:i=99,slotProps:s={},slots:c={},showZero:d=!1}=e,p=(0,r.A)(e,g),{badgeContent:v,max:f,displayValue:b,invisible:y}=function(e){let{badgeContent:t,invisible:a=!1,max:r=99,showZero:n=!1}=e,o=(0,l.A)({badgeContent:t,max:r}),i=a;!1!==a||0!==t||n||(i=!0);let{badgeContent:s,max:c=r}=i?o:e,d=s&&Number(s)>c?`${c}+`:s;return{badgeContent:s,invisible:i,max:c,displayValue:d}}((0,n.A)({},e,{max:i})),x=(0,n.A)({},e,{badgeContent:v,invisible:y,max:f,showZero:d}),A=h(x),C=a||c.root||"span",w=(0,u.A)({elementType:C,externalSlotProps:s.root,externalForwardedProps:p,additionalProps:{ref:t},ownerState:x,className:A.root}),E=c.badge||"span",k=(0,u.A)({elementType:E,externalSlotProps:s.badge,ownerState:x,className:A.badge});return(0,m.jsxs)(C,(0,n.A)({},w,{children:[o,(0,m.jsx)(E,(0,n.A)({},k,{children:b}))]}))});var f=a(3556),b=a(92353),y=a(87447),x=a(75630);function A(e){return(0,d.A)("MuiBadge",e)}let C=(0,c.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),w=["anchorOrigin","className","component","components","componentsProps","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],E=e=>{let{color:t,anchorOrigin:a,invisible:r,overlap:n,variant:o,classes:i={}}=e,l={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${(0,x.A)(a.vertical)}${(0,x.A)(a.horizontal)}`,`anchorOrigin${(0,x.A)(a.vertical)}${(0,x.A)(a.horizontal)}${(0,x.A)(n)}`,`overlap${(0,x.A)(n)}`,"default"!==t&&`color${(0,x.A)(t)}`]};return(0,s.A)(l,A,i)},k=(0,f.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),O=(0,f.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver(e,t){let{ownerState:a}=e;return[t.badge,t[a.variant],t[`anchorOrigin${(0,x.A)(a.anchorOrigin.vertical)}${(0,x.A)(a.anchorOrigin.horizontal)}${(0,x.A)(a.overlap)}`],"default"!==a.color&&t[`color${(0,x.A)(a.color)}`],a.invisible&&t.invisible]}})(({theme:e,ownerState:t})=>(0,n.A)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},"default"!==t.color&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},"dot"===t.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${C.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${C.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${C.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${C.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${C.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${C.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${C.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${C.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})})),P=o.forwardRef(function(e,t){var a,o,s,c,d,p;let u;let g=(0,b.A)({props:e,name:"MuiBadge"}),{anchorOrigin:h={vertical:"top",horizontal:"right"},className:f,component:x="span",components:A={},componentsProps:C={},overlap:P="rectangular",color:R="default",invisible:S=!1,max:_,badgeContent:M,slots:I,slotProps:z,showZero:$=!1,variant:B="standard"}=g,F=(0,r.A)(g,w),D=(0,l.A)({anchorOrigin:h,color:R,overlap:P,variant:B}),T=S;!1!==S||(0!==M||$)&&(null!=M||"dot"===B)||(T=!0);let{color:W=R,overlap:N=P,anchorOrigin:H=h,variant:L=B}=T?D:g,j=(0,n.A)({},g,{anchorOrigin:H,invisible:T,color:W,overlap:N,variant:L}),U=E(j);"dot"!==L&&(u=M&&Number(M)>_?`${_}+`:M);let J=null!=(a=null!=(o=null==I?void 0:I.root)?o:A.Root)?a:k,X=null!=(s=null!=(c=null==I?void 0:I.badge)?c:A.Badge)?s:O,G=null!=(d=null==z?void 0:z.root)?d:C.root,Z=null!=(p=null==z?void 0:z.badge)?p:C.badge;return(0,m.jsx)(v,(0,n.A)({invisible:S,badgeContent:u,showZero:$,max:_},F,{slots:{root:J,badge:X},className:(0,i.default)(null==G?void 0:G.className,U.root,f),slotProps:{root:(0,n.A)({},G,(0,y.A)(J)&&{as:x,ownerState:(0,n.A)({},null==G?void 0:G.ownerState,{anchorOrigin:H,color:W,overlap:N,variant:L})}),badge:(0,n.A)({},Z,{className:(0,i.default)(U.badge,null==Z?void 0:Z.className)},(0,y.A)(X)&&{ownerState:(0,n.A)({},null==Z?void 0:Z.ownerState,{anchorOrigin:H,color:W,overlap:N,variant:L})})},ref:t}))}),R=P},97648(e,t,a){var r=a(83915),n=a(83120),o=a(15389),i=a(69302),l=a(83693),s=a(68090),c=i(function(e,t){var a=s(t);return l(a)&&(a=void 0),l(e)?r(e,n(t,1,l,!0),o(a,2)):[]});e.exports=c},24713(e,t,a){var r=a(2523),n=a(15389),o=a(61489),i=Math.max;e.exports=function(e,t,a){var l=null==e?0:e.length;if(!l)return -1;var s=null==a?0:o(a);return s<0&&(s=i(l+s,0)),r(e,n(t,3),s)}},3094(){},24078(){},13586(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(91557),n=a(67725),o=a(3556),i=a(12789),l=a(72761),s=a(8051),c=a(30719),d=a(96540),p=a(97837),u=a(65121),m=a(86663),g=a(84058),h=a.n(g);let v=(0,o.Ay)(i.A,{name:"AvatarWrapper"})(({theme:e})=>({borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.border.secondary})),f=(0,o.Ay)(r.N_E,{name:"Link"})(({theme:e})=>({"&:hover":{textDecoration:"none"}})),b=(0,o.Ay)(l.A,{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({"& .MuiBadge-badge":{...t===p.O2.Offline&&{display:"none"},...t===p.O2.Online&&{color:e.palette.success.main,backgroundColor:e.palette.success.main},...t===p.O2.Away&&{color:e.palette.warning.main,backgroundColor:e.palette.warning.main},...t===p.O2.Busy&&{color:e.palette.error.main,backgroundColor:e.palette.error.main},boxShadow:"dark"===e.palette.mode?"none":`0 0 0 2px ${e.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}}})),y=(0,o.Ay)("div",{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"relative",width:"32px",height:"32px",...t&&{width:t,height:t}})),x=(0,o.Ay)(i.A,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"absolute",bottom:0,left:0,width:"26px",height:"26px",backgroundColor:"dark"===e.palette.mode?e.palette.grey["600"]:e.palette.grey["300"],borderWidth:1,borderStyle:"solid",borderColor:"light"===e.palette.mode?e.palette.grey["50"]:e.palette.grey["800"],zIndex:2,...t&&{width:.7*t,height:.7*t}})),A=(0,o.Ay)(s.A,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"relative",width:"100%",height:"100%"})),C=(0,o.Ay)(i.A,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"absolute",top:"50%",right:0,transform:"translate(0%, -50%)",width:"26px",height:"26px",...t&&{width:`${.7*t}px !important`,height:`${.7*t}px !important`}})),w=(0,d.memo)(function({username:e="Name",name:t="Name",src:a,size:o,to:l,onClick:s,status:g=0,room:w,uploadLocal:E=!1,roomType:k=null,avatarETag:O,component:P="span",target:R="_self",noLink:S}){var _,M;let{getSetting:I}=(0,r.PCX)(),z=(0,c.A)(),$=S,B=l,F=k||(null==w?void 0:w.t),D=(0,n.cb)(t),T={width:o,height:o,color:z.palette.grey["50"],fontSize:o/3},W=I("chatplus"),N=null==W?void 0:null===(_=W.server)||void 0===_?void 0:_.replace(/\/$/,""),H=a;if(H||(H=O?`${N}/avatar/${e}?${m.stringify({etag:O})}`:""),D&&(T.backgroundColor=n.m6.hex(D)),(null==w?void 0:w.isBotRoom)&&(B=null,$=!0),B)return d.createElement(f,{target:R,to:B||`/${e}`},d.createElement(v,{"data-testid":h()("chatplus avatar"),src:H,alt:t,style:T,component:P,children:D}));if([p.CJ.Private,p.CJ.Public].includes(F)){if(E)return d.createElement(v,{"data-testid":h()("chatplus avatar"),src:H,alt:t,style:T,component:P,children:D});if(null==w?void 0:w.avatarETag)return H=`${N}/avatar/room/${null==w?void 0:w.id}?${m.stringify({etag:null==w?void 0:w.avatarETag})}`,d.createElement(v,{"data-testid":h()("chatplus avatar"),src:H,alt:t,style:T,component:P,children:D});{let L=`${N}/avatar/${null==w?void 0:null===(M=w.u)||void 0===M?void 0:M.username}`;return d.createElement(y,{"data-testid":h()("chatplus avatar"),sizeProps:o},d.createElement(x,{sizeProps:o,src:L,alt:t,component:P,children:D}),d.createElement(A,null,d.createElement(C,{sizeProps:o,src:H,alt:t,style:T,component:P,children:D})))}}if(F===p.CJ.Direct&&g){let j=(0,u.cR)(g);return d.createElement(b,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",status:j},d.createElement(i.A,{"data-testid":h()("chatplus avatar"),src:H,alt:t,style:T,component:P,children:D}))}return d.createElement(v,{"data-testid":h()("chatplus avatar"),src:H,alt:t,style:T,component:P,children:D,onClick:s,to:$?null:e})})},93624(e,t,a){"use strict";a.d(t,{qJ:()=>u,Zk:()=>_,WH:()=>x,aO:()=>E,xw:()=>el,qC:()=>eu,$6:()=>V});var r=a(40515),n=a(3556),o=a(8051),i=a(60780),l=a(96540);let s=(0,n.Ay)("div",{name:"ChatDockFilter"})(({theme:e})=>({position:"relative"})),c=(0,n.Ay)(o.A,{name:"ChatDockFilter"})(({theme:e})=>({padding:e.spacing(1,2,1,2),display:"flex",flexDirection:"row",alignItems:"center"})),d=(0,n.Ay)(i.A,{name:"ChatDockFilter"})(({theme:e})=>({marginLeft:e.spacing(.5)})),p=(0,n.Ay)(r.Gd,{name:"SearchWrapper"})(({theme:e})=>({"& input::placeholder, .ico":{color:e.palette.text.hint}}));function u({placeholder:e,size:t,hide:a=!1,label:r,disabled:n,valueSearch:o,onChangeSearch:i,onKeyUp:u,onSubmit:m,variant:g="direct",isShowButtonSubmit:h=!0,sx:v}){return a?null:l.createElement(s,null,l.createElement(c,{sx:v},l.createElement(p,{placeholder:e,onKeyUp:u,value:o,onChange:i}),h&&m?l.createElement(d,{disabled:n,size:"medium",color:"primary",variant:"text",onClick:m},r):null))}a(88485);var m=a(97837),g=a(91557);a(84680),a(97648),a(13586);let h="AddNewMembers",v=((0,n.Ay)("div")(({theme:e})=>({padding:e.spacing(0,1,0,2)})),(0,n.Ay)("div",{shouldForwardProp:e=>"users"!==e})(({theme:e,users:t})=>({...t&&{padding:e.spacing(0,1,1,2)},listStyle:"none",display:"flex",alignItems:"center",flexWrap:"wrap"})),(0,n.Ay)("li")(({theme:e})=>({margin:e.spacing(.5)})),(0,n.Ay)("div")(({theme:e})=>({padding:e.spacing(1.75,0),display:"flex",alignItems:"center",cursor:"pointer"})),(0,n.Ay)("span")(({theme:e})=>({...e.typography.h5,marginLeft:e.spacing(1)})),(0,n.Ay)("div",{name:h,slot:"RootSearch"})(({theme:e})=>({})),(0,n.Ay)("div",{name:h,slot:"SearchControl"})(({theme:e})=>({padding:e.spacing(0,1,0,2),display:"flex",flexDirection:"row",alignItems:"center"})),(0,n.Ay)(i.A,{name:h,slot:"ButtonCustom"})(({theme:e})=>({marginLeft:e.spacing(.5)})),(0,n.Ay)("input",{name:h,slot:"InputWrapper"})(({theme:e})=>({zIndex:"auto",backgroundColor:e.mixins.backgroundColor("paper"),color:"dark"===e.palette.mode?e.palette.grey["50"]:e.palette.grey["700"],height:"35px",borderRadius:"2px",fontSize:"14px",padding:"8px",paddingLeft:"12px",paddingRight:"72px",display:"block",width:"100%",margin:"0",border:e.mixins.border("secondary"),"&:focus":{borderColor:"#a2a2a2",boxShadow:"0 1px 4px 0 rgba(0,0,0,0.1)",outline:"none"},"&::placeholder":{fontSize:"14px"}})),(0,n.Ay)("div",{name:"ChatDockContent",slot:"root",shouldForwardProp:e=>"searching"!==e&&"collapsed"!==e})(({theme:e,searching:t,collapsed:a})=>({flex:1,maxHeight:"100%",position:"relative",paddingBottom:e.spacing(.75),...t&&{borderTop:"none"},...a&&{display:"none"},"&::-webkit-scrollbar":{height:"5px",width:"5px",background:"gray",borderRadius:e.spacing(.5),transition:"opacity 200ms"},"&::-webkit-scrollbar-track":{borderRadius:e.spacing(.5),background:"light"===e.palette.mode?"white":e.palette.grey["300"]},"&::-webkit-scrollbar-thumb":{background:e.palette.grey["600"],borderRadius:e.spacing(.5)},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.grey["700"]},"&::-webkit-scrollbar-thumb:horizontal":{background:"#000",borderRadius:"10px"}})),"ChatDockFooter"),f=(0,n.Ay)("div",{name:v,slot:"root",shouldForwardProp:e=>"isAllPageMessages"!==e})(({theme:e,isAllPageMessages:t})=>({position:"relative",display:"flex",minHeight:e.spacing(5),zIndex:e.zIndex.tooltip+11,backgroundColor:e.palette.background.paper,borderTop:e.mixins.border("divider"),...t&&{minHeight:e.spacing(6)}})),b=(0,n.Ay)("div",{name:v,slot:"uiChatRoomFooter",shouldForwardProp:e=>"disable"!==e&&"isAllPageMessages"!==e})(({theme:e,disable:t,isAllPageMessages:a})=>({position:"relative",borderTop:e.mixins.border("secondary"),display:"flex",alignItems:"flex-end",minHeight:e.spacing(5),zIndex:e.zIndex.tooltip+11,flexFlow:"wrap",justifyContent:"center",...t&&{userSelect:"none",backgroundColor:"dark"===e.palette.mode?e.palette.grey["700"]:e.palette.background.paper},...a&&{minHeight:e.spacing(6)}})),y=(0,n.Ay)("div",{name:v,slot:"uiChatComposerContainer"})(({theme:e})=>({textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",padding:"4px 8px",color:e.palette.grey["500"]}));function x({children:e,archived:t,isReadOnly:a,isMuted:r,searching:n,isBlocked:o,reactMode:i,allowMsgNoOne:s}){let{i18n:c,usePageParams:d}=(0,g.PCX)(),p=d(),u=(null==p?void 0:p.isAllPageMessages)||!1;return n?null:t?l.createElement(b,{disable:!0,isAllPageMessages:u},l.createElement(y,null,c.formatMessage({id:"this_group_is_archived"}))):a?l.createElement(b,{disable:!0,isAllPageMessages:u},l.createElement(y,null,c.formatMessage({id:"this_group_is_readonly"}))):r?l.createElement(b,{disable:!0,isAllPageMessages:u},l.createElement(y,null,c.formatMessage({id:"you_have_been_muted_in_this_group"}))):o||s&&"edit"!==i?l.createElement(b,{disable:!0,isAllPageMessages:u},l.createElement(y,null,c.formatMessage({id:"you_can_not_send_message_in_this_conversation"}))):l.createElement(f,{isAllPageMessages:u},e)}var A=a(84058),C=a.n(A);let w=(0,n.Ay)("div",{shouldForwardProp:e=>"searching"!==e&&"addNewMembers"!==e})(({theme:e,searching:t,addNewMembers:a})=>({display:"flex",alignItems:"center",minHeight:e.spacing(7),padding:e.spacing(1.5,1.25,1.5,2),borderBottom:e.mixins.border("secondary"),...(t||a)&&{borderBottom:"none"}}));function E({children:e,onClick:t,searching:a,addNewMembers:r}){let n=l.useCallback(e=>{e.preventDefault(),t&&t()},[t]);return l.createElement(w,{"data-testid":C()("Chat Dock Header"),onClick:n,searching:a,addNewMembers:r},e)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}let O="ChatDockPanel",P=(0,n.Ay)("div",{name:O,slot:"Root"})(({theme:e})=>({display:"flex",alignItems:"flex-end",marginLeft:e.spacing(2),width:"328px",zIndex:999})),R=(0,n.Ay)("div",{name:O,slot:"PanelStyled"})(({theme:e})=>({display:"flex",flexDirection:"column",zIndex:10,backgroundColor:e.mixins.backgroundColor("paper"),borderTopLeftRadius:e.shape.borderRadius/2,borderTopRightRadius:e.shape.borderRadius/2,boxShadow:"0 0 4px 0 rgba(0,0,0,0.2)",wordBreak:"break-word",wordWrap:"break-word",borderStartStartRadius:e.shape.borderRadius,borderStartEndRadius:e.shape.borderRadius,height:"455px",maxHeight:"calc(100vh - 60px)",position:"relative"})),S=(0,n.Ay)("div",{name:O,slot:"StageStyled"})(({theme:e})=>({width:"100%"})),_=l.forwardRef(function({children:e,...t},a){return l.createElement(P,k({ref:a},t),l.createElement(S,null,l.createElement(R,null,e)))});var M=a(61341),I=a(97763),z=a(95223),$=a(20053),B=a(38221),F=a.n(B),D=a(62193),T=a.n(D),W=a(56525),N=a(85838);let H=(0,W.A)(e=>(0,N.A)({optionLabel:{width:"32px",height:"32px",display:"inline-flex",alignItems:"center",justifyContent:"center",margin:"0",color:"#a2a2a2"},optionChecked:{color:e.palette.primary.main},optionInput:{display:"none"},optionIcon:{display:"inline-flex",alignItems:"center",marginTop:"1px",height:"14px",marginRight:"4px"}}),{name:"ChatDockSearchFilter"}),L=(0,n.Ay)("div")(({theme:e})=>({})),j=(0,n.Ay)("div")(({theme:e})=>({display:"inline-flex"})),U=(0,n.Ay)("label",{shouldForwardProp:e=>"id"!==e})(({theme:e,id:t})=>({cursor:"pointer",..."close"===t&&{"& span.ico":{"&:hover":{background:e.palette.action.selected,width:e.spacing(2.8),height:e.spacing(2.8),display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"40px"}}}})),J=(0,n.Ay)(o.A,{name:"SearchBox",slot:"Root"})(({theme:e})=>({margin:e.spacing(0,2,1,2),height:e.spacing(5),borderRadius:e.spacing(2.5),display:"flex",alignItems:"center",backgroundColor:e.palette.action.hover,"& input::placeholder":{color:e.palette.text.hint}})),X=(0,n.Ay)(r.s4,{shouldForwardProp:e=>"isMobile"!==e&&"disabled"!==e})(({theme:e,isMobile:t,disabled:a})=>({color:e.palette.text.primary,transition:"all .2s ease",cursor:"pointer",padding:e.spacing(0,1),width:e.spacing(4),height:e.spacing(4),display:"flex",justifyContent:"center",alignItems:"center",fontWeight:e.typography.fontWeightSemiBold,...t&&{padding:0},...a&&{cursor:"not-allowed",color:`${e.palette.text.disabled} !important`,fontWeight:e.typography.fontWeightMedium}})),G=(0,n.Ay)(o.A)(({theme:e})=>({display:"flex",alignItems:"center"}));function Z({id:e,checked:t,icon:a,classes:n,value:o,roomId:i,onClick:s,tooltip:c}){let{dispatch:d,i18n:p}=(0,g.PCX)(),u=()=>{d({type:o,payload:{identity:i}}),"function"==typeof s&&s(t?void 0:e)};return l.createElement(I.A,{title:c?p.formatMessage({id:c}):"",placement:"top"},l.createElement(U,{id:e,className:(0,$.default)(n.optionLabel,t&&n.optionChecked)},l.createElement("input",{className:n.optionInput,type:"checkbox"}),l.createElement(r.s4,{icon:a,className:n.optionIcon,onClick:u})))}let q=({hide:e,roomId:t,searching:a,chatRoom:n,isBuddy:o=!1})=>{let i=H(),{dispatch:s,i18n:c}=(0,g.PCX)(),d=(0,l.useRef)(null),p=(0,l.useRef)(null),{msgSearch:u}=n||{},m=u?(null==u?void 0:u.slot)+1:0,[h,v]=l.useState((null==u?void 0:u.total)||0),f=(0,l.useMemo)(()=>!!T()(u)||(null==u?void 0:u.slot)===0,[u]),b=(0,l.useMemo)(()=>!!T()(u)||h===m,[u,h,m]),[y,x]=l.useState(null),A=c.formatMessage({id:"search_messages_dots"});(null==n?void 0:n.pinned)&&(A=c.formatMessage({id:"search_pinned_messages"})),(null==n?void 0:n.starred)&&(A=c.formatMessage({id:"search_starred_messages"}));let C=(0,l.useMemo)(()=>[{icon:"ico-close",value:"chatplus/room/toggleSearching",tooltip:"close",id:"close"}],[]);(0,l.useEffect)(()=>{d.current="",x(""),p.current=null,P()},[a]);let w=e=>{d.current=e.target.value,x(e.target.value),P()},E=e=>{v((null==e?void 0:e.total)||0)},k=()=>{},O=l.useCallback(()=>{s({type:p.current?"chatplus/room/pinnedMessages":"chatplus/room/searchMessages",payload:{roomId:t,text:d.current,filter:p.current,isBuddy:o},meta:{onSuccess:E,onFailure:k}})},[s,t]),P=(0,l.useMemo)(()=>F()(O,M.IG),[O]);(0,l.useEffect)(()=>{!t||(d.current="",x(""),(null==n?void 0:n.pinned)&&(p.current="pin",P()),(null==n?void 0:n.starred)&&(p.current="star",P()),(null==n?void 0:n.pinned)||(null==n?void 0:n.starred)||(p.current=null,P()))},[null==n?void 0:n.pinned,null==n?void 0:n.starred,t]);let R=l.useCallback(()=>{f||s({type:"chatplus/room/searchChangePosition",payload:{rid:t,mid:null==u?void 0:u.id,type:M.rs}})},[null==u?void 0:u.id,t,f]),S=l.useCallback(()=>{b||s({type:"chatplus/room/searchChangePosition",payload:{rid:t,mid:null==u?void 0:u.id,type:M.mR}})},[null==u?void 0:u.id,t,b]);return e||!t?null:l.createElement(L,null,l.createElement(J,null,l.createElement(z.Ay,{sx:{width:"100%"},variant:"search",onChange:w,placeholder:A,startAdornment:l.createElement(r.s4,{icon:"ico-search-o"}),"aria-controls":"search_complete",value:y,endAdornment:l.createElement(G,null,(null==n?void 0:n.pinned)||(null==n?void 0:n.starred)?null:l.createElement(l.Fragment,null,l.createElement(X,{icon:"ico-angle-up",onClick:R,disabled:f}),l.createElement(X,{icon:"ico-angle-down",onClick:S,disabled:b})),C&&C.length?l.createElement(j,null,C.map(e=>l.createElement(Z,{id:e.id,key:e.id.toString(),checked:null==e?void 0:e.checked,classes:i,icon:e.icon,value:e.value,roomId:t,tooltip:null==e?void 0:e.tooltip}))):null)})))},V=(0,l.memo)(q);var K=a(65121),Q=a(72761),Y=a(98023),ee=a.n(Y);let et=(0,n.Ay)("div")(({theme:e})=>({flex:1,fontWeight:"bold",display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"})),ea=(0,n.Ay)("span",{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({fontSize:e.mixins.pxToRem(13),color:e.palette.text.primary,lineHeight:e.spacing(2.375),...t===m.O2.Offline&&{color:e.palette.text.secondary}})),er=(0,n.Ay)("span",{shouldForwardProp:e=>"variant"!==e&&"type"!==e&&"isChatBot"!==e})(({theme:e,variant:t,type:a,isChatBot:r})=>({...e.typography.subtitle1,fontSize:"15px",lineHeight:e.spacing(2.375),...a===m.CJ.Direct&&{":hover":{cursor:"pointer",textDecoration:"underline"}},..."new_message"===t&&{fontSize:e.typography.pxToRem(18),":hover":{cursor:"auto",textDecoration:"none"}},...r&&{":hover":{cursor:"auto",textDecoration:"none"}}})),en=(0,n.Ay)(Q.A,{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({margin:e.spacing(0,1,0,.5),"& .MuiBadge-badge":{...t===m.O2.Online&&{color:e.palette.success.main,backgroundColor:e.palette.success.main},...t===m.O2.Away&&{color:e.palette.warning.main,backgroundColor:e.palette.warning.main},...t===m.O2.Busy&&{color:e.palette.error.main,backgroundColor:e.palette.error.main},"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},...t===m.O2.Invisible&&{display:"none"}})),eo=(0,n.Ay)("div",{name:"DockPanelTitle"})(({theme:e})=>({display:"flex",alignItems:"center",marginTop:e.spacing(.25)})),ei=({statusProps:e,user:t,isSelfChat:a})=>{var r,n;let{i18n:o}=(0,g.PCX)();if(e===m.O2.Invisible||!a&&!(null==t?void 0:null===(r=t.lastStatusUpdated)||void 0===r?void 0:r.$date))return null;let i="";switch(e){case m.O2.Offline:{let s=(0,K.Rn)(null==t?void 0:null===(n=t.lastStatusUpdated)||void 0===n?void 0:n.$date);i=s?o.formatMessage({id:"active_time_ago"},{time:s}):"";break}case m.O2.Online:i=o.formatMessage({id:"online"});break;case m.O2.Away:i=o.formatMessage({id:"away"});break;case m.O2.Busy:i=o.formatMessage({id:"busy"})}return l.createElement(eo,null,e!==m.O2.Offline&&l.createElement(en,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",status:e}),l.createElement(ea,{status:e},i))};function el({room:e,children:t,status:a,user:r,variant:n,isSelfChat:o=!1}){let{navigate:i}=(0,g.PCX)(),s=null==e?void 0:e.isBotRoom,c=()=>{!s&&(null==e?void 0:e.t)===m.CJ.Direct&&r&&r.username&&i(`/${r.username}`)};return(null==e?void 0:e.t)===m.CJ.Direct?l.createElement(et,{"data-testid":C()("Chat Dock Header title")},l.createElement(er,{onClick:c,type:null==e?void 0:e.t,isChatBot:s},t),(null==e?void 0:e.t)===m.CJ.Direct&&ee()(a)?l.createElement(ei,{statusProps:a,user:r,isSelfChat:o}):null):l.createElement(et,{"data-testid":C()("Chat Dock Header title")},l.createElement(er,{type:null==e?void 0:e.t,variant:n},t))}var es=a(24713),ec=a.n(es);let ed=(0,W.A)(e=>(0,N.A)({root:{display:"flex",padding:"0",margin:"0",listStyle:"none"},item:{position:"relative",lineHeight:"34px",padding:"0",margin:"0",".panelHeader &":{height:"30px",width:"30px",marginLeft:e.spacing(.5)},".panelHeader &:hover button":{color:e.palette.text.secondary,backgroundColor:e.palette.action.selected,borderRadius:"50%"}},btn:{height:"34px",lineHeight:"20px",fontSize:"17px",padding:"0 6px",cursor:"pointer",color:"light"===e.palette.mode?e.palette.grey["600"]:e.palette.text.secondary,position:"relative",minWidth:e.spacing(3),display:"inline-flex",textAlign:"center",alignItems:"center",justifyContent:"center",border:"none",outline:"none",backgroundColor:"transparent",".panelHeader &":{height:"30px",width:"30px"}},itemActive:{},btnActive:{color:e.palette.primary.main}}),{name:"ChatDockToolbar"}),ep=(0,n.Ay)("div",{name:"ToolbarChat",slot:"root",shouldForwardProp:e=>"variant"!==e})(({theme:e,variant:t})=>({display:"flex",padding:"0",margin:"0",listStyle:"none",..."pageMessage"===t&&{"& .MuiListItem-root .ico":{fontSize:e.mixins.pxToRem(13)}}}));function eu({items:e,displayLimit:t=4,variant:a=null,handleAction:n,popperOptions:o}){var i,s,c;let d=ed();if(!Array.isArray(e))return null;if("roomPanel"===a){let p=t-2,u=ec()(e,{testid:"startVoiceCall"}),m=ec()(e,{testid:"startVideoChat"});p=t-2-(u>-1?0:1)-(m>-1?0:1);let g=e.filter((e,t)=>t<p||e.behavior),h=ec()(g,{behavior:"more"});if(h>-1){if(null===(i=g[h].items)||void 0===i?void 0:i.length)g[h].as="dropdown";else{let v=e.filter((e,t)=>t>p-1&&!e.behavior);g[h]={...g[h],items:v,as:"dropdown"}}}return l.createElement(ep,{variant:a},l.createElement(r.c,{items:g,prefixName:"chatplusToolbar.item.",fallbackName:"button",classes:d,handleAction:n,popperOptions:o,menuStyles:M.E1}))}if("pageMessage"===a){let f=e.filter((e,t)=>e.behavior),b=ec()(f,{behavior:"more"});if(b>-1){if(null===(s=f[b].items)||void 0===s?void 0:s.length)f[b].as="dropdown";else{let y=e.filter((e,t)=>!e.behavior);f[b]={...f[b],items:y,as:"dropdown"}}}return l.createElement(ep,{variant:a},l.createElement(r.c,{items:f,prefixName:"chatplusToolbar.item.",fallbackName:"button",classes:d,handleAction:n,variant:a,popperOptions:o}))}let x=e.filter((e,a)=>a<t-1||e.behavior),A=ec()(x,{behavior:"more"});if(A>-1){if(null===(c=x[A].items)||void 0===c?void 0:c.length)x[A].as="dropdown";else{let C=e.filter((e,a)=>a>t-2&&!e.behavior);x[A]={...x[A],items:C,as:"dropdown"}}}return l.createElement(ep,null,l.createElement(r.c,{items:x,prefixName:"chatplusToolbar.item.",fallbackName:"button",classes:d,handleAction:n,popperOptions:o,menuStyles:M.E1}))}},73217(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>T});var r=a(91557),n=a(88485),o=a(16677),i=a(84680),l=a(40515),s=a(3556),c=a(8051),d=a(62193),p=a.n(d),u=a(96540),m=a(71468);a(3094),a(24078);var g=a(93624),h=a(61341),v=a(60780),f=a(97837),b=a(65121),y=a(72761),x=a(13586);let A=(0,s.Ay)("div",{name:"LayoutSlot",slot:"onlineItem",overridesResolver:(e,t)=>[t.onlineItem]})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",color:"#555555",fontSize:"14px",cursor:"pointer",padding:e.spacing(1.5,1),"&:hover":{borderRadius:e.spacing(1),background:"dark"===e.palette.mode?e.palette.grey["600"]:e.palette.grey["100"]}})),C=(0,s.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",width:"calc(100% - 25px)"})),w=(0,s.Ay)("div")(({theme:e})=>({marginRight:e.spacing(1)})),E=(0,s.Ay)(c.A)(({theme:e})=>({color:e.palette.text.primary,overflow:"hidden"})),k=(0,s.Ay)(y.A,{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({marginRight:e.spacing(1.5),"& .MuiBadge-badge":{...1===t&&{color:e.palette.success.main,backgroundColor:e.palette.success.main},...2===t&&{color:e.palette.warning.main,backgroundColor:e.palette.warning.main},...3===t&&{color:e.palette.error.main,backgroundColor:e.palette.error.main},"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}}}));function O({item:e}){let{dispatch:t}=(0,r.PCX)(),a=u.useCallback(()=>t({type:"chatplus/room/createChatRoomFromDirectMessage",payload:{type:"username",identity:null==e?void 0:e.username,skipPrivacyCheck:!1}}),[]);if(null==e?void 0:e.invisible)return null;let n=(null==e?void 0:e.status)||0,o=(0,b.cR)(n);return u.createElement(A,{onClick:a},u.createElement(C,null,u.createElement(w,null,u.createElement(x.default,{name:null==e?void 0:e.name,username:null==e?void 0:e.username,size:32,roomType:f.CJ.Direct,avatarETag:null==e?void 0:e.avatarETag,hoverCard:null!=e&&!!e.metafoxUserId&&`/user/${null==e?void 0:e.metafoxUserId}`,component:r.Wti})),u.createElement(E,null,u.createElement(l.mE,{lines:1,variant:"h5"},u.createElement(r.N_E,{children:e.name,hoverCard:null!=e&&!!e.metafoxUserId&&`/user/${null==e?void 0:e.metafoxUserId}`,underline:"none",color:"inherit"})))),o?u.createElement(k,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",status:o}):null)}let P=(0,s.Ay)("div")(({theme:e})=>({})),R=(0,s.Ay)("div")(({theme:e})=>({padding:e.spacing(2,0),fontSize:e.spacing(1.875),lineHeight:e.spacing(2.5),color:e.palette.grey["600"],textAlign:"center"})),S=(0,s.Ay)("div")(({theme:e})=>({padding:e.spacing(0,1,1,1),"& button":{borderColor:e.palette.primary.main}})),_=function({data:e,searchValue:t}){let{i18n:a,navigate:n}=(0,r.PCX)(),o=()=>{n("/user")};return t&&!e.length?u.createElement(R,null,a.formatMessage({id:"no_results_found"})):e.length?u.createElement(P,null,e.slice(0,h.IS).map(e=>u.createElement(O,{item:e,key:e._id}))):u.createElement(c.A,null,u.createElement(R,null,a.formatMessage({id:"no_online_friends"})),u.createElement(S,null,u.createElement(v.A,{variant:"outlined",color:"primary",fullWidth:!0,onClick:o},a.formatMessage({id:"add_friends"}))))};var M=a(52705);let I=(0,s.Ay)(c.A,{name:"LayoutSlot",slot:"onlineItem",overridesResolver:(e,t)=>[t.onlineItem]})(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(1)})),z=(0,s.Ay)(c.A)(({theme:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",justifyContent:"space-between"})),$=function(){return u.createElement(c.A,{mt:1},[,,,,].fill(0).map((e,t)=>u.createElement(I,{key:t},u.createElement(l.Qm,null,u.createElement(M.A,{variant:"avatar",width:32,height:32,sx:{mr:1}})),u.createElement(z,null,u.createElement(M.A,{variant:"text",width:"80%"}),u.createElement(M.A,{variant:"avatar",width:8,height:8})))))},B=(0,s.Ay)("div",{name:"LayoutSlot",slot:"inputSearch",overridesResolver:(e,t)=>[t.inputSearch]})(({theme:e})=>({padding:e.spacing(2,1,1,1)})),F=(0,s.Ay)("div",{name:"SearchControl"})(({theme:e})=>({display:"flex",flexDirection:"row"})),D=(0,r.WvA)({name:"ChatplusContactsBlock",extendBlock:function({title:e,themeId:t}){let{i18n:a,useActionControl:s,getSetting:d,useLoggedIn:h}=(0,r.PCX)(),v=d("chatplus"),f=h(),b=(0,n.hB)(),[y,x]=u.useState(""),[A]=s(null,{}),C=(0,m.d4)(e=>(0,o.od)(e,y)),w=e=>{e&&e.target&&x(e.target.value)};return f&&v&&v.server?u.createElement(i.eB,null,u.createElement(i.Tw,null,u.createElement(i.E9,null,a.formatMessage({id:e})),u.createElement(c.A,null,u.createElement(g.qC,{items:[{label:"create_new_group",icon:"ico-user2-three-o",value:"closeMenu, chatplus/room/newGroup",testid:"createChatRoom",showWhen:["or",["truthy","perms.create-p"],["truthy","perms.create-c"]]},{label:"new_conversation",icon:"ico-compose",value:"closeMenu, chatplus/buddyPanel/createChatRoomFromDock",testid:"createChatRoomFromDock",showWhen:["truthy","perms.create-p"]},{label:"more_options",icon:"ico-dottedmore-o",testid:"more",disablePortal:!1,behavior:"more",items:[{label:"online",icon:"ico-circle",color:"success",value:"closeMenu, chatplus/setUserStatus:online",testid:"status_online",name:"status_user",item_name:"online"},{label:"away",icon:"ico-circle",color:"warning",value:"closeMenu, chatplus/setUserStatus:away",testid:"status_away",name:"status_user",item_name:"away"},{label:"busy",icon:"ico-circle",color:"danger",value:"closeMenu, chatplus/setUserStatus:busy",testid:"status_busy",name:"status_user",item_name:"busy"},{label:"invisible",icon:"ico-circle",color:"gray",value:"closeMenu, chatplus/setUserStatus:invisible",testid:"status_offline",name:"status_user",item_name:"offline"},{as:"divider",testid:"status_divider"},{label:"settings",icon:"ico-gear-o",value:"closeMenu, chatplus/editUserPreferences",testid:"editUserPreferences"}]}],handleAction:A,popperOptions:{strategy:"fixed"}}))),u.createElement(i.tD,{style:{height:"100%"}},u.createElement(i.P,{autoHeightMax:"100%",autoHide:!0,autoHeight:!0},p()(b)?u.createElement($,null):u.createElement(c.A,null,p()(C)&&!y?null:u.createElement(B,null,u.createElement(F,null,u.createElement(l.Gd,{placeholder:a.formatMessage({id:"search_friends"}),value:y,onChange:w,style:{height:"35px"}}))),u.createElement(_,{data:C,searchValue:y}))))):null},defaults:{title:"online_friends",blockLayout:"Blocker Contacts ChatPlus",showWhen:["truthy","setting.chatplus.server"]}}),T=D}}]);