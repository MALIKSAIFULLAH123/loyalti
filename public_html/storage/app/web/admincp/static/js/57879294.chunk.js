(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-photo-components-PhotoViewDetailMobile-index"],{24713(e,t,l){var a=l(2523),n=l(15389),i=l(61489),o=Math.max;e.exports=function(e,t,l){var r=null==e?0:e.length;if(!r)return -1;var d=null==l?0:i(l);return d<0&&(d=o(r+d,0)),a(e,n(t,3),d)}},6493(e,t,l){"use strict";l.r(t),l.d(t,{default:()=>P});var a=l(91557),n=l(90243),i=l(76096),o=l(40515),r=l(3556),d=l(8051),s=l(67131),m=l(96540),c=l(71468),p=l(77066);let u="PhotoDetailMobile",g=(0,r.Ay)("div",{name:u,slot:"HeaderItemAlbum"})(({theme:e})=>({display:"flex",flexDirection:"column",padding:e.spacing(0,0,2,2)})),v=(0,r.Ay)(d.A,{name:u,slot:"AlbumNameWrapper"})(({theme:e})=>({"& .ico.ico-photos-o":{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(1)},display:"flex",alignItems:"center"})),x=(0,r.Ay)("div",{name:u,slot:"AlbumName"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15)})),f=(0,r.Ay)("div",{name:u,slot:"Root"})(({theme:e})=>({padding:0,borderRadius:e.shape.borderRadius,maxWidth:1200,margin:"auto",[e.breakpoints.down("xs")]:{flexFlow:"column"}})),y=(0,r.Ay)("div",{name:u,slot:"Header"})(({theme:e})=>({display:"flex",flexDirection:"row",marginBottom:e.spacing(2),padding:e.spacing(0,2)})),h=(0,r.Ay)("div",{name:u,slot:"HeaderAvatarHolder"})(({theme:e})=>({paddingRight:e.spacing(1.5)})),E=(0,r.Ay)("div",{name:u,slot:"HeaderInfo"})(({theme:e})=>({padding:"4px 0",flex:1})),A=(0,r.Ay)(o.xE,{name:u,slot:"ProfileLink"})(({theme:e})=>({fontWeight:e.typography.fontWeightBold,paddingRight:e.spacing(.5),color:e.palette.text.primary})),b=(0,r.Ay)("div",{name:u,slot:"PrivacyBlock"})(({theme:e})=>({display:"flex",flexDirection:"row",alignItems:"center",color:e.palette.text.secondary})),$=(0,r.Ay)("span",{name:u,slot:"SeparateSpans"})(({theme:e})=>({display:"flex",alignItems:"center","& span + span:before":{content:'"\xb7"',display:"inline-block",padding:`${e.spacing(0,.5)}`}})),_=(0,r.Ay)(d.A,{name:u,slot:"Info"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),color:e.palette.text.primary})),w=(0,r.Ay)("div",{name:u,slot:"PhotoReaction"})(({theme:e})=>({padding:e.spacing(0,2,2,2)})),R=(0,r.Ay)("div",{name:u,slot:"ImageContainer",shouldForwardProp:e=>"fullScreenView"!==e})(({theme:e,fullScreenView:t})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexGrow:1,...t&&{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:99}}));var k=l(78770);let P=(0,a.FB$)((0,k.A)(function({item:e,actions:t,handleAction:l,state:r,user:u,identity:k,nextUrl:P,prevUrl:I,mediaType:C,shouldPreload:H,fromResource:M,fromResourceId:T}){var z;let{jsxBackend:S,ItemDetailInteraction:D,ItemActionMenu:U,useGetItem:W,useGetItems:B,i18n:F,dispatch:N,navigate:V}=(0,a.PCX)(),L=(0,a.zy2)(),O=S.get("core.itemView.pendingReviewCard"),j=(0,c.d4)(t=>(0,p.Vo)(t,e));m.useEffect(()=>{H&&N({type:`photo/${M}/LOAD`,payload:{identity:k,direction:H,[M]:T}})},[H]);let G=S.get("media.ui.viewSet"),X=S.get("core.ui.taggedFriend"),Z=S.get("core.ui.taggedPlace"),{categories:q,album:J,location:K}=e||{},Q=W(J),Y=B(q),ee=m.useCallback(e=>{var t;V({pathname:e},{replace:!0,state:{asModal:null==L?void 0:null===(t=L.state)||void 0===t?void 0:t.asModal}})},[V,null==L?void 0:null===(z=L.state)||void 0===z?void 0:z.asModal]),et=e=>{N({type:i.kx,payload:{identity:k,data:e}})},el=e=>{N({type:i.R9,payload:{identity:k,id:e}})};return e?m.createElement(f,null,O&&m.createElement(O,{sx:{borderRadius:0},item:e}),m.createElement(g,null,!Q||(null==Q?void 0:Q.is_default)?null:m.createElement(m.Fragment,null,m.createElement(v,{sx:{pt:2}},m.createElement(o.s4,{icon:" ico-photos-o"}),m.createElement(x,null,F.formatMessage({id:"from_album_name"},{name:m.createElement(a.N_E,{to:null==Q?void 0:Q.link},null==Q?void 0:Q.name)}))),m.createElement(d.A,{sx:{pt:2}},m.createElement(s.A,null))),m.createElement(o.h4,{data:Y,sx:{pt:2,mb:{sm:1,xs:0},textTransform:"capitalize"},displayLimit:2})),m.createElement(y,null,m.createElement(h,null,m.createElement(o.H8,{user:u,size:48})),m.createElement(E,null,m.createElement("div",null,m.createElement(A,{user:u})),m.createElement(b,null,m.createElement($,null,m.createElement(o.g6,{value:e.privacy,item:null==e?void 0:e.privacy_detail}),m.createElement(o.h1,{value:e.creation_date})))),m.createElement(U,{identity:k,state:r,handleAction:l})),m.createElement(d.A,{px:2},e.text||e.description?m.createElement(_,{mb:2},m.createElement(o.Zn,{truncateProps:{variant:"body1",lines:3}},m.createElement(n.Ay,{html:e.text||e.description}))):null,(null==j?void 0:j.length)||(null==K?void 0:K.address)?m.createElement(d.A,{mb:2,sx:{"& a":{fontWeight:"700",color:e=>e.palette.text.primary}}},(null==j?void 0:j.length)?m.createElement(X,{item_type:e.resource_name,item_id:e.id,total:j.length,users:j}):null,(null==K?void 0:K.address)?m.createElement(d.A,{component:"span",ml:.5},F.formatMessage({id:"at_tagged_place"},{name:K.address,bold:()=>m.createElement(Z,{place:K})})):null):null),m.createElement(R,null,m.createElement(G,{mediaType:C,identity:k,onArrowClick:ee,onAddPhotoTag:et,onRemovePhotoTag:el,nextUrl:P,prevUrl:I,sxWrapper:{minHeight:"350px"}})),m.createElement(w,null,m.createElement(D,{identity:k,handleAction:l}))):null}),()=>{})},78770(e,t,l){"use strict";l.d(t,{A:()=>p});var a=l(91557),n=l(24713),i=l.n(n),o=l(58156),r=l.n(o),d=l(76096);let s=(e,t)=>e?[d.hO,e]:t?[d.HN,t]:[],m=(e,t,l=3)=>t<l?"prev":t>e-l-1?"next":"",c=(e,{photo_set:t,photo_album:l,identity:a,photo_id:n,media_type:o})=>{let d=r()(e,a);if(!d)return{};let[c,p]=s(l,t),u=r()(e,`photo.entities.${c}.${p}.photos`)||[],g=u.filter(t=>{let l=r()(e,t);if(!l.error)return t}),v=(null==d?void 0:d.user)?r()(e,d.user):void 0,x=null==g?void 0:g.length,f=1<x?i()(g,e=>e===a):-1,y=d.user_tags?d.user_tags.map(t=>r()(e,t)).filter(Boolean):[],h={item:d,photos:g,user:v,photo_id:n,user_tags:y,mediaType:o,nextUrl:void 0,prevUrl:void 0,shouldPreload:m(x,f),fromResource:c,fromResourceId:p};if(-1<f){var E,A;let b="/photo";if(t&&(b=`/media/${t}`),l&&(b=`/media/album/${l}`),f<x-1){let $=g[f+1],_=$.split(".")[2],w=null===(E=r()(e,$))||void 0===E?void 0:E.slug;h.nextUrl=`${b}/${_}/${$.replace(`${_}.entities.${_}.`,"")}${w?`/${w}`:""}`}if(0<f){let R=g[f-1],k=null===(A=r()(e,R))||void 0===A?void 0:A.slug,P=R.split(".")[2];h.prevUrl=`${b}/${P}/${R.replace(`${P}.entities.${P}.`,"")}${k?`/${k}`:""}`}}return h},p=(0,a.NgA)(c)}}]);