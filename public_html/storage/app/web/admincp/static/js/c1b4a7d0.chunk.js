"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-admincp-blocks-AdminSideMenu-Block"],{54347(e,t,n){n.r(t),n.d(t,{default:()=>S});var o=n(91557),i=n(84680),l=n(61404),a=n(67725),r=n(3556),d=n(8051),s=n(96540),u=n(78106),m=n(38862),c=n(71468);let f=(0,r.Ay)(d.A,{name:"AdminCpSideMenu",slot:"SiteVersion"})(({theme:e})=>({padding:e.spacing(1.5,2),color:"rgba(238,238,238,0.7)",marginTop:"auto"}));function p(){var e;let{dispatch:t,i18n:n}=(0,o.PCX)(),i=(0,c.d4)(e=>e.admincp.status),l=null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.version;return(s.useEffect(()=>{t((0,m.Ty)(!1))},[]),l)?s.createElement(f,null,`${n.formatMessage({id:"site_version"})}: ${l}`):null}function h(e){let t=[],n=e.split("/").filter(Boolean);return n.forEach((e,o)=>{o>0&&t.unshift(`/${n.slice(0,o).join("/")}`)}),t.unshift(e),t}let b=e=>{let t={},n=s.useMemo(()=>e.items.reduce((e,t)=>(e.push(t.to),t.items&&t.items.forEach(t=>{e.push(t.to)}),e),[]).filter(Boolean),[e]);return n.forEach(e=>{t[e]=e}),n.forEach(e=>{h(e).forEach(n=>{t[n]||(t[n]=e)})}),t},v=(e,t)=>{let n=b(e),o=h(t).find(e=>n[e]),i=n[o];return i||""},A=(0,r.Ay)(d.A,{name:"AdminSideMenu",slot:"Root",shouldForwardProp:e=>"mobile"!==e&&"drawerVisible"!==e})(({mobile:e,theme:t,drawerVisible:n})=>({position:"relative",zIndex:99,...e?{zIndex:t.zIndex.appBar+2,width:48}:{width:n?256:48}})),g=(0,r.Ay)(d.A,{name:"AdminSideMenu",slot:"Staged",shouldForwardProp:e=>"drawerVisible"!==e})(({theme:e,drawerVisible:t})=>({position:"fixed",width:t?256:48,top:58,bottom:0,left:0,background:"rgb(35, 48, 68)",overflowX:"hidden",overflowY:"auto"})),E=(0,r.Ay)(d.A,{name:"AdminSideMenu",slot:"Content"})(({theme:e})=>({paddingTop:"12px",paddingBottom:e.spacing(10)})),S=(0,o.WvA)({extendBlock:function({drawerVisible:e,isDesktop:t=!0}){let{usePageParams:n,useSession:r,getAcl:m,getSetting:c,jsxBackend:f,compactUrl:h,useAppMenu:b,useLoggedIn:S,dispatch:w,useIsMobile:x}=(0,o.PCX)(),{id:k}=n(),y=(0,u.zy)(),M=r(),C=m(),B=c(),z=b("core","adminSidebarMenu"),[P,R]=s.useState(-1),T=s.useCallback(e=>{w({type:e,payload:{}})},[]),V=s.useRef(),_=S(),I=v(z,y.pathname),$=s.useRef(),X=x(),F=e=>{clearTimeout($.current),R(e)},j=()=>{$.current=setTimeout(()=>{R(-1)},500)},D=(0,a.Ue)(z.items,{session:M,acl:C,setting:B,isMobile:X});if(!D.length)return null;let H=D.findIndex(e=>e.items&&e.items.length?e.items.some(e=>e.to===I):I===e.to);return _?s.createElement(A,{mobile:!t,drawerVisible:e,"data-testid":"layoutSlotSide"},s.createElement(g,{drawerVisible:e},s.createElement(i.N2,{scrollRef:V},s.createElement(l.u,{scrollRef:V},s.createElement(d.A,{sx:{display:"flex",flexDirection:"column",height:"100%"}},s.createElement(E,null,D.map((n,o)=>f.render({component:`adminSideMenu.as.${n.as||"normal"}`,props:{key:o.toString(),handleAction:T,item:{...n,to:n.to?h(n.to,{id:k}):void 0},pathname:I,active:H===o,minimize:!e,isDesktop:t,activeHover:P===o,handlePopoverOpen:()=>F(o),handlePopoverClose:j}}))),e?s.createElement(p,null):null))))):null},name:"core.block.AdminSideMenu"})}}]);