(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-pages-blocks-ProfileHeader-Block"],{89637(e,t,a){"use strict";a.d(t,{A:()=>y});var n=a(58168),r=a(98587),i=a(96540),l=a(20053),o=a(75659),c=a(3556),s=a(92353),d=a(18799),m=a(38413),p=a(31609);function u(e){return(0,p.A)("MuiCard",e)}(0,m.A)("MuiCard",["root"]);var g=a(74848);let v=["className","raised"],f=e=>{let{classes:t}=e;return(0,o.A)({root:["root"]},u,t)},b=(0,c.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),h=i.forwardRef(function(e,t){let a=(0,s.A)({props:e,name:"MuiCard"}),{className:i,raised:o=!1}=a,c=(0,r.A)(a,v),d=(0,n.A)({},a,{raised:o}),m=f(d);return(0,g.jsx)(b,(0,n.A)({className:(0,l.default)(m.root,i),elevation:o?8:void 0,ref:t,ownerState:d},c))}),y=h},24099(e,t,a){"use strict";a.d(t,{A:()=>h});var n=a(98587),r=a(58168),i=a(96540),l=a(89452),o=a(68248),c=a(39599),s=a(73272),d=a(3556),m=a(92353),p=a(74848);let u=["component","direction","spacing","divider","children"],g=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],v=({ownerState:e,theme:t})=>{let a=(0,r.A)({display:"flex",flexDirection:"column"},(0,l.NI)({theme:t},(0,l.kW)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let n=(0,o.LX)(t),i=Object.keys(t.breakpoints.values).reduce((t,a)=>(("object"==typeof e.spacing&&null!=e.spacing[a]||"object"==typeof e.direction&&null!=e.direction[a])&&(t[a]=!0),t),{}),c=(0,l.kW)({values:e.direction,base:i}),d=(0,l.kW)({values:e.spacing,base:i});"object"==typeof c&&Object.keys(c).forEach((e,t,a)=>{let n=c[e];if(!n){let r=t>0?c[a[t-1]]:"column";c[e]=r}});let m=(t,a)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${g(a?c[a]:e.direction)}`]:(0,o._W)(n,t)}});a=(0,s.A)(a,(0,l.NI)({theme:t},d,m))}return(0,l.iZ)(t.breakpoints,a)},f=(0,d.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})(v),b=i.forwardRef(function(e,t){let a=(0,m.A)({props:e,name:"MuiStack"}),l=(0,c.A)(a),{component:o="div",direction:s="column",spacing:d=0,divider:g,children:v}=l,b=(0,n.A)(l,u);return(0,p.jsx)(f,(0,r.A)({as:o,ownerState:{direction:s,spacing:d},ref:t},b,{children:g?function(e,t){let a=i.Children.toArray(e).filter(Boolean);return a.reduce((e,n,r)=>(e.push(n),r<a.length-1&&e.push(i.cloneElement(t,{key:`separator-${r}`})),e),[])}(v,g):v}))}),h=b},25669(e,t,a){"use strict";a.d(t,{A:()=>s});var n=a(58168),r=a(98587),i=a(96540);let l=["getTrigger","target"];function o(e,t){let{disableHysteresis:a=!1,threshold:n=100,target:r}=t,i=e.current;return r&&(e.current=void 0!==r.pageYOffset?r.pageYOffset:r.scrollTop),(!!a||void 0===i||!(e.current<i))&&e.current>n}let c="undefined"!=typeof window?window:null;function s(e={}){let{getTrigger:t=o,target:a=c}=e,s=(0,r.A)(e,l),d=i.useRef(),[m,p]=i.useState(()=>t(d,s));return i.useEffect(()=>{let e=()=>{p(t(d,(0,n.A)({target:a},s)))};return e(),a.addEventListener("scroll",e,{passive:!0}),()=>{a.removeEventListener("scroll",e,{passive:!0})}},[a,t,JSON.stringify(s)]),m}},24176(e,t,a){var n=a(30361);e.exports=function(e,t){var a=e.length;if(a)return n(t+=t<0?a:0,a)?e[t]:void 0}},78646(e,t,a){var n=a(24176),r=a(61489);e.exports=function(e,t){return e&&e.length?n(e,r(t)):void 0}},53072(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>G});var n=a(91557),r=a(56894),i=a(84680),l=a(40515),o=a(67725),c=a(3556),s=a(8051),d=a(12789),m=a(87773),p=a(25669),u=a(60780),g=a(78646),v=a.n(g),f=a(62193),b=a.n(f),h=a(96540),y=a(52705),E=a(56525),A=a(85838);let x=(0,E.A)(e=>(0,A.A)({root:{},profileUserWrapper:{padding:e.spacing(2),background:e.palette.background.paper,borderBottom:e.mixins.border("secondary")},userInfo:{display:"flex"},avatarWrapper:{marginTop:e.spacing(-12.5),padding:e.spacing(.5),borderRadius:"999px",background:e.palette.background.paper},avatar:{width:160,height:160,borderRadius:"999px",background:e.palette.background.default},name:{marginLeft:e.spacing(3),flex:1,minWidth:0},btn:{marginLeft:"auto"},menu:{marginBottom:e.spacing(2),background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,height:e.spacing(7.5),display:"flex",alignItems:"center","& > .MuiSkeleton-root":{padding:e.spacing(2),marginLeft:e.spacing(2)}},btnGroups:{display:"flex",marginLeft:"auto",marginRight:e.spacing(2),"& .MuiSkeleton-root":{padding:e.spacing(1),marginLeft:e.spacing(1)}}}),{name:"PageProfileHeaderSkeleton"});function k(){let e=x();return h.createElement(l.mc,{maxWidth:"md",gutter:!0},h.createElement(s.A,{sx:{background:e=>e.palette.background.paper}},h.createElement(y.A,{variant:"rectangular",sx:{height:320},animation:!1})),h.createElement("div",{className:e.profileUserWrapper},h.createElement("div",{className:e.userInfo},h.createElement("div",{className:e.avatarWrapper},h.createElement("div",{className:e.avatar})),h.createElement("div",{className:e.name},h.createElement(y.A,{variant:"text",width:200,height:42}),h.createElement(y.A,{variant:"text",width:"50%"})),h.createElement("div",{className:e.btn},h.createElement(y.A,{variant:"button",width:272,height:32})))),h.createElement("div",{className:e.menu},h.createElement(y.A,{variant:"button",width:100,height:20}),h.createElement(y.A,{variant:"button",width:100,height:20}),h.createElement(y.A,{variant:"button",width:100,height:20}),h.createElement(y.A,{variant:"button",width:100,height:20}),h.createElement(y.A,{variant:"button",width:100,height:20}),h.createElement("div",{className:e.btnGroups},h.createElement(y.A,{variant:"button",width:96,height:32}),h.createElement(y.A,{variant:"button",width:32,height:32}),h.createElement(y.A,{variant:"button",width:32,height:32}))))}var w=a(6941),_=a(42001),C=a(77700);let R="HeaderProfileInPageDetail",I=(0,c.Ay)(l.s4,{name:"FeaturedIcon"})(({theme:e})=>({color:e.palette.primary.main,marginLeft:e.spacing(2),fontSize:24})),S=(0,c.Ay)("div",{name:"Wrapper"})(({theme:e})=>({display:"block"})),M=(0,c.Ay)(s.A,{name:"UserContainer"})(({theme:e})=>({padding:e.spacing(2),backgroundColor:e.mixins.backgroundColor("paper"),[e.breakpoints.down("sm")]:{paddingBottom:0}})),B=(0,c.Ay)("div",{name:R,slot:"infoNameActionMenu",overridesResolver:(e,t)=>[t.infoNameActionMenu]})(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"flex-start",[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%",alignItems:"center",paddingBottom:0}})),W=(0,c.Ay)(s.A,{name:"UserInfoProfileHeader",slot:"nameUser",overridesResolver:(e,t)=>[t.nameUser]})(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"flex-start",[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%",alignItems:"center",marginBottom:e.spacing(2)}})),T=(0,c.Ay)("div",{name:"Summary"})(({theme:e})=>({color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(18),paddingTop:e.spacing(1)})),P=(0,c.Ay)("div",{name:R,slot:"buttonWrapper",overridesResolver:(e,t)=>[t.buttonWrapper]})(({theme:e})=>({display:"flex",justifyContent:" center",alignItems:"center",flexFlow:"column",width:272,marginTop:e.spacing(.5),"& button":{width:"100%"},[e.breakpoints.down("sm")]:{flexFlow:"column wrap",minHeight:40,padding:"4px 0px",width:"100%"}})),L=(0,c.Ay)("div",{name:"HeaderProfileInPageDetail",slot:"profileHeaderBottom",shouldForwardProp:e=>"isSticky"!==e,overridesResolver:(e,t)=>[!e.isSticky&&t.profileHeaderBottom]})(({theme:e})=>{var t;return{backgroundColor:e.mixins.backgroundColor("paper"),borderTop:"solid 1px",borderTopColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,overflow:"hidden",[e.breakpoints.down("sm")]:{flexWrap:"wrap",flexDirection:"column",borderTop:"none"},"& .MuiProfileMenu-tabItem":{padding:e.spacing(2)}}}),z=(0,c.Ay)("div",{name:"HeaderProfileInPageDetail",overridesResolver:(e,t)=>[t.wrapperMenu,e.isSticky&&t.wrapperMenuSticky],shouldForwardProp:e=>"isSticky"!==e&&"scrollTrigger"!==e})(({theme:e,isSticky:t,scrollTrigger:a})=>{var n;return{display:"flex",flexGrow:1,...t&&{paddingLeft:e.spacing(2)},[e.breakpoints.down("md")]:{paddingLeft:e.spacing(2)},[e.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",padding:e.spacing(0,2),borderBottom:"solid 1px",borderBottomColor:null===(n=e.palette.border)||void 0===n?void 0:n.secondary,...a&&{marginTop:e.spacing(1)}}}}),N=(0,c.Ay)("div",{name:"UserStickyWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(1,0)})),H=(0,c.Ay)(d.A,{name:"UserAvatarSticky"})(({theme:e})=>({cursor:"pointer",width:48,height:48})),j=(0,c.Ay)("div",{name:"UserNameSticky"})(({theme:e})=>({cursor:"pointer",fontSize:e.mixins.pxToRem(18),fontWeight:"bold",marginLeft:e.spacing(1.5),WebkitLineClamp:2,display:"-webkit-box",padding:"0",overflow:"hidden",maxWidth:"100%",whiteSpace:"normal",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",color:e.palette.text.primary})),D=(0,c.Ay)("div",{name:"HeaderProfileInPageDetail",slot:"actionButtons",overridesResolver:(e,t)=>[t.actionButtons]})(({theme:e})=>({display:"flex",paddingRight:e.spacing(2),"& button":{marginLeft:e.spacing(1),textTransform:"capitalize",fontWeight:"bold",whiteSpace:"nowrap",borderRadius:e.spacing(.5),fontSize:e.mixins.pxToRem(13),padding:e.spacing(.5,1.25),marginBottom:e.spacing(.5),marginTop:e.spacing(.5),minWidth:e.spacing(4),height:e.spacing(4),"& .ico":{fontSize:e.mixins.pxToRem(13)}},[e.breakpoints.down("sm")]:{width:"100%",alignItems:"center",justifyContent:"flex-start","& button":{margin:e.spacing(2,0,2,2)},"& button + button":{marginLeft:e.spacing(1)}}})),F=(0,c.Ay)("div",{name:"HeaderProfileInPageDetail",slot:"profileMenuWrapper",overridesResolver:(e,t)=>[t.profileMenuWrapper]})(({theme:e})=>({flex:1,minWidth:0})),U=(0,c.Ay)(s.A,{name:"ActionPage"})(({theme:e})=>({marginTop:e.spacing(2)})),O=(0,c.Ay)(m.A,{name:"Title"})(({theme:e})=>({color:e.palette.text.primary}));function X({item:e,identity:t,profileMenu:a,profileActionMenu:r,blockProps:c,handleAction:d,actions:m}){var g,f;let{i18n:y,usePageParams:E,ProfileHeaderCover:A,ProfileHeaderAvatar:x,ItemActionMenu:R,dispatch:X,getAcl:$,getSetting:G,useSession:Y,assetUrl:J,useIsMobile:V,useTheme:Z}=(0,n.PCX)(),q=Y(),K=$(),Q=G(),{tab:ee="home"}=E(),et=(0,p.A)(),ea=V(!0),en=Z(),er=null!==(f=null===(g=en.appBarMobileConfig)||void 0===g?void 0:g.nav)&&void 0!==f?f:48,ei=(0,h.useCallback)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);if(!(null==e?void 0:e.statistic))return h.createElement(k,null);let{cover_photo_id:el,extra:eo,full_name:ec,id:es,statistic:ed,cover_photo_position:em}=e,ep=o.m6.hex((0,o.cb)(ec)||""),eu={item:e,acl:K,setting:Q,session:q},eg=[C.cO,C.Cr,C.O0],ev=(0,o.Ue)(a.items,eu),ef=(0,o.Ue)(r.items,eu),eb=ef.filter(e=>!eg.includes(null==e?void 0:e.name)),eh=null==ef?void 0:ef.filter(e=>(null==e?void 0:e.name)===C.O0),ey=v()(ef,0),eE=(0,o.AE)(e.avatar,"200x200",J("page.no_image")),eA=(0,o.AE)(null==e?void 0:e.cover,"1024",J("page.cover_no_image")),ex=()=>{X({type:"page/search",payload:{identity:t}})},ek=()=>{X({type:"editProfileHeaderAvatar",payload:{identity:t}})},ew=()=>{X({type:"user/showDialogLogin"})};return h.createElement(i.eB,null,h.createElement(i.tD,null,h.createElement(s.A,null,h.createElement(S,null,h.createElement(s.A,null,h.createElement(A,{identity:t,image:eA,imageId:el,alt:"",left:0,top:em||0}),h.createElement(s.A,null,h.createElement(l.mc,{maxWidth:"md",gutter:!0},h.createElement(M,null,h.createElement(B,null,h.createElement(W,null,h.createElement(x,{alt:(0,o.cb)(e.title),canEdit:null==eo?void 0:eo.can_upload_avatar,onEdit:ek,avatar:eE,avatarId:e.avatar_id}),h.createElement(s.A,{width:"100%",textAlign:"left"},h.createElement(l.FN,{variant:"itemView",value:e.is_sponsor,item:e}),h.createElement(O,{variant:"h2"},e.title,e.is_featured?h.createElement(I,{icon:"ico-check-circle"}):null),h.createElement(T,null,e.summary,ed.total_like?h.createElement(h.Fragment,null," ","\xb7"," ",h.createElement(n.N_E,{to:`/page/${e.id}/member?stab=all_members`},y.formatMessage({id:"total_like"},{value:ed.total_like}))):null))),h.createElement(P,null,ey&&ey.name!==C.aB?h.createElement(l.dz,{key:ey.value,disabled:ey.name===C.Cr&&(null==e?void 0:e.is_owner),disableElevation:!0,variant:"contained",autoEnable:!0,size:"small",startIcon:h.createElement(l.s4,{icon:ey.icon}),color:ey.color,action:b()(null==q?void 0:q.user)?ew:()=>d(ey.value)},ey.label):null)),(null==e?void 0:e.is_pending)||(null==e?void 0:e.membership)?h.createElement(U,null,h.createElement(_.default,{item:e,actions:m}),h.createElement(w.default,{item:e,actions:m})):null)),h.createElement(l.TM,{sx:ea&&!et?{top:er}:""},({sticky:a})=>h.createElement(l.mc,{maxWidth:"md",gutter:!0},a?h.createElement(L,{isSticky:!0},h.createElement(z,{isSticky:!0,scrollTrigger:et},h.createElement(N,null,h.createElement(H,{src:eE,children:(0,o.cb)(e.title),style:{backgroundColor:ep},onClick:ei}),h.createElement(j,{onClick:ei},e.title))),h.createElement(D,null,eh.map((e,a)=>h.createElement(u.A,{key:e.label,variant:"outlined",startIcon:h.createElement(l.s4,{icon:e.icon}),color:"primary",sx:{width:"100%"},onClick:()=>X({type:e.value,payload:{identity:t}})},e.label)),h.createElement(u.A,{variant:"outlined",color:"primary",onClick:ex},h.createElement(l.s4,{icon:"ico-search-o"})),h.createElement(R,{id:"actionMenu",label:"ActionMenu",handleAction:d,items:eb,control:h.createElement(u.A,{variant:"outlined",color:"primary",size:"large"},h.createElement(l.s4,{icon:"ico-dottedmore-o"}))}))):h.createElement(L,null,h.createElement(z,{scrollTrigger:et},h.createElement(F,null,h.createElement(l.XR,{items:ev,activeTab:ee,prefix:(null==e?void 0:e.link)||`/page/${es}`,maxDisplayTab:3}))),h.createElement(D,null,eh.map((e,a)=>h.createElement(u.A,{key:e.label,variant:"outlined",startIcon:h.createElement(l.s4,{icon:e.icon}),color:"primary",sx:{width:"100%"},onClick:()=>X({type:e.value,payload:{identity:t}})},e.label)),h.createElement(u.A,{variant:"outlined",color:"primary",onClick:ex},h.createElement(l.s4,{icon:"ico-search-o"})),h.createElement(R,{id:"actionMenu",label:"ActionMenu",handleAction:d,items:eb,control:h.createElement(u.A,{variant:"outlined",color:"primary",size:"large"},h.createElement(l.s4,{icon:"ico-dottedmore-o"}))})))))))))))}X.LoadingSkeleton=k;let $=(0,n.$MH)((0,n.L2$)(X,r.A)),G=(0,n.WvA)({name:"PageProfileHeaderBlock",extendBlock:$})},42001(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>f});var n=a(91557),r=a(40515),i=a(3556),l=a(89637),o=a(87773),c=a(8051),s=a(86670),d=a(60780),m=a(96540),p=a(71468);let u=(0,i.Ay)(l.A)(({theme:e})=>({marginTop:e.spacing(2),display:"flex",justifyContent:"space-between",padding:e.spacing(2),boxShadow:"none",..."light"===e.palette.mode&&{backgroundColor:e.layoutSlot.background.paper}})),g=(0,i.Ay)(o.A)(({theme:e})=>({color:e.palette.text.primary})),v=({item:e,actions:t})=>{let{i18n:a}=(0,n.PCX)(),i=(0,p.d4)(t=>(0,n.B_w)(t,null==e?void 0:e.invite)),l=(0,p.d4)(e=>(0,n.B_w)(e,null==i?void 0:i.user));if(!l||!i)return null;let{invited_admin:v,expired_description:f}=i;return v?m.createElement(u,null,m.createElement(c.A,{sx:{display:"flex",alignItems:"center"}},m.createElement(r.H8,{size:48,user:l}),m.createElement(c.A,{sx:{paddingLeft:2}},m.createElement(g,{component:"div",variant:"h5",sx:{marginBottom:.5}},a.formatMessage({id:"person_who_invite_me_to_admin_page"},{value:l.full_name})),f?m.createElement(o.A,{component:"span",variant:"body2",color:"text.hint"},f):null)),m.createElement(s.A,{sx:{paddingX:0}},m.createElement(d.A,{size:"small",variant:"contained",onClick:t.acceptInvite,component:"h5"},a.formatMessage({id:"accept_invite"})),m.createElement(r.Ak,{size:"small",variant:"outlined",onClick:t.declineInvite,component:"h5"},a.formatMessage({id:"decline_invite"})))):null},f=v},6941(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>v});var n=a(91557),r=a(40515),i=a(3556),l=a(89637),o=a(87773),c=a(8051),s=a(63461),d=a(24099),m=a(96540);let p=(0,i.Ay)(l.A)(({theme:e})=>({display:"flex",justifyContent:"space-between",background:"light"===e.palette.mode?e.layoutSlot.background.paper:e.palette.background.default,padding:e.spacing(2),color:e.palette.text.secondary,boxShadow:"none"})),u=(0,i.Ay)(o.A)(({theme:e})=>({})),g=({item:e})=>{let{i18n:t,dispatch:a}=(0,n.PCX)();if(!(null==e?void 0:e.is_pending))return null;let{extra:i}=e,l=t=>{a({type:"approveItem",payload:{identity:e._identity},meta:{onSuccess:t}})},g=t=>{a({type:"deleteItem",payload:{identity:e._identity},meta:{onFinal:t}})};return m.createElement(p,null,m.createElement(c.A,{sx:{display:"flex",alignItems:"center"}},m.createElement(c.A,null,m.createElement(s.A,{size:"medium"},m.createElement(r.s4,{icon:"ico-clock-o"}))),m.createElement(c.A,{sx:{paddingLeft:2}},m.createElement(o.A,{variant:"h5",color:"text.primary",paddingBottom:.5},t.formatMessage({id:"this_page_is_pending_state"})),m.createElement(u,{variant:"body2"},t.formatMessage({id:"contents_from_this_page_will_be_public_visible_after_admins_approve_it"})))),m.createElement(d.A,{spacing:1,alignItems:"center",direction:"row"},(null==i?void 0:i.can_approve)?m.createElement(m.Fragment,null,m.createElement(r.dz,{size:"small",variant:"contained",action:l},t.formatMessage({id:"approve"})),m.createElement(r.dz,{size:"small",variant:"outlined",action:g},t.formatMessage({id:"decline"}))):null))},v=g}}]);