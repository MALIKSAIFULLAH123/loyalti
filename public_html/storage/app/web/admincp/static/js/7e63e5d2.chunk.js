"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["livevideoDetail"],{90464(e,t,i){i.d(t,{A:()=>n});function n(e){return{updateViewer:()=>e("livestreaming/updateViewer"),removeViewer:()=>e("livestreaming/removeViewer"),deleteItem:()=>e("deleteItem"),updateStatusOffline:()=>e("livestreaming/updateStatusOffline"),removeLiveWatching:()=>e("livestreaming/removeLiveWatching")}}},32372(e,t,i){i.r(t),i.d(t,{default:()=>h});var n=i(91557),o=i(3556),r=i(8051),a=i(73349),l=i(96540),s=i(2677),d=i(90464);let m=(0,o.Ay)("div",{name:"VideoView",slot:"dialogVideo"})(({theme:e})=>({position:"relative",backgroundColor:"#000",width:"100%",overflow:"hidden",flex:1,minWidth:0,"& iframe":{width:"100%",height:"100%"},[e.breakpoints.down("md")]:{width:"100%",height:"auto",borderRadius:0,overflow:"initial"}})),u=(0,o.Ay)("div",{name:"VideoView",slot:"dialogStatistic",shouldForwardProp:e=>"isExpand"!==e})(({theme:e,isExpand:t})=>({height:"100%",width:t?0:"480px",[e.breakpoints.down("md")]:{width:"100%"},[e.breakpoints.down("xs")]:{width:"100%",height:"400px"}})),c=(0,o.Ay)(a.Cf,{name:"VideoView",slot:"dialogStatistic"})(({theme:e})=>({padding:"0 !important",height:"100%",display:"flex",overflowX:"hidden",[e.breakpoints.down("md")]:{height:"auto",flexFlow:"column"}})),p=(0,o.Ay)(r.A,{name:"videoView",slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%"})),v=(0,n.FB$)(function({item:e,identity:t,error:i,actions:o,user:a,searchParams:d}){let{ItemDetailInteractionInModal:v,jsxBackend:h,useSession:f,getSetting:g}=(0,n.PCX)(),w=g("comment"),[y,x]=l.useState(!1),V=l.useRef(!1),{user:k,loggedIn:E}=f(),_=(null==k?void 0:k.id)===(null==a?void 0:a.id),[b,A]=l.useState(),[C,S]=l.useState(0),P=h.get("livestreaming.itemView.modalCard"),D=h.get("livestreaming.block.commentLiveListing");if(l.useEffect(()=>{if(!V.current&&(null==e?void 0:e.is_streaming)&&!_&&E)return V.current=!0,o.updateViewer(),()=>{o.removeViewer()}},[null==e?void 0:e.is_streaming]),!e)return null;let F=e=>{x(e)},I=()=>{A(void 0)},L=()=>{A(void 0)},R=e=>{A(e),S(e=>e+1)},{is_streaming:W}=e,K=W?[{component:"livestreaming.ui.watchingUsers",props:{streamKey:null==e?void 0:e.stream_key}},{component:"livestreaming.ui.composerReplyInfo",props:{item:b,removeReply:L,sx:{mt:1}}}]:void 0;return l.createElement(s.A,{error:i},l.createElement(c,null,l.createElement(m,null,P?l.createElement(P,{item:e,onMinimizePhoto:F,identity:t,actions:o}):null),l.createElement(u,{isExpand:y},l.createElement(p,{sx:{display:y?"none":"flex",flexDirection:"column"}},l.createElement(r.A,{sx:{flex:1,minHeight:0}},l.createElement(v,{identity:t,startFooterItems:K,statisticDisplay:W?"":"total_view",searchParams:d,commentComposerProps:{onSuccess:I,identity:(null==b?void 0:b.parent_comment_identity)||t,editorConfig:{disable_photo:W},focus:C},commentlistingComponent:W&&w?l.createElement(D,{identity:t,streamKey:null==e?void 0:e.stream_key,setParentReply:R}):void 0}))))))},d.A),h=v}}]);