"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-feed-dialogs-StatusComposer-StatusComposerControlPreviewLink"],{99340(e,t,r){r.r(t),r.d(t,{default:()=>d});var n=r(91557),i=r(40515),a=r(56525),l=r(85838),s=r(58156),o=r.n(s),c=r(62193),u=r.n(c),m=r(96540);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let v=(0,a.A)(e=>(0,l.A)({root:{position:"relative",margin:e.spacing(1,2,0,2)},removeButtonWrapper:{position:"absolute",top:10,right:10}}),{name:"previewLink"});function d({composerRef:e,isEdit:t}){let r=v(),{i18n:a,jsxBackend:l}=(0,n.PCX)(),s=!u()(o()(e.current.state,"editorStyle"))&&"withBackgroundStatus"===e.current.state.className,c=o()(e.current.state,"attachments.link.value"),d=o()(e.current.state,"post_type"),k=l.get("feedArticle.view.list.embedItem");m.useEffect(()=>{((null==c?void 0:c.is_preview_hidden)||"link"===d)&&t&&e.current.setAttachments("link","link",{as:"StatusComposerControlPreviewLink",value:{...c,is_preview_hidden:!1}})},[]),m.useEffect(()=>{c&&s&&e.current.setAttachments("link","link",{as:"StatusComposerControlPreviewLink",value:{...c,is_preview_hidden:!0}})},[s]);let h=m.useCallback(()=>{e.current.setAttachments("link","link",{as:"StatusComposerControlPreviewLink",value:{...c,is_preview_hidden:!0}})},[c]);return(null==c?void 0:c.is_preview_hidden)||u()(null==c?void 0:c.link)?null:m.createElement("div",null,m.createElement("div",{className:r.root},m.createElement(k,p({},c,{widthImage:"180px"})),m.createElement("div",{className:r.removeButtonWrapper},m.createElement(i.Bj,{color:"inherit",icon:"ico-close",size:"small",title:a.formatMessage({id:"remove_all"}),onClick:h}))))}}}]);