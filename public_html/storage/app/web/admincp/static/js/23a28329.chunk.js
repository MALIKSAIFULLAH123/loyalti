"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-group-blocks-Announcement-Block"],{92522(e,t,n){n.r(t),n.d(t,{default:()=>h});var l=n(91557),a=n(84680),r=n(40515),o=n(3556),i=n(63461),c=n(96540),m=n(4589);n(3094),n(24078);var s=n(71468);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}let d=(0,o.Ay)("div",{name:"NavButtonWrapper",shouldForwardProp:e=>"themeId"!==e})(({theme:e,themeId:t})=>({color:e.palette.primary.main,display:"flex",alignItems:"center","& > span":{fontSize:e.mixins.pxToRem(18),cursor:"pointer","&:hover":{color:e.palette.primary.dark}}})),p=(0,o.Ay)("div",{name:"SlideCount"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,marginLeft:e.spacing(1.5),marginRight:e.spacing(1.5)})),g=(0,o.Ay)("span",{shouldForwardProp:e=>"isRead"!==e})(({theme:e,isRead:t})=>({right:e.spacing(2),bottom:e.spacing(2),position:"absolute",color:e.palette.primary.main,borderBottom:"solid 1px transparent",userSelect:"none","&:hover":{borderBottom:`solid 1px ${e.palette.primary.main}`,cursor:"pointer"},...t&&{color:e.palette.grey["400"],"&:hover":{}}})),f=(0,o.Ay)(a.tD)(({theme:e})=>({"& .slick-list":{marginBottom:e.spacing(2.5)}}));function y({title:e}){let t=c.useRef(),{jsxBackend:n,usePageParams:o,useGetItems:y}=(0,l.PCX)(),[h,v]=c.useState(!0),{i18n:E,dispatch:k}=(0,l.PCX)(),[_,A]=c.useState(0),w=o(),C=`groupAnnouncement/${w.id}`,x=(0,s.d4)(e=>(0,l.qRQ)(e,C))||(0,l.KCW)(),{loading:b,pagesOffset:S,dirty:B,ids:R}=null!=x?x:{},T=y(R);c.useEffect(()=>{if(k({type:"group-announcement/list"}),B){k({type:l.LPT,payload:{pagingId:C}});return}},[B]);let P=e=>{0!==e&&t.current.click()},L=n.get("group_announcement.itemView.mainCard"),M=n.get("group_announcement.itemView.mainCard.skeleton"),W=T[_],z=()=>{null!=W&&W.is_marked_read||k({type:"group-announcement/markAsRead",payload:W._identity})},I=e=>{let{onClick:t,currentSlide:n}=e,{usePreference:a}=(0,l.PCX)(),{themeId:o}=a();return c.createElement(d,{themeId:o},c.createElement(r.s4,{icon:"ico-angle-left",onClick:()=>P(n)}),c.createElement(p,null,n+1,"/",null==T?void 0:T.length),c.createElement(r.s4,{icon:"ico-angle-right",onClick:t}))},O=e=>{let{onClick:n}=e;return c.createElement("div",{style:{display:"none"},onClick:n,ref:t})},X=(e,t)=>{A(t),!b&&(null==S?void 0:S.total)>(null==T?void 0:T.length)&&(null==S?void 0:S.total)-t<2&&k({type:"group-announcement/list"})},$={dots:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,useTransform:!1,adaptiveHeight:!0,nextArrow:c.createElement(I,null),prevArrow:c.createElement(O,null),beforeChange:X},j=c.useCallback(()=>v(e=>!e),[]);return b&&!T.length?c.createElement(a.eB,null,c.createElement(a.Tw,null,c.createElement(a.E9,null,E.formatMessage({id:e}))),c.createElement(a.tD,null,c.createElement(M,null))):T.length?c.createElement(a.eB,null,c.createElement(a.Tw,null,c.createElement(a.E9,null,E.formatMessage({id:e})),c.createElement(i.A,{size:"small",color:"default",onClick:j},c.createElement(r.s4,{icon:h?"ico-angle-up":"ico-angle-down"}))),h?c.createElement(f,null,c.createElement(m.A,u({},$),T.length&&T.map(e=>c.createElement(L,{identity:`group.entities.group_announcement.${e.id}`,key:e.id}))),c.createElement(g,{isRead:null==W?void 0:W.is_marked_read,onClick:z},(null==W?void 0:W.is_marked_read)?E.formatMessage({id:"i_have_read_this"}):E.formatMessage({id:"mark_as_read"}))):null):null}y.displayName="AnnouncementListing";let h=(0,l.WvA)({extendBlock:y,name:"AnnouncementListing",defaults:{gridLayout:"Announcement - Slider",itemLayout:"Announcement - Slider"},overrides:{showWhen:["truthy","acl.announcement.announcement.view"]}})}}]);