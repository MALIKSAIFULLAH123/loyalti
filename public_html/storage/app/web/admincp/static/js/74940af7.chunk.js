"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-music-blocks-PlaylistDetail-Mini-Block"],{16023(e,t,a){var n=a(24994);t.Ay=void 0;var o=a(96954);n(a(2374));let i=(0,o.unstable_generateUtilityClasses)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]);t.Ay=i},31589(e,t,a){a.d(t,{A:()=>A});var n=a(98587),o=a(58168),i=a(96540),l=a(20053),r=a(75659),s=a(58752),c=a(92353),d=a(3556),m=a(38413),u=a(31609);function p(e){return(0,u.A)("MuiTable",e)}(0,m.A)("MuiTable",["root","stickyHeader"]);var g=a(74848);let y=["className","component","padding","size","stickyHeader"],f=e=>{let{classes:t,stickyHeader:a}=e;return(0,r.A)({root:["root",a&&"stickyHeader"]},p,t)},v=(0,d.Ay)("table",{name:"MuiTable",slot:"Root",overridesResolver(e,t){let{ownerState:a}=e;return[t.root,a.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>(0,o.A)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,o.A)({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),h="table",b=i.forwardRef(function(e,t){let a=(0,c.A)({props:e,name:"MuiTable"}),{className:r,component:d=h,padding:m="normal",size:u="medium",stickyHeader:p=!1}=a,b=(0,n.A)(a,y),A=(0,o.A)({},a,{component:d,padding:m,size:u,stickyHeader:p}),x=f(A),E=i.useMemo(()=>({padding:m,size:u,stickyHeader:p}),[m,u,p]);return(0,g.jsx)(s.A.Provider,{value:E,children:(0,g.jsx)(v,(0,o.A)({as:d,role:d===h?null:"table",ref:t,className:(0,l.default)(x.root,r),ownerState:A},b))})}),A=b},58752(e,t,a){a.d(t,{A:()=>i});var n=a(96540);let o=n.createContext(),i=o},60228(e,t,a){a.d(t,{A:()=>i});var n=a(96540);let o=n.createContext(),i=o},22920(e,t,a){a.d(t,{A:()=>x});var n=a(58168),o=a(98587),i=a(96540),l=a(20053),r=a(75659),s=a(60228),c=a(92353),d=a(3556),m=a(38413),u=a(31609);function p(e){return(0,u.A)("MuiTableBody",e)}(0,m.A)("MuiTableBody",["root"]);var g=a(74848);let y=["className","component"],f=e=>{let{classes:t}=e;return(0,r.A)({root:["root"]},p,t)},v=(0,d.Ay)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),h={variant:"body"},b="tbody",A=i.forwardRef(function(e,t){let a=(0,c.A)({props:e,name:"MuiTableBody"}),{className:i,component:r=b}=a,d=(0,o.A)(a,y),m=(0,n.A)({},a,{component:r}),u=f(m);return(0,g.jsx)(s.A.Provider,{value:h,children:(0,g.jsx)(v,(0,n.A)({className:(0,l.default)(u.root,i),as:r,ref:t,role:r===b?null:"rowgroup",ownerState:m},d))})}),x=A},25914(e,t,a){a.d(t,{A:()=>k});var n=a(98587),o=a(58168),i=a(96540),l=a(20053),r=a(75659),s=a(24279),c=a(75630),d=a(58752),m=a(60228),u=a(92353),p=a(3556),g=a(38413),y=a(31609);function f(e){return(0,y.A)("MuiTableCell",e)}let v=(0,g.A)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]);var h=a(74848);let b=["align","className","component","padding","scope","size","sortDirection","variant"],A=e=>{let{classes:t,variant:a,align:n,padding:o,size:i,stickyHeader:l}=e,s={root:["root",a,l&&"stickyHeader","inherit"!==n&&`align${(0,c.A)(n)}`,"normal"!==o&&`padding${(0,c.A)(o)}`,`size${(0,c.A)(i)}`]};return(0,r.A)(s,f,t)},x=(0,p.Ay)("td",{name:"MuiTableCell",slot:"Root",overridesResolver(e,t){let{ownerState:a}=e;return[t.root,t[a.variant],t[`size${(0,c.A)(a.size)}`],"normal"!==a.padding&&t[`padding${(0,c.A)(a.padding)}`],"inherit"!==a.align&&t[`align${(0,c.A)(a.align)}`],a.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>(0,o.A)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${"light"===e.palette.mode?(0,s.a)((0,s.X4)(e.palette.divider,1),.88):(0,s.e$)((0,s.X4)(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},"head"===t.variant&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},"body"===t.variant&&{color:(e.vars||e).palette.text.primary},"footer"===t.variant&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},"small"===t.size&&{padding:"6px 16px",[`&.${v.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===t.padding&&{width:48,padding:"0 0 0 4px"},"none"===t.padding&&{padding:0},"left"===t.align&&{textAlign:"left"},"center"===t.align&&{textAlign:"center"},"right"===t.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===t.align&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),E=i.forwardRef(function(e,t){let a;let r=(0,u.A)({props:e,name:"MuiTableCell"}),{align:s="inherit",className:c,component:p,padding:g,scope:y,size:f,sortDirection:v,variant:E}=r,k=(0,n.A)(r,b),S=i.useContext(d.A),w=i.useContext(m.A),C=w&&"head"===w.variant;a=p||(C?"th":"td");let _=y;!_&&C&&(_="col");let T=E||w&&w.variant,$=(0,o.A)({},r,{align:s,component:a,padding:g||(S&&S.padding?S.padding:"normal"),size:f||(S&&S.size?S.size:"medium"),sortDirection:v,stickyHeader:"head"===T&&S&&S.stickyHeader,variant:T}),M=A($),P=null;return v&&(P="asc"===v?"ascending":"descending"),(0,h.jsx)(x,(0,o.A)({as:a,ref:t,className:(0,l.default)(M.root,c),"aria-sort":P,scope:_,ownerState:$},k))}),k=E},13695(e,t,a){a.d(t,{A:()=>x});var n=a(58168),o=a(98587),i=a(96540),l=a(20053),r=a(75659),s=a(60228),c=a(92353),d=a(3556),m=a(38413),u=a(31609);function p(e){return(0,u.A)("MuiTableHead",e)}(0,m.A)("MuiTableHead",["root"]);var g=a(74848);let y=["className","component"],f=e=>{let{classes:t}=e;return(0,r.A)({root:["root"]},p,t)},v=(0,d.Ay)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),h={variant:"head"},b="thead",A=i.forwardRef(function(e,t){let a=(0,c.A)({props:e,name:"MuiTableHead"}),{className:i,component:r=b}=a,d=(0,o.A)(a,y),m=(0,n.A)({},a,{component:r}),u=f(m);return(0,g.jsx)(s.A.Provider,{value:h,children:(0,g.jsx)(v,(0,n.A)({as:r,className:(0,l.default)(u.root,i),ref:t,role:r===b?null:"rowgroup",ownerState:m},d))})}),x=A},50594(e,t,a){a.d(t,{A:()=>x});var n=a(58168),o=a(98587),i=a(96540),l=a(20053),r=a(75659),s=a(24279),c=a(60228),d=a(92353),m=a(3556),u=a(38413),p=a(31609);function g(e){return(0,p.A)("MuiTableRow",e)}let y=(0,u.A)("MuiTableRow",["root","selected","hover","head","footer"]);var f=a(74848);let v=["className","component","hover","selected"],h=e=>{let{classes:t,selected:a,hover:n,head:o,footer:i}=e;return(0,r.A)({root:["root",a&&"selected",n&&"hover",o&&"head",i&&"footer"]},g,t)},b=(0,m.Ay)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver(e,t){let{ownerState:a}=e;return[t.root,a.head&&t.head,a.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${y.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${y.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,s.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),A=i.forwardRef(function(e,t){let a=(0,d.A)({props:e,name:"MuiTableRow"}),{className:r,component:s="tr",hover:m=!1,selected:u=!1}=a,p=(0,o.A)(a,v),g=i.useContext(c.A),y=(0,n.A)({},a,{component:s,hover:m,selected:u,head:g&&"head"===g.variant,footer:g&&"footer"===g.variant}),A=h(y);return(0,f.jsx)(b,(0,n.A)({as:s,ref:t,className:(0,l.default)(A.root,r),role:"tr"===s?null:"row",ownerState:y},p))}),x=A},19089(e,t,a){a.r(t),a.d(t,{default:()=>B});var n=a(91557),o=a(84680),i=a(67725),l=a(40515),r=a(3556),s=a(8051),c=a(31589),d=a(96540),m=a(90243),u=a(62193),p=a.n(u),g=a(23181),y=a.n(g),f=a(60655),v=a(70189),h=a(62589);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let A=(0,r.Ay)("div",{name:"MusicContent"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),lineHeight:1.33})),x=(0,r.Ay)("div",{name:"BgCoverWrapper"})(({theme:e})=>({height:320,overflow:"hidden",position:"relative"})),E=(0,r.Ay)("div",{name:"BgCoverInner"})(({theme:e})=>({position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:-1})),k=(0,r.Ay)("div",{name:"BgCover"})(({theme:e})=>({height:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",filter:"brightness(0.4) blur(50px)"})),S=(0,r.Ay)("div",{name:"Header"})(({theme:e})=>({marginLeft:e.spacing(2),color:"#fff",paddingTop:e.spacing(4),display:"flex",justifyContent:"space-between"})),w=(0,r.Ay)("div",{name:"HeaderInner"})(({theme:e})=>({flex:1,minWidth:0,margin:e.spacing(0,3,0,2),display:"flex",flexDirection:"column"})),C=(0,r.Ay)(l._V,{name:"ImgSong"})(({theme:e})=>({width:120,height:120})),_=(0,r.Ay)("div",{name:"TitleWrapper"})(({theme:e})=>({display:"flex"})),T=(0,r.Ay)("div",{name:"MinorInfo"})(({theme:e})=>({display:"flex",marginTop:e.spacing(1),fontSize:13,fontWeight:"normal",color:"#cecece"})),$=(0,r.Ay)(s.A,{name:"PageTitle"})(({theme:e})=>({margin:e.spacing(1.5,0),fontWeight:e.typography.fontWeightBold,flex:1,minWidth:0,fontSize:e.spacing(3),lineHeight:1.3,maxHeight:72,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word",wordWrap:"break-word",whiteSpace:"normal",WebkitLineClamp:1,display:"-webkit-box",WebkitBoxOrient:"vertical","& .ico-heart":{color:e.palette.primary.main}})),M=(0,r.Ay)("span",{name:"Statistic"})(({theme:e})=>({"&::after":{content:'"â€¢"',margin:e.spacing(0,1)}})),P=(0,r.Ay)("div",{name:"SoundWave"})(({theme:e})=>({margin:e.spacing(2,4,0,2),color:"#fff","& .MuiLinearProgress-root":{position:"absolute",width:"calc(100% - 16px)"}})),N=(0,r.Ay)("div",{name:"viewContainer"})(({theme:e})=>({margin:e.spacing(0,2,0,2),borderRadius:e.shape.borderRadius,backgroundColor:e.mixins.backgroundColor("paper"),border:e.mixins.border("secondary"),padding:e.spacing(0,2,2,2),position:"relative",marginTop:-44})),R=(0,r.Ay)(s.A)(({theme:e})=>({position:"absolute",right:8,top:8})),z=(0,r.Ay)("div",{name:"Author"})(({theme:e})=>({display:"flex"})),I=(0,r.Ay)("div",{name:"PlaylistContent"})(({theme:e})=>({fontSize:15,lineHeight:1.33,marginTop:e.spacing(3)})),H=(e,t)=>{let a=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%3600%60),i=a>0?`${a} ${t.formatMessage({id:"time_hr"})} `:"",l=n>0?`${n} ${t.formatMessage({id:"time_min"})} `:"",r=o>0?`${o} ${t.formatMessage({id:"time_sec"})}`:"";return i+l+r},W=(0,n.$MH)((0,n.FB$)(function({item:e,user:t,blockProps:a,identity:r,handleAction:u,state:g,isAlbum:W}){var B,O,L,j,X;let{ItemActionMenu:V,ItemDetailInteraction:D,i18n:F,assetUrl:G,jsxBackend:U,dispatch:J,usePageParams:q}=(0,n.PCX)(),[K,Q]=d.useState(),[Y,Z]=d.useState(!1),ee=q(),[et,ea]=d.useState(!1);if(d.useEffect(()=>{var t,a;ea(!0),p()(null==e?void 0:e.songs)||(null==e?void 0:null===(t=e.statistic)||void 0===t?void 0:t.total_song)>(null==e?void 0:null===(a=e.songs)||void 0===a?void 0:a.length)?J({type:"music/getListSong",meta:{onSuccess({data:e}){ea(!e)}},payload:{identity:r}}):ea(!1)},[ee]),!e)return null;let en=(0,i.AE)(null==e?void 0:e.image,"500",G(`music.${W?"album":"playlist"}_no_image`)),eo=U.get("core.block.no_content_with_icon"),ei=U.get("music_song.itemView.listingCard.skeleton");return d.createElement(o.eB,{testid:`detailview ${e.resource_name}`},d.createElement(o.tD,null,d.createElement(s.A,null,d.createElement(x,null,d.createElement(E,null,d.createElement(k,{style:{backgroundImage:`url(${en})`}})),d.createElement(S,null,d.createElement(C,{src:en,aspectRatio:"11"}),d.createElement(w,null,d.createElement(l.Et,null,d.createElement(l.rL,{variant:"itemView",value:null==e?void 0:e.is_featured}),d.createElement(l.FN,{variant:"itemView",value:e.is_sponsor,item:e})),d.createElement(_,null,d.createElement($,null,null==e?void 0:e.name)),d.createElement(T,null,d.createElement(M,null,F.formatMessage({id:W?"album":"playlist"})),(null==e?void 0:e.year)&&d.createElement(M,null,null==e?void 0:e.year),d.createElement(s.A,{mr:.5},F.formatMessage({id:"total_song"},{value:null===(B=e.statistic)||void 0===B?void 0:B.total_song}),(null===(O=e.statistic)||void 0===O?void 0:O.total_duration)?`, ${H(null===(L=e.statistic)||void 0===L?void 0:L.total_duration,F)}`:null)))),d.createElement(P,null,(null==K?void 0:K.destination)&&(null==e?void 0:null===(j=e.songs)||void 0===j?void 0:j.length)?d.createElement(v.A,{url:null==K?void 0:K.destination,isPlaylist:!0,isPlaying:Y,setIsPlaying:Z,songs:null==e?void 0:e.songs,selectedSong:K,setSelectedSong:Q}):null)),d.createElement(N,null,d.createElement(R,null,d.createElement(V,{identity:r,icon:"ico-dottedmore-vertical-o",state:g,handleAction:u,size:"smaller"})),d.createElement(z,null,d.createElement(l.at,{item:e,sx:{mt:0}})),(null==e?void 0:e.description)&&d.createElement(A,null,d.createElement(l.np,null,d.createElement(m.Ay,{html:(null==e?void 0:e.text)||(null==e?void 0:e.description)}))),d.createElement(I,{mt:3},et?d.createElement(c.A,null,y()(1,4).map(e=>d.createElement(ei,{key:e.toString()}))):d.createElement(d.Fragment,null,(null==e?void 0:null===(X=e.songs)||void 0===X?void 0:X.length)?d.createElement(h.A,{identity:r,isAlbum:W,songs:null==e?void 0:e.songs,selectedSong:K,handleAction:u,setSelectedSong:Q,isPlaying:Y,setIsPlaying:Z,item:e}):d.createElement(eo,b({image:"ico-music-note-o",title:"no_songs_found"},e.extra.can_edit&&{labelButton:W?"add_new_song":"find_your_favorite"},{action:W?"music/redirectToEditAlbum":"music/redirectToAllSongs",isIconButton:!1,description:"find_your_favorite_music_and_add_to_your_list"})))),d.createElement(f.A,{attachments:null==e?void 0:e.attachments,size:"large"}),d.createElement(D,{identity:r,handleAction:u})))))})),B=(0,n.WvA)({extendBlock:W,defaults:{placeholder:"Search",blockProps:{variant:"plained",titleComponent:"h2",titleVariant:"subtitle1",titleColor:"textPrimary",noFooter:!0,noHeader:!0,blockStyle:{},contentStyle:{borderRadius:"base"},headerStyle:{},footerStyle:{}}}})},62589(e,t,a){a.d(t,{A:()=>I});var n=a(91557),o=a(40515),i=a(3556),l=a(8051),r=a(25914),s=a(22920),c=a(50594),d=a(97763),m=a(31589),u=a(13695),p=a(58168),g=a(98587),y=a(96540),f=a(20053),v=a(4146),h=a.n(v),b=a(56525),A=a(74848);let x=["name"],E=["children","className","clone","component"];var k=a(85838),S=a(16023),w=a(71468),C=a(84058),_=a.n(C);let T=e=>`${Math.floor(e/60)}:${e%60<10?0:""}${e%60}`,$=(0,i.Ay)(l.A,{name:"playlist"})(({theme:e})=>({marginBottom:e.spacing(-2),"& .ico":{cursor:"pointer"},[e.breakpoints.down("xs")]:{"& $songOrder, & $songTime":{display:"none"},"& $songTitle":{marginLeft:0},"& $songActionMenu":{marginRight:e.spacing(-2)}}})),M=(function(e){let t=(t,a={})=>{let n;let{name:o}=a,i=(0,g.A)(a,x),l="function"==typeof t?e=>({root:a=>t((0,p.A)({theme:e},a))}):{root:t},r=(0,b.A)(l,(0,p.A)({Component:e,name:o||e.displayName,classNamePrefix:o},i));t.filterProps&&(n=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);let s=y.forwardRef(function(t,a){let{children:o,className:i,clone:l,component:s}=t,c=(0,g.A)(t,E),d=r(t),m=(0,f.default)(d.root,i),u=c;return(n&&(u=function(e,t){let a={};return Object.keys(e).forEach(n=>{-1===t.indexOf(n)&&(a[n]=e[n])}),a}(u,n)),l)?y.cloneElement(o,(0,p.A)({className:(0,f.default)(o.props.className,m)},u)):"function"==typeof o?o((0,p.A)({className:m},u)):(0,A.jsx)(s||e,(0,p.A)({ref:a,className:m},u,{children:o}))});return h()(s,e),s};return t})(r.A)(({theme:e})=>({borderColor:e.palette.border.secondary,[`&.${S.Ay.head}`]:{backgroundColor:e.palette.background.paper,color:e.palette.text.hint,fontWeight:e.typography.fontWeightSemiBold,fontSize:e.mixins.pxToRem(15),borderColor:e.palette.border.secondary},[`&.${S.Ay.body}`]:{fontSize:e.mixins.pxToRem(15),color:e.palette.text.hint,marginBottom:e.spacing(1),borderColor:e.palette.border.secondary,padding:e.spacing(0,2)}})),P=(0,i.Ay)(s.A,{name:"tableRowStyled"})(({theme:e})=>({color:"red","& tr:last-child":{"& td":{borderBottom:0}}})),N=(0,b.A)(e=>(0,k.A)({songItem:{height:e.spacing(7),"& $songTitle":{color:"light"===e.palette.mode?"#121212":"#fff"},padding:e.spacing(1),"& .ico-play":{display:"none"},"& .ico-heart-o":{display:"none",color:e.palette.text.hint},"& .ico-heart":{color:e.palette.primary.main},"& .ico-dottedmore-vertical-o":{display:"none"},"&:hover":{"& $songPlayPause":{"& .ico-play":{display:"block"},"& .ico-pause":{display:"block"}},"& .ico-heart-o":{display:"unset"},backgroundColor:e.palette.background.default,"& $songOrderText":{display:"none"},"& .ico-dottedmore-vertical-o":{display:"unset"}}},songInner:{display:"flex",alignItems:"center",color:e.palette.text.secondary,fontSize:18},songOrderText:{},songPlaying:{"& $songTime":{},"& $songTitle":{color:e.palette.primary.main},"& $songOrderText":{display:"none"},"& $songPlayPause":{"& .ico-play":{display:"block"},"& .ico-pause":{display:"block"}},display:"block"},songOrder:{paddingLeft:e.spacing(1),minWidth:32,textAlign:"center"},songPlayPause:{color:e.palette.text.secondary},songTitle:{cursor:"pointer",wordBreak:"break-word"},songActionMenu:{display:"auto",marginLeft:"auto",marginRight:e.spacing(2),"& .ico":{color:e.palette.text.secondary,fontSize:13}},songTime:{width:"150px"},songTotal:{width:"100px"}}),{name:"PlayList"}),R=(0,n.FB$)(function({identity:e,handleAction:t,state:a,selectedSong:i,index:l,classes:r,isPlaying:s,setIsPlaying:m,setSelectedSong:u,item:p,isAlbum:g}){var f;let{ItemActionMenu:v,i18n:h}=(0,n.PCX)();if(!p)return;let b=()=>{i.id!==p.id?(u(p),m(!0)):m(e=>!e)};return y.createElement(c.A,{"data-testid":_()("music playlist table row"),className:`${r.songItem} ${(null==p?void 0:p.id)===(null==i?void 0:i.id)?r.songPlaying:""}`},y.createElement(M,null,y.createElement("div",{className:r.songOrderText},l+1),y.createElement("div",{className:r.songPlayPause,onClick:b},s&&(null==p?void 0:p.id)===(null==i?void 0:i.id)?y.createElement(o.s4,{icon:"ico-pause"}):y.createElement(o.s4,{icon:"ico-play"}))),y.createElement(M,{className:r.songTitle,onClick:b},p.name),y.createElement(M,{align:"right"},(null==p?void 0:p.is_pending)&&y.createElement(d.A,{title:h.formatMessage({id:"pending"}),placement:"top"},y.createElement(o.s4,{icon:"ico-clock-o"}))),y.createElement(M,{align:"right",className:r.songTotal},null===(f=p.statistic)||void 0===f?void 0:f.music_song_total_play),y.createElement(M,{align:"right",className:r.songTime},(null==p?void 0:p.is_favorite)!==void 0&&y.createElement(o.s4,{icon:(null==p?void 0:p.is_favorite)?"ico-heart":"ico-heart-o",sx:{fontSize:"14px",mr:2}}),T(null==p?void 0:p.duration),y.createElement(v,{menuName:g?"itemActionMenu":"itemActionMenuOnPlaylist",sx:{ml:2},identity:`music.entities.music_song.${p.id}`,icon:"ico-dottedmore-vertical-o",state:a,handleAction:t,className:r.songActionMenu})))},()=>{}),z=({songs:e,selectedSong:t,setSelectedSong:a,identity:o,handleAction:i,state:l,isPlaying:r,setIsPlaying:s,isAlbum:d,item:p})=>{let g=N(),{i18n:f,dispatch:v}=(0,n.PCX)(),[h,b]=(0,y.useState)(!1),A=(0,w.d4)(t=>(0,n.OG_)(t,e));return(0,y.useEffect)(()=>{a(A[0])},[o]),(0,y.useEffect)(()=>{var t;!h&&(null==p?void 0:null===(t=p.statistic)||void 0===t?void 0:t.total_song)>e.length&&v({type:"music/loadMoreListSong",meta:{onSuccess(){b(!0)}},payload:{identity:o}})},[h]),(0,n.ksV)(()=>{b(!1)}),y.createElement($,null,y.createElement("div",{className:"playlist"},y.createElement(m.A,{"data-testid":_()("music playlist table"),sx:{fontSize:"15px"}},y.createElement(u.A,{"data-testid":_()("music playlist table head")},y.createElement(c.A,null,y.createElement(M,{style:{width:"50px"}},"#"),y.createElement(M,null,f.formatMessage({id:"title"})),y.createElement(M,{align:"right"}),y.createElement(M,{align:"right"},f.formatMessage({id:"music_plays"})),y.createElement(M,{align:"center"},f.formatMessage({id:"duration"})))),y.createElement(P,{"data-testid":_()("music playlist table body")},A&&A.map((e,n)=>y.createElement(R,{isAlbum:d,song:e,selectedSong:t,setSelectedSong:a,key:n,index:n,classes:g,isPlaying:r,setIsPlaying:s,identity:`music.entities.music_song.${e.id}`}))))))},I=z},70189(e,t,a){a.d(t,{A:()=>k});var n=a(40515),o=a(8051),i=a(81502),l=a(97763),r=a(14931),s=a(56525),c=a(85838),d=a(96540),m=a(13007),u=a.n(m),p=a(91557),g=a(71468),y=a(20053),f=a(62193),v=a.n(f),h=a(68090),b=a.n(h);let A=(0,s.A)(e=>(0,c.A)({root:{display:"flex",alignItems:"flex-end","& .ico":{color:"#fff",fontSize:18,cursor:"pointer"}},hover:{position:"absolute",left:0,top:0,zIndex:10,pointerEvents:"none",height:"100%",width:0,mixBlendMode:"overlay",background:"rgba(255, 255, 255, 0.3)",opacity:0,transition:"opacity 0.2s ease"},waveForm:{cursor:"pointer",margin:e.spacing(0,1,1),height:77,overflow:"hidden",flex:1,position:"relative","&:hover $hover":{opacity:1},"&::before":{content:"''",height:"2px",background:"#eee",width:"100%",position:"absolute",bottom:0},"& > wave":{overflowX:"inherit !important",cursor:"pointer !important"},"& wave > wave::before":{content:"''",position:"absolute",top:"50%",height:"2px",width:"100%",background:"#2682d5"}},btnControlWrapper:{marginRight:e.spacing(2)},btnControl:{border:"none",background:"transparent",outline:"none",padding:0,"& + $btnControl":{paddingLeft:e.spacing(2)}},btnPlayPause:{},btnShuffle:{marginLeft:e.spacing(2)},btnRepeat:{marginLeft:e.spacing(2)},activeIcon:{color:`${e.palette.primary.main} !important`},timePlaying:{minWidth:e.spacing(5),textAlign:"right",fontSize:15},timeSong:{fontSize:15},volumeWrapper:{width:e.spacing(2),position:"relative",marginLeft:e.spacing(1.5),"&:hover $volumeSlider":{visibility:"visible",opacity:1}},volumeSlider:{height:70,visibility:"hidden",opacity:0,transition:"all 300ms ease",position:"absolute",left:e.spacing(-.5),bottom:e.spacing(4.5)},volumeSliderItem:{color:"#fff","& .MuiSlider-thumb":{width:"15px",height:"15px",boxShadow:"none !important",color:"#fff"}},progress:{flex:1,margin:e.spacing(0,1,1),position:"absolute",bottom:0},hide:{display:"none!important"},visibility:{visibility:"hidden"},disabledIcon:{color:`${e.palette.grey[500]}!important`}}),{name:"Waveform"}),x=e=>Array.from(Array(null==e?void 0:e.length).keys()),E=e=>({container:e,waveColor:"#eee",progressColor:"#2682d5",cursorColor:"transparent",barWidth:3,barHeight:2,barRadius:0,barGap:2,responsive:!0,height:150,loopSelection:!0,normalize:!0,partialRender:!1,minPxPerSec:100});function k({url:e,isPlaylist:t,isPlaying:a,setIsPlaying:s,songs:c,selectedSong:m,setSelectedSong:f,autoPlay:h}){let k=new AudioContext,S=A(),w=(0,d.useRef)(null),C=(0,d.useRef)(null),[_,T]=(0,d.useState)(!1),[$,M]=(0,d.useState)(!1),P=(0,d.useRef)([]),[N,R]=(0,d.useState)(!1),[z,I]=(0,d.useState)(!1),[H,W]=(0,d.useState)("0:00"),[B,O]=(0,d.useState)("0:00"),[L,j]=(0,d.useState)(.5),[X,V]=(0,d.useState)(!1),[D,F]=(0,d.useState)(!1),{dispatch:G,useLoggedIn:U,i18n:J}=(0,p.PCX)(),q=(0,g.d4)(e=>(0,p.OG_)(e,c)),K=U();(0,d.useEffect)(()=>{T(!1),F(!1);let a=E(w.current);if(C.current=u().create(a),e)return C.current.load(e),W("0:00"),w.current.addEventListener("pointermove",e=>{let t=document.querySelector("#hover");t.style.width=`${e.offsetX}px`}),C.current.on("ready",()=>{F(!0),"running"===k.state&&!t&&h&&(C.current.play(),T(!0)),t&&s(e=>(e&&C.current.play(),e)),C.current.setVolume($?0:L),j(L);let e=Q(C.current.getDuration());O(e)}),C.current.on("audioprocess",()=>{let e=Q(C.current.getCurrentTime());W(e)}),C.current.on("seek",e=>{let t=Q(C.current.getCurrentTime());W(t)}),C.current.on("finish",()=>{Z(),R(e=>(e?C.current.play():(V(e=>(I(e=>{var t;return e&&1===q.length?C.current.play():!e&&(null===(t=b()(q))||void 0===t?void 0:t.id)!==(null==m?void 0:m.id)||e?eo(1):s(!1),e}),e)),T(!1)),e))}),()=>C.current.destroy()},[e]);let Q=e=>{let t=Math.floor(e/60),a=`0${Math.floor(e-60*t)}`.slice(-2);return`${t}:${a}`},Y=()=>{t?s(!a):(T(!_),C.current.playPause())};d.useEffect(()=>{var e;(null===(e=C.current)||void 0===e?void 0:e.isPlaying())!==a&&C.current.playPause()},[a]);let Z=()=>{if(!K)return;let e=null==m?void 0:m._identity;G({type:"music/updateTotalPlayItem",payload:{identity:e}})},ee=(e,t)=>{C.current.setVolume(t),j(t),0===t?M(!0):M(!1)},et=()=>{M(e=>(C.current.setVolume(e?L:0),!e))},ea=()=>{if(!t){R(!N);return}N||z||I(!0),z&&!N&&(I(!1),R(!0)),N&&!z&&R(!1)},en=()=>{V(e=>!e)};d.useEffect(()=>{v()(q)||(X?P.current=x(q).sort((e,t)=>.5-Math.random()):P.current=x(q))},[X,c]);let eo=e=>{if(!t)return;s(!0);let a=q.findIndex(e=>(null==e?void 0:e.id)===(null==m?void 0:m.id)),n=P.current.findIndex(e=>a===e);V(t=>(t?n+e===P.current.length?f(q[P.current[0]]):n+e<0?f(q[b()(P.current)]):f(q[P.current[n+e]]):a+e===(null==q?void 0:q.length)?f(q[0]):a+e<0?f(b()(q)):f(q[a+e]),t))};return d.createElement("div",{className:S.root},d.createElement("div",{className:S.btnControlWrapper},t?d.createElement("button",{className:S.btnControl,onClick:()=>eo(-1)},d.createElement(n.s4,{icon:"ico-play-prev"})):null,d.createElement("button",{onClick:Y,className:(0,y.default)(S.btnControl,S.btnPlayPause),disabled:!D},(t?a:_)?d.createElement(n.s4,{icon:"ico-pause"}):d.createElement(n.s4,{icon:"ico-play",className:!D&&S.disabledIcon})),t?d.createElement("button",{className:S.btnControl,onClick:()=>eo(1)},d.createElement(n.s4,{icon:"ico-play-next"})):null),d.createElement("div",{className:S.timePlaying},H),d.createElement(o.A,{position:"relative",flex:1},d.createElement("div",{ref:w,className:(0,y.default)(S.waveForm,!D&&S.visibility)},d.createElement("div",{id:"hover",className:(0,y.default)(S.hover)})),d.createElement(i.A,{color:"inherit",className:(0,y.default)(D&&S.hide,S.progress)})),d.createElement("div",{className:S.timeSong},B),t?d.createElement(l.A,{title:J.formatMessage({id:X?"turn_off_shuffle":"turn_on_shuffle"})},d.createElement(n.s4,{icon:"ico-shuffle",className:`${S.btnShuffle} ${X?S.activeIcon:""}`,onClick:en})):null,d.createElement(l.A,{title:J.formatMessage({id:z||N?z?"turn_on_repeat_one":"turn_off_repeat":"turn_on_repeat"})},d.createElement(n.s4,{icon:N&&t?"ico-play-repeat-one-o":"ico-play-repeat",className:(0,y.default)(S.btnRepeat,(N||z)&&S.activeIcon,!D&&S.disabledIcon),onClick:ea})),d.createElement("div",{className:S.volumeWrapper},$?d.createElement(n.s4,{icon:"ico-volume-del",onClick:et,className:!D&&S.disabledIcon}):d.createElement(n.s4,{icon:"ico-volume-increase",onClick:et,className:!D&&S.disabledIcon}),d.createElement("div",{className:S.volumeSlider},D&&d.createElement(r.Ay,{orientation:"vertical",value:$?0:L,min:0,max:1,step:.01,onChange:ee,"aria-labelledby":"vertical-slider",valueLabelDisplay:"auto",valueLabelFormat:e=>Math.round(100*e),className:S.volumeSliderItem}))))}},60655(e,t,a){a.d(t,{A:()=>u});var n=a(91557),o=a(40515),i=a(3556),l=a(8051),r=a(96540);let s=(0,i.Ay)("div",{name:"attachmentTitle"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),color:e.palette.text.secondary,fontWeight:e.typography.fontWeightBold})),c=(0,i.Ay)("div",{name:"attachment"})(({theme:e})=>({width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-between",[e.breakpoints.down("sm")]:{flexDirection:"column"}})),d=(0,i.Ay)("div",{name:"attachmentItemWrapper"})(({theme:e})=>({marginTop:e.spacing(2),flexGrow:0,flexShrink:0,flexBasis:"calc(50% - 8px)",minWidth:300,maxWidth:"100%"})),m=({attachments:e,size:t,sx:a})=>{let{i18n:i}=(0,n.PCX)(),m=(0,n.UfA)(e);return m.length?r.createElement(l.A,{mt:2,sx:a},r.createElement(s,null,i.formatMessage({id:"attachments"})),r.createElement(c,null,m.map((e,a)=>r.createElement(d,{key:e.id.toString()},r.createElement(o.Hg,{fileName:e.file_name,downloadUrl:e.download_url,isImage:e.is_image,fileSizeText:e.file_size_text,size:t,image:null==e?void 0:e.image,identity:null==e?void 0:e._identity,index:a}))))):null},u=m}}]);