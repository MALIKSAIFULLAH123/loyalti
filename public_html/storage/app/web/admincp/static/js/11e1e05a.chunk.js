"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-user-blocks-ProfileHeader-Block"],{89637(e,t,a){a.d(t,{A:()=>A});var n=a(58168),r=a(98587),i=a(96540),l=a(20053),o=a(75659),s=a(3556),d=a(92353),c=a(18799),m=a(38413),p=a(31609);function u(e){return(0,p.A)("MuiCard",e)}(0,m.A)("MuiCard",["root"]);var f=a(74848);let g=["className","raised"],v=e=>{let{classes:t}=e;return(0,o.A)({root:["root"]},u,t)},y=(0,s.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),h=i.forwardRef(function(e,t){let a=(0,d.A)({props:e,name:"MuiCard"}),{className:i,raised:o=!1}=a,s=(0,r.A)(a,g),c=(0,n.A)({},a,{raised:o}),m=v(c);return(0,f.jsx)(y,(0,n.A)({className:(0,l.default)(m.root,i),elevation:o?8:void 0,ref:t,ownerState:c},s))}),A=h},24099(e,t,a){a.d(t,{A:()=>h});var n=a(98587),r=a(58168),i=a(96540),l=a(89452),o=a(68248),s=a(39599),d=a(73272),c=a(3556),m=a(92353),p=a(74848);let u=["component","direction","spacing","divider","children"],f=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],g=({ownerState:e,theme:t})=>{let a=(0,r.A)({display:"flex",flexDirection:"column"},(0,l.NI)({theme:t},(0,l.kW)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let n=(0,o.LX)(t),i=Object.keys(t.breakpoints.values).reduce((t,a)=>(("object"==typeof e.spacing&&null!=e.spacing[a]||"object"==typeof e.direction&&null!=e.direction[a])&&(t[a]=!0),t),{}),s=(0,l.kW)({values:e.direction,base:i}),c=(0,l.kW)({values:e.spacing,base:i});"object"==typeof s&&Object.keys(s).forEach((e,t,a)=>{let n=s[e];if(!n){let r=t>0?s[a[t-1]]:"column";s[e]=r}});let m=(t,a)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${f(a?s[a]:e.direction)}`]:(0,o._W)(n,t)}});a=(0,d.A)(a,(0,l.NI)({theme:t},c,m))}return(0,l.iZ)(t.breakpoints,a)},v=(0,c.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})(g),y=i.forwardRef(function(e,t){let a=(0,m.A)({props:e,name:"MuiStack"}),l=(0,s.A)(a),{component:o="div",direction:d="column",spacing:c=0,divider:f,children:g}=l,y=(0,n.A)(l,u);return(0,p.jsx)(v,(0,r.A)({as:o,ownerState:{direction:d,spacing:c},ref:t},y,{children:f?function(e,t){let a=i.Children.toArray(e).filter(Boolean);return a.reduce((e,n,r)=>(e.push(n),r<a.length-1&&e.push(i.cloneElement(t,{key:`separator-${r}`})),e),[])}(g,f):g}))}),h=y},25669(e,t,a){a.d(t,{A:()=>d});var n=a(58168),r=a(98587),i=a(96540);let l=["getTrigger","target"];function o(e,t){let{disableHysteresis:a=!1,threshold:n=100,target:r}=t,i=e.current;return r&&(e.current=void 0!==r.pageYOffset?r.pageYOffset:r.scrollTop),(!!a||void 0===i||!(e.current<i))&&e.current>n}let s="undefined"!=typeof window?window:null;function d(e={}){let{getTrigger:t=o,target:a=s}=e,d=(0,r.A)(e,l),c=i.useRef(),[m,p]=i.useState(()=>t(c,d));return i.useEffect(()=>{let e=()=>{p(t(c,(0,n.A)({target:a},d)))};return e(),a.addEventListener("scroll",e,{passive:!0}),()=>{a.removeEventListener("scroll",e,{passive:!0})}},[a,t,JSON.stringify(d)]),m}},61795(e,t,a){a.d(t,{B6:()=>r.A,e6:()=>n.A}),a(52095),a(67336);var n=a(98414),r=a(60300)},80277(e,t,a){a.r(t),a.d(t,{default:()=>K});var n=a(91557),r=a(94804),i=a(90243),l=a(84680),o=a(40515),s=a(67725),d=a(3556),c=a(8051),m=a(60780),p=a(25669),u=a(97763),f=a(96540),g=a(61795),v=a(87773);let y=({isOwner:e})=>{let{usePageParams:t,i18n:a}=(0,n.PCX)(),r=t(),i=(0,n.IgF)("activitypoint","activitypoint","getStatistic"),[l]=(0,g.B6)({dataSource:i,pageParams:r,cachePrefix:"activityPoint",cacheKey:`profile_${(null==r?void 0:r.profile_id)||(null==r?void 0:r.id)}`,ttl:36e5});if(!i||!l)return null;let{available_points:s}=l||{};return s?e?f.createElement(c.A,{display:"flex",color:"primary.main",alignItems:"center"},f.createElement(o.s4,{icon:"ico-star-circle-o",sx:{pr:.5}}),f.createElement(n.N_E,{to:"activitypoint"},f.createElement(c.A,{display:"flex",color:"primary.main",alignItems:"center"},a.formatMessage({id:"activity_point_summary"},{value:()=>f.createElement(v.A,{sx:{pl:.5},variant:"h6"},f.createElement(o.K2,{value:s}))})))):f.createElement(c.A,{display:"flex",color:"primary.main",alignItems:"center"},f.createElement(o.s4,{icon:"ico-star-circle-o",sx:{pr:.5}}),a.formatMessage({id:"activity_point_summary"},{value:()=>f.createElement(v.A,{sx:{pl:.5},variant:"h6"},f.createElement(o.K2,{value:s}))})):null};var h=a(52705),A=a(56525),E=a(85838);let b=(0,A.A)(e=>(0,E.A)({profileUserWrapper:{padding:e.spacing(2),background:e.palette.background.paper,borderBottom:e.mixins.border("secondary"),[e.breakpoints.down("sm")]:{"& $userInfo":{flexWrap:"wrap"},"& $avatarWrapper":{marginTop:e.spacing(-8)},"& $avatar":{width:90,height:90},"& $name":{minWidth:"100%",marginLeft:0}}},userInfo:{display:"flex"},avatarWrapper:{marginTop:e.spacing(-12.5),padding:e.spacing(.5),borderRadius:"999px",background:e.palette.background.paper},avatar:{width:160,height:160,borderRadius:"999px",background:e.palette.background.default},name:{marginLeft:e.spacing(3),flex:1,minWidth:0},menu:{background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,height:e.spacing(7.5),display:"flex",alignItems:"center","& .MuiSkeleton-root":{padding:e.spacing(2),marginLeft:e.spacing(2)}}}),{name:"UserProfileHeaderSkeleton"});function x(){let e=b();return f.createElement(o.mc,{maxWidth:"md",gutter:!0},f.createElement(h.A,{variant:"rectangular",sx:{height:{sm:320,xs:179}},animation:!1}),f.createElement("div",{className:e.profileUserWrapper},f.createElement("div",{className:e.userInfo},f.createElement("div",{className:e.avatarWrapper},f.createElement("div",{className:e.avatar})),f.createElement("div",{className:e.name},f.createElement(h.A,{variant:"text",width:200,height:32})))),f.createElement("div",{className:e.menu},f.createElement(h.A,{variant:"button",width:100,height:20}),f.createElement(h.A,{variant:"button",width:100,height:20}),f.createElement(h.A,{variant:"button",width:100,height:20}),f.createElement(h.A,{variant:"button",width:100,height:20}),f.createElement(h.A,{variant:"button",width:100,height:20}),f.createElement(h.A,{variant:"button",width:100,height:20})))}var w=a(44466),_=a(89637),k=a(63461),R=a(24099);let I=(0,d.Ay)(_.A)(({theme:e})=>({display:"flex",background:"dark"===e.palette.mode?e.palette.grey[800]:e.palette.grey[100],padding:e.spacing(2),color:e.palette.text.secondary,boxShadow:"none",[e.breakpoints.down("sm")]:{flexWrap:"wrap"}})),M=(0,d.Ay)(v.A)(({theme:e})=>({})),C=({item:e})=>{let{i18n:t,dispatch:a}=(0,n.PCX)();if(!(null==e?void 0:e.is_pending))return null;let{extra:r,resource_name:i}=e,l=t=>{a({type:"approveItem",payload:{identity:e._identity},meta:{onSuccess:t}})},s=t=>{a({type:"user/decline",payload:{identity:e._identity},meta:{onFinal:t}})};return f.createElement(c.A,null,f.createElement(I,null,f.createElement(c.A,null,f.createElement(k.A,{size:"medium"},f.createElement(o.s4,{icon:"ico-clock-o"}))),f.createElement(c.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flex:1,flexWrap:"wrap",rowGap:1.5}},f.createElement(c.A,{sx:{paddingLeft:2}},f.createElement(v.A,{variant:"h5",color:"text.primary",paddingBottom:.5},t.formatMessage({id:"this_app_is_pending_state"},{value:t.formatMessage({id:`resource_name_lower_case_${i}`,defaultMessage:i})})),f.createElement(M,{variant:"body2"},t.formatMessage({id:"contents_from_this_app_will_be_public_visible_after_admins_approve_it"},{value:t.formatMessage({id:`resource_name_lower_case_${i}`,defaultMessage:i})}))),f.createElement(R.A,{spacing:1,alignItems:"center",direction:"row",ml:2},(null==r?void 0:r.can_approve)?f.createElement(f.Fragment,null,f.createElement(o.dz,{size:"small",variant:"contained",action:l},t.formatMessage({id:"approve"})),f.createElement(o.dz,{size:"small",variant:"outlined",action:s},t.formatMessage({id:"decline"}))):null))))},W="HeaderProfileInPageDetail",S=(0,d.Ay)("div",{name:W,slot:"ItemSummary"})(({theme:e})=>({color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(15),paddingTop:e.spacing(1),paddingRight:e.spacing(2),"& p":{margin:0},[e.breakpoints.down("sm")]:{paddingRight:0}})),B=(0,d.Ay)(o.s4,{name:W,slot:"FeaturedIcon"})(({theme:e})=>({color:e.palette.primary.main,marginLeft:e.spacing(2)})),P=(0,d.Ay)("div",{name:W,slot:"UserStickyWrapper"})(({theme:e})=>({position:"relative",left:16,transition:"all .2s",display:"flex",justifyContent:"center","& a":{borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.border.secondary}})),T=(0,d.Ay)("div",{name:W,slot:"ProfileMenuStyled",shouldForwardProp:e=>"sticky"!==e})(({theme:e,sticky:t})=>({flex:1,minWidth:0,transition:"all .2s",...t&&{marginLeft:e.spacing(2.5),transition:"all .2s"}})),z=(0,d.Ay)("div",{name:W,slot:"Wrapper"})(({theme:e})=>({display:"block"})),L=(0,d.Ay)(c.A,{name:W,slot:"userInfo",overridesResolver:(e,t)=>[t.userInfo]})(({theme:e})=>({backgroundColor:e.mixins.backgroundColor("paper"),[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%"}})),j=(0,d.Ay)(c.A,{name:W,slot:"userAction",overridesResolver:(e,t)=>[t.userAction]})(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"flex-start",[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%"}})),N=(0,d.Ay)(c.A,{name:W,slot:"nameUser",overridesResolver:(e,t)=>[t.nameUser]})(({theme:e})=>({flex:1,minWidth:0,[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%",marginBottom:e.spacing(2)}})),$=(0,d.Ay)("h1",{name:W,slot:"Title"})(({theme:e})=>({fontWeight:"bold",fontSize:e.mixins.pxToRem(24),color:e.palette.text.primary,margin:0,padding:0})),F=(0,d.Ay)("div",{name:W,slot:"wrapperButtonInline",overridesResolver:(e,t)=>[t.wrapperButtonInline]})(({theme:e})=>({display:"flex",justifyContent:" center",alignItems:"stretch","& button":{marginLeft:e.spacing(1),textTransform:"capitalize",fontWeight:"bold",whiteSpace:"nowrap",borderRadius:e.spacing(.5),fontSize:e.mixins.pxToRem(13),padding:e.spacing(.5,1.25),marginBottom:e.spacing(1),minWidth:e.spacing(4),height:e.spacing(4),"& .ico":{fontSize:e.mixins.pxToRem(13)}},[e.breakpoints.down("sm")]:{flexFlow:"row wrap",padding:e.spacing(.5,0),justifyContent:"flex-start","& button":{marginLeft:0,marginRight:e.spacing(1)}}})),H=(0,d.Ay)(m.A,{name:W,slot:"ProfileActionMenu"})(({theme:e})=>({padding:`${e.spacing(.5,1.25)} !important`,minWidth:e.spacing(4),height:e.spacing(4)})),U=(0,d.Ay)("div",{name:W,slot:"profileHeaderBottom",overridesResolver:(e,t)=>[t.profileHeaderBottom]})(({theme:e})=>{var t;return{backgroundColor:e.mixins.backgroundColor("paper"),display:"flex",borderTop:"solid 1px",borderTopColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"& .MuiProfileMenu-tabItem":{padding:e.spacing(2)},[e.breakpoints.down("md")]:{paddingTop:e.spacing(1)}}}),D=(0,d.Ay)(c.A)(({theme:e})=>({"> div":{marginTop:e.spacing(2)}})),X=(0,d.Ay)(c.A,{name:W,slot:"viewProfile",overridesResolver:(e,t)=>[t.viewProfile]})(({theme:e})=>({})),O=({item:e,identity:t,profileMenu:a,profileActionMenu:r,blockProps:d,handleAction:m,state:g,actions:v})=>{var h,A;let{ItemActionMenu:E,usePageParams:b,ProfileHeaderCover:_,ProfileHeaderAvatar:k,useSession:R,getAcl:I,getSetting:M,assetUrl:W,i18n:O,useIsMobile:q,navigate:K,useTheme:Y}=(0,n.PCX)(),G=q(!0),{id:J,tab:V="home"}=b(),Z=R(),{user:Q}=Z||{},ee=I(),et=M(),ea=(0,p.A)(),en=Y(),er=null!==(A=null===(h=en.appBarMobileConfig)||void 0===h?void 0:h.nav)&&void 0!==A?A:48,ei=(0,f.useCallback)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);if(!(null==e?void 0:e.profile_menu_settings)||!(null==e?void 0:e.profile_settings))return f.createElement(x,null);let{cover_photo_id:el,extra:eo,cover_photo_position:es,profile_settings:ed}=e,ec=(0,s.AE)(e.avatar,"200x200",W("user.no_image")),em=(0,s.AE)(null==e?void 0:e.cover,"1024",W("user.cover_no_image")),ep={item:e,acl:ee,setting:et,session:Z},eu=(0,s.Ue)(a.items,ep),ef=(0,s.Ue)(r.items,ep),eg=ef.slice(0,2),ev=ef.slice(2);return f.createElement(l.eB,null,f.createElement(l.tD,null,f.createElement(c.A,{"data-testid":"userProfileHeader"},f.createElement(z,null,f.createElement(c.A,null,f.createElement(_,{identity:t,image:em,imageId:el,alt:"",left:0,top:es||0}),f.createElement(c.A,null,f.createElement(o.mc,{maxWidth:"md",gutter:!0},f.createElement(L,{p:2},f.createElement(j,null,f.createElement(N,{display:"flex",alignItems:"flex-start"},f.createElement(k,{alt:(0,s.cb)(e.full_name),canEdit:null==eo?void 0:eo.can_upload_avatar,onEdit:v.editProfileHeaderAvatar,avatar:ec,avatarId:e.avatar_id,identity:t,showLiveStream:!0}),f.createElement(X,{"data-testid":"viewProfileInfo"},f.createElement($,{"data-testid":"viewProfileTitle"},e.full_name,e.is_featured?f.createElement(B,{icon:"ico-check-circle"}):null),(null==ed?void 0:ed.profile_view_profile)||e.bio?f.createElement(S,null,f.createElement(o.mE,{lines:2},f.createElement(i.Ay,{html:e.bio,simpleTransform:!0}))):null)),f.createElement(c.A,{display:"flex",flexDirection:"column",alignItems:{sm:"flex-end",xs:"flex-start"}},f.createElement(F,null,eg.map((e,t)=>f.createElement(o.dz,{key:e.label,"data-testid":null==e?void 0:e.name,variant:(null==e?void 0:e.variant)||(0===t?"contained":"outlined"),startIcon:(null==e?void 0:e.icon)&&f.createElement(o.s4,{icon:e.icon}),autoEnable:!0,action:t=>m(e.value,{isMobile:G},{onSuccess:t,onFinally:t}),color:e.color||"primary",size:"small"},e.label)),(null==Q?void 0:Q.id)!==parseInt(J)&&(null==ev?void 0:ev.length)?f.createElement(E,{id:"actionMenu",label:"ActionMenu",handleAction:m,items:ev,control:f.createElement(u.A,{title:O.formatMessage({id:"more_options"})},f.createElement(H,{variant:"outlined",color:"primary",size:"small"},f.createElement(o.s4,{icon:"ico-dottedmore-o"})))}):null),(null==eo?void 0:eo.can_view_profile_activity_point)?f.createElement(y,{isOwner:(null==Q?void 0:Q.id)===parseInt(J)}):null)),f.createElement(D,null,(null==e?void 0:e.friendship)===2?f.createElement(w.default,{item:e,actions:v}):null,f.createElement(C,{item:e}))))),(null==ed?void 0:ed.profile_view_profile)&&f.createElement(o.TM,{sx:G&&!ea?{top:er}:""},({sticky:t})=>f.createElement(o.mc,{maxWidth:"md",gutter:!0},f.createElement(U,null,t?f.createElement(P,{onClick:ei},f.createElement(o.H8,{user:e,size:48,noStory:!0,showStatus:!1})):null,f.createElement(T,{sticky:t},f.createElement(o.XR,{items:eu,activeTab:V,maxDisplayTab:5,prefix:null==e?void 0:e.link}))))))))))};O.displayName="UserProfileHeaderView";let q=(0,n.$MH)((0,n.L2$)(O,r.A)),K=(0,n.WvA)({name:"UserProfileHeaderBlock",extendBlock:q})},44466(e,t,a){a.r(t),a.d(t,{default:()=>g});var n=a(91557),r=a(40515),i=a(3556),l=a(89637),o=a(87773),s=a(8051),d=a(86670),c=a(60780),m=a(96540);let p=(0,i.Ay)(l.A)(({theme:e})=>({display:"flex",justifyContent:"space-between",flexWrap:"wrap",padding:e.spacing(1,2),boxShadow:"none",..."light"===e.palette.mode&&{backgroundColor:e.layoutSlot.background.paper},[e.breakpoints.down("sm")]:{flexDirection:"column"}})),u=(0,i.Ay)(o.A)(({theme:e})=>({color:e.palette.text.primary})),f=({item:e,actions:t})=>{let{i18n:a}=(0,n.PCX)();return m.createElement(p,null,m.createElement(s.A,{sx:{display:"flex",alignItems:"center"}},m.createElement(u,{component:"div",variant:"h5",sx:{marginBottom:.5}},a.formatMessage({id:"user_has_sent_you_a_friend_request"},{name:e.full_name}))),m.createElement(d.A,{sx:{paddingX:0}},m.createElement(c.A,{size:"small",variant:"contained",onClick:t.acceptFriend,component:"h5"},a.formatMessage({id:"accept_friend_request"})),m.createElement(r.Ak,{size:"small",variant:"outlined",onClick:t.denyFriend,component:"h5"},a.formatMessage({id:"delete_friend_request"}))))},g=f}}]);