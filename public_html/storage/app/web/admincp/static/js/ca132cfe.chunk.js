"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-livestreaming-components-ViewerLabel"],{43498(e,t,i){i.d(t,{Ui:()=>h,ET:()=>d}),i(96602);var r=i(96540),n=i(91557),s=i(70223),a=i(11497),o=i(656),l=i(78292);let c=new class{bootstrap(e,t){this.manager=e,this.settingApp=this.manager.getSetting("firebase"),this.settingApp&&this.init(this.settingApp,t)}checkActive(){return this.isActive}init(e,t){if(this.mounted)return this.firebaseApp;this.mounted=!0;let i={apiKey:n.z0J,authDomain:n.wRL,projectId:n.wWR,storageBucket:n.npo,messagingSenderId:n.AfL,appId:n.Kou};this.config=e;try{let r=(0,s.Wp)(i),a=(0,o.xI)(r),{user_firebase_email:l,user_firebase_password:c,requiredSignin:u}=this.settingApp||{};return u&&(0,o.x9)(a,l,c).then(e=>{}).catch(e=>{console.log("Live Video - Firebase signInWithEmailAndPassword error",e),"auth/user-not-found"===e.code&&(0,o.eJ)(a,l,c)}),t(!0),this.firebaseApp=r,this.isActive=!0,r}catch(p){this.isActive=!1}}getFirebaseApp(){return this.firebaseApp}getFirestore(){if(!this.firebaseApp)return null;if(!this.firestore){let e=(0,a.aU)(this.firebaseApp);e&&(this.firestore=e)}return this.firestore}getMessaging(){if(!this.firebaseApp)return null;if(!this.cloudMessage){let e=(0,l.dG)(this.firebaseApp);e&&(this.cloudMessage=e)}return this.cloudMessage}},u=!1,p=!1;function h(){let[e,t]=function(){let e=(0,n.PCX)(),[t,i]=r.useState(!1);return t||u||(u=!0,c.bootstrap(e,()=>{p=!0,i(!0)})),[t||p,c]}();if(!e)return!1;let i=t.getFirestore();return i}let f=(e,t)=>{let[i,n]=(0,r.useState)();return(0,r.useEffect)(()=>{let i;if(e&&(null==t?void 0:t.collection)&&(null==t?void 0:t.docID)){try{let r=(0,a.H9)(e,t.collection,t.docID);i=(0,a.aQ)(r,async e=>{n(e.data())})}catch(s){}return()=>{null==i||i()}}},[]),i},d=f},59035(e,t,i){i.r(t),i.d(t,{default:()=>u});var r=i(96540),n=i(3556),s=i(87773),a=i(40515),o=i(43498);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let c=(0,n.Ay)(s.A,{name:"FlagLiveLabel",slot:"packageOuter",shouldForwardProp:e=>"backgroundColor"!==e})(({theme:e,backgroundColor:t})=>({height:"24px",display:"inline-flex",padding:`0 ${e.spacing(1)}`,alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.4)",color:e.palette.common.white,fontSize:e.typography.body2.fontSize,textTransform:"uppercase",borderRadius:"4px","& > *":{margin:"0 4px"}}));function u({streamKey:e,...t}){var i,n;let s=(0,o.Ui)(),u=(0,o.ET)(s,{collection:"live_video_view",docID:e}),p=null!==(n=null==u?void 0:u.total_viewer)&&void 0!==n?n:null==u?void 0:null===(i=u.view)||void 0===i?void 0:i.length;return e&&p?r.createElement(c,l({},t),r.createElement(a.s4,{icon:"ico-eye-alt"}),r.createElement(a.Dq,{value:p})):null}}}]);