"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-chat-components-ChatPopover-ChatPopover"],{99076(e,t,a){a.r(t),a.d(t,{default:()=>b});var n=a(69709),o=a(19740),r=a(91557),i=a(84680),l=a(40515),c=a(3556),p=a(60780),s=a(8051),d=a(18799),u=a(87773),m=a(97763),g=a(96540);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let f=(0,c.Ay)("div")(({theme:e})=>({cursor:"pointer","&:hover":{textDecoration:"underline"}})),y=(0,c.Ay)(p.A)(({theme:e})=>({color:"dark"===e.palette.mode?e.palette.text.primary:e.palette.grey["700"],fontSize:e.spacing(2.25),minWidth:e.spacing(0)})),v=(0,c.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"flex-end"})),x=(0,c.Ay)(s.A,{shouldForwardProp:e=>"noContent"!==e})(({theme:e,noContent:t})=>{var a;return{padding:e.spacing(1.5,2),display:"flex",alignItems:"center",justifyContent:"space-between",...!t&&{borderBottom:"1px solid",borderColor:null===(a=e.palette.border)||void 0===a?void 0:a.secondary}}}),C=(0,c.Ay)(s.A)(({theme:e})=>({padding:e.spacing(1,2),display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.text.primary})),E=(0,c.Ay)("div")(({theme:e})=>({padding:e.spacing(1,1,1,2),display:"flex",alignItems:"center","& input::placeholder, .ico":{color:e.palette.text.hint}}));function b({anchorRef:e,open:t,closePopover:a,...c}){var p;let{i18n:s,dispatch:b,ListView:A}=(0,r.PCX)(),[P,_]=g.useState(""),w=(0,o.iw)(),M=g.useMemo(()=>({apiUrl:"/chat-room",apiParams:{limit:10}}),[]);g.useEffect(()=>{_(""),(null==w?void 0:w.total_notification)>0&&t&&b({type:"chat/notifications/clearUnread"})},[t,w]);let k=g.useCallback(()=>{b({type:"chat/openRoomPanel",payload:{rid:n.aN}}),a&&a()},[]),S=g.useCallback(()=>{b({type:"chat/navigateMessagesPage"})},[]),I=e=>{_(e)};return g.createElement(l.ND,h({id:"chat-popover","data-testid":"chat-popover",anchorEl:e.current,open:t,popperOptions:{strategy:"fixed"}},c),g.createElement(d.A,{sx:{width:360,overflow:"hidden",userSelect:"none"}},g.createElement(x,null,g.createElement(v,null,g.createElement(u.A,{variant:"h4"},s.formatMessage({id:"messages"}))),g.createElement(f,null,g.createElement(y,{onClick:k},g.createElement(m.A,{title:null!==(p=s.formatMessage({id:"new_conversation"}))&&void 0!==p?p:"",placement:"top"},g.createElement(l.s4,{icon:"ico-compose"}))))),g.createElement(E,null,g.createElement(i.Gd,{placeholder:s.formatMessage({id:"search_people"}),value:P,onQueryChange:I,sx:{width:"100%"}})),g.createElement(i.P,{autoHide:!0,autoHeight:!0,autoHeightMax:320,autoHeightMin:40},g.createElement(A,{acceptQuerySearch:!0,query:P,dataSource:M,pagingId:"pagination.messagesPopper.listRooms",canLoadMore:!0,clearDataOnUnMount:!0,gridLayout:"ChatRoom - Main Card - Popper",itemLayout:"ChatRoom - Main Card - Popper",itemView:"blocked.itemView.chatroomCard",blockLayout:"Chat buddy list popper",emptyPage:"core.block.no_content",emptyPageProps:{title:"no_messages",contentStyle:{sx:{marginTop:"12px"}}}})),g.createElement(C,null,g.createElement(f,null,g.createElement(u.A,{variant:"body1",onClick:S},s.formatMessage({id:"view_all_messages"}))))))}},19740(e,t,a){a.d(t,{nb:()=>l,Zq:()=>c,iw:()=>i,In:()=>m,f3:()=>d,EH:()=>s,wg:()=>p,eL:()=>u,Dr:()=>r.A,iW:()=>g,oT:()=>h});var n=a(71468),o=a(99477),r=a(44031);function i(){return(0,n.d4)(e=>(0,o.Tr)(e))}let l=e=>(0,n.d4)(t=>(0,o.rS)(t,e)),c=e=>(0,n.d4)(t=>(0,o.vF)(t,e));function p(e){return(0,n.d4)(t=>(0,o.Ax)(t,e))}let s=()=>(0,n.d4)(o.x2),d=()=>(0,n.d4)(o.yr),u=()=>(0,n.d4)(o.Eq),m=()=>(0,n.d4)(o.pR),g=e=>(0,n.d4)(t=>(0,o.gQ)(t,e)),h=()=>(0,n.d4)(o.t8)},44031(e,t,a){a.d(t,{A:()=>i,a:()=>p});var n=a(91557),o=a(71468),r=a(1081);function i(){let{getSetting:e}=(0,n.PCX)(),t=e("preaction.reaction_list",[]).filter(e=>e.is_active),a=e("preaction.inactive_reaction_list",[]),o=[...t,...a];return(null==o?void 0:o.length)?o:[]}let l=e=>(e.preaction.data.reactions||[]).filter(e=>e.is_active),c=(0,r.Mz)(l,e=>e);function p(){return(0,o.d4)(c)}}}]);