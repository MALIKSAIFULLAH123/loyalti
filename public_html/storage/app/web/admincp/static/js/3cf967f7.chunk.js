"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["saved"],{43546(e,t,l){l.d(t,{A:()=>$});var n=l(98587),a=l(58168),o=l(96540),i=l(20053),r=l(75659),c=l(24279),d=l(97680),s=l(70709),m=l(74848);let u=(0,s.A)((0,m.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,s.A)((0,m.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),v=(0,s.A)((0,m.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var f=l(75630),h=l(92353),E=l(3556),y=l(38413),_=l(31609);function g(e){return(0,_.A)("MuiCheckbox",e)}let x=(0,y.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),A=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],C=e=>{let{classes:t,indeterminate:l,color:n}=e,o={root:["root",l&&"indeterminate",`color${(0,f.A)(n)}`]},i=(0,r.A)(o,g,t);return(0,a.A)({},t,i)},k=(0,E.Ay)(d.A,{shouldForwardProp:e=>(0,E.ep)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver(e,t){let{ownerState:l}=e;return[t.root,l.indeterminate&&t.indeterminate,"default"!==l.color&&t[`color${(0,f.A)(l.color)}`]]}})(({theme:e,ownerState:t})=>(0,a.A)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,c.X4)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${x.checked}, &.${x.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${x.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),w=(0,m.jsx)(p,{}),b=(0,m.jsx)(u,{}),M=(0,m.jsx)(v,{}),I=o.forwardRef(function(e,t){var l,r;let c=(0,h.A)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=w,color:s="primary",icon:u=b,indeterminate:p=!1,indeterminateIcon:v=M,inputProps:f,size:E="medium",className:y}=c,_=(0,n.A)(c,A),g=p?v:u,x=p?v:d,I=(0,a.A)({},c,{color:s,indeterminate:p,size:E}),$=C(I);return(0,m.jsx)(k,(0,a.A)({type:"checkbox",inputProps:(0,a.A)({"data-indeterminate":p},f),icon:o.cloneElement(g,{fontSize:null!=(l=g.props.fontSize)?l:E}),checkedIcon:o.cloneElement(x,{fontSize:null!=(r=x.props.fontSize)?r:E}),ownerState:I,ref:t,className:(0,i.default)($.root,y)},_,{classes:$}))}),$=I},39347(e,t,l){l.r(t),l.d(t,{default:()=>v});var n=l(56689),a=l(91557),o=l(40515),i=l(3556),r=l(8051),c=l(87773),d=l(60780),s=l(96540);let m=(0,i.Ay)(o.ne,{slot:"root",name:"FriendItem"})(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"center"})),u=(0,i.Ay)("div",{slot:"ItemContent",name:"FriendItem"})(({theme:e})=>({display:"flex",flex:1,minWidth:0,justifyContent:"space-between",alignItems:"center",width:"100%"})),p=(0,i.Ay)(r.A,{slot:"ItemUser",name:"ItemUser"})(({theme:e})=>({display:"flex",alignItems:"baseline","& > div":{flex:"none",flexDirection:"row"},"&>div:not(:last-child):after":{textDecoration:"none",content:'"\xb7"',paddingLeft:"0.4em",paddingRight:"0.4em",fontWeight:"normal",color:e.palette.text.secondary}})),v=(0,n.F)(function({identity:e,item:t,wrapProps:l,wrapAs:n,actions:i}){let{user:v}=(0,a.wVH)(),{i18n:f,dispatch:h,useGetItem:E}=(0,a.PCX)(),y=E(null==t?void 0:t.user);if(!t)return null;let{link:_,extra:g,is_owner:x}=t,{statistic:A}=y,C=(null==v?void 0:v.id)===t.id;return s.createElement(m,{wrapAs:n,wrapProps:l,testid:`${t.resource_name}`,"data-eid":e},s.createElement(u,null,s.createElement(o.Qm,null,s.createElement(o.H8,{user:t,size:48})),s.createElement(o.p4,null,s.createElement(o.Et,null,s.createElement(a.N_E,{to:_,children:t.full_name,color:"inherit"})),s.createElement(p,null,x?s.createElement(o.CN,null,s.createElement(c.A,{color:"text.secondary"},f.formatMessage({id:"owner"}))):null,!C&&(null==A?void 0:A.total_mutual)>0?s.createElement(o.CN,{role:"button"},s.createElement(o.C8,{values:A,display:"total_mutual",onClick:i.showMutualFriends})):null))),(null==g?void 0:g.can_remove)&&s.createElement(r.A,{ml:1},s.createElement(d.A,{variant:"contained",color:"primary",onClick:()=>h({type:"saved/removeMemberInCollection",payload:{identity:e}})},f.formatMessage({id:"remove"}))))},n.m)},6197(e,t,l){l.r(t),l.d(t,{default:()=>s});var n=l(99247),a=l(96540),o=l(3556),i=l(46772),r=l(43546),c=l(91557);let d=(0,o.Ay)(i.A)(({theme:e})=>({width:"100%",margin:"0 !important",padding:e.spacing(.5,1,.5,0),position:"relative"})),s=(0,n.F)(function({item:e}){let{useBatchSelectContext:t}=(0,c.PCX)(),l=t(),{handleToggleItem:n,checkedList:o,loading:i}=l,s=o.some(t=>t===e.id),[m,u]=a.useState(s),p=t=>{n(null==e?void 0:e.id,!m),u(e=>!e)};return(a.useEffect(()=>{u(s)},[s]),e)?a.createElement(d,{control:a.createElement(r.A,{disabled:i,checked:m,onChange:p,color:"primary",size:"small"}),label:e.name}):null},n.m)},85109(e,t,l){l.r(t),l.d(t,{default:()=>u});var n=l(99247),a=l(91557),o=l(40515),i=l(3556),r=l(96540);let c=(0,i.Ay)("div")(({theme:e})=>({flex:1,display:"flex",justifyContent:"space-between",alignItems:"center",overflow:"hidden"})),d=(0,i.Ay)(a.N_E)(({theme:e})=>({flex:1,display:"flex",alignItems:"center",overflow:"hidden",height:"100%"})),s=(0,i.Ay)(o.Et)(({theme:e})=>({paddingLeft:e.spacing(1),marginBottom:e.spacing(0),"& > p":{whiteSpace:"inherit"}})),m=(0,i.Ay)(o.Qm)(({theme:e})=>({minWidth:e.spacing(2)})),u=(0,n.F)(function({item:e,identity:t,actions:l,handleAction:n,state:i,itemProps:u,user:p,wrapAs:v,wrapProps:f}){let{ItemActionMenu:h,usePageParams:E,useIsMobile:y}=(0,a.PCX)(),_=y(),{collection_id:g}=E(),x=g==e.id;if(!e)return null;let A=`/saved/list/${e.id}`;return r.createElement(o.ne,{wrapAs:v,wrapProps:f,testid:`${e.resource_name}`,"data-eid":t,color:"inherit"},r.createElement(c,null,r.createElement(d,{color:x?"primary":"inherit",to:A,underline:"none"},r.createElement(m,null,r.createElement(o.s4,{icon:"ico-folder-alt-o",sx:{fontSize:"1rem"},color:x?"primary":"textPrimary"})),r.createElement(s,{color:x?"primary":"textPrimary",sx:{wordBreak:"break-all"}},e.name)),u.showActionMenu&&r.createElement(o.sZ,{visible:_?"always":"hover"},r.createElement(h,{identity:t,icon:"ico-dottedmore-vertical-o",state:i,handleAction:n,zIndex:1300}))))},n.m)},67224(e,t,l){l.r(t),l.d(t,{default:()=>_});var n=l(56689),a=l(91557),o=l(40515),i=l(67725),r=l(3556),c=l(8051),d=l(60780),s=l(84058),m=l.n(s),u=l(96540),p=l(97763);let v=({itemIdentity:e,reloadCollections:t,setReloadCollections:l,dataSource:n,total:o,excludeCollection:i=[]})=>{let{dispatch:r,i18n:d,useGetItem:s}=(0,a.PCX)(),[m,p]=u.useState([]),[v,f]=u.useState(0),[h,E]=u.useState(!1),y=s(e),{id:_}=y||{};return(u.useLayoutEffect(()=>{let a=!0;return E(!0),r({type:"getCommentCollections",payload:{id:_,saved_id:_,limit:10,itemIdentity:e,forceReload:t,dataSource:n},meta:{onSuccess({data:e}){a&&(E(!1),p(e.filter(e=>!i.includes(e.id))),f(Math.max(o-e.length-i.length,0)),l(!1))}}}),()=>{a=!1}},[r,e]),h)?u.createElement(c.A,{sx:{minWidth:"40px"}},d.formatMessage({id:"loading_dots"})):u.createElement(c.A,null,!!m.length&&m.map((e,t)=>u.createElement("div",{key:t.toString()},null==e?void 0:e.name)),!!v&&u.createElement("div",null,d.formatMessage({id:"and_value_more_dots"},{value:v})))};function f({total:e,identity:t,dataSource:l,excludeCollection:n=[]}){let{i18n:o,dispatch:i}=(0,a.PCX)(),[r,c]=u.useState(!1);u.useEffect(()=>{c(!0)},[e]);let d=()=>{i({type:"saved/viewCollectionItemSaved",payload:{identity:t}})};return u.createElement("span",null,u.createElement("span",null,o.formatMessage({id:"_and_"}))," ",u.createElement(p.A,{disableInteractive:!0,placement:"top",title:u.createElement(v,{reloadCollections:r,setReloadCollections:c,itemIdentity:t,dataSource:l,total:e,excludeCollection:n})},u.createElement(a.N_E,{color:"text.primary",fontWeight:"bold",onClick:d},o.formatMessage({id:"value_more"},{value:e-n.length}))))}var h=l(22847);let E=(0,r.Ay)("span",{name:"SavedItemView",slot:"UnOpenedDot"})(({theme:e})=>({display:"inline-block",width:6,height:6,backgroundColor:e.palette.primary.main,borderRadius:4,marginRight:e.spacing(.5)})),y=(0,r.Ay)(c.A)(({theme:e})=>({display:"flex",alignItems:"center",overflow:"hidden"})),_=(0,n.F)(function({item:e,identity:t,handleAction:l,state:n,itemProps:r,user:s,wrapAs:p,wrapProps:v}){var _,g,x,A;let{ItemActionMenu:C,i18n:k,assetUrl:w,dispatch:b,useGetItem:M,dialogBackend:I,useSession:$,usePageParams:S}=(0,a.PCX)(),{user:z}=$(),{collection_id:F}=S(),P=`${h.Kw}.entities.${h.Wz}.${null==e?void 0:e.default_collection_id}`,j=M(P),N=`${h.Kw}.entities.${h.Wz}.${F}`,W=M(N),R=M(null==e?void 0:e.owner),B=(0,a.IgF)(h.Kw,h.Wz,"viewAll");if(!e||!s)return null;let{menuName:H="itemActionMenu"}=r,X=(0,i.AE)(null==e?void 0:e.image,"240,200x200",w("saved.no_image")),V=()=>{b({type:"saved/markAsOpened",payload:{identity:t,showFeedbackSuccess:!1}})},L=()=>{I.present({component:"saved.dialog.saveToCollection",props:{item:e}})};return u.createElement(o.ne,{wrapAs:p,wrapProps:v,testid:m()(`item ${e.resource_name}`)},u.createElement(c.A,{onClick:V},u.createElement(o.Qm,{src:X,link:e.link,alt:e.title,backgroundImage:!0})),u.createElement(o.p4,null,u.createElement(c.A,{sx:{display:"flex",justifyContent:"space-between"}},u.createElement(y,null,u.createElement(c.A,null,e.is_opened?null:u.createElement(E,null)),u.createElement(o.Et,{onClick:V},u.createElement(a.N_E,{to:e.link},e.title))),r.showActionMenu?u.createElement(o.sZ,null,u.createElement(C,{menuName:H,identity:t,icon:"ico-dottedmore-vertical-o",state:n,handleAction:l,size:"smallest"})):null),u.createElement(o.e_,{sx:{color:"text.secondary",mt:1}},u.createElement(a.N_E,{color:"inherit",to:null==R?void 0:R.link,children:null==R?void 0:R.full_name,hoverCard:`/${R.module_name}/${null==R?void 0:R.id}`}),e.item_type_name?k.formatMessage({id:e.item_type_name}):null,e.belong_to_collection?u.createElement("span",null,k.formatMessage({id:"added_to"})," ",u.createElement(a.N_E,{to:`/saved/list/${e.default_collection_id}`,color:"text.primary",fontWeight:"bold"},(null==j?void 0:j.name)||e.default_collection_name)," ",(null===(_=e.statistic)||void 0===_?void 0:_.total_collection)>1?u.createElement(f,{identity:t,total:null===(g=e.statistic)||void 0===g?void 0:g.total_collection,dataSource:B,excludeCollection:[e.default_collection_id]}):null):null),F&&(null==W?void 0:null===(x=W.statistic)||void 0===x?void 0:x.total_member)>1&&u.createElement(c.A,{mt:1},k.formatMessage({id:"added_by_name"},{name:(null==z?void 0:z.id)===(null==s?void 0:s.id)?"you":u.createElement(o.xE,{sx:{fontWeight:"bold"},to:null==s?void 0:s.link,user:s})})),u.createElement(c.A,{sx:{mt:2}},(null==e?void 0:null===(A=e.extra)||void 0===A?void 0:A.can_add_to_list)?u.createElement(d.A,{variant:"outlined",size:"small",color:"primary",onClick:L},u.createElement(o.s4,{icon:"ico-folder-plus-o",sx:{mr:1,fontSize:15}}),k.formatMessage({id:"add_to_collection"})):null)))},n.m)},56689(e,t,l){l.d(t,{m:()=>a,F:()=>n.FB$});var n=l(91557);function a(e){return{showMutualFriends:()=>e("friend/presentMutualFriends")}}},99247(e,t,l){l.d(t,{m:()=>a,F:()=>n.FB$});var n=l(91557);function a(e){return{}}}}]);