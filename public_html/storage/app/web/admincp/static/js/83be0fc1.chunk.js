(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-story-blocks-MainViewHomeMobile-LoadingSkeleton"],{24713(e,t,i){var n=i(2523),l=i(15389),o=i(61489),d=Math.max;e.exports=function(e,t,i){var r=null==e?0:e.length;if(!r)return -1;var a=null==i?0:o(i);return a<0&&(a=d(r+a,0)),n(e,l(t,3),a)}},48603(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>f});var n=i(85332),l=i(3556),o=i(8051),d=i(52705),r=i(96540);let a="MainViewHomeMobileSkeleton",u=(0,l.Ay)(o.A,{name:a})(({theme:e})=>({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none",backgroundColor:"#000",paddingTop:e.spacing(1.5),flexDirection:"column","& .MuiSkeleton-root":{..."light"===e.palette.mode&&{backgroundColor:e.palette.grey.A200}}})),s=(0,l.Ay)(o.A,{name:a,slot:"root",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,width:t,height:i})=>({position:"relative",margin:"auto",height:i||"100%",display:"flex",justifyContent:"center",flexDirection:"column",width:t})),v=(0,l.Ay)(o.A,{name:a})(({theme:e})=>({position:"absolute",top:0,left:0,right:0,zIndex:9999,width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1.5),paddingTop:e.spacing(2),justifyContent:"space-between"})),p=(0,l.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",maxWidth:"70%",overflow:"hidden"})),c=(0,l.Ay)(o.A)(({theme:e})=>({minHeight:64})),y=(0,l.Ay)(o.A,{shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,height:t,width:i})=>({backgroundColor:e.palette.grey["900"],borderRadius:e.shape.borderRadius,height:t,width:i}));function f({isMinHeight:e=!1,isSmallHeight:t=!1}){let i=r.useRef(),[l,a]=(0,n.Uf)(i);return r.createElement(u,null,r.createElement(s,{ref:i,width:l,height:a},r.createElement(v,null,r.createElement(p,null,r.createElement(d.A,{variant:"circular",width:e||t?36:48,height:e||t?36:48}),r.createElement(o.A,{ml:1},r.createElement(d.A,{variant:"text",sx:{fontSize:"1rem"},width:120}),r.createElement(d.A,{variant:"text",sx:{fontSize:"1rem"},width:90})))),r.createElement(y,{height:a,width:l})),r.createElement(c,null))}},32113(e,t,i){"use strict";i.d(t,{vZ:()=>d,MO:()=>a,x6:()=>u});var n=i(91262),l=i(96540);let o=l.createContext({status:null,setStatus(){},setFilePhoto(){},filePhoto:null,setUploading(){},uploading:!1,setIsDirty(){},isDirty:!1,isSubmitting:!1,setIsSubmitting(){}}),d=o,r=l.createContext({}),a=r,u={identityStoryActive:void 0,identityUserStoryActive:void 0,listUserStories:[],pauseStatus:n.ZR.No,reactions:[],indexStoryActive:void 0,openStoryDetail:!1,openViewComment:!1,openActionItem:!1,readyStateFile:!1,progressVideoPlay:0,isLastStory:!1,isReady:!1,mutedStatus:!0,buffer:!1}},79655(e,t,i){"use strict";i.d(t,{A:()=>c,n:()=>v});var n=i(91557),l=i(24713),o=i.n(l),d=i(58156),r=i.n(d),a=i(44562),u=i(95093),s=i.n(u);let v=(e,t,i=3)=>t<i?"prev":t>e-i-1?"next":"",p=(e,t)=>{let{identity:i}=t,n=r()(e,i),l=new URL(window.location.href),d=new URLSearchParams(l.search).get("date");if(!n)return{};let u=s()(d).format("L"),p=`${a.Lp}/${u}`,c=r()(e,`pagination.${p}.ids`),y=r()(e,`pagination.${p}.pagesOffset.total`),f=r()(e,`pagination.${p}.ended`),g=r()(e,`pagination.${p}.pagesOffset.next_date`),h=r()(e,`pagination.${p}.pagesOffset.prev_date`),m=f?1:r()(e,`pagination.${p}.pagesOffset.current_page`),A=r()(e,`pagination.${p}.pagesOffset.per_page`),S=(null==n?void 0:n.user)?r()(e,n.user):void 0,w=null==c?void 0:c.length,x=1<w?o()(c,e=>e===i):-1,_=-1!==x?x:0,C=f?_:r()(e,`pagination.${p}.pagesOffset.pos`)||0,b={item:n,stories:c,user:S,total:y,nextDate:g,prevDate:h,pagingId:p,date:d,indexStoryActive:_,positionStory:A*(m-1)+C,shouldPreload:v(w,C+1)};return b},c=(0,n.NgA)(p)},85332(e,t,i){"use strict";i.d(t,{Ay:()=>v,F_:()=>f,P3:()=>c,Tq:()=>g,Uf:()=>y,aN:()=>A,vC:()=>p});var n=i(96540),l=i(32113),o=i(91557),d=i(44562),r=i(71468),a=i(69634),u=i(79655),s=i(1081);function v(){return n.useContext(l.vZ)}function p(){return n.useContext(l.MO)}function c(){var e,t;let{navigate:i,useGetItem:l}=(0,o.PCX)(),{listUserStories:d,identityUserStoryActive:r,identityStoryActive:a,fire:u}=p(),s=l(r),v=l(a),c=(0,o.UfA)(null==s?void 0:s.stories),y=null==c?void 0:c.findIndex(e=>(null==e?void 0:e.id)===(null==v?void 0:v.id)),f=null==d?void 0:d.findIndex(e=>(null==e?void 0:e.id)===(null==s?void 0:s.id)),g=(null==c?void 0:null===(e=c[0])||void 0===e?void 0:e.id)===(null==v?void 0:v.id),h=(null==s?void 0:s.stories.length)-1===y,m=(null==d?void 0:null===(t=d[0])||void 0===t?void 0:t.id)===(null==s?void 0:s.id)&&g,A=(null==d?void 0:d.length)-1===f&&h,S=!m,w=!A,x=n.useCallback(()=>{var e,t;if(S&&-1!==y){if(g){u({type:"setIdentityUserS_Active",payload:null===(t=d[f-1])||void 0===t?void 0:t._identity});return}u({type:"setIdentityStoryActive",payload:null==c?void 0:null===(e=c[y-1])||void 0===e?void 0:e._identity})}},[S,y,g,d,c,f]),_=n.useCallback(()=>{var e,t;if(A){i("/");return}if(w&&-1!==y){if(h){u({type:"setIdentityUserS_Active",payload:null===(t=d[f+1])||void 0===t?void 0:t._identity});return}u({type:"setIdentityStoryActive",payload:null==c?void 0:null===(e=c[y+1])||void 0===e?void 0:e._identity})}},[A,w,y,h,d,f,c]);return{hasPrev:S,hasNext:w,handlePrev:x,handleNext:_}}function y(e){let[t,i]=n.useState(0),[l,o]=n.useState(0),r=n.useRef(),a=n.useCallback(()=>{var n;if(!(null==e?void 0:e.current))return[t,l];let r=null==e?void 0:null===(n=e.current)||void 0===n?void 0:n.getBoundingClientRect(),a=(null==r?void 0:r.height)/d.us,u=null==r?void 0:r.height;window.screen.width<=a&&(u=(a=window.screen.width)*d.us),o(u),i(a)},[null==e?void 0:e.current]);return n.useEffect(()=>{var t;let i=e.current;if(i)return r.current=new ResizeObserver(()=>{a()}),a(),null===(t=r.current)||void 0===t||t.observe(i),()=>{null==r||r.current.disconnect()}},[a,null==e?void 0:e.current]),[t,l,a]}function f(){return(0,r.d4)(e=>(0,a.s)(e))}function g(){var e,t;let i=p(),{fire:l,stories:d,indexStoryActive:a,nextDate:s,prevDate:v,identityStoryActive:c,loading:y,total:f,positionStory:g,pagingId:h}=i,m=(0,r.d4)(e=>(0,o.qRQ)(e,h))||{},{prev_page:A,last_page:S,current_page:w}=(null==m?void 0:m.pagesOffset)||{},{useGetItem:x,useGetItems:_,dispatch:C,usePageParams:b}=(0,o.PCX)(),I=b(),O=x(c),k=_(d),L=(null==k?void 0:null===(e=k[0])||void 0===e?void 0:e.id)===(null==O?void 0:O.id)&&0===A,R=(null==d?void 0:d[(null==d?void 0:d.length)-1])===c&&S===w,E=!(!v&&L),P=!(!s&&R),U=(null==d?void 0:d[(null==d?void 0:d.length)-1])===c&&S!==w,$=(null==k?void 0:null===(t=k[0])||void 0===t?void 0:t.id)===(null==O?void 0:O.id)&&0!==A,D=(e,t=()=>{})=>{var n;let o=e=>{var t;let i=null==e?void 0:e.pagingId,n=null==e?void 0:e.ids;if(!i||!(null==n?void 0:n.length))return;let o=null==e?void 0:null===(t=e.pagesOffset)||void 0===t?void 0:t.total;l({type:"setInit",payload:{stories:n,total:o,loading:!1}})},d=(0,u.n)(null==i?void 0:null===(n=i.stories)||void 0===n?void 0:n.length,e);if(!d){t&&t();return}t&&t(),C({type:"story/story_archive/LOAD",payload:{user_id:null==I?void 0:I.user_id,date:null==i?void 0:i.date,direction:d},meta:{onSuccess:o}})},M=(e,t)=>{var i,n,o;let d=null==e?void 0:e.pagingId,r=null==e?void 0:e.ids;if(!d||!(null==r?void 0:r.length))return;let a=null==e?void 0:null===(i=e.pagesOffset)||void 0===i?void 0:i.total,u=null==e?void 0:null===(n=e.pagesOffset)||void 0===n?void 0:n.next_date,s=null==e?void 0:null===(o=e.pagesOffset)||void 0===o?void 0:o.prev_date;l({type:"setLoading",payload:!1}),l({type:"setInit",payload:{isReady:!1,stories:r,total:a,nextDate:u,prevDate:s,indexStoryActive:0,positionStory:0,identityStoryActive:null==r?void 0:r[0],pagingId:d,date:t}})},F=()=>{l({type:"setLoading",payload:!1})},N=n.useCallback(()=>{if($&&l({type:"setLoading",payload:!0}),!y&&E&&!$){if(L){l({type:"setLoading",payload:!0}),C({type:"story/story_archive/LOAD",payload:{user_id:null==I?void 0:I.user_id,date:v},meta:{onSuccess:e=>M(e,v),onError:F}});return}D(a-1),l({type:"setStoryActive",payload:{identity:null==d?void 0:d[a-1],index:a-1,positionStory:g-1}})}},[E,d,a,L,y,$,D,g,k,v]),T=n.useCallback(()=>{if(U&&l({type:"setLoading",payload:!0}),!y&&P&&!U){if(R){l({type:"setLoading",payload:!0}),C({type:"story/story_archive/LOAD",payload:{user_id:null==I?void 0:I.user_id,date:s},meta:{onSuccess:e=>M(e,s),onError:F}});return}D(a+1),l({type:"setStoryActive",payload:{identity:null==d?void 0:d[a+1],index:a+1,positionStory:g+1}})}},[P,d,a,R,f,U,y,D,s,g,k]);return{hasPrev:E,hasNext:P,handlePrev:N,handleNext:T,loadmore:D}}let h=e=>(e.preaction.data.reactions||[]).filter(e=>e.is_active),m=(0,s.Mz)(h,e=>e);function A(){return(0,r.d4)(m)}},91262(e,t,i){"use strict";var n,l,o,d,r,a,u,s;i.d(t,{ZR:()=>n,Zw:()=>l,dw:()=>d,gw:()=>o}),(r=n||(n={}))[r.No=0]="No",r[r.Pause=1]="Pause",r[r.Force=2]="Force",(a=l||(l={})).LANDSCAPE="landscape",a.PORTRAIT="portrait",(u=o||(o={})).Avatar="1",u.ThumbnailAndAvatar="2",(s=d||(d={})).Viewers="1",s.Comments="2"}}]);