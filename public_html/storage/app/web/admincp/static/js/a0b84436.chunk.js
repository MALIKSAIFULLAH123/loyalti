"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["StickerPicker"],{48987(e,t,i){i.r(t),i.d(t,{default:()=>I});var r=i(91557),n=i(84680),a=i(14940),l=i(71468),o=i(40515),c=i(67725),s=i(8051),d=i(87773),p=i(18799),m=i(97763),g=i(63461),u=i(3556),f=i(96540),y=i(4589),k=i(24175),h=i(86663);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}i(3094),i(24078);let b=(0,u.Ay)("div",{name:"StickerPicker",slot:"Tabs"})(({theme:e})=>({flex:1,display:"flex",flexDirection:"row"})),v=(0,u.Ay)("div",{name:"StickerPicker",slot:"Tab",shouldForwardProp:e=>"active"!==e})(({theme:e,active:t})=>Object.assign({height:40,width:40,fontSize:16,padding:e.spacing(0,1,0,1),alignItems:"center",justifyContent:"center",display:"flex!important",borderTop:"2px solid",borderTopColor:"transparent"},t&&{borderTopColor:e.palette.primary.main})),E=(0,u.Ay)("div",{slot:"ContainerList"})(({theme:e})=>({width:"240px",margin:e.spacing(0),padding:e.spacing(0),"& .slick-track":{display:"flex",flexWrap:"wrap",width:"100%",flexDirection:"row",margin:0},"& .slick-initialized .slick-slide":{display:"flex",height:"auto","& > div":{width:"100%",height:"100%"}},"& .slick-list":{cursor:"pointer"},"& .slick-next":{display:"flex!important",alignItems:"center",width:"35px",right:"0px",fontSize:"24px",justifyContent:"center",borderLeft:"1px solid",borderRight:"1px solid","&:before":{display:"none"},"&:hover":{color:"unset"},"&.slick-disabled":{display:"none !important"}},"& .slick-prev":{display:"flex!important",alignItems:"center",width:"35px",left:"0px",fontSize:"24px",justifyContent:"center","&:before":{display:"none"},"&:hover":{color:"unset"},"&.slick-disabled":{display:"none !important"},borderRight:"1px solid"}})),S=(0,u.Ay)("img",{name:"StickerPicker",slot:"tabImg"})(({theme:e})=>({height:24,maxWidth:32})),w=(0,u.Ay)("div",{name:"NavStickerStyled"})(({theme:e})=>{var t;return{display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:"1px solid",borderColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary}}),A=(0,u.Ay)(s.A,{name:"EmptySticker"})(({theme:e})=>({display:"flex",flexDirection:"column",color:e.palette.text.secondary,alignItems:"center",justifyContent:"center",height:"100%"})),C=(0,u.Ay)(o.s4,{name:"iconEmpty"})(({theme:e})=>({fontSize:e.mixins.pxToRem(26),marginBottom:e.spacing(1)})),P=(0,u.Ay)("div",{name:"nextButton"})(({theme:e})=>({zIndex:99,background:`${e.palette.background.paper}!important`,height:"100%!important",color:`${e.palette.text.primary} !important`,borderColor:`${e.palette.border.secondary}!important`,"& span":{padding:e.spacing(1)}}));function I({onStickerClick:e}){var t;let{dispatch:i,i18n:u,ListView:I,getSetting:_}=(0,r.PCX)(),[T,z]=f.useState(-1),L=_("sticker.maximum_recent_sticker_can_create"),j=(0,r.IgF)(k.or,k.dF,"viewMyStickerSet"),R=(0,r.IgF)(k.or,k.or,"viewRecentSticker"),D=(0,r.IgF)(k.or,k.or,"viewByStickerSet"),M=`${null==j?void 0:j.apiUrl}?${h.stringify(null==j?void 0:j.apiParams)}`,F="sticker/myRecentSet",O=(0,l.d4)(e=>(0,r.qRQ)(e,F))||(0,r.KCW)(),U=(0,l.d4)(e=>(0,r.qRQ)(e,M))||(0,r.KCW)(),W=(t=U.ids,(0,l.d4)(e=>(0,a.tf)(e,t)));f.useEffect(()=>{i({type:"sticker/openStickerPickerDialog"})},[]);let $=f.useCallback(e=>{z(e)},[]),B=()=>{i({type:"sticker/openDialogSticker"})},q=()=>{i({type:r.Bq6,payload:{apiUrl:null==j?void 0:j.apiUrl,apiParams:{...null==j?void 0:j.apiParams,limit:8},pagingId:M,canLoadMore:!0}})};f.useEffect(()=>{O.ended&&W.length&&!(null==O?void 0:O.ids.length)&&z(0)},[null==O?void 0:O.ids.length,O.ended,W.length]);let K={infinite:!1,speed:400,slidesToShow:6,slidesToScroll:4,autoplay:!1,loop:!1,nextArrow:f.createElement(P,null,f.createElement(o.s4,{icon:"ico-angle-right",onClick:q})),prevArrow:f.createElement(P,null,f.createElement(o.s4,{icon:"ico-angle-left"}))},Q=f.createElement(A,null,f.createElement(C,{icon:"ico-sticker"}),f.createElement(d.A,{textAlign:"center"},u.formatMessage({id:"no_sticker_used_yet"})));return f.createElement(p.A,{sx:{width:272,height:280,display:"flex",flexDirection:"column",zIndex:1400,bgcolor:"background.paper",paddingTop:1,backgroundImage:"unset"},"data-testid":"popupStickerPicker "},f.createElement(s.A,{sx:{flex:1,overflowY:"hidden"}},f.createElement(n.P,{autoHeightMax:240,scrollbarWidth:!1},f.createElement(I,x({dataSource:-1===T?R:{apiUrl:D.apiUrl,apiParams:(0,c.A8)(D.apiParams,{id:W[T].id})}},-1===T&&{pagingId:F,displayLimit:L},{emptyPage:-1===T?Q:"hide",errorPage:"hide",itemView:"sticker.itemView.mainCard",canLoadMore:-1!==T,blockLayout:"App List"},-1!==T&&{numberOfItemsPerPage:20,canLoadSmooth:!0},{handleActionItem:e,gridContainerProps:{style:{width:"100%",marginLeft:0},spacing:2},gridItemProps:{xs:3,md:3,sm:3,xl:3,lg:3}})))),f.createElement(w,null,f.createElement(b,null,f.createElement(E,null,f.createElement(y.A,x({},K),f.createElement(v,{active:-1===T,role:"button",onClick:()=>$(-1)},f.createElement(m.A,{title:u.formatMessage({id:"recent_stickers"}),placement:"bottom"},f.createElement(o.s4,{sx:{fontSize:"1.125rem"},icon:"ico-clock-o"}))),W.map((e,t)=>f.createElement(v,{active:T===t,role:"button",onClick:()=>$(t),key:t.toString()},f.createElement(m.A,{title:e.title,placement:"bottom"},f.createElement(S,{draggable:!1,alt:"tabItem",height:"24px",src:(0,c.AE)(null==e?void 0:e.image,"200")}))))))),f.createElement(g.A,{color:"primary",onClick:B},f.createElement(o.s4,{sx:{fontSize:"1.125rem"},icon:"ico-plus"}))))}}}]);