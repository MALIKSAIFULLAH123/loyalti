"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["statusComposerControl"],{13502(e,t,o){o.r(t),o.d(t,{default:()=>C});var a=o(67725),r=o(96540),l=o(91557),n=o(3556),i=o(97763),d=o(1882),s=o.n(d);let c="AttachBackgroundStatus",u=(0,n.Ay)("div",{name:c,slot:"root"})(({theme:e})=>({display:"flex",flexWrap:"wrap"})),m=(0,n.Ay)("div",{name:c,slot:"root"})(({theme:e})=>({cursor:"pointer",display:"inline-flex",padding:e.spacing(.5)})),p=(0,n.Ay)("div",{name:c,slot:"root"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center"})),g=(0,n.Ay)("div",{name:c,slot:"root"})(({theme:e})=>({width:24,height:24,borderRadius:e.shape.borderRadius/2,border:0,backgroundImage:"linear-gradient(to top, #7ed290, #076e1e);"})),f=(0,n.Ay)("div",{name:c,slot:"root"})(({theme:e})=>({width:24,height:24,borderRadius:e.shape.borderRadius/2,border:"1px solid rgba(0,0,0,0.2)",backgroundColor:e.mixins.backgroundColor("paper")}));function v(e){let{onClear:t,onSelectItem:o}=e,[a,n]=r.useState(e.selectedId),{i18n:d,dialogBackend:c}=(0,l.PCX)(),v=r.useCallback(e=>{n(e.id),s()(o)&&o(e)},[o]),b=r.useCallback(()=>{n(0),s()(t)&&t()},[t]),h=()=>{c.present({component:"bgstatus.dialog.BgStatusPicker",props:{onSelectItem:v,onClear:b,selectedId:a}})};return r.createElement(u,null,r.createElement(i.A,{title:d.formatMessage({id:"select_background_status"})},r.createElement(m,null,r.createElement(p,{"aria-label":"select_background_status","data-testid":"selectBackgroundStatusButton",onClick:h,role:"button"},r.createElement(g,null)))),a>0&&r.createElement(i.A,{title:d.formatMessage({id:"remove_background_status"})},r.createElement(m,null,r.createElement(p,{"data-testid":"removeBackgroundStatusButton","aria-label":"remove_background_status",onClick:b,role:"button"},r.createElement(f,null)))))}var b=o(24279);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e}).apply(this,arguments)}function C({composerRef:e,editorRef:t,disabled:o,value:l,isEdit:n,focusToEndText:i,...d}){var s,c,u;let m=()=>{e.current.removeBackground(n),i&&i()},p=t=>{let o={fontSize:"28px",color:(null==t?void 0:t.text_color)||"white",fontWeight:"bold",textAlign:"center",backgroundSize:"cover",backgroundImage:`url("${(0,a.AE)(t.image)}")`,minHeight:371,marginTop:"16px",marginBottom:"16px",cursor:"text","& a":{color:(null==t?void 0:t.text_color)||"white"},...(null==t?void 0:t.text_color)?{"& .editor-placeholder":{color:(0,b.X4)(null==t?void 0:t.text_color,.7)}}:{}};e.current.setBackground({className:"withBackgroundStatus",textAlignment:"center",item:t,editorStyle:o}),setImmediate(()=>{i&&i()})};return o?null:r.createElement(v,h({},d,{selectedId:(null==l?void 0:l.status_background_id)||(null===(s=e.current.state.attachments)||void 0===s?void 0:null===(c=s.statusBackground)||void 0===c?void 0:null===(u=c.value)||void 0===u?void 0:u.id),onClear:m,onSelectItem:p}))}},77597(e,t,o){o.r(t),o.d(t,{default:()=>i});var a=o(91557),r=o(58156),l=o.n(r),n=o(96540);function i({control:e,disabled:t,composerRef:o}){let{i18n:r,dialogBackend:i}=(0,a.PCX)(),{setTags:d}=o.current;if(!a.uO7)return null;let s=()=>i.present({component:"core.dialog.PlacePickerDialog",props:{defaultValue:l()(o.current.state,"tags.place.value")}}).then(e=>{!1===e?d("place",{as:"StatusComposerControlTaggedPlace",priority:3,value:void 0}):e&&d("place",{as:"StatusComposerControlTaggedPlace",priority:3,value:e})});return n.createElement(e,{disabled:t,onClick:s,testid:"buttonAttachLocation",icon:"ico-checkin-o",label:r.formatMessage({id:"checkin"}),title:r.formatMessage({id:t?"this_cant_be_combined":"checkin"})})}},69099(e,t,o){o.r(t),o.d(t,{default:()=>p});var a=o(91557),r=o(3556),l=o(62193),n=o.n(l),i=o(96540),d=o(72180),s=o(92885);function c({onClick:e,testid:t,label:o,canUploadTypes:r}){let{i18n:l}=(0,a.PCX)();return i.createElement(s.A,{sx:{fontWeight:400,cursor:"pointer"},color:"primary",onClick:e,"data-testid":t},l.formatMessage({id:o||"add_photos_video"},r?{allowVideo:(null==r?void 0:r.video)?1:0,allowPhoto:(null==r?void 0:r.photo)?1:0}:{}))}let u=(0,r.Ay)("div")(({theme:e})=>({display:"flex",margin:e.spacing(0,1.5)})),m=(0,r.Ay)("div")(({theme:e})=>({display:"flex",flexDirection:"row"}));function p(e){let[t,,o]=(0,d.A)(),{useSession:r,dispatch:l,jsxBackend:s,usePageParams:p}=(0,a.PCX)(),{user:g}=r(),{label:f}=e,v=p(),{identity:b,resource_name:h}=v;o.current.requestComposerUpdate=i.useCallback(()=>{setImmediate(()=>{let{attachmentType:e,attachments:t}=o.current.state;l({type:"statusComposer/onPress/status",payload:{data:{attachmentType:e,attachments:{[e]:t[e]}},parentIdentity:b,parentType:h}})})},[o,l,b,h]);let C=()=>{o.current.removeAttachments()};return n()(g)?null:i.createElement(m,{"data-testid":"addPhotoButton"},i.createElement(u,{onClick:C},s.render({component:"statusComposer.control.StatusUploadPhotoButton",props:{strategy:"block",composerRef:o,composerState:t,control:c,label:f}})))}},46532(e,t,o){o.r(t),o.d(t,{default:()=>i});var a=o(91557),r=o(58156),l=o.n(r),n=o(96540);function i({control:e,disabled:t,composerRef:o}){let{i18n:r,dispatch:i}=(0,a.PCX)(),{setScheduleTime:d,state:s}=o.current,c=()=>{i({type:"statusComposer/openScheduleFeed",payload:{value:l()(s,"schedule_time.value"),setScheduleTime:d}})};return n.createElement(e,{disabled:t,onClick:c,testid:"buttonFeedSchedule",icon:"ico-clock-o",label:r.formatMessage({id:"schedule"}),title:r.formatMessage({id:t?"this_cant_be_combined":"schedule"})})}},5483(e,t,o){o.r(t),o.d(t,{default:()=>i});var a=o(91557),r=o(58156),l=o.n(r),n=o(96540);function i({control:e,composerRef:t,disabled:o,parentIdentity:r,parentType:i,userIdentity:d}){let{i18n:s,dispatch:c}=(0,a.PCX)(),u=(0,a.dx2)(r),m="group"===i&&(null==u?void 0:u.reg_method)?"member":"other",p=e=>{let{setTags:o}=t.current;o("friends",{as:"StatusComposerControlTaggedFriends",priority:1,value:e})},g=()=>{c({type:"friend/friendPicker",payload:{forceUpdateValueOnClose:!0,users:l()(t.current.state,"tags.friends.value"),parentIdentity:r,parentType:i,userIdentity:d},meta:{onSuccess:p}})};return n.createElement(e,{icon:"ico-user1-plus-o",testid:"statusTagFriendsButton",disabled:o,title:s.formatMessage({id:o?"this_cant_be_combined":"tag_feed_type"},{tagType:m}),label:s.formatMessage({id:"tag_feed_type"},{tagType:m}),onClick:g})}},70703(e,t,o){o.r(t),o.d(t,{default:()=>l});var a=o(91557),r=o(96540);function l(e){let{i18n:t,usePageParams:o,compactUrl:l}=(0,a.PCX)(),{control:n,disabled:i,label:d}=e,{profile_id:s}=o();return r.createElement(n,{disabled:i,testid:"livestreamingCreate",href:l(s?"/live-video/add?owner_id=:profile_id":"/live-video/add",{profile_id:s}),icon:"ico-videocam-o",label:d,title:t.formatMessage({id:"live_video"})})}},34066(e,t,o){o.r(t),o.d(t,{default:()=>i});var a=o(91557),r=o(96540),l=o(62188),n=o(18422);function i(e){let{i18n:t}=(0,a.PCX)(),{control:o,disabled:i,label:d,parentIdentity:s}=e,c=(0,a.dx2)(s),u=r.useRef(),m=e=>{e.currentTarget.value=null},{acceptTypes:p,canUploadVideo:g,canUploadPhoto:f}=(0,n.A)({parentUser:c}),[v,b]=(0,l.A)(e.composerRef,u,{parentUser:c});if(p.length)return r.createElement(r.Fragment,null,r.createElement(o,{disabled:i,testid:"attachPhoto",onClick:b,icon:"ico-photos-alt-o",label:d,title:t.formatMessage({id:i?"this_cant_be_combined":"upload_media"}),canUploadTypes:{video:g,photo:f}}),r.createElement("input",{onChange:v,multiple:!0,onClick:m,"data-testid":"inputAttachPhoto",ref:u,className:"srOnly",type:"file",accept:p}))}},74026(e,t,o){o.r(t),o.d(t,{default:()=>l});var a=o(91557),r=o(96540);function l(e){let{control:t,disabled:o,composerRef:l}=e,{i18n:n,dialogBackend:i}=(0,a.PCX)(),d=r.useCallback(()=>{i.present({component:"video.dialog.AddVideoToStatusComposerDialog",props:{}})},[l,i]);return r.createElement(t,{onClick:d,disabled:o,testid:"buttonAttachVideo",title:n.formatMessage({id:"video_url"}),label:n.formatMessage({id:"video_url"}),icon:"ico-video-url"})}}}]);