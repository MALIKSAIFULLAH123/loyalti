(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["story"],{24713(e,t,i){var r=i(2523),n=i(15389),o=i(61489),l=Math.max;e.exports=function(e,t,i){var a=null==e?0:e.length;if(!a)return -1;var d=null==i?0:o(i);return d<0&&(d=l(a+d,0)),r(e,n(t,3),d)}},20957(e,t,i){"use strict";i.d(t,{A:()=>C});var r=i(91557),n=i(44562),o=i(91262),l=i(40515),a=i(67725),d=i(3556),s=i(8051),u=i(84058),c=i.n(u),p=i(96540);let m="AddItemCard",v=(0,d.Ay)(s.A,{name:m,slot:"root",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({width:"140px",height:"250px",marginRight:e.spacing(1),borderRadius:e.shape.borderRadius,overflow:"hidden",position:"relative",background:e.palette.background.paper,cursor:"pointer",border:e.mixins.border("secondary")})),g=(0,d.Ay)(s.A,{name:m,slot:"RootAvatar"})(({theme:e})=>({marginRight:e.spacing(2),borderRadius:e.shape.borderRadius,overflow:"hidden",position:"relative",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"flex-start"})),y=(0,d.Ay)(s.A,{name:m,slot:"WrapperAvatar",shouldForwardProp:e=>"hasLiveVideo"!==e})(({theme:e,hasLiveVideo:t})=>({marginBottom:e.spacing(1),position:"relative",...t&&{marginBottom:0}})),h=(0,d.Ay)("img",{name:m,slot:"img"})(({theme:e})=>({width:"100%",height:"calc(100% - 50px)",objectFit:"cover"})),f=(0,d.Ay)("div",{name:m,slot:"background"})(({theme:e})=>({width:"100%",height:"calc(100% - 50px)",color:"#fff",fontSize:e.mixins.pxToRem(28),display:"flex",justifyContent:"center",alignItems:"center"})),x=(0,d.Ay)(s.A,{name:m,slot:"NewStory"})(({theme:e})=>({position:"absolute",bottom:0,height:"50px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",fontWeight:e.typography.fontWeightSemiBold})),b=(0,d.Ay)(s.A,{name:m,slot:"ButtonAdd-mobile"})(({theme:e})=>({position:"absolute",bottom:0,right:0,width:"26px",height:"26px",backgroundColor:e.palette.primary.main,borderRadius:"50%",cursor:"pointer",borderStyle:"solid",borderColor:e.palette.background.paper,borderWidth:"1.5px",zIndex:99})),A=(0,d.Ay)(s.A,{name:m,slot:"ButtonAdd"})(({theme:e})=>({position:"absolute",top:0,left:"50%",transform:"translate(-50%, -50%)",width:"40px",height:"40px",backgroundColor:e.palette.primary.main,borderRadius:"50%",marginBottom:e.spacing(1.5),cursor:"pointer",borderStyle:"solid",borderColor:e.palette.background.paper,borderWidth:e.spacing(.5)})),E=(0,d.Ay)(l.s4,{shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({fontSize:e.mixins.pxToRem(16),color:"#fff",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",...t&&{fontSize:e.mixins.pxToRem(12)}})),w=(0,d.Ay)(s.A)(({theme:e})=>({fontSize:e.mixins.pxToRem(13),width:"100%",textAlign:"center",color:e.palette.primary.main})),C=function({title:e="create_story",preventShowAvatar:t=!1,canCreate:i=!0}){var d;let{useSession:u,i18n:m,navigate:C,getSetting:S}=(0,r.PCX)(),k=(0,r.alo)(!0),{user:R}=u(),{has_live_story:_}=R||{},I=S("story.home_page_style"),P=(0,a.cb)((null==R?void 0:R.full_name)||(null==R?void 0:R.title)),z=null!==(d=null==R?void 0:R.title)&&void 0!==d?d:(null==R?void 0:R.full_name)||"NaN",M=(0,a.AE)(null==R?void 0:R.avatar,"200x200"),L={};M||(L.backgroundColor=a.m6.hex(P||""));let B=null==R?void 0:R.can_view_story,W=()=>{C("/story/add")},$=()=>{if(B){C(`/story/${null==R?void 0:R.id}`);return}W()},F=e=>{e.stopPropagation(),W()};return(B||!B&&i)&&!t&&I===o.gw.Avatar?p.createElement(g,{"data-testid":c()("storyAddItemCard"),onClick:$,maxWidth:n.Zw},p.createElement(y,{hasLiveVideo:_},p.createElement(l.H8,{user:R,size:n.Zw,hoverCard:!1,noStory:!B,sx:{pointerEvents:"none"},showLiveStream:!0,showStatus:!1}),i?p.createElement(b,{"data-testid":c()("storyAddIconCard"),onClick:F},p.createElement(E,{icon:"ico-plus",isMobile:k})):null),p.createElement(w,{onClick:$},m.formatMessage({id:e}))):i?p.createElement(v,{"data-testid":c()("storyAddItemCard"),onClick:W,isMobile:k},M?p.createElement(h,{src:M,"data-testid":"storyImageAdd",alt:z,style:L}):p.createElement(f,{"data-testid":"storyImageAdd",style:L},p.createElement("span",null,P)),p.createElement(x,null,p.createElement(A,null,p.createElement(E,{icon:"ico-plus"})),p.createElement(s.A,{mt:2},m.formatMessage({id:e})))):null}},90173(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>B});var r=i(91557),n=i(3556),o=i(96540),l=i(40515),a=i(8051),d=i(2339),s=i(84058),u=i.n(s);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let p="slider_story",m=(0,n.Ay)(a.A,{name:p})(()=>({width:"100%",position:"relative"})),v=(0,n.Ay)(a.A,{name:p,shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({width:"100%",overflow:"hidden",position:"relative",...t&&{overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"}}})),g=(0,n.Ay)(a.A,{name:p})(({theme:e})=>({display:"inline-flex",width:"auto",transition:"all 500ms ease"})),y=(0,n.Ay)(a.A,{name:"Slider",slot:"arrowNav",overridesResolver:(e,t)=>[t.arrowNav],shouldForwardProp:e=>"isShowAvatar"!==e&&"hide"!==e})(({theme:e,isShowAvatar:t})=>({zIndex:99,background:`${e.palette.background.paper}!important`,color:`${e.palette.text.secondary}!important`,border:e.mixins.border("secondary"),width:"48px",height:"48px",display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",position:"absolute",top:"50%",cursor:"pointer","& span":{fontWeight:e.typography.fontWeightSemiBold,fontSize:e.mixins.pxToRem(18)},...t&&{width:"36px",height:"36px"}})),h=e=>(null==e?void 0:e.hide)?null:o.createElement(y,c({},e),o.createElement(l.s4,{icon:"ico-angle-right"})),f=e=>(null==e?void 0:e.hide)?null:o.createElement(y,c({},e),o.createElement(l.s4,{icon:"ico-angle-left"}));function x({children:e,loadMore:t,showArrow:i=!0,ended:r,isMobile:n,total:l,isShowAvatar:s}){var c,p;let y=o.useRef(),x=o.useRef(),[b,A]=o.useState(0),E=(null===(c=y.current)||void 0===c?void 0:c.clientWidth)||0,w=(null===(p=x.current)||void 0===p?void 0:p.scrollWidth)||0,[C,S]=o.useState(!1),k=E/2,R=o.useRef(),_=()=>{var e,t;let i=(null===(e=y.current)||void 0===e?void 0:e.clientWidth)||0,r=(null===(t=x.current)||void 0===t?void 0:t.scrollWidth)||0;S(r>i)};o.useEffect(()=>{var e;if(y.current)return R.current=new ResizeObserver(()=>{_()}),null===(e=R.current)||void 0===e||e.observe(y.current),()=>null==R?void 0:R.current.disconnect()},[_,y.current,l]),o.useEffect(()=>{C&&w-E-b<0&&A(w-E)},[b,E,w,C]);let I=()=>{A(e=>{let t=w-e-E;if(t<k+250)return e+t;let i=Math.min(t,k);return i<0?e:e<0?i:e+i})},P=()=>{A(e=>e<k+250?0:Math.max(e-k,0))};return(0,d.A)(n&&t?t:void 0,y),o.useEffect(()=>{!n&&(x||x.current)&&!r&&(w-b)/2<=E&&t&&t()},[x.current,t,r,w,b,E,n]),o.createElement(m,{"data-testid":u()("storySlider")},o.createElement(v,{ref:y,isMobile:n},o.createElement(g,{ref:x,sx:{transform:`translateX(-${b}px)`}},e)),i&&C&&!n?o.createElement(a.A,null,o.createElement(f,{"data-testid":u()("storySliderArrowPrev"),sx:{left:12,transform:"translate(0,-50%)"},hide:b<=0,onClick:P,isShowAvatar:s}),o.createElement(h,{"data-testid":u()("storySliderArrowNext"),sx:{right:12,transform:"translate(0,-50%)"},onClick:I,hide:w-E-b<=0,isShowAvatar:s})):null)}var b=i(86663),A=i(71468),E=i(84680),w=i(44562),C=i(20957),S=i(62193),k=i.n(S),R=i(90179),_=i.n(R),I=i(23181),P=i.n(I),z=i(91262);function M(){let{jsxBackend:e,getAcl:t}=(0,r.PCX)(),i=t("story.story.create"),n=e.get("story.ui.createStory");return i&&n?o.createElement(E.eB,null,o.createElement(E.tD,null,o.createElement(n,null))):null}let L=(0,n.Ay)("div",{slot:"ContainerList"})(({theme:e})=>({width:"100%",margin:e.spacing(0),padding:e.spacing(0),"& .slick-track":{display:"flex",flexWrap:"nowrap",width:"100% !important",flexDirection:"row",margin:0},"& .slick-initialized .slick-slide":{display:"flex","& > div":{width:"100%",height:"100%"}},"& .slick-list":{cursor:"pointer"},"& .slick-next":{display:"flex!important",alignItems:"center",width:"42px",height:"42px",right:"12px",fontSize:"22px",justifyContent:"center",borderLeft:"1px solid",borderRight:"1px solid",borderRadius:"50%","&:before":{display:"none"},"&:hover":{color:"unset"},"&.slick-disabled":{display:"none !important"}},"& .slick-prev":{display:"flex!important",alignItems:"center",width:"42px",height:"42px",left:"12px",fontSize:"22px",justifyContent:"center",borderLeft:"1px solid",borderRight:"1px solid",borderRadius:"50%","&:before":{display:"none"},"&:hover":{color:"unset"},"&.slick-disabled":{display:"none !important"}}})),B=(0,r.WvA)({extendBlock:function(e){var t;let{i18n:i,dispatch:n,jsxBackend:l,useGetItems:a,compactData:d,usePageParams:s,getAcl:u,useIsMobile:c,getSetting:p,useFetchDetail:m}=(0,r.PCX)(),[v,g]=o.useState([]),y=c(),h=p("story.home_page_style"),f=u("story.story.create"),S=u("story.story.view"),R=u("story.story.moderate"),I=(0,r.IgF)(w.ap,w.fA,"getFriendSuggest"),[B,W,$]=m({dataSource:I,pageParams:{limit:10},normalize:!0}),F=!W||k()(I);o.useEffect(()=>{W||g($||k()(B)?[]:B)},[B,W,$]);let T=e=>{if(!e)return;let t=v.filter(t=>t.id!==e);g(t),n({type:"story/sugestion/hideUser",payload:{user_id:e}})},O=o.useMemo(()=>h===z.gw.Avatar,[h]),N=o.useMemo(()=>O?l.get("story.itemView.userSugestionAvatarCard"):l.get("story.itemView.userSugestionCard"),[O]),U=o.useMemo(()=>O?l.get("story.itemView.storyAvatarCard"):l.get("story.itemView.storyCard"),[O]),X=o.useMemo(()=>O?l.get("story.itemView.storyAvatarCard.skeleton"):l.get("story.itemView.storyCard.skeleton"),[O]),D=s(),V=(0,r.IgF)(w.ap,w.fA,"viewAll"),j=d(null==V?void 0:V.apiParams,D,null==V?void 0:V.apiRules),Z=`${null==V?void 0:V.apiUrl}?${b.stringify(_()(j,["page"]))}`,H=(0,A.d4)(e=>(0,r.qRQ)(e,Z))||(0,r.KCW)(),{initialized:q,loading:Q,error:Y}=null!=H?H:{},J=a(H.ids),K=(0,r.DYL)(Z),G=o.useMemo(()=>{var e;return!$&&null!=v&&!!v.length&&(null==H?void 0:null===(e=H.ids)||void 0===e?void 0:e.length)<3},[$,null==v?void 0:v.length,null==H?void 0:null===(t=H.ids)||void 0===t?void 0:t.length]);o.useEffect(()=>(ee(r.m6s),()=>{n({type:r.Nhn,payload:{pagingId:Z},meta:{abortId:K}})}),[Z,K]);let ee=o.useCallback((e=r.Bq6)=>{G||n({type:e,payload:{apiUrl:null==V?void 0:V.apiUrl,apiParams:j,pagingId:Z,canLoadMore:!0,numberOfItemsPerPage:15},meta:{abortId:K}})},[j,V,Z,K,G]);return Y||q&&F&&k()(J)&&k()(v)?o.createElement(M,null):q&&F?o.createElement(E.eB,null,o.createElement(E.tD,null,o.createElement(L,null,o.createElement(x,{loadMore:ee,loadMoreLoading:Q,ended:null==H?void 0:H.ended,isMobile:y,isShowAvatar:O,total:G?J.length+(null==v?void 0:v.length):J.length,key:"story-slider"},o.createElement(C.A,{title:O?"my_story":"create_story",canCreate:f}),R||S?J.map(e=>o.createElement(U,{key:null==e?void 0:e.id,identity:null==e?void 0:e._identity})):null,G?v.map(e=>o.createElement(N,{key:null==e?void 0:e.id,item:e,onRemove:()=>T(null==e?void 0:e.id)})):null,!X||(null==H?void 0:H.ended)?null:o.createElement(X,null))))):X?o.createElement(E.eB,null,o.createElement(E.tD,null,o.createElement(L,null,o.createElement(x,{showArrow:!1,loadMore:ee},P()(0,O?15:6).map(e=>o.createElement(X,{key:e.toString()})))))):o.createElement("div",null,i.formatMessage({id:"loading_dots"}))},defaults:{blockLayout:"Story - Listing - Feed",itemView:"story.itemView.storyCard",gridLayout:"Story - Story Card",itemLayout:"Story - Story Card",canLoadMore:!0},overrides:{showWhen:["truthy","setting.story"]}})},2339(e,t,i){"use strict";i.d(t,{A:()=>l});var r=i(38221),n=i.n(r),o=i(96540);function l(e,t){return o.useEffect(()=>{let i=null==t?void 0:t.current;if(!e||!i)return()=>void 0;let r=()=>{200>i.scrollWidth-i.scrollLeft-i.clientWidth&&e()},o=n()(r,200,{leading:!0});return i.addEventListener("scroll",o),()=>i.removeEventListener("scroll",o)},[e]),e}},70558(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>m});var r=i(91557),n=i(40515),o=i(3556),l=i(8051),a=i(87773),d=i(96540);let s="AddStory",u=(0,o.Ay)(l.A,{name:s,slot:"root"})(({theme:e})=>({display:"flex",alignItems:"center",cursor:"pointer",padding:e.spacing(1),margin:e.spacing(0,1),":hover":{backgroundColor:e.palette.action.hover,borderRadius:e.shape.borderRadius}})),c=(0,o.Ay)(l.A,{name:s,slot:"ButtonAdd"})(({theme:e})=>({position:"relative",width:"48px",height:"48px",backgroundColor:e.palette.background.default,borderRadius:"50%",cursor:"pointer",border:"light"===e.palette.mode?e.mixins.border("secondary"):"none"})),p=(0,o.Ay)(n.s4)(({theme:e})=>({fontSize:e.mixins.pxToRem(16),fontWeight:e.typography.fontWeightBold,color:e.palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),m=function(){let{getAcl:e,i18n:t,navigate:i}=(0,r.PCX)(),n=e("story.story.create"),o=d.useCallback(()=>{i("/story/add")},[]);return n?d.createElement(u,{"data-testid":"addStoryBlock",onClick:o},d.createElement(c,null,d.createElement(p,{icon:"ico-plus"})),d.createElement(a.A,{variant:"h5",color:"text.primary",ml:2},t.formatMessage({id:"create_story"}))):null}},71149(e,t,i){"use strict";i.d(t,{A:()=>l});var r=i(91557),n=i(97763),o=i(96540);function l({className:e,value:t,shorten:i,component:l="span",formatTooltip:a="llll",format:d}){let{moment:s}=(0,r.PCX)();if(!t)return null;let u=s(t).diff(s(),"minute")/60;u<-23&&u>=-24&&(u=-23);let c=s.duration(60*u,"minute").humanize(!i,{h:24});d&&u<-24&&(c=s(t).format(d));let p=s(t),m=p.format(a);return o.createElement(n.A,{title:m},o.createElement(l,{role:"link",className:e,"aria-label":m},c))}},951(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>E});var r=i(91557),n=i(44562),o=i(40515),l=i(67725),a=i(3556),d=i(8051),s=i(87773),u=i(95093),c=i.n(u),p=i(96540);let m="StoryMainCard",v=(0,a.Ay)(d.A,{name:m,slot:"WrapperBox",shouldForwardProp:e=>"height"!==e})(({theme:e,height:t})=>({width:"100%",paddingBottom:`${100*n.us}%`,position:"relative","&:before":{position:"absolute",top:0,left:0,right:0,height:0,boxShadow:"0px 20px 55px 20px rgba(0,0,0,0.5)",content:'""',zIndex:2},"&:after":{position:"absolute",bottom:0,left:0,right:0,height:0,boxShadow:"0px 20px 55px 50px rgba(0,0,0,0.5)",content:'""',zIndex:2},"&:hover":{cursor:"pointer"}})),g=(0,a.Ay)(d.A,{name:m})(({theme:e})=>({position:"absolute",height:"100%",width:"100%"})),y=(0,a.Ay)("div",{name:"PreviewDv",slot:"Root",shouldForwardProp:e=>"imageUrl"!==e})(({theme:e,imageUrl:t})=>({display:"flex",alignItems:"center",height:"100%",width:"100%",borderRadius:e.shape.borderRadius,backgroundImage:`url(${t})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"})),h=(0,a.Ay)(d.A)(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:3,padding:e.spacing(1),color:"#fff",fontWeight:e.typography.fontWeightBold})),f=(0,a.Ay)(d.A)(({theme:e})=>({position:"absolute",bottom:0,left:0,padding:e.spacing(1),display:"flex",zIndex:3,alignItems:"center"})),x=(0,a.Ay)(o.s4)(({theme:e})=>({color:"#fff",marginRight:e.spacing(1),fontSize:e.mixins.pxToRem(14),fontWeight:e.typography.fontWeightMedium})),b=(0,a.Ay)(s.A)(({theme:e})=>({color:"#fff",fontSize:e.mixins.pxToRem(14)}));function A({item:e,wrapAs:t,wrapProps:i}){let{assetUrl:n,navigate:a,useSession:d}=(0,r.PCX)(),{user:s}=d();if(!(null==e?void 0:e.image)||!e)return null;let{image:u,statistic:m,creation_date:A}=e||{},E=(0,l.AE)(u,"240",n("story.no_image")),w=()=>{a(`/story-archive/${null==s?void 0:s.id}/${null==e?void 0:e.id}?date=${A}`)};return p.createElement(o.ne,{wrapAs:t,wrapProps:i,testid:"story-archive-card"},p.createElement(v,{onClick:w},p.createElement(g,null,p.createElement(y,{key:E,imageUrl:E})),A?p.createElement(h,null,c()(A).format("ll")):null,(null==m?void 0:m.total_view)?p.createElement(f,null,p.createElement(x,{icon:"ico-eye-o"}),p.createElement(b,{variant:"h5",color:"text.primary"},null==m?void 0:m.total_view)):null))}A.displayName="StoryArchiveMainCard";let E=(0,r.FB$)(A,()=>{})},35060(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>v});var r=i(91557),n=i(44562),o=i(40515),l=i(3556),a=i(8051),d=i(96540);let s="StoryAvatarCard",u=(0,l.Ay)(a.A,{name:s,slot:"itemview"})(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",marginRight:e.spacing(2),borderRadius:e.shape.borderRadius,overflow:"hidden",position:"relative","&:hover":{cursor:"pointer"},"&:last-child":{marginRight:0}})),c=(0,l.Ay)(a.A,{name:s,slot:"ItemMediaStyled",shouldForwardProp:e=>"hasLiveVideo"!==e})(({theme:e,hasLiveVideo:t})=>({marginBottom:e.spacing(1),...t&&{marginBottom:0}})),p=(0,l.Ay)(a.A,{name:s})(({theme:e})=>({width:"100%",textAlign:"center"}));function m({item:e}){let{navigate:t,useTheme:i,useSession:l}=(0,r.PCX)(),a=i(),{user:s}=l(),m=(null==e?void 0:e.id)===(null==s?void 0:s.id);if(m||!e)return null;let{has_live_story:v}=e||{},g=()=>{t("/story",{state:{related_user_id:null==e?void 0:e.id}})};return d.createElement(u,{"data-testid":"story-main-card",onClick:g,maxWidth:n.Zw},d.createElement(c,{hasLiveVideo:v},d.createElement(o.H8,{user:e,size:n.Zw,hoverCard:!1,sx:{pointerEvents:"none"},showLiveStream:!0})),d.createElement(p,null,d.createElement(o.mE,{lines:1,variant:"body1",color:"text.primary",style:{fontSize:a.mixins.pxToRem(13)}},null==e?void 0:e.full_name)))}m.displayName="StoryAvatarCard";let v=(0,r.FB$)(m,()=>{})},41590(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>m});var r=i(40515),n=i(3556),o=i(8051),l=i(52705),a=i(96540);let d="StorySkeletonMainCard",s=(0,n.Ay)(o.A,{name:d,slot:"itemview"})(({theme:e})=>({width:"140px",height:"250px",marginRight:e.spacing(1),borderRadius:e.shape.borderRadius,overflow:"hidden",position:"relative",background:e.palette.background.paper,"&:last-child":{marginRight:0}})),u=(0,n.Ay)(o.A,{name:d})(({theme:e})=>({height:"100%",width:"100%"})),c=(0,n.Ay)(o.A,{name:d})(({theme:e})=>({position:"absolute",top:0,padding:e.spacing(1.5)})),p=(0,n.Ay)(o.A,{name:d})(({theme:e})=>({position:"absolute",bottom:0,padding:e.spacing(1.5)}));function m(){return a.createElement(s,{"data-testid":"story-skeleton-main-card"},a.createElement(u,null,a.createElement(r.nn,{style:{height:"100%"}})),a.createElement(c,null,a.createElement(l.A,{variant:"avatar",width:42,height:42})),a.createElement(p,null,a.createElement(l.A,{width:120})))}},36158(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>x});var r=i(91557),n=i(44562),o=i(40515),l=i(67725),a=i(3556),d=i(8051),s=i(84058),u=i.n(s),c=i(96540);let p="StoryMainCard",m=(0,a.Ay)(d.A,{name:p,slot:"itemview"})(({theme:e})=>({flexBasis:"140px",flexShrink:0,width:"140px",height:"250px",marginRight:e.spacing(1),borderRadius:e.shape.borderRadius,overflow:"hidden",position:"relative",background:e.palette.background.paper,"&:hover":{cursor:"pointer"},"&:last-child":{marginRight:0},"&:before":{position:"absolute",top:0,left:0,right:0,height:0,boxShadow:"0px 20px 55px 20px rgba(0,0,0,0.5)",content:'""',zIndex:2},"&:after":{position:"absolute",bottom:0,left:0,right:0,height:0,boxShadow:"0px 20px 55px 50px rgba(0,0,0,0.5)",content:'""',zIndex:2}})),v=(0,a.Ay)(d.A,{name:p})(({theme:e})=>({height:"100%",width:"100%"})),g=(0,a.Ay)(d.A,{name:p})(({theme:e})=>({position:"absolute",top:0,padding:e.spacing(1.5),zIndex:3})),y=(0,a.Ay)(d.A,{name:p})(({theme:e})=>({position:"absolute",bottom:0,padding:e.spacing(1.25,1.5),width:"100%",zIndex:3})),h=(0,a.Ay)("div",{name:"PreviewDv",slot:"Root",shouldForwardProp:e=>"imageUrl"!==e})(({theme:e,imageUrl:t})=>({display:"flex",alignItems:"center",height:"100%",width:"100%",borderRadius:e.shape.borderRadius,backgroundImage:`url(${t})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}));function f({item:e}){let{assetUrl:t,useGetItems:i,navigate:a,useSession:d,i18n:s}=(0,r.PCX)(),p=i(null==e?void 0:e.stories),{user:f}=d();if(!e)return null;let x=(null==e?void 0:e.id)===(null==f?void 0:f.id),b=p.find(e=>{var t;return e.type===n.UZ&&(null==e?void 0:null===(t=e.extra_params)||void 0===t?void 0:t.is_streaming)||!1===e.has_seen?e:null}),A=b||p[p.length-1],E=(0,l.AE)((null==A?void 0:A.thumbs)||(null==A?void 0:A.image),"150",t("story.no_image")),w=()=>{a("/story",{state:{related_user_id:null==e?void 0:e.id}})};return c.createElement(m,{"data-testid":u()("story-main-card"),onClick:w},c.createElement(v,null,c.createElement(h,{key:E,imageUrl:E})),c.createElement(g,null,c.createElement(o.H8,{user:e,size:42,hoverCard:!1,sx:{pointerEvents:"none"},showLiveStream:!0})),c.createElement(y,{"data-testid":u()("story-main-card-name")},c.createElement(o.mE,{lines:2,variant:"body1",style:{fontWeight:500,color:"#fff"}},x?s.formatMessage({id:"my_story"}):null==e?void 0:e.full_name)))}f.displayName="StoryMainCard";let x=(0,r.FB$)(f,()=>{})},14415(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>b});var r=i(91557),n=i(40515),o=i(3556),l=i(8051),a=i(63461),d=i(97763),s=i(96540),u=i(771),c=i(44562);let p="UserSugestionAvatarCard",m=(0,o.Ay)(l.A,{name:p,slot:"itemview"})(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",marginRight:e.spacing(2),borderRadius:e.shape.borderRadius,overflow:"hidden",position:"relative","&:hover":{cursor:"pointer"},"&:last-child":{marginRight:0}})),v=(0,o.Ay)(l.A,{name:p})(({theme:e})=>({marginBottom:e.spacing(1)})),g=(0,o.Ay)(l.A,{name:p})(({theme:e})=>({width:"100%",textAlign:"center"})),y=(0,o.Ay)(l.A,{name:p,slot:"WrapperContent"})(({theme:e})=>({position:"relative",display:"flex",justifyContent:"center","&:hover":{"#button-remove":{visibility:"visible"}}})),h=(0,o.Ay)(a.A,{name:p,slot:"ButtonAction",shouldForwardProp:e=>"isTablet"!==e})(({theme:e,isTablet:t})=>({position:"absolute",bottom:0,padding:0,borderRadius:e.spacing(2),width:42,height:28,backgroundColor:(0,u.X4)(e.palette.background.paper,1),color:e.palette.text.primary,"&:hover":{backgroundColor:(0,u.X4)(e.palette.background.paper,1)},...t&&{backgroundColor:"light"===e.palette.mode?e.palette.grey["700"]:e.palette.grey["100"],"&:hover":{backgroundColor:"light"===e.palette.mode?e.palette.grey["700"]:e.palette.grey["100"]},color:"light"===e.palette.mode?"#fff":"#000"}})),f=(0,o.Ay)(n.s4,{name:p,slot:"CloseIcon",shouldForwardProp:e=>"isTablet"!==e})(({theme:e,isTablet:t})=>({position:"absolute",right:0,top:4,zIndex:3,fontSize:e.mixins.pxToRem(14),backgroundColor:e.palette.background.paper,borderRadius:"50%",padding:e.spacing(.5),"&:hover":{cursor:"pointer"},...!t&&{visibility:"hidden"},...t&&{backgroundColor:"light"===e.palette.mode?e.palette.grey["700"]:e.palette.grey["100"],color:"light"===e.palette.mode?"#fff":"#000"}})),x=[{id:c.xl,text:"add_friend",icon:"ico-user3-plus-o",value:"user/addFriend"},{id:c.uY,text:"cancel_request",icon:"ico-user3-minus-o",value:"user/cancelRequest"}];function b({item:e,onRemove:t=()=>{}}){let{dispatch:i,useGetItem:o,useTheme:l,i18n:a,useIsMobile:u}=(0,r.PCX)(),p=l(),b=u(!0),A=o(null==e?void 0:e._identity);if(!A)return null;let{friendship:E,extra:w,_identity:C}=A||{},S=E!==c.xl||(null==w?void 0:w.can_add_friend)?x.find(e=>e.id===A.friendship):void 0;return s.createElement(m,{"data-testid":"user-sugestion-card",maxWidth:c.Zw},s.createElement(y,null,s.createElement(d.A,{title:a.formatMessage({id:"remove"})},s.createElement(f,{id:"button-remove",icon:"ico-close",onClick:t,isTablet:b})),s.createElement(v,null,s.createElement(n.H8,{user:A,size:c.Zw,hoverCard:`/user/${null==A?void 0:A.id}`})),S&&s.createElement(d.A,{title:a.formatMessage({id:(null==S?void 0:S.text)||"add"}),placement:"bottom"},s.createElement(h,{isTablet:b,onClick:()=>i({type:S.value,payload:{identity:C}})},s.createElement(n.s4,{style:{fontSize:14},icon:S.icon||"ico-user-man-plus"})))),s.createElement(g,null,s.createElement(n.mE,{lines:1,variant:"body1",color:"text.primary",style:{fontSize:p.mixins.pxToRem(13)}},s.createElement(n.xE,{to:null==A?void 0:A.link,user:A,underline:"none",hoverCard:`/user/${null==A?void 0:A.id}`}))))}b.displayName="UserSugestionAvatarCard"},45238(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>A});var r=i(91557),n=i(40515),o=i(3556),l=i(8051),a=i(60780),d=i(63461),s=i(96540),u=i(771),c=i(44562);let p="UserSugestionCard",m=(0,o.Ay)(l.A,{name:p,slot:"itemview"})(({theme:e})=>({flexBasis:"140px",flexShrink:0,width:"140px",height:"250px",marginRight:e.spacing(1),borderRadius:e.shape.borderRadius,overflow:"hidden",position:"relative",background:e.palette.background.paper,"&:last-child":{marginRight:0},display:"flex",justifyContent:"center",flexDirection:"column",padding:e.spacing(1),border:e.mixins.border("secondary"),"&:hover":{"#button-remove":{visibility:"visible"}}})),v=(0,o.Ay)(l.A,{name:p,slot:"WrapperContent"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",flex:1})),g=(0,o.Ay)(l.A,{name:p})(({theme:e})=>({})),y=(0,o.Ay)(l.A,{name:p,slot:"ItemTitle"})(({theme:e})=>({marginTop:e.spacing(1),textAlign:"center",wordBreak:"break-word"})),h=(0,o.Ay)(a.A,{name:p,slot:"ButtonAction"})(({theme:e})=>({backgroundColor:(0,u.X4)(e.palette.primary.light,.1),color:e.palette.primary.main,"&:hover":{backgroundColor:(0,u.X4)(e.palette.primary.light,.3)}})),f=(0,o.Ay)(n.s4,{name:p,slot:"CloseIcon"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15)})),x=(0,o.Ay)(d.A,{name:p,slot:"BtnCloseIcon",shouldForwardProp:e=>"isTablet"!==e})(({theme:e,isTablet:t})=>({position:"absolute",right:12,top:12,zIndex:3,backgroundColor:e.palette.action.hover,"&:hover":{cursor:"pointer",backgroundColor:e.palette.action.hover},...!t&&{visibility:"hidden"}})),b=[{id:c.xl,text:"add",icon:"ico-user3-plus",value:"user/addFriend"},{id:c.uY,text:"cancel",icon:"ico-user3-del",value:"user/cancelRequest"}];function A({item:e,onRemove:t=()=>{}}){let{dispatch:i,i18n:o,useGetItem:l,useIsMobile:a}=(0,r.PCX)(),d=a(!0),u=l(null==e?void 0:e._identity);if(!u)return null;let{friendship:p,extra:A,_identity:E}=u||{},w=p!==c.xl||(null==A?void 0:A.can_add_friend)?b.find(e=>e.id===u.friendship):void 0;return s.createElement(m,{"data-testid":"user-sugestion-card"},s.createElement(x,{size:"small",color:"default",id:"button-remove",onClick:t,isTablet:d},s.createElement(f,{icon:"ico-close"})),s.createElement(v,{component:r.N_E,to:`/user/${null==u?void 0:u.id}`,underline:"none"},s.createElement(g,null,s.createElement(n.H8,{user:u,size:62,hoverCard:`/user/${null==u?void 0:u.id}`})),s.createElement(y,null,s.createElement(n.mE,{lines:2,variant:"body1",fontSize:16,fontWeight:500,color:"text.primary"},s.createElement(n.xE,{to:null==u?void 0:u.link,user:u,underline:"none",hoverCard:`/user/${null==u?void 0:u.id}`})))),w&&s.createElement(h,{color:"primary",variant:"contained",size:"medium",startIcon:s.createElement(n.s4,{style:{fontSize:18},icon:w.icon||"ico-user-man-plus"}),onClick:()=>i({type:w.value,payload:{identity:E}})},o.formatMessage({id:w.text})))}A.displayName="UserSugestionCard"},17387(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>a});var r=i(40515),n=i(52705),o=i(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function a(e){return o.createElement(r.ne,l({},e),o.createElement(r.Qm,null,o.createElement(n.A,{variant:"circular",width:48,height:48})),o.createElement(r.p4,null,o.createElement(n.A,{variant:"text",width:120})))}},64607(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>m});var r=i(91557),n=i(40515),o=i(3556),l=i(8051),a=i(62193),d=i.n(a),s=i(96540);let u=(0,o.Ay)(l.A)(({theme:e})=>({display:"flex",alignItems:"center",width:"100%",overflow:"hidden",marginTop:e.spacing(.5)})),c=(0,o.Ay)(l.A,{name:"ViewerCard",slot:"ImageStyled"})(({theme:e})=>({marginLeft:e.spacing(-.5),"&:first-of-type":{marginLeft:0}}));function p({item:e,wrapAs:t,wrapProps:i}){let{getSetting:o,useGetItems:l}=(0,r.PCX)(),a=!o("preaction"),p=l(null==e?void 0:e.reactions);return e?s.createElement(n.ne,{wrapAs:t,wrapProps:i,testid:"story-viewerCard"},s.createElement(n.Qm,null,s.createElement(n.H8,{user:{...e,id:null==e?void 0:e.user_id},size:48,hoverCard:`/user/${null==e?void 0:e.user_id}`})),s.createElement(n.p4,null,s.createElement(n.Et,null,s.createElement(n.xE,{user:{...e,id:null==e?void 0:e.user_id},hoverCard:`/user/${null==e?void 0:e.user_id}`})),a&&d()(p)?null:s.createElement(u,null,p.map(e=>s.createElement(c,{key:null==e?void 0:e.id},s.createElement("img",{"aria-label":e.title,"data-testid":"itemReaction",src:e.src,width:"18px",height:"18px",alt:e.title})))))):null}p.displayName="ViewerCard";let m=(0,r.FB$)(p,()=>{})},13585(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>p});var r=i(91557),n=i(44562),o=i(40515),l=i(67725),a=i(60780),d=i(96540),s=i(3556);let u=(0,s.Ay)("div",{name:"StoryMutedItem",slot:"wrapperButtonInline",overridesResolver:(e,t)=>[t.wrapperButtonInline]})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"stretch","& button":{marginLeft:e.spacing(1),textTransform:"capitalize",fontWeight:"bold",whiteSpace:"nowrap",borderRadius:e.spacing(.5),fontSize:e.mixins.pxToRem(13),padding:e.spacing(.5,1.25),marginBottom:e.spacing(1),minWidth:e.spacing(4),height:e.spacing(4),"& .ico":{fontSize:e.mixins.pxToRem(13)}},[e.breakpoints.down("sm")]:{flexFlow:"row wrap",padding:e.spacing(.5,0),justifyContent:"flex-start","& button":{marginLeft:0,marginRight:e.spacing(1)}}}));function c({item:e,wrapAs:t,wrapProps:i,handleAction:s}){let{useGetItem:c}=(0,r.PCX)(),p=(0,r.Vn_)(n.ap,n.dI,"itemActionMenu"),m=c(null==e?void 0:e.owner);if(!e||!m)return null;let v=(0,l.Ue)(p.items,{item:e}),g=v.slice(0,1),y=v.slice(1);return d.createElement(o.ne,{wrapAs:t,wrapProps:i,testid:"story-muted-item"},d.createElement(o.Qm,null,d.createElement(o.H8,{user:m,size:48,hoverCard:!1})),d.createElement(o.p4,null,d.createElement(o.Et,null,d.createElement(r.N_E,{color:"inherit",underline:"none"},null==m?void 0:m.full_name))),d.createElement(u,null,g.map((e,t)=>d.createElement(a.A,{key:e.label,"data-testid":null==e?void 0:e.name,variant:(null==e?void 0:e.variant)||(0===t?"contained":"outlined"),startIcon:(null==e?void 0:e.icon)&&d.createElement(o.s4,{icon:e.icon}),onClick:()=>s(e.value),color:e.color||"primary",size:"small"},e.label)),(null==y?void 0:y.length)?d.createElement(o.pN,{id:"actionMenu",label:"ActionMenu",handleAction:s,items:y}):null))}c.displayName="StoryMutedMainCard";let p=(0,r.FB$)(c,()=>{})},1029(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>v});var r=i(91557),n=i(85332),o=i(40515),l=i(3556),a=i(87773),d=i(96540),s=i(71149);let u="StoryUserItem",c=(0,l.Ay)(o.ne,{name:u,slot:"WrapperItem",shouldForwardProp:e=>"active"!==e})(({theme:e,active:t})=>({...t&&{backgroundColor:e.palette.action.hover},"&:hover":{cursor:"pointer"}})),p=(0,l.Ay)(a.A,{name:u,slot:"text_new_story"})(({theme:e})=>({color:e.palette.primary.main}));function m({item:e,wrapAs:t,wrapProps:i}){var l;let{i18n:a,useGetItems:u,useGetItem:m}=(0,r.PCX)(),{identityUserStoryActive:v}=(0,n.vC)(),g=m(v),y=null===(l=u(null==e?void 0:e.stories))||void 0===l?void 0:l.filter(e=>!e.has_seen);return e?d.createElement(c,{wrapAs:t,wrapProps:i,testid:"story-avatar",active:(null==e?void 0:e.id)===(null==g?void 0:g.id)},d.createElement(o.Qm,null,d.createElement(o.H8,{user:e,size:48,hoverCard:!1,sx:{pointerEvents:"none"},showLiveStream:!0})),d.createElement(o.p4,null,d.createElement(o.Et,{lines:1},null==e?void 0:e.full_name),y.length||(null==e?void 0:e.last_item_timestamp)?d.createElement(o.J7,{sx:{color:"text.secondary",mt:.5}},y.length?d.createElement(p,{component:"span",variant:"body2"},a.formatMessage({id:"total_new_story"},{total:y.length})):null,d.createElement(s.A,{value:null==e?void 0:e.last_item_timestamp,shorten:!0})):null)):null}m.displayName="StoryAvatarMainCard";let v=(0,r.FB$)(m,()=>{})},32113(e,t,i){"use strict";i.d(t,{vZ:()=>l,MO:()=>d,x6:()=>s});var r=i(91262),n=i(96540);let o=n.createContext({status:null,setStatus(){},setFilePhoto(){},filePhoto:null,setUploading(){},uploading:!1,setIsDirty(){},isDirty:!1,isSubmitting:!1,setIsSubmitting(){}}),l=o,a=n.createContext({}),d=a,s={identityStoryActive:void 0,identityUserStoryActive:void 0,listUserStories:[],pauseStatus:r.ZR.No,reactions:[],indexStoryActive:void 0,openStoryDetail:!1,openViewComment:!1,openActionItem:!1,readyStateFile:!1,progressVideoPlay:0,isLastStory:!1,isReady:!1,mutedStatus:!0,buffer:!1}},79655(e,t,i){"use strict";i.d(t,{A:()=>m,n:()=>c});var r=i(91557),n=i(24713),o=i.n(n),l=i(58156),a=i.n(l),d=i(44562),s=i(95093),u=i.n(s);let c=(e,t,i=3)=>t<i?"prev":t>e-i-1?"next":"",p=(e,t)=>{let{identity:i}=t,r=a()(e,i),n=new URL(window.location.href),l=new URLSearchParams(n.search).get("date");if(!r)return{};let s=u()(l).format("L"),p=`${d.Lp}/${s}`,m=a()(e,`pagination.${p}.ids`),v=a()(e,`pagination.${p}.pagesOffset.total`),g=a()(e,`pagination.${p}.ended`),y=a()(e,`pagination.${p}.pagesOffset.next_date`),h=a()(e,`pagination.${p}.pagesOffset.prev_date`),f=g?1:a()(e,`pagination.${p}.pagesOffset.current_page`),x=a()(e,`pagination.${p}.pagesOffset.per_page`),b=(null==r?void 0:r.user)?a()(e,r.user):void 0,A=null==m?void 0:m.length,E=1<A?o()(m,e=>e===i):-1,w=-1!==E?E:0,C=g?w:a()(e,`pagination.${p}.pagesOffset.pos`)||0,S={item:r,stories:m,user:b,total:v,nextDate:y,prevDate:h,pagingId:p,date:l,indexStoryActive:w,positionStory:x*(f-1)+C,shouldPreload:c(A,C+1)};return S},m=(0,r.NgA)(p)},85332(e,t,i){"use strict";i.d(t,{Ay:()=>c,F_:()=>g,P3:()=>m,Tq:()=>y,Uf:()=>v,aN:()=>x,vC:()=>p});var r=i(96540),n=i(32113),o=i(91557),l=i(44562),a=i(71468),d=i(69634),s=i(79655),u=i(1081);function c(){return r.useContext(n.vZ)}function p(){return r.useContext(n.MO)}function m(){var e,t;let{navigate:i,useGetItem:n}=(0,o.PCX)(),{listUserStories:l,identityUserStoryActive:a,identityStoryActive:d,fire:s}=p(),u=n(a),c=n(d),m=(0,o.UfA)(null==u?void 0:u.stories),v=null==m?void 0:m.findIndex(e=>(null==e?void 0:e.id)===(null==c?void 0:c.id)),g=null==l?void 0:l.findIndex(e=>(null==e?void 0:e.id)===(null==u?void 0:u.id)),y=(null==m?void 0:null===(e=m[0])||void 0===e?void 0:e.id)===(null==c?void 0:c.id),h=(null==u?void 0:u.stories.length)-1===v,f=(null==l?void 0:null===(t=l[0])||void 0===t?void 0:t.id)===(null==u?void 0:u.id)&&y,x=(null==l?void 0:l.length)-1===g&&h,b=!f,A=!x,E=r.useCallback(()=>{var e,t;if(b&&-1!==v){if(y){s({type:"setIdentityUserS_Active",payload:null===(t=l[g-1])||void 0===t?void 0:t._identity});return}s({type:"setIdentityStoryActive",payload:null==m?void 0:null===(e=m[v-1])||void 0===e?void 0:e._identity})}},[b,v,y,l,m,g]),w=r.useCallback(()=>{var e,t;if(x){i("/");return}if(A&&-1!==v){if(h){s({type:"setIdentityUserS_Active",payload:null===(t=l[g+1])||void 0===t?void 0:t._identity});return}s({type:"setIdentityStoryActive",payload:null==m?void 0:null===(e=m[v+1])||void 0===e?void 0:e._identity})}},[x,A,v,h,l,g,m]);return{hasPrev:b,hasNext:A,handlePrev:E,handleNext:w}}function v(e){let[t,i]=r.useState(0),[n,o]=r.useState(0),a=r.useRef(),d=r.useCallback(()=>{var r;if(!(null==e?void 0:e.current))return[t,n];let a=null==e?void 0:null===(r=e.current)||void 0===r?void 0:r.getBoundingClientRect(),d=(null==a?void 0:a.height)/l.us,s=null==a?void 0:a.height;window.screen.width<=d&&(s=(d=window.screen.width)*l.us),o(s),i(d)},[null==e?void 0:e.current]);return r.useEffect(()=>{var t;let i=e.current;if(i)return a.current=new ResizeObserver(()=>{d()}),d(),null===(t=a.current)||void 0===t||t.observe(i),()=>{null==a||a.current.disconnect()}},[d,null==e?void 0:e.current]),[t,n,d]}function g(){return(0,a.d4)(e=>(0,d.s)(e))}function y(){var e,t;let i=p(),{fire:n,stories:l,indexStoryActive:d,nextDate:u,prevDate:c,identityStoryActive:m,loading:v,total:g,positionStory:y,pagingId:h}=i,f=(0,a.d4)(e=>(0,o.qRQ)(e,h))||{},{prev_page:x,last_page:b,current_page:A}=(null==f?void 0:f.pagesOffset)||{},{useGetItem:E,useGetItems:w,dispatch:C,usePageParams:S}=(0,o.PCX)(),k=S(),R=E(m),_=w(l),I=(null==_?void 0:null===(e=_[0])||void 0===e?void 0:e.id)===(null==R?void 0:R.id)&&0===x,P=(null==l?void 0:l[(null==l?void 0:l.length)-1])===m&&b===A,z=!(!c&&I),M=!(!u&&P),L=(null==l?void 0:l[(null==l?void 0:l.length)-1])===m&&b!==A,B=(null==_?void 0:null===(t=_[0])||void 0===t?void 0:t.id)===(null==R?void 0:R.id)&&0!==x,W=(e,t=()=>{})=>{var r;let o=e=>{var t;let i=null==e?void 0:e.pagingId,r=null==e?void 0:e.ids;if(!i||!(null==r?void 0:r.length))return;let o=null==e?void 0:null===(t=e.pagesOffset)||void 0===t?void 0:t.total;n({type:"setInit",payload:{stories:r,total:o,loading:!1}})},l=(0,s.n)(null==i?void 0:null===(r=i.stories)||void 0===r?void 0:r.length,e);if(!l){t&&t();return}t&&t(),C({type:"story/story_archive/LOAD",payload:{user_id:null==k?void 0:k.user_id,date:null==i?void 0:i.date,direction:l},meta:{onSuccess:o}})},$=(e,t)=>{var i,r,o;let l=null==e?void 0:e.pagingId,a=null==e?void 0:e.ids;if(!l||!(null==a?void 0:a.length))return;let d=null==e?void 0:null===(i=e.pagesOffset)||void 0===i?void 0:i.total,s=null==e?void 0:null===(r=e.pagesOffset)||void 0===r?void 0:r.next_date,u=null==e?void 0:null===(o=e.pagesOffset)||void 0===o?void 0:o.prev_date;n({type:"setLoading",payload:!1}),n({type:"setInit",payload:{isReady:!1,stories:a,total:d,nextDate:s,prevDate:u,indexStoryActive:0,positionStory:0,identityStoryActive:null==a?void 0:a[0],pagingId:l,date:t}})},F=()=>{n({type:"setLoading",payload:!1})},T=r.useCallback(()=>{if(B&&n({type:"setLoading",payload:!0}),!v&&z&&!B){if(I){n({type:"setLoading",payload:!0}),C({type:"story/story_archive/LOAD",payload:{user_id:null==k?void 0:k.user_id,date:c},meta:{onSuccess:e=>$(e,c),onError:F}});return}W(d-1),n({type:"setStoryActive",payload:{identity:null==l?void 0:l[d-1],index:d-1,positionStory:y-1}})}},[z,l,d,I,v,B,W,y,_,c]),O=r.useCallback(()=>{if(L&&n({type:"setLoading",payload:!0}),!v&&M&&!L){if(P){n({type:"setLoading",payload:!0}),C({type:"story/story_archive/LOAD",payload:{user_id:null==k?void 0:k.user_id,date:u},meta:{onSuccess:e=>$(e,u),onError:F}});return}W(d+1),n({type:"setStoryActive",payload:{identity:null==l?void 0:l[d+1],index:d+1,positionStory:y+1}})}},[M,l,d,P,g,L,v,W,u,y,_]);return{hasPrev:z,hasNext:M,handlePrev:T,handleNext:O,loadmore:W}}let h=e=>(e.preaction.data.reactions||[]).filter(e=>e.is_active),f=(0,u.Mz)(h,e=>e);function x(){return(0,a.d4)(f)}},91262(e,t,i){"use strict";var r,n,o,l,a,d,s,u;i.d(t,{ZR:()=>r,Zw:()=>n,dw:()=>l,gw:()=>o}),(a=r||(r={}))[a.No=0]="No",a[a.Pause=1]="Pause",a[a.Force=2]="Force",(d=n||(n={})).LANDSCAPE="landscape",d.PORTRAIT="portrait",(s=o||(o={})).Avatar="1",s.ThumbnailAndAvatar="2",(u=l||(l={})).Viewers="1",u.Comments="2"}}]);