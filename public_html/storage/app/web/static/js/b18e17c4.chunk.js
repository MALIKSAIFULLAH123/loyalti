"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-music-blocks-PlaylistDetail-Block"],{16023(e,t,a){var n=a(24994);t.Ay=void 0;var o=a(96954);n(a(2374));let i=(0,o.unstable_generateUtilityClasses)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]);t.Ay=i},31589(e,t,a){a.d(t,{A:()=>A});var n=a(98587),o=a(58168),i=a(96540),l=a(20053),r=a(75659),s=a(58752),d=a(92353),c=a(3556),m=a(38413),u=a(31609);function p(e){return(0,u.A)("MuiTable",e)}(0,m.A)("MuiTable",["root","stickyHeader"]);var g=a(74848);let y=["className","component","padding","size","stickyHeader"],v=e=>{let{classes:t,stickyHeader:a}=e;return(0,r.A)({root:["root",a&&"stickyHeader"]},p,t)},f=(0,c.Ay)("table",{name:"MuiTable",slot:"Root",overridesResolver(e,t){let{ownerState:a}=e;return[t.root,a.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>(0,o.A)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,o.A)({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),h="table",b=i.forwardRef(function(e,t){let a=(0,d.A)({props:e,name:"MuiTable"}),{className:r,component:c=h,padding:m="normal",size:u="medium",stickyHeader:p=!1}=a,b=(0,n.A)(a,y),A=(0,o.A)({},a,{component:c,padding:m,size:u,stickyHeader:p}),x=v(A),E=i.useMemo(()=>({padding:m,size:u,stickyHeader:p}),[m,u,p]);return(0,g.jsx)(s.A.Provider,{value:E,children:(0,g.jsx)(f,(0,o.A)({as:c,role:c===h?null:"table",ref:t,className:(0,l.default)(x.root,r),ownerState:A},b))})}),A=b},58752(e,t,a){a.d(t,{A:()=>i});var n=a(96540);let o=n.createContext(),i=o},37847(e,t,a){a.d(t,{A:()=>i});var n=a(96540);let o=n.createContext(),i=o},22920(e,t,a){a.d(t,{A:()=>x});var n=a(58168),o=a(98587),i=a(96540),l=a(20053),r=a(75659),s=a(37847),d=a(92353),c=a(3556),m=a(38413),u=a(31609);function p(e){return(0,u.A)("MuiTableBody",e)}(0,m.A)("MuiTableBody",["root"]);var g=a(74848);let y=["className","component"],v=e=>{let{classes:t}=e;return(0,r.A)({root:["root"]},p,t)},f=(0,c.Ay)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),h={variant:"body"},b="tbody",A=i.forwardRef(function(e,t){let a=(0,d.A)({props:e,name:"MuiTableBody"}),{className:i,component:r=b}=a,c=(0,o.A)(a,y),m=(0,n.A)({},a,{component:r}),u=v(m);return(0,g.jsx)(s.A.Provider,{value:h,children:(0,g.jsx)(f,(0,n.A)({className:(0,l.default)(u.root,i),as:r,ref:t,role:r===b?null:"rowgroup",ownerState:m},c))})}),x=A},25914(e,t,a){a.d(t,{A:()=>k});var n=a(98587),o=a(58168),i=a(96540),l=a(20053),r=a(75659),s=a(24279),d=a(75630),c=a(58752),m=a(37847),u=a(92353),p=a(3556),g=a(38413),y=a(31609);function v(e){return(0,y.A)("MuiTableCell",e)}let f=(0,g.A)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]);var h=a(74848);let b=["align","className","component","padding","scope","size","sortDirection","variant"],A=e=>{let{classes:t,variant:a,align:n,padding:o,size:i,stickyHeader:l}=e,s={root:["root",a,l&&"stickyHeader","inherit"!==n&&`align${(0,d.A)(n)}`,"normal"!==o&&`padding${(0,d.A)(o)}`,`size${(0,d.A)(i)}`]};return(0,r.A)(s,v,t)},x=(0,p.Ay)("td",{name:"MuiTableCell",slot:"Root",overridesResolver(e,t){let{ownerState:a}=e;return[t.root,t[a.variant],t[`size${(0,d.A)(a.size)}`],"normal"!==a.padding&&t[`padding${(0,d.A)(a.padding)}`],"inherit"!==a.align&&t[`align${(0,d.A)(a.align)}`],a.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>(0,o.A)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${"light"===e.palette.mode?(0,s.a)((0,s.X4)(e.palette.divider,1),.88):(0,s.e$)((0,s.X4)(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},"head"===t.variant&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},"body"===t.variant&&{color:(e.vars||e).palette.text.primary},"footer"===t.variant&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},"small"===t.size&&{padding:"6px 16px",[`&.${f.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===t.padding&&{width:48,padding:"0 0 0 4px"},"none"===t.padding&&{padding:0},"left"===t.align&&{textAlign:"left"},"center"===t.align&&{textAlign:"center"},"right"===t.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===t.align&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),E=i.forwardRef(function(e,t){let a;let r=(0,u.A)({props:e,name:"MuiTableCell"}),{align:s="inherit",className:d,component:p,padding:g,scope:y,size:v,sortDirection:f,variant:E}=r,k=(0,n.A)(r,b),S=i.useContext(c.A),w=i.useContext(m.A),C=w&&"head"===w.variant;a=p||(C?"th":"td");let _=y;!_&&C&&(_="col");let $=E||w&&w.variant,T=(0,o.A)({},r,{align:s,component:a,padding:g||(S&&S.padding?S.padding:"normal"),size:v||(S&&S.size?S.size:"medium"),sortDirection:f,stickyHeader:"head"===$&&S&&S.stickyHeader,variant:$}),M=A(T),P=null;return f&&(P="asc"===f?"ascending":"descending"),(0,h.jsx)(x,(0,o.A)({as:a,ref:t,className:(0,l.default)(M.root,d),"aria-sort":P,scope:_,ownerState:T},k))}),k=E},13695(e,t,a){a.d(t,{A:()=>x});var n=a(58168),o=a(98587),i=a(96540),l=a(20053),r=a(75659),s=a(37847),d=a(92353),c=a(3556),m=a(38413),u=a(31609);function p(e){return(0,u.A)("MuiTableHead",e)}(0,m.A)("MuiTableHead",["root"]);var g=a(74848);let y=["className","component"],v=e=>{let{classes:t}=e;return(0,r.A)({root:["root"]},p,t)},f=(0,c.Ay)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),h={variant:"head"},b="thead",A=i.forwardRef(function(e,t){let a=(0,d.A)({props:e,name:"MuiTableHead"}),{className:i,component:r=b}=a,c=(0,o.A)(a,y),m=(0,n.A)({},a,{component:r}),u=v(m);return(0,g.jsx)(s.A.Provider,{value:h,children:(0,g.jsx)(f,(0,n.A)({as:r,className:(0,l.default)(u.root,i),ref:t,role:r===b?null:"rowgroup",ownerState:m},c))})}),x=A},50594(e,t,a){a.d(t,{A:()=>x});var n=a(58168),o=a(98587),i=a(96540),l=a(20053),r=a(75659),s=a(24279),d=a(37847),c=a(92353),m=a(3556),u=a(38413),p=a(31609);function g(e){return(0,p.A)("MuiTableRow",e)}let y=(0,u.A)("MuiTableRow",["root","selected","hover","head","footer"]);var v=a(74848);let f=["className","component","hover","selected"],h=e=>{let{classes:t,selected:a,hover:n,head:o,footer:i}=e;return(0,r.A)({root:["root",a&&"selected",n&&"hover",o&&"head",i&&"footer"]},g,t)},b=(0,m.Ay)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver(e,t){let{ownerState:a}=e;return[t.root,a.head&&t.head,a.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${y.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${y.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,s.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),A=i.forwardRef(function(e,t){let a=(0,c.A)({props:e,name:"MuiTableRow"}),{className:r,component:s="tr",hover:m=!1,selected:u=!1}=a,p=(0,o.A)(a,f),g=i.useContext(d.A),y=(0,n.A)({},a,{component:s,hover:m,selected:u,head:g&&"head"===g.variant,footer:g&&"footer"===g.variant}),A=h(y);return(0,v.jsx)(b,(0,n.A)({as:s,ref:t,className:(0,l.default)(A.root,r),role:"tr"===s?null:"row",ownerState:y},p))}),x=A},32650(e,t,a){a.r(t),a.d(t,{default:()=>j});var n=a(91557),o=a(84680),i=a(67725),l=a(40515),r=a(3556),s=a(8051),d=a(31589),c=a(96540),m=a(70189),u=a(62589),p=a(90243),g=a(84058),y=a.n(g),v=a(62193),f=a.n(v),h=a(23181),b=a.n(h),A=a(60655);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let E="PlaylistDetail",k=(0,r.Ay)("div",{name:E,slot:"MusicContent"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),lineHeight:1.33})),S=(0,r.Ay)("div",{name:E,slot:"BgCoverWrapper"})(({theme:e})=>({height:320,overflow:"hidden",position:"relative"})),w=(0,r.Ay)("div",{name:E,slot:"BgCoverInner"})(({theme:e})=>({position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:-1})),C=(0,r.Ay)("div",{name:E,slot:"BgCover"})(({theme:e})=>({height:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",filter:"brightness(0.4) blur(50px)"})),_=(0,r.Ay)("div",{name:E,slot:"Header"})(({theme:e})=>({marginLeft:e.spacing(2),color:"#fff",paddingTop:e.spacing(4),display:"flex",justifyContent:"space-between"})),$=(0,r.Ay)("div",{name:E,slot:"HeaderInner"})(({theme:e})=>({flex:1,minWidth:0,margin:e.spacing(0,3,0,2),display:"flex",flexDirection:"column"})),T=(0,r.Ay)(l._V,{name:E,slot:"ImgSong"})(({theme:e})=>({width:212,height:212})),M=(0,r.Ay)("div",{name:E,slot:"TitleWrapper"})(({theme:e})=>({display:"flex"})),P=(0,r.Ay)("div",{name:E,slot:"MinorInfo"})(({theme:e})=>({display:"flex",marginTop:e.spacing(1),fontSize:13,fontWeight:"normal",color:"#cecece"})),N=(0,r.Ay)(s.A,{name:E,slot:"PageTitle"})(({theme:e})=>({margin:e.spacing(1.5,0),fontWeight:e.typography.fontWeightBold,flex:1,minWidth:0,fontSize:e.spacing(3),lineHeight:1.3,maxHeight:72,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word",wordWrap:"break-word",whiteSpace:"normal",WebkitLineClamp:1,display:"-webkit-box",WebkitBoxOrient:"vertical","& .ico-heart":{color:e.palette.primary.main}})),R=(0,r.Ay)("span",{name:E,slot:"Statistic"})(({theme:e})=>({"&::after":{content:'"â€¢"',margin:e.spacing(0,1)}})),z=(0,r.Ay)("div",{name:E,slot:"SoundWave"})(({theme:e})=>({marginTop:"auto"})),I=(0,r.Ay)("div",{name:E,slot:"viewContainer"})(({theme:e})=>({margin:e.spacing(0,2,0,2),borderRadius:e.shape.borderRadius,backgroundColor:e.mixins.backgroundColor("paper"),border:e.mixins.border("secondary"),padding:e.spacing(0,2,2,2),position:"relative",marginTop:-44})),H=(0,r.Ay)(s.A)(({theme:e})=>({position:"absolute",right:8,top:8})),W=(0,r.Ay)("div",{name:E,slot:"Author"})(({theme:e})=>({display:"flex"})),B=(0,r.Ay)(s.A,{name:E,slot:"PlaylistContent"})(({theme:e})=>({fontSize:15,lineHeight:1.33})),O=(e,t)=>{let a=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%3600%60),i=a>0?`${a} ${t.formatMessage({id:"time_hr"})} `:"",l=n>0?`${n} ${t.formatMessage({id:"time_min"})} `:"",r=o>0?`${o} ${t.formatMessage({id:"time_sec"})}`:"";return i+l+r},L=(0,n.$MH)((0,n.FB$)(function({item:e,user:t,blockProps:a,identity:r,handleAction:g,state:v,isAlbum:h}){var E,L,j,X,D;let{ItemActionMenu:V,ItemDetailInteraction:F,i18n:G,assetUrl:U,jsxBackend:J,dispatch:q,usePageParams:K}=(0,n.PCX)(),[Q,Y]=c.useState(),[Z,ee]=c.useState(!1),et=K(),[ea,en]=c.useState(!1);if(c.useEffect(()=>{var t,a;en(!0),f()(null==e?void 0:e.songs)||(null==e?void 0:null===(t=e.statistic)||void 0===t?void 0:t.total_song)>(null==e?void 0:null===(a=e.songs)||void 0===a?void 0:a.length)?q({type:"music/getListSong",meta:{onSuccess({data:e}){en(!e)}},payload:{identity:r}}):en(!1)},[et]),!e)return null;let eo=(0,i.AE)(null==e?void 0:e.image,"500",U(`music.${h?"album":"playlist"}_no_image`)),ei=J.get("core.block.no_content_with_icon"),el=J.get("music_song.itemView.listingCard.skeleton");return c.createElement(o.eB,{testid:`detailview ${e.resource_name}`},c.createElement(o.tD,null,c.createElement(s.A,null,c.createElement(S,null,c.createElement(w,null,c.createElement(C,{style:{backgroundImage:`url(${eo})`}})),c.createElement(_,null,c.createElement(T,{src:eo,aspectRatio:"11"}),c.createElement($,null,c.createElement(l.Et,null,c.createElement(l.rL,{variant:"itemView",value:null==e?void 0:e.is_featured}),c.createElement(l.FN,{variant:"itemView",value:e.is_sponsor,item:e})),c.createElement(M,null,c.createElement(N,{"data-testid":y()(`music ${h?"album":"playlist"} title`)},null==e?void 0:e.name)),c.createElement(P,null,c.createElement(R,{"data-testid":y()(`music ${h?"album":"playlist"} type'`)},G.formatMessage({id:h?"album":"playlist"})),(null==e?void 0:e.year)&&c.createElement(R,{"data-testid":y()(`music ${h?"album":"playlist"} year`)},null==e?void 0:e.year),c.createElement(s.A,{mr:.5},c.createElement("span",{"data-testid":y()(`music ${h?"album":"playlist"} total song`)},G.formatMessage({id:"total_song"},{value:null===(E=e.statistic)||void 0===E?void 0:E.total_song})),c.createElement("span",{"data-testid":y()(`music ${h?"album":"playlist"} total duration`)},(null===(L=e.statistic)||void 0===L?void 0:L.total_duration)?`, ${O(null===(j=e.statistic)||void 0===j?void 0:j.total_duration,G)}`:null))),c.createElement(z,{"data-testid":y()(`music ${h?"album":"playlist"} soundwave`)},(null==Q?void 0:Q.destination)&&(null==e?void 0:null===(X=e.songs)||void 0===X?void 0:X.length)?c.createElement(m.A,{url:null==Q?void 0:Q.destination,isPlaylist:!0,isPlaying:Z,setIsPlaying:ee,songs:null==e?void 0:e.songs,selectedSong:Q,setSelectedSong:Y}):null)))),c.createElement(I,null,c.createElement(H,null,c.createElement(V,{identity:r,icon:"ico-dottedmore-vertical-o",state:v,handleAction:g,size:"smaller"})),c.createElement(W,null,c.createElement(l.at,{item:e})),(null==e?void 0:e.description)&&c.createElement(k,null,c.createElement(l.np,null,c.createElement(p.Ay,{html:(null==e?void 0:e.text)||(null==e?void 0:e.description)}))),c.createElement(B,{mt:2},ea?c.createElement(d.A,null,b()(1,4).map(e=>c.createElement(el,{key:e.toString()}))):c.createElement(c.Fragment,null,(null==e?void 0:null===(D=e.songs)||void 0===D?void 0:D.length)?c.createElement(u.A,{identity:r,isAlbum:h,songs:null==e?void 0:e.songs,selectedSong:Q,handleAction:g,setSelectedSong:Y,isPlaying:Z,setIsPlaying:ee,item:e}):c.createElement(ei,x({image:"ico-music-note-o",title:"no_songs_found"},e.extra.can_edit&&{labelButton:h?"add_new_song":"find_your_favorite"},{action:h?"music/redirectToEditAlbum":"music/redirectToAllSongs",isIconButton:!1,description:"find_your_favorite_music_and_add_to_your_list"})))),c.createElement(A.A,{attachments:null==e?void 0:e.attachments,size:"large",sx:{mt:3}}),c.createElement(F,{identity:r,handleAction:g})))))})),j=(0,n.WvA)({extendBlock:L,defaults:{placeholder:"Search",blockProps:{variant:"plained",titleComponent:"h2",titleVariant:"subtitle1",titleColor:"textPrimary",noFooter:!0,noHeader:!0,blockStyle:{},contentStyle:{borderRadius:"base"},headerStyle:{},footerStyle:{}}}})},62589(e,t,a){a.d(t,{A:()=>I});var n=a(91557),o=a(40515),i=a(3556),l=a(8051),r=a(25914),s=a(22920),d=a(50594),c=a(97763),m=a(31589),u=a(13695),p=a(58168),g=a(98587),y=a(96540),v=a(20053),f=a(4146),h=a.n(f),b=a(56525),A=a(74848);let x=["name"],E=["children","className","clone","component"];var k=a(85838),S=a(16023),w=a(71468),C=a(84058),_=a.n(C);let $=e=>`${Math.floor(e/60)}:${e%60<10?0:""}${e%60}`,T=(0,i.Ay)(l.A,{name:"playlist"})(({theme:e})=>({marginBottom:e.spacing(-2),"& .ico":{cursor:"pointer"},[e.breakpoints.down("xs")]:{"& $songOrder, & $songTime":{display:"none"},"& $songTitle":{marginLeft:0},"& $songActionMenu":{marginRight:e.spacing(-2)}}})),M=(function(e){let t=(t,a={})=>{let n;let{name:o}=a,i=(0,g.A)(a,x),l="function"==typeof t?e=>({root:a=>t((0,p.A)({theme:e},a))}):{root:t},r=(0,b.A)(l,(0,p.A)({Component:e,name:o||e.displayName,classNamePrefix:o},i));t.filterProps&&(n=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);let s=y.forwardRef(function(t,a){let{children:o,className:i,clone:l,component:s}=t,d=(0,g.A)(t,E),c=r(t),m=(0,v.default)(c.root,i),u=d;return(n&&(u=function(e,t){let a={};return Object.keys(e).forEach(n=>{-1===t.indexOf(n)&&(a[n]=e[n])}),a}(u,n)),l)?y.cloneElement(o,(0,p.A)({className:(0,v.default)(o.props.className,m)},u)):"function"==typeof o?o((0,p.A)({className:m},u)):(0,A.jsx)(s||e,(0,p.A)({ref:a,className:m},u,{children:o}))});return h()(s,e),s};return t})(r.A)(({theme:e})=>({borderColor:e.palette.border.secondary,[`&.${S.Ay.head}`]:{backgroundColor:e.palette.background.paper,color:e.palette.text.hint,fontWeight:e.typography.fontWeightSemiBold,fontSize:e.mixins.pxToRem(15),borderColor:e.palette.border.secondary},[`&.${S.Ay.body}`]:{fontSize:e.mixins.pxToRem(15),color:e.palette.text.hint,marginBottom:e.spacing(1),borderColor:e.palette.border.secondary,padding:e.spacing(0,2)}})),P=(0,i.Ay)(s.A,{name:"tableRowStyled"})(({theme:e})=>({color:"red","& tr:last-child":{"& td":{borderBottom:0}}})),N=(0,b.A)(e=>(0,k.A)({songItem:{height:e.spacing(7),"& $songTitle":{color:"light"===e.palette.mode?"#121212":"#fff"},padding:e.spacing(1),"& .ico-play":{display:"none"},"& .ico-heart-o":{display:"none",color:e.palette.text.hint},"& .ico-heart":{color:e.palette.primary.main},"& .ico-dottedmore-vertical-o":{display:"none"},"&:hover":{"& $songPlayPause":{"& .ico-play":{display:"block"},"& .ico-pause":{display:"block"}},"& .ico-heart-o":{display:"unset"},backgroundColor:e.palette.background.default,"& $songOrderText":{display:"none"},"& .ico-dottedmore-vertical-o":{display:"unset"}}},songInner:{display:"flex",alignItems:"center",color:e.palette.text.secondary,fontSize:18},songOrderText:{},songPlaying:{"& $songTime":{},"& $songTitle":{color:e.palette.primary.main},"& $songOrderText":{display:"none"},"& $songPlayPause":{"& .ico-play":{display:"block"},"& .ico-pause":{display:"block"}},display:"block"},songOrder:{paddingLeft:e.spacing(1),minWidth:32,textAlign:"center"},songPlayPause:{color:e.palette.text.secondary},songTitle:{cursor:"pointer",wordBreak:"break-word"},songActionMenu:{display:"auto",marginLeft:"auto",marginRight:e.spacing(2),"& .ico":{color:e.palette.text.secondary,fontSize:13}},songTime:{width:"150px"},songTotal:{width:"100px"}}),{name:"PlayList"}),R=(0,n.FB$)(function({identity:e,handleAction:t,state:a,selectedSong:i,index:l,classes:r,isPlaying:s,setIsPlaying:m,setSelectedSong:u,item:p,isAlbum:g}){var v;let{ItemActionMenu:f,i18n:h}=(0,n.PCX)();if(!p)return;let b=()=>{i.id!==p.id?(u(p),m(!0)):m(e=>!e)};return y.createElement(d.A,{"data-testid":_()("music playlist table row"),className:`${r.songItem} ${(null==p?void 0:p.id)===(null==i?void 0:i.id)?r.songPlaying:""}`},y.createElement(M,null,y.createElement("div",{className:r.songOrderText},l+1),y.createElement("div",{className:r.songPlayPause,onClick:b},s&&(null==p?void 0:p.id)===(null==i?void 0:i.id)?y.createElement(o.s4,{icon:"ico-pause"}):y.createElement(o.s4,{icon:"ico-play"}))),y.createElement(M,{className:r.songTitle,onClick:b},p.name),y.createElement(M,{align:"right"},(null==p?void 0:p.is_pending)&&y.createElement(c.A,{title:h.formatMessage({id:"pending"}),placement:"top"},y.createElement(o.s4,{icon:"ico-clock-o"}))),y.createElement(M,{align:"right",className:r.songTotal},null===(v=p.statistic)||void 0===v?void 0:v.music_song_total_play),y.createElement(M,{align:"right",className:r.songTime},(null==p?void 0:p.is_favorite)!==void 0&&y.createElement(o.s4,{icon:(null==p?void 0:p.is_favorite)?"ico-heart":"ico-heart-o",sx:{fontSize:"14px",mr:2}}),$(null==p?void 0:p.duration),y.createElement(f,{menuName:g?"itemActionMenu":"itemActionMenuOnPlaylist",sx:{ml:2},identity:`music.entities.music_song.${p.id}`,icon:"ico-dottedmore-vertical-o",state:a,handleAction:t,className:r.songActionMenu})))},()=>{}),z=({songs:e,selectedSong:t,setSelectedSong:a,identity:o,handleAction:i,state:l,isPlaying:r,setIsPlaying:s,isAlbum:c,item:p})=>{let g=N(),{i18n:v,dispatch:f}=(0,n.PCX)(),[h,b]=(0,y.useState)(!1),A=(0,w.d4)(t=>(0,n.OG_)(t,e));return(0,y.useEffect)(()=>{a(A[0])},[o]),(0,y.useEffect)(()=>{var t;!h&&(null==p?void 0:null===(t=p.statistic)||void 0===t?void 0:t.total_song)>e.length&&f({type:"music/loadMoreListSong",meta:{onSuccess(){b(!0)}},payload:{identity:o}})},[h]),(0,n.ksV)(()=>{b(!1)}),y.createElement(T,null,y.createElement("div",{className:"playlist"},y.createElement(m.A,{"data-testid":_()("music playlist table"),sx:{fontSize:"15px"}},y.createElement(u.A,{"data-testid":_()("music playlist table head")},y.createElement(d.A,null,y.createElement(M,{style:{width:"50px"}},"#"),y.createElement(M,null,v.formatMessage({id:"title"})),y.createElement(M,{align:"right"}),y.createElement(M,{align:"right"},v.formatMessage({id:"music_plays"})),y.createElement(M,{align:"center"},v.formatMessage({id:"duration"})))),y.createElement(P,{"data-testid":_()("music playlist table body")},A&&A.map((e,n)=>y.createElement(R,{isAlbum:c,song:e,selectedSong:t,setSelectedSong:a,key:n,index:n,classes:g,isPlaying:r,setIsPlaying:s,identity:`music.entities.music_song.${e.id}`}))))))},I=z},70189(e,t,a){a.d(t,{A:()=>k});var n=a(40515),o=a(8051),i=a(81502),l=a(97763),r=a(14931),s=a(56525),d=a(85838),c=a(96540),m=a(13007),u=a.n(m),p=a(91557),g=a(71468),y=a(20053),v=a(62193),f=a.n(v),h=a(68090),b=a.n(h);let A=(0,s.A)(e=>(0,d.A)({root:{display:"flex",alignItems:"flex-end","& .ico":{color:"#fff",fontSize:18,cursor:"pointer"}},hover:{position:"absolute",left:0,top:0,zIndex:10,pointerEvents:"none",height:"100%",width:0,mixBlendMode:"overlay",background:"rgba(255, 255, 255, 0.3)",opacity:0,transition:"opacity 0.2s ease"},waveForm:{cursor:"pointer",margin:e.spacing(0,1,1),height:77,overflow:"hidden",flex:1,position:"relative","&:hover $hover":{opacity:1},"&::before":{content:"''",height:"2px",background:"#eee",width:"100%",position:"absolute",bottom:0},"& > wave":{overflowX:"inherit !important",cursor:"pointer !important"},"& wave > wave::before":{content:"''",position:"absolute",top:"50%",height:"2px",width:"100%",background:"#2682d5"}},btnControlWrapper:{marginRight:e.spacing(2)},btnControl:{border:"none",background:"transparent",outline:"none",padding:0,"& + $btnControl":{paddingLeft:e.spacing(2)}},btnPlayPause:{},btnShuffle:{marginLeft:e.spacing(2)},btnRepeat:{marginLeft:e.spacing(2)},activeIcon:{color:`${e.palette.primary.main} !important`},timePlaying:{minWidth:e.spacing(5),textAlign:"right",fontSize:15},timeSong:{fontSize:15},volumeWrapper:{width:e.spacing(2),position:"relative",marginLeft:e.spacing(1.5),"&:hover $volumeSlider":{visibility:"visible",opacity:1}},volumeSlider:{height:70,visibility:"hidden",opacity:0,transition:"all 300ms ease",position:"absolute",left:e.spacing(-.5),bottom:e.spacing(4.5)},volumeSliderItem:{color:"#fff","& .MuiSlider-thumb":{width:"15px",height:"15px",boxShadow:"none !important",color:"#fff"}},progress:{flex:1,margin:e.spacing(0,1,1),position:"absolute",bottom:0},hide:{display:"none!important"},visibility:{visibility:"hidden"},disabledIcon:{color:`${e.palette.grey[500]}!important`}}),{name:"Waveform"}),x=e=>Array.from(Array(null==e?void 0:e.length).keys()),E=e=>({container:e,waveColor:"#eee",progressColor:"#2682d5",cursorColor:"transparent",barWidth:3,barHeight:2,barRadius:0,barGap:2,responsive:!0,height:150,loopSelection:!0,normalize:!0,partialRender:!1,minPxPerSec:100});function k({url:e,isPlaylist:t,isPlaying:a,setIsPlaying:s,songs:d,selectedSong:m,setSelectedSong:v,autoPlay:h}){let k=new AudioContext,S=A(),w=(0,c.useRef)(null),C=(0,c.useRef)(null),[_,$]=(0,c.useState)(!1),[T,M]=(0,c.useState)(!1),P=(0,c.useRef)([]),[N,R]=(0,c.useState)(!1),[z,I]=(0,c.useState)(!1),[H,W]=(0,c.useState)("0:00"),[B,O]=(0,c.useState)("0:00"),[L,j]=(0,c.useState)(.5),[X,D]=(0,c.useState)(!1),[V,F]=(0,c.useState)(!1),{dispatch:G,useLoggedIn:U,i18n:J}=(0,p.PCX)(),q=(0,g.d4)(e=>(0,p.OG_)(e,d)),K=U();(0,c.useEffect)(()=>{$(!1),F(!1);let a=E(w.current);if(C.current=u().create(a),e)return C.current.load(e),W("0:00"),w.current.addEventListener("pointermove",e=>{let t=document.querySelector("#hover");t.style.width=`${e.offsetX}px`}),C.current.on("ready",()=>{F(!0),"running"===k.state&&!t&&h&&(C.current.play(),$(!0)),t&&s(e=>(e&&C.current.play(),e)),C.current.setVolume(T?0:L),j(L);let e=Q(C.current.getDuration());O(e)}),C.current.on("audioprocess",()=>{let e=Q(C.current.getCurrentTime());W(e)}),C.current.on("seek",e=>{let t=Q(C.current.getCurrentTime());W(t)}),C.current.on("finish",()=>{Z(),R(e=>(e?C.current.play():(D(e=>(I(e=>{var t;return e&&1===q.length?C.current.play():!e&&(null===(t=b()(q))||void 0===t?void 0:t.id)!==(null==m?void 0:m.id)||e?eo(1):s(!1),e}),e)),$(!1)),e))}),()=>C.current.destroy()},[e]);let Q=e=>{let t=Math.floor(e/60),a=`0${Math.floor(e-60*t)}`.slice(-2);return`${t}:${a}`},Y=()=>{t?s(!a):($(!_),C.current.playPause())};c.useEffect(()=>{var e;(null===(e=C.current)||void 0===e?void 0:e.isPlaying())!==a&&C.current.playPause()},[a]);let Z=()=>{if(!K)return;let e=null==m?void 0:m._identity;G({type:"music/updateTotalPlayItem",payload:{identity:e}})},ee=(e,t)=>{C.current.setVolume(t),j(t),0===t?M(!0):M(!1)},et=()=>{M(e=>(C.current.setVolume(e?L:0),!e))},ea=()=>{if(!t){R(!N);return}N||z||I(!0),z&&!N&&(I(!1),R(!0)),N&&!z&&R(!1)},en=()=>{D(e=>!e)};c.useEffect(()=>{f()(q)||(X?P.current=x(q).sort((e,t)=>.5-Math.random()):P.current=x(q))},[X,d]);let eo=e=>{if(!t)return;s(!0);let a=q.findIndex(e=>(null==e?void 0:e.id)===(null==m?void 0:m.id)),n=P.current.findIndex(e=>a===e);D(t=>(t?n+e===P.current.length?v(q[P.current[0]]):n+e<0?v(q[b()(P.current)]):v(q[P.current[n+e]]):a+e===(null==q?void 0:q.length)?v(q[0]):a+e<0?v(b()(q)):v(q[a+e]),t))};return c.createElement("div",{className:S.root},c.createElement("div",{className:S.btnControlWrapper},t?c.createElement("button",{className:S.btnControl,onClick:()=>eo(-1)},c.createElement(n.s4,{icon:"ico-play-prev"})):null,c.createElement("button",{onClick:Y,className:(0,y.default)(S.btnControl,S.btnPlayPause),disabled:!V},(t?a:_)?c.createElement(n.s4,{icon:"ico-pause"}):c.createElement(n.s4,{icon:"ico-play",className:!V&&S.disabledIcon})),t?c.createElement("button",{className:S.btnControl,onClick:()=>eo(1)},c.createElement(n.s4,{icon:"ico-play-next"})):null),c.createElement("div",{className:S.timePlaying},H),c.createElement(o.A,{position:"relative",flex:1},c.createElement("div",{ref:w,className:(0,y.default)(S.waveForm,!V&&S.visibility)},c.createElement("div",{id:"hover",className:(0,y.default)(S.hover)})),c.createElement(i.A,{color:"inherit",className:(0,y.default)(V&&S.hide,S.progress)})),c.createElement("div",{className:S.timeSong},B),t?c.createElement(l.A,{title:J.formatMessage({id:X?"turn_off_shuffle":"turn_on_shuffle"})},c.createElement(n.s4,{icon:"ico-shuffle",className:`${S.btnShuffle} ${X?S.activeIcon:""}`,onClick:en})):null,c.createElement(l.A,{title:J.formatMessage({id:z||N?z?"turn_on_repeat_one":"turn_off_repeat":"turn_on_repeat"})},c.createElement(n.s4,{icon:N&&t?"ico-play-repeat-one-o":"ico-play-repeat",className:(0,y.default)(S.btnRepeat,(N||z)&&S.activeIcon,!V&&S.disabledIcon),onClick:ea})),c.createElement("div",{className:S.volumeWrapper},T?c.createElement(n.s4,{icon:"ico-volume-del",onClick:et,className:!V&&S.disabledIcon}):c.createElement(n.s4,{icon:"ico-volume-increase",onClick:et,className:!V&&S.disabledIcon}),c.createElement("div",{className:S.volumeSlider},V&&c.createElement(r.Ay,{orientation:"vertical",value:T?0:L,min:0,max:1,step:.01,onChange:ee,"aria-labelledby":"vertical-slider",valueLabelDisplay:"auto",valueLabelFormat:e=>Math.round(100*e),className:S.volumeSliderItem}))))}},60655(e,t,a){a.d(t,{A:()=>u});var n=a(91557),o=a(40515),i=a(3556),l=a(8051),r=a(96540);let s=(0,i.Ay)("div",{name:"attachmentTitle"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),color:e.palette.text.secondary,fontWeight:e.typography.fontWeightBold})),d=(0,i.Ay)("div",{name:"attachment"})(({theme:e})=>({width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-between",[e.breakpoints.down("sm")]:{flexDirection:"column"}})),c=(0,i.Ay)("div",{name:"attachmentItemWrapper"})(({theme:e})=>({marginTop:e.spacing(2),flexGrow:0,flexShrink:0,flexBasis:"calc(50% - 8px)",minWidth:300,maxWidth:"100%"})),m=({attachments:e,size:t,sx:a})=>{let{i18n:i}=(0,n.PCX)(),m=(0,n.UfA)(e);return m.length?r.createElement(l.A,{mt:2,sx:a},r.createElement(s,null,i.formatMessage({id:"attachments"})),r.createElement(d,null,m.map((e,a)=>r.createElement(c,{key:e.id.toString()},r.createElement(o.Hg,{fileName:e.file_name,downloadUrl:e.download_url,isImage:e.is_image,fileSizeText:e.file_size_text,size:t,image:null==e?void 0:e.image,identity:null==e?void 0:e._identity,index:a}))))):null},u=m}}]);