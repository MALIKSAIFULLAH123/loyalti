"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-livestreaming-components-ViewerLabel"],{43498(e,t,i){let r;i.d(t,{LL:()=>d,Ui:()=>v,ET:()=>m});var n=i(96602),s=i(96540),a=i(91557),o=i(70223),l=i(11497),c=i(656),u=i(78292);let p=new class{bootstrap(e,t){this.manager=e,this.settingApp=this.manager.getSetting("firebase"),this.settingApp&&this.init(this.settingApp,t)}checkActive(){return this.isActive}init(e,t){if(this.mounted)return this.firebaseApp;this.mounted=!0;let i={apiKey:a.z0J,authDomain:a.wRL,projectId:a.wWR,storageBucket:a.npo,messagingSenderId:a.AfL,appId:a.Kou};this.config=e;try{let r=(0,o.Wp)(i),n=(0,c.xI)(r),{user_firebase_email:s,user_firebase_password:l,requiredSignin:u}=this.settingApp||{};return u&&(0,c.x9)(n,s,l).then(e=>{}).catch(e=>{console.log("Live Video - Firebase signInWithEmailAndPassword error",e),"auth/user-not-found"===e.code&&(0,c.eJ)(n,s,l)}),t(!0),this.firebaseApp=r,this.isActive=!0,r}catch(p){this.isActive=!1}}getFirebaseApp(){return this.firebaseApp}getFirestore(){if(!this.firebaseApp)return null;if(!this.firestore){let e=(0,l.aU)(this.firebaseApp);e&&(this.firestore=e)}return this.firestore}getMessaging(){if(!this.firebaseApp)return null;if(!this.cloudMessage){let e=(0,u.dG)(this.firebaseApp);e&&(this.cloudMessage=e)}return this.cloudMessage}},h=!1,f=!1;function g(){let e=(0,a.PCX)(),[t,i]=s.useState(!1);return t||h||(h=!0,p.bootstrap(e,()=>{f=!0,i(!0)})),[t||f,p]}function d(){let[e,t]=s.useState(),[i,a]=s.useState(!1),[o,l]=g(),c=s.useRef(0);if(!o)return["",()=>{},!0];if(!r&&!i&&o)try{r=l.getMessaging()}catch(u){a(!0)}let p=e=>{(0,n.gf)(r).then(i=>{e(i),t(i)}).catch(()=>{c.current>5||(c.current=c.current+1,p(e))})};return[e,p,i]}function v(){let[e,t]=g();if(!e)return!1;let i=t.getFirestore();return i}let b=(e,t)=>{let[i,r]=(0,s.useState)();return(0,s.useEffect)(()=>{let i;if(e&&(null==t?void 0:t.collection)&&(null==t?void 0:t.docID)){try{let n=(0,l.H9)(e,t.collection,t.docID);i=(0,l.aQ)(n,async e=>{r(e.data())})}catch(s){}return()=>{null==i||i()}}},[]),i},m=b},59035(e,t,i){i.r(t),i.d(t,{default:()=>u});var r=i(96540),n=i(3556),s=i(87773),a=i(40515),o=i(43498);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let c=(0,n.Ay)(s.A,{name:"FlagLiveLabel",slot:"packageOuter",shouldForwardProp:e=>"backgroundColor"!==e})(({theme:e,backgroundColor:t})=>({height:"24px",display:"inline-flex",padding:`0 ${e.spacing(1)}`,alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.4)",color:e.palette.common.white,fontSize:e.typography.body2.fontSize,textTransform:"uppercase",borderRadius:"4px","& > *":{margin:"0 4px"}}));function u({streamKey:e,...t}){var i,n;let s=(0,o.Ui)(),u=(0,o.ET)(s,{collection:"live_video_view",docID:e}),p=null!==(n=null==u?void 0:u.total_viewer)&&void 0!==n?n:null==u?void 0:null===(i=u.view)||void 0===i?void 0:i.length;return e&&p?r.createElement(c,l({},t),r.createElement(a.s4,{icon:"ico-eye-alt"}),r.createElement(a.Dq,{value:p})):null}}}]);