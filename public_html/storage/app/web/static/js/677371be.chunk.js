"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["formExtras"],{95376(e,t,l){l.r(t),l.d(t,{default:()=>_});var n=l(91557),a=l(40515),r=l(67725),i=l(3556),o=l(60780),u=l(8051),s=l(81502),d=l(20687),c=l(30261),m=l(16535),p=l(84058),v=l.n(p),f=l(58156),g=l.n(f),h=l(97200),b=l.n(h),y=l(85015),E=l.n(y),x=l(96540),A=l(59262);let C={width:2,position:"absolute",right:0,opacity:0,display:"none"},w=(0,i.Ay)(a.s4,{name:"AttachmentIcon"})(({theme:e})=>({paddingRight:e.spacing(.5),fontSize:e.mixins.pxToRem(15)})),k=(0,i.Ay)(o.A,{name:"AttachmentButton"})(({theme:e})=>({fontWeight:"bold"})),S=(0,i.Ay)("div",{name:"AttachmentAction",shouldForwardProp:e=>"disabled"!==e})(({theme:e,disabled:t})=>({color:t?e.palette.text.disabled:e.palette.primary.main,marginLeft:e.spacing(1.5),cursor:"pointer",alignSelf:"center","&:hover":{textDecoration:"underline"}})),O=(0,i.Ay)(u.A,{name:"AttachmentItem",slot:"FormItem"})(({theme:e})=>({display:"flex",marginTop:e.spacing(1),fontSize:e.mixins.pxToRem(13),lineHeight:1.5,"& .info":{display:"flex",alignItems:"center"}})),R=(0,i.Ay)("div")(({theme:e})=>({overflowWrap:"anywhere"}));function M({item:e,index:t,handleDelete:l,error:i,isSubmitting:o,name:d,progress:c}){let{i18n:m}=(0,n.PCX)();return"remove"===e.status?null:x.createElement("div",null,x.createElement(O,null,x.createElement("div",{className:"info","data-testid":v()(`attachmentFile ${t}`)},x.createElement(w,{icon:"ico-paperclip-alt"}),(null==e?void 0:e.status)==="new"&&x.createElement(a.p2,{text:m.formatMessage({id:"new"}),sx:{mr:.5}}),x.createElement(R,null,(0,r.Tu)(e.file_name,30))),o?x.createElement(u.A,{sx:{marginLeft:"auto",minWidth:"100px",pl:1,mt:1}},x.createElement(s.A,{variant:"determinate",value:c||0})):x.createElement(S,{onClick:()=>l(t),disabled:o,"data-testid":v()(`button_remove ${d}`)},m.formatMessage({id:"remove"}))),i?x.createElement(A.A,{error:i}):null)}function _({config:e,name:t,disabled:l,formik:i}){let{dialogBackend:o,i18n:u}=(0,n.PCX)(),[s,p,{setValue:f,setTouched:h}]=(0,c.Mt)(null!=t?t:"AttachmentField"),[y,w]=x.useState({}),{upload_url:S,item_type:O,fullWidth:R=!0,margin:_="normal",size:P,max_upload_filesize:T,disabled:F,accept:I,storage_id:z}=e,$=(0,x.useRef)(),j=e.placeholder||"attach_files",B=x.useMemo(()=>s.value||[],[s.value]),W=Array.isArray(B)&&B.length>0,D=e=>{e.currentTarget.value=null},L=(0,x.useCallback)(e=>{o.confirm({message:u.formatMessage({id:"are_you_sure_you_want_to_delete_attachment_file"}),title:u.formatMessage({id:"are_you_sure"})}).then(t=>{if(!t)return;let l=(0,m.Ay)(B,t=>{t[e].id?t[e].status="remove":t.splice(e,1)});f(l)})},[B]),q=(e,t)=>{let l=Math.round(100*e.loaded/e.total);w(e=>({...e,[t]:l}))},H=(0,x.useCallback)(()=>{(null==p?void 0:p.touched)||h(!0);let e=$.current.files;if(!(null==e?void 0:e.length))return;let t=[];for(let l of Object.keys(e)){let n={status:"new",upload_url:S,download_url:URL.createObjectURL(e[l]),source:URL.createObjectURL(e[l]),file:e[l],file_name:e[l].name,file_size:e[l].size,file_type:e[l].type,uid:b()("file"),fileItemType:O,extension:(0,r.QC)(e[l].name),storage_id:null!=z?z:null},a=n.file.size,i=n.file_name;if(a>T&&0!==T){o.alert({message:u.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,r.Tu)(i,30),fileSize:(0,r.lT)(n.file.size),maxSize:(0,r.lT)(T)})});break}t.push(n)}(null==t?void 0:t.length)>0&&f([...B,...t].map((e,t)=>({...e,onUploadProgress:e=>q(e,t)})))},[B]),N=(0,x.useCallback)(()=>{$.current.click()},[]);return x.createElement(d.A,{fullWidth:R,margin:_,size:P,"data-testid":v()(`field ${t}`)},x.createElement("div",null,x.createElement(k,{variant:"outlined",size:"small",color:"primary","data-testid":v()(`button_add ${t}`),onClick:N,disabled:F||l||i.isSubmitting,startIcon:x.createElement(a.s4,{icon:"ico-paperclip-alt"})},u.formatMessage({id:j}))),W&&B.map((e,l)=>x.createElement(M,{key:l.toString(),handleDelete:L,index:l,item:e,name:t,error:E()(p.error)?"":g()(p.error,l),isSubmitting:i.isSubmitting,progress:y[l]})),E()(p.error)?x.createElement(A.A,{error:p.error}):null,x.createElement("input",{onClick:D,"data-testid":v()(`input ${t}`),ref:$,style:C,accept:I,"aria-hidden":!0,type:"file",multiple:!0,onChange:H,hidden:!0}))}},7461(e,t,l){l.r(t),l.d(t,{default:()=>A});var n=l(91557),a=l(40515),r=l(8051),i=l(20687),o=l(18727),u=l(89481),s=l(54358),d=l(88631),c=l(30261),m=l(84058),p=l.n(m),v=l(62193),f=l.n(v),g=l(23805),h=l.n(g),b=l(96540);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let E=(e,t)=>b.createElement("li",y({"data-value":null==t?void 0:t.value},e),b.createElement(r.A,{sx:{overflow:"hidden"}},b.createElement(a.mE,{lines:1},t.label),t.caption?b.createElement(r.A,null,b.createElement(a.mE,{lines:1,color:"text.secondary",variant:"body2",fontSize:12,component:"span"},t.caption)):null)),x=({config:e,name:t,disabled:l,required:a,formik:m})=>{let{variant:v="outlined",label:g,size:x="medium",fieldValue:A="value",margin:C="normal",sxFieldWrapper:w,disabled:k,placeholder:S,required:O,fullWidth:R=!0,search_endpoint:M,search_params:_,option_default:P=[]}=e,{values:T}=(0,c.j7)(),{compactData:F,i18n:I}=(0,n.PCX)(),[z,$,{setValue:j,setTouched:B}]=(0,c.Mt)(t||"autoComplete"),[W,D]=b.useState(null),L=!!($.error&&($.touched||m.submitCount)),q=b.useMemo(()=>F(_,T),[_,T]),[H,N]=(0,n.Pth)({apiUrl:M,initialParams:q,option_default:P});b.useEffect(()=>{z.value&&"object"==typeof z.value&&!Array.isArray(z.value)&&j(z.value?z.value[A]:null)},[]),b.useEffect(()=>{if(!z.value){D(null);return}if(h()(z.value))D(z.value);else{let e=H.items.filter(e=>e.value==z.value)[0];D(e)}},[z.value,null==H?void 0:H.items]);let X=e=>{z.onBlur(e),B(!0)},V=()=>{f()(P)&&N("")};return b.createElement(i.A,{variant:v,margin:C,fullWidth:R,required:O||a,size:x,"data-testid":p()(`field ${t}`),error:L,sx:w},b.createElement(o.A,{autoHighlight:!0,openOnFocus:!0,onBlur:X,onChange(e,t){j((null==t?void 0:t[A])||null),D(t)},noOptionsText:I.formatMessage({id:"no_options"}),disabled:k||l||m.isSubmitting,value:W,placeholder:S,getOptionLabel:e=>null==e?void 0:e.label,options:H.items,loading:H.loading,renderOption:E,loadingText:b.createElement(r.A,{sx:{display:"flex",justifyContent:"center"}},b.createElement(u.A,null)),renderInput:e=>b.createElement(s.A,y({onFocus:V,onChange(e){var t;let l=(null===(t=e.target)||void 0===t?void 0:t.value)||"";N(l)}},e,{label:g,"data-testid":p()(`field ${t}`),error:L,size:x,required:O||a,InputProps:{...e.InputProps}}))}),L&&b.createElement(d.A,null,null==$?void 0:$.error))},A=x},85458(e,t,l){l.r(t),l.d(t,{default:()=>A});var n=l(91557),a=l(40515),r=l(67725),i=l(3556),o=l(8051),u=l(63461),s=l(20687),d=l(30261),c=l(84058),m=l.n(c),p=l(97200),v=l.n(p),f=l(96540),g=l(59262);let h=e=>new Promise(t=>{let l=new FileReader;l.addEventListener("load",()=>t(l.result),!1),l.readAsDataURL(e)}),b={width:2,position:"absolute",right:0,opacity:0},y=(0,i.Ay)(o.A,{name:"AvatarWrapper"})(({theme:e})=>({borderRadius:"100%",position:"relative",background:"dark"===e.palette.mode?e.palette.grey[600]:e.palette.grey[100]})),E=(0,i.Ay)(u.A,{name:"AvatarButtonIcon"})(({theme:e})=>({width:"100%",height:"100%",fontSize:"40px",position:"absolute",left:0,top:0,zIndex:3})),x=(0,i.Ay)(u.A,{name:"AvatarRemoveButton"})(({theme:e})=>({width:"100%",height:"100%",fontSize:"40px",position:"absolute",left:0,top:0,zIndex:3,opacity:0,"&:hover":{opacity:1}}));function A({config:e,name:t,disabled:l,formik:i}){let{dialogBackend:o,i18n:u}=(0,n.PCX)(),[c,p,{setValue:A}]=(0,d.Mt)(null!=t?t:"avatarUpload"),{item_type:C,max_upload_filesize:w,disabled:k,accept:S,margin:O}=e,[R,M]=(0,f.useState)(c.value),_=(0,f.useRef)();(0,f.useEffect)(()=>{(null==R?void 0:R.file)?I(null==R?void 0:R.file,e=>{A({base64:e})}):(null==R?void 0:R.url)?A({}):A({is_delete:!0})},[R]);let P=e=>!S||S.replace(/\s/g,"").split(",").filter(t=>RegExp(t.replace("*",".*")).test(e)).length>0,T=e=>{e.currentTarget.value=null},F=(0,f.useCallback)(()=>{M(null)},[]),I=async(e,t)=>{if(e){let l=await h(e);t(l)}},z=(0,f.useCallback)(()=>{let e=_.current.files;if(0===e.length)return;if(!P(e.item(0).type)){o.alert({message:u.formatMessage({id:"picture_format_is_not_correct"})}),_.current.value=null;return}let t={file_name:e.item(0).name,download_url:URL.createObjectURL(e.item(0)),file:e.item(0),key:v()("file"),fileItemType:C},l=t.file.size,n=t.file_name;if(l>w&&0!==w){o.alert({message:u.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,r.Tu)(n,30),fileSize:(0,r.lT)(t.file.size),maxSize:(0,r.lT)(w)})});return}t&&M(t)},[R]),$=(0,f.useCallback)(()=>{_.current.click()},[]),j=!!(p.error&&(p.touched||i.submitCount));return f.createElement(s.A,{margin:O,"data-testid":m()(`field ${t}`)},f.createElement(y,{sx:{width:"160px",height:"160px"}},(null==R?void 0:R.download_url)||(null==R?void 0:R.url)?f.createElement(f.Fragment,null,f.createElement(a._V,{shape:"circle",src:(null==R?void 0:R.download_url)||(null==R?void 0:R.url),aspectRatio:"11"}),f.createElement(x,{onClick:()=>F(),disabled:k||l||i.isSubmitting,sx:{color:"white",background:"rgba(0,0,0,0.3)"}},f.createElement(a.s4,{icon:"ico-trash"}))):f.createElement(E,{"data-testid":m()(`button ${t}`),onClick:$,disabled:k||l||i.isSubmitting},f.createElement(a.s4,{icon:"ico-camera"}))),j&&f.createElement(g.A,{error:p.error}),f.createElement("input",{onClick:T,"data-testid":m()(`input ${t}`),ref:_,style:b,accept:S,"aria-hidden":!0,type:"file",multiple:!1,onChange:z,hidden:!0}))}},8367(e,t,l){l.r(t),l.d(t,{default:()=>m});var n=l(3556),a=l(24099),r=l(8051),i=l(87773),o=l(77298),u=l(30261),s=l(96540);let d=(0,n.Ay)(a.A,{slot:"StackContent"})(({theme:e})=>({flexWrap:"wrap","& .MuiChip-root":{margin:e.spacing(.5)}})),c=({config:e,name:t})=>{let[l,,{setValue:n}]=(0,u.Mt)(null!=t?t:"ChipField"),{options:a=[],direction:c="row",spacing:m=1,label:p}=e;if(!l.value){var v;l.value=null!==(v=e.defaultValue)&&void 0!==v?v:""}let f=e=>{n(e)};return s.createElement(r.A,null,p&&s.createElement(i.A,{sx:{paddingBottom:1},variant:"h5"},p),s.createElement(d,{direction:c,spacing:m},a.map((e,t)=>s.createElement(o.A,{onClick:()=>f(e),key:t,label:e.title,variant:"outlined"}))))},m=c},87040(e,t,l){l.r(t),l.d(t,{default:()=>w});var n=l(53975),a=l(8051),r=l(87773),i=l(3556),o=l(20053),u=l(84058),s=l.n(u),d=l(55378),c=l.n(d),m=l(5287),p=l.n(m),v=l(96540),f=l(40515),g=l(30261);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let b=(e,t)=>{let l=Object.keys(e),n=Object.keys(t);return p()(l,n).length>0},y=(0,i.Ay)(a.A,{name:"MuiFormContainer",slot:"Root",shouldForwardProp:e=>!/isSidePlacement|horizontal/i.test(e)})(({theme:e,isSidePlacement:t,horizontal:l})=>({position:"relative",...t&&{paddingRight:e.spacing(2)}})),E=(0,i.Ay)(a.A,{name:"BoxWrapper"})(({theme:e})=>({"&.multiStep":{marginRight:"auto",order:1}})),x=(0,i.Ay)(a.A,{name:"TitleWrapper",shouldForwardProp:e=>"collapsible"!==e})(({theme:e,collapsible:t})=>({display:"flex",justifyContent:"space-between",cursor:t?"pointer":"auto"})),A=({label:e,description:t,isMultiStep:l,collapsible:n,collapsed:i,setCollapsed:o,required:u,sx:s={}})=>{let d=v.useCallback(()=>{n&&o(e=>!e)},[]);return e||t?v.createElement(E,{sx:{pt:1,...s},className:l?"multiStep":""},v.createElement(x,{collapsible:!0,onClick:d},v.createElement(a.A,{component:"span",sx:{display:"inline-flex"}},e?v.createElement(r.A,{component:"h3",color:"text.primary",variant:"h5"},e):null,u?"*":""),n?v.createElement(a.A,{component:"span",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px"}},v.createElement(f.s4,{icon:i?"ico-angle-right":"ico-angle-down"})):null),t?v.createElement(r.A,{component:"p",color:"text.secondary",variant:"body2"},t):null):null},C=(0,i.Ay)(a.A,{name:"MuiFormContainer",slot:"Body",shouldForwardProp:e=>!/horizontal/.test(e)})(({theme:e,horizontal:t})=>({position:"relative",...t?{display:"flex",alignItems:"center",flexWrap:"wrap","&>div:not(:last-child)":{paddingRight:e.spacing(1)}}:{display:"flex",flexDirection:"column"}}));function w({formik:e,config:t}){let{required:l,testid:a,description:r,isMultiStep:i,className:u,wrapAs:d,variant:m="vertical",label:p,elements:f,wrapperProps:E,sx:x,separator:w,sxContainer:k,collapsible:S=!1,collapsed:O,sxHeader:R={}}=t,[M,_]=v.useState(O),{errors:P,submitCount:T}=(0,g.j7)();if(v.useEffect(()=>{T&&S&&b(P,f)&&_(!1)},[T]),d){let F=(null==E?void 0:E.separator)?"":"noSeparator";return v.createElement(d,{className:F,sx:x},v.createElement(A,{isMultiStep:i,label:p,description:r,required:l}),c()(f,(t,l)=>v.createElement(n.Hg,{formik:e,key:l.toString(),config:t})))}return v.createElement(y,h({},E,{"data-testid":s()(a),className:(0,o.default)(u,w),sx:x}),v.createElement(A,{isMultiStep:i,label:p,description:r,collapsible:S,collapsed:M,setCollapsed:_,required:l,sx:R}),S&&M?null:v.createElement(C,{horizontal:"horizontal"===m,className:(0,o.default)(u,w),sx:k},c()(f,(t,l)=>v.createElement(n.Hg,{formik:e,key:l.toString(),config:t}))))}},5501(e,t,l){l.r(t),l.d(t,{default:()=>T});var n=l(91557),a=l(8051),r=l(89481),i=l(20687),o=l(18727),u=l(54358),s=l(88631),d=l(30261),c=l(84058),m=l.n(c),p=l(58156),v=l.n(p),f=l(90179),g=l.n(f),h=l(23805),b=l.n(h),y=l(38221),E=l.n(y),x=l(42194),A=l.n(x),C=l(69843),w=l.n(C),k=l(2404),S=l.n(k),O=l(96540);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let M=(e,t)=>v()(e,"value")==v()(t,"value"),_=(e,t)=>O.createElement(a.A,R({"data-value":null==t?void 0:t.value,component:"li"},e,{key:`${null==t?void 0:t.value}${null==t?void 0:t.label}`}),t.label),P=({config:e,name:t,disabled:l,formik:c})=>{var p,v;let{variant:f="outlined",label:h,size:y="medium",margin:x="normal",disabled:C,placeholder:k,required:P,fullWidth:T=!0,search_endpoint:F,search_params:I,sxFieldWrapper:z}=e,{values:$}=(0,d.j7)(),{compactData:j}=(0,n.PCX)(),[B,W]=O.useState(""),D=O.useRef(!1),L=D.current,[q,H]=O.useState(1),[N,X,{setValue:V}]=(0,d.Mt)(t||"autoComplete"),U=!!(X.error&&(X.touched||c.submitCount)),K=O.useMemo(()=>{let e=b()($)?$:{};return A()(j(I,g()(e,["q",D.current?t:void 0])),w())},[I,$,B]),Z=(0,n.ZCR)(K),[G,J]=(0,n.Pth)({apiUrl:F,initialParams:K}),Q=e=>{N.onBlur(e),B||V(null)},Y=O.useMemo(()=>{let e=()=>{J(B,K)};return E()(e,200)},[B,K]),ee=()=>{Y()};return(O.useEffect(()=>{L&&Y()},[B]),O.useEffect(()=>{!L||S()(K,Z)||Y()},[K]),O.useEffect(()=>{N.value||W("")},[N.value]),O.useEffect(()=>{var e;if(L)return;let t=!N.value||(null==G?void 0:G.loading)?"":G.items.find(e=>e.value==N.value);if(t){D.current=!0,W(null==t?void 0:t.label);return}(null==G?void 0:G.loading)&&!((null==G?void 0:null===(e=G.items)||void 0===e?void 0:e.length)>0)||(H(Math.random()),D.current=!0)},[null==G?void 0:G.items,L]),L)?B||(null===(p=G.items)||void 0===p?void 0:p.length)||G.loading?O.createElement(i.A,{variant:f,margin:x,fullWidth:T,required:P,size:y,"data-testid":m()(`field ${t}`),error:U,sx:z},O.createElement(o.A,{freeSolo:!0,key:q,size:y,autoHighlight:!0,openOnFocus:!0,onBlur:Q,onFocus:ee,onChange(e,t){V(null==t?void 0:t.value)},renderOption:_,disabled:C||l||c.isSubmitting,placeholder:k,isOptionEqualToValue:M,options:null===(v=G.items)||void 0===v?void 0:v.slice(0,20),loading:G.loading,loadingText:O.createElement(a.A,{sx:{display:"flex",justifyContent:"center"}},O.createElement(r.A,null)),onInputChange(e,t){W(t)},inputValue:B||"",renderInput:e=>O.createElement(u.A,R({},e,{label:h,"data-testid":m()(`field ${t}`),error:U}))}),U&&O.createElement(s.A,null,null==X?void 0:X.error)):null:O.createElement(a.A,{sx:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"}},O.createElement(r.A,{color:"inherit",size:20}))},T=P},38530(e,t,l){l.r(t),l.d(t,{default:()=>v});var n=l(91557),a=l(20687),r=l(18727),i=l(54358),o=l(8051),u=l(30261),s=l(84058),d=l.n(s),c=l(96540);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let p=({name:e,config:t,disabled:l,required:s,formik:p})=>{let{margin:v="normal",fieldLabel:f="label",fieldValue:g="value",options:h,disabled:b,suboptions:y,countryFieldName:E,stateFieldName:x,cityFieldName:A="country_city_code",required:C,label:w,size:k,sx:S,sxFieldWrapper:O,fullWidth:R,inline:M}=t,{i18n:_}=(0,n.PCX)(),[P,T,{setValue:F,setTouched:I}]=(0,u.Mt)(E),[z,,{setValue:$}]=(0,u.Mt)(x),j=c.useMemo(()=>P.value?h.find(e=>(null==e?void 0:e.value)===P.value):null,[P.value,h]),B=c.useMemo(()=>{var e;return P.value&&(null===(e=y[P.value])||void 0===e?void 0:e.find(e=>(null==e?void 0:e.value)==z.value))||null},[z.value,y,P]),W=y[P.value],D=e=>{T.touched||I(!0),F((null==e?void 0:e[g])||null),$(null),A&&p.setFieldValue(A,null)},L=e=>{$((null==e?void 0:e[g])||null),A&&p.setFieldValue(A,null)},q=e=>e[f],H=()=>{I(!0)},N=!!(T.error&&(T.touched||p.submitCount));return M?c.createElement(c.Fragment,null,c.createElement(a.A,{margin:v,fullWidth:R,"data-testid":d()(`field ${e}`),sx:O},c.createElement(r.A,{sx:S,openOnFocus:!0,autoHighlight:!0,value:j,disabled:b||l||p.isSubmitting,onChange:(e,t)=>D(t),onBlur:P.onBlur,id:d()(`select-${e}`),multiple:!1,options:h,noOptionsText:_.formatMessage({id:"no_options"}),getOptionLabel:q,renderInput:t=>c.createElement(i.A,m({"data-testid":d()(`field ${e}`),label:w,required:C||s,error:N,helperText:N?T.error:null,onBlur:H},t,{size:k}))})),(null==W?void 0:W.length)>0&&c.createElement(a.A,{margin:v,fullWidth:R,"data-testid":d()(`field ${x}`),sx:O},c.createElement(o.A,null,c.createElement(r.A,{sx:S,openOnFocus:!0,autoHighlight:!0,disabled:b||l||p.isSubmitting,value:B,onChange:(e,t)=>L(t),onBlur:z.onBlur,id:`select-${e}`,multiple:!1,getOptionLabel:q,options:W,noOptionsText:_.formatMessage({id:"no_options"}),renderInput:e=>c.createElement(i.A,m({label:_.formatMessage({id:"state"})},e,{size:k}))})))):c.createElement(a.A,{margin:v,fullWidth:R,"data-testid":d()(`field ${e}`),sx:O},c.createElement(r.A,{sx:S,openOnFocus:!0,autoHighlight:!0,value:j,disabled:b||l||p.isSubmitting,onChange:(e,t)=>D(t),onBlur:P.onBlur,id:d()(`select-${e}`),multiple:!1,options:h,noOptionsText:_.formatMessage({id:"no_options"}),getOptionLabel:q,renderInput:t=>c.createElement(i.A,m({"data-testid":d()(`field ${e}`),label:w,required:C||s,error:N,helperText:N?T.error:null,onBlur:H},t,{size:k}))}),(null==W?void 0:W.length)>0&&c.createElement(o.A,{mt:2},c.createElement(r.A,{sx:S,openOnFocus:!0,autoHighlight:!0,disabled:b||l||p.isSubmitting,value:B,onChange:(e,t)=>L(t),onBlur:z.onBlur,id:`select-${e}`,multiple:!1,getOptionLabel:q,options:W,noOptionsText:_.formatMessage({id:"no_options"}),renderInput:e=>c.createElement(i.A,m({label:_.formatMessage({id:"state"})},e,{size:k}))})))},v=p},59560(e,t,l){l.r(t),l.d(t,{default:()=>z});var n,a,r=l(3556),i=l(60780),o=l(8051),u=l(54358),s=l(97763),d=l(20687),c=l(30261),m=l(84058),p=l.n(m),v=l(64889),f=l.n(v),g=l(62193),h=l.n(g),b=l(2404),y=l.n(b),E=l(44383),x=l.n(E),A=l(96540),C=l(40515),w=l(91557),k=l(59262),S=l(5079),O=l(58410);let R={ROW:"row"},M=(0,r.Ay)(o.A,{name:"FieldStyled",slot:"FieldSortable",shouldForwardProp:e=>"error"!==e})(({theme:e,error:t})=>({width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1),"&:hover":{cursor:"move",backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius},...t&&{flexDirection:"column"}})),_=(0,r.Ay)(o.A)(({theme:e})=>({display:"flex",alignItems:"center",width:32,minWidth:32,padding:e.spacing(1.25,.5),textAlign:"left",justifyContent:"left",overflow:"hidden"})),P=function({id:e,children:t,index:l,moveRow:n,handleDrop:a,sortable:r=!1,error:i,disable:u=!1}){let s=A.useRef(null),[{handlerId:d},c]=(0,S.H)({accept:R.ROW,collect:e=>({handlerId:e.getHandlerId()}),drop(){a()},hover(e,t){var a;if(!s.current)return;let r=e.index;if(r===l)return;let i=null===(a=s.current)||void 0===a?void 0:a.getBoundingClientRect(),o=(i.bottom-i.top)/2,u=t.getClientOffset(),d=u.y-i.top;r<l&&d<o||r>l&&d>o||(n(r,l),e.index=l)}}),[{isDragging:m},p]=(0,O.i)({type:R.ROW,item:()=>({id:e,index:l}),collect:e=>({isDragging:e.isDragging()}),canDrag:!u,end(e,t){let l=t.didDrop();l||a()}});return(p(c(s)),r)?A.createElement(M,{pt:2,ref:s,"data-handler-id":d,style:{opacity:m?0:1},error:i},A.createElement(o.A,{sx:{display:"flex",width:"100%"}},A.createElement(_,null,A.createElement(C.s4,{icon:"ico-arrows-move"})),t),!h()(i)&&A.createElement(o.A,{pl:4,width:"100%"},A.createElement(k.A,{error:i}))):A.createElement(o.A,{pt:2},t)};(n=a||(a={})).Create="new",n.Remove="remove",n.Edit="update";let T=(0,r.Ay)(i.A)(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,fontSize:e.mixins.pxToRem(13),color:e.palette.primary.main,cursor:"pointer",display:"flex",alignItems:"center",marginTop:e.spacing(.5),width:"fit-content","&:hover":{textDecoration:"underline"}})),F=(0,r.Ay)("div",{name:"AnswerItem",slot:"IconClose",shouldForwardProp:e=>"enable"!==e})(({theme:e,enable:t})=>({cursor:t?"pointer":"default",pointerEvents:t?"auto":"none",display:"flex",justifyContent:"center",alignItems:"center",width:e.spacing(5),height:e.spacing(5),margin:e.spacing(0,.5),"& .ico":{fontSize:e.mixins.pxToRem(16),color:e.palette.text.hint}})),I=({config:e,disabled:t,name:l,formik:n})=>{let{margin:r,disabled:i,fullWidth:m,hiddenLabel:v,required:g,variant:b,size:E,style:S,minLength:O,sxFieldWrapper:R,sortable:M=!0}=e,[_,I,{setValue:z,setTouched:$}]=(0,c.Mt)(null!=l?l:"DropdownField"),{i18n:j}=(0,w.PCX)(),B=A.useRef(_.value);A.useEffect(()=>{if(!_.value){var e;z([{label:"",status:a.Create,ordering:(null===(e=_.value)||void 0===e?void 0:e.length)||1}])}},[_.value]);let W=()=>{var e,t,l;let n=(null===(t=_.value)||void 0===t?void 0:null===(l=t[(null===(e=_.value)||void 0===e?void 0:e.length)-1])||void 0===l?void 0:l.ordering)+1||1,r=[..._.value,{label:"",status:a.Create,ordering:n}];z(r)},D=(e,t)=>{let l=[..._.value];l[t].label=e.target.value,_.value[t].status!==a.Create&&(l[t].status=a.Edit),z(l)},L=e=>{if(n.isSubmitting)return;let t=[..._.value];_.value[e].status===a.Create?t.splice(e,1):t[e].status=a.Remove,z(t)},q=(e,t)=>{let l=[..._.value];l.splice(t,0,l.splice(e,1)[0]),z(l=null==l?void 0:l.map((e,t)=>({...e,ordering:t+1})))},H=()=>{if(!(h()(_.value)||y()(B.current,_.value)))try{let e=f()(B.current,_.value,y()),t=[..._.value];t=null==t?void 0:t.map(t=>{let l=e.findIndex(e=>(null==t?void 0:t.id)===(null==e?void 0:e.id)),n=B.current.findIndex(e=>(null==t?void 0:t.id)===(null==e?void 0:e.id));if((null==t?void 0:t.id)&&(null==t?void 0:t.status)!==a.Remove&&l>-1){var r;return y()(x()(null===(r=B.current)||void 0===r?void 0:r[n],["id","ordering","label"]),x()(t,["id","ordering","label"]))?(delete t.status,t):{...t,status:a.Edit}}return t}),z(t)}catch(l){}},N=(e,t)=>{var l,r,i;return e&&(null==e?void 0:e.status)!==a.Remove?A.createElement(P,{sortable:M,key:null==e?void 0:e.id,index:t,id:null==e?void 0:e.id,error:I.error&&(null===(l=I.error[t])||void 0===l?void 0:l.label),moveRow:q,handleDrop:H,disable:n.isSubmitting},A.createElement(o.A,{sx:{display:"flex",width:"100%"}},A.createElement(u.A,{size:"small",fullWidth:!0,id:"outlined-basic",value:e.label,variant:"outlined",onChange:e=>D(e,t),error:(null==I?void 0:null===(r=I.error)||void 0===r?void 0:r.length)&&I.error[t],disabled:n.isSubmitting}),A.createElement(F,{onClick:()=>L(t),enable:_.value.filter(e=>e.status!==a.Remove).length>O},A.createElement(s.A,{title:j.formatMessage({id:"remove"}),placement:"top"},A.createElement(C.s4,{icon:"ico-close"})))),!M&&I.error&&A.createElement(o.A,{ml:1},A.createElement(k.A,{error:null===(i=I.error[t])||void 0===i?void 0:i.label}))):null};return A.createElement(d.A,{margin:null!=r?r:"none",disabled:i,fullWidth:m,hiddenLabel:v,required:g,style:S,size:E,variant:b,"data-testid":p()(`field ${l}`),sx:R},A.createElement(o.A,{ml:2},(_.value||[]).map((e,t)=>N(e,t)),A.createElement(T,{onClick:W,variant:"text",color:"primary",size:"small",disabled:n.isSubmitting},j.formatMessage({id:"add_options"}))))},z=I},19471(e,t,l){l.d(t,{A:()=>m});var n=l(91557),a=l(88631),r=l(8051),i=l(56449),o=l.n(i),u=l(85015),s=l.n(u),d=l(96540),c=l(90243);function m({text:e,sx:t,error:l=!1,component:i="span"}){let{i18n:u}=(0,n.PCX)();if(!e)return null;if(s()(e)&&e.startsWith("<html>"))return d.createElement(a.A,{sx:t,error:l},u.formatMessage({id:"[placeholder]",defaultMessage:e}));let m=o()(e)?e[0]:e;return d.createElement(a.A,{sx:t,error:l},d.createElement(r.A,{component:i,sx:{whiteSpace:"normal",wordBreak:"break-word",mb:.5}},d.createElement(c.Ay,{html:m})))}},59262(e,t,l){l.d(t,{A:()=>o});var n=l(96540),a=l(23805),r=l.n(a);let i=e=>e?r()(e)?i(Object.values(e)[0]):e.toString():null;function o({error:e,className:t="invalid-feedback order-last"}){return e?n.createElement("div",{"data-testid":"error",className:t},i(e)):null}},41490(e,t,l){l.r(t),l.d(t,{default:()=>d});var n=l(6325),a=l(3556),r=l(97763),i=l(30261),o=l(96540);let u=(0,a.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center"})),s=({children:e,name:t,showErrorTooltip:l})=>{let[a,s]=(0,o.useState)(!1),[,d]=(0,i.Mt)(t);return l?o.createElement(r.A,{disableHoverListener:!0,open:a&&!!(null==d?void 0:d.error),onClose:()=>s(!1),onOpen:()=>s(!0),componentsProps:{tooltip:{sx:{backgroundColor:e=>e.palette.background.paper,borderStyle:"solid",color:e=>e.palette.error.main,"& .MuiTooltip-arrow":{color:e=>e.palette.error.main}}}},title:o.createElement(u,null,o.createElement(n.A,{sx:{marginRight:.5},fontSize:"inherit"})," ",null==d?void 0:d.error)},e):e},d=s},15600(e,t,l){l.r(t),l.d(t,{default:()=>p});var n=l(3556),a=l(30261),r=l(84058),i=l.n(r),o=l(55378),u=l.n(o),s=l(96540),d=l(53975);let c=(0,n.Ay)(a.lV,{name:"Form",slot:"Root",shouldForwardProp:e=>!/horizontal|align/i.test(e)})(({theme:e,horizontal:t})=>({display:"flex",...t?{flexDirection:"row",flexWrap:"wrap","& > div":{minHeight:e.spacing(5),paddingRight:e.spacing(1)}}:{flexDirection:"column",flex:1,width:"100%"}})),m=({config:e})=>{let{elements:t,variant:l="vertical",role:n="form",title:a,sx:r,testid:o}=e;return s.createElement(c,{horizontal:"horizontal"===l,"data-testid":i()(null!=o?o:"form"),role:n,sx:r,"aria-label":a,id:null!=o?o:"form"},u()(t,(e,t)=>s.createElement(d.Hg,{key:t.toString(),config:e})))},p=m},28816(e,t,l){l.r(t),l.d(t,{default:()=>p});var n=l(73349),a=l(53975),r=l(84680),i=l(87773),o=l(3556),u=l(55378),s=l.n(u),d=l(96540);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let m=(0,o.Ay)("div",{name:"Form",slot:"ContentRoot",shouldForwardProp:e=>"isSidePlacement"!==e&&"horizontal"!==e})(({theme:e,isSidePlacement:t})=>({display:"block",flexGrow:2,...t&&{overflow:"auto",paddingRight:0,"& > *:first-of-type":{height:"100% !important"}}}));function p({config:{description:e,label:t,elements:l}}){let{dialog:o,isSidePlacement:u,dialogEmbedItem:p}=(0,a.$J)(),v=o?n.Cf:m,f=u?r.P:d.Fragment;return d.createElement(v,{isSidePlacement:u},t||e?d.createElement("div",{className:"pt2 pb0"},t?d.createElement(i.A,{component:"div",color:"textPrimary",variant:"subtitle1"},t):null,e?d.createElement(i.A,{component:"p",color:"textPrimary",variant:"body2"},e):null):null,o&&p?p:null,d.createElement(f,c({},u?{autoHeight:!0,autoHeightMax:"100%",autoHeightMin:"100%"}:null),s()(l,(e,t)=>d.createElement(a.Hg,{key:t.toString(),config:e}))))}},99816(e,t,l){l.r(t),l.d(t,{default:()=>p});var n=l(53975),a=l(8051),r=l(87773),i=l(73349),o=l(3556),u=l(55378),s=l.n(u),d=l(96540),c=l(87040);let m=(0,o.Ay)(a.A,{name:"Form",slot:"Footer",shouldForwardProp:e=>!/separator|variant/.test(e)})(({theme:e,variant:t,separator:l,fixed:n})=>({display:"block",padding:e.spacing(2,0),marginTop:e.spacing(2),flexShrink:0,"& > div":{marginRight:e.spacing(1)},[e.breakpoints.down("sm")]:{paddingTop:e.spacing(1),"& > div":{marginTop:e.spacing(1)}},..."horizontal"===t&&{display:"flex",flexDirection:"row"},...l?{borderTop:"1px solid",borderTopColor:e.palette.divider,paddingTop:e.spacing(2),paddingBottom:e.spacing(0)}:{marginTop:0,paddingTop:e.spacing(1.5)},...n&&{position:"fixed",bottom:0,background:e.palette.background.paper,display:"flex",left:0,right:0,padding:`${e.spacing(2)} !important`,flexDirection:"row-reverse",boxShadow:e.shadows[1],zIndex:10}}));function p({config:{description:e,isMultiStep:t,label:l,variant:o,style:u,elements:p,separator:v=!0,sx:f,fixed:g},name:h}){let{dialog:b,fixedFooter:y}=(0,n.$J)(),E=d.useRef(null),[x,A]=d.useState(0);return(d.useEffect(()=>{if(E.current){let{clientHeight:e=0}=E.current||{};A(Math.max(72,e))}},[E.current]),Object.keys(p).length)?b?d.createElement(c.default,{config:{elements:p,wrapAs:i.ii,name:h,label:l,sx:f,description:e,isMultiStep:t,wrapperProps:{separator:v}}}):(null!=g?g:y)?d.createElement(a.A,{sx:{height:x}},d.createElement(m,{variant:o,separator:v,style:u,sx:f,fixed:x>0,ref:E},s()(p,(e,t)=>d.createElement(n.Hg,{key:t,config:e})))):d.createElement(m,{variant:o,separator:v,style:u,sx:f},l||e?d.createElement("div",{className:"pt2 pb0"},l?d.createElement(r.A,{component:"div",color:"textPrimary",variant:"subtitle1"},l):null,e?d.createElement(r.A,{component:"p",color:"textPrimary",variant:"body2"},e):null):null,s()(p,(e,t)=>d.createElement(n.Hg,{key:t,config:e}))):null}},82144(e,t,l){l.r(t),l.d(t,{default:()=>f});var n=l(73349),a=l(53975),r=l(91557),i=l(40515),o=l(3556),u=l(8051),s=l(63461),d=l(87773),c=l(96540);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let p=(0,o.Ay)(u.A,{name:"Form",slot:"Header"})({display:"block",flexShrink:1}),v=({icon:e="ico-arrow-left",...t})=>{let{navigate:l}=(0,r.PCX)(),n=()=>{l(-1)};return c.createElement(s.A,m({size:"small",role:"button",id:"back","data-testid":"buttonBack",sx:{transform:"translate(-7px,0)"},onClick:n},t),c.createElement(i.s4,{icon:e}))};function f({config:e}){let{sx:t}=e,l=(0,a.$J)(),{title:r,backProps:i,noHeader:o,noTitle:u,description:s,dialog:f,onCancel:g}=l;return f?c.createElement(n.L3,{onCancel:g},r):o?null:c.createElement(p,{sx:t},r&&!u?c.createElement(d.A,{component:"h1",variant:"h3",sx:{display:"flex"}},!f&&i?c.createElement(v,m({},i)):null,r):null,s?c.createElement(d.A,{component:"p",variant:"body2",sx:{whiteSpace:"pre-line"}},s):null)}},41496(e,t,l){l.r(t),l.d(t,{default:()=>U});var n,a,r,i,o=l(3556),u=l(14767),s=l(60780),d=l(20687),c=l(8051),m=l(30261),p=l(84058),v=l.n(p),f=l(97200),g=l.n(f),h=l(58156),b=l.n(h),y=l(23181),E=l.n(y),x=l(23805),A=l.n(x),C=l(96540),w=l(91557),k=l(63461),S=l(54358),O=l(92885),R=l(97763),M=l(40515),_=l(59262),P=l(5079),T=l(58410);let F={ROW:"row"},I=(0,o.Ay)(c.A,{name:"FreeOptionsSortItem",slot:"FieldSortable",shouldForwardProp:e=>"sortable"!==e})(({theme:e,sortable:t})=>({width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1),"&:not(:first-of-type)":{marginTop:e.spacing(1)},...t&&{"&:hover":{cursor:"move"}}})),z=function({children:e,index:t,onMoveRow:l,handleDrop:n,sortable:a=!1,disabled:r=!1}){let i=C.useRef(null),[{handlerId:o},u]=(0,P.H)({accept:F.ROW,collect:e=>({handlerId:e.getHandlerId()}),drop(){n()},hover(e,n){var a;if(!i.current)return;let r=e.index;if(r===t)return;let o=null===(a=i.current)||void 0===a?void 0:a.getBoundingClientRect(),u=(o.bottom-o.top)/2,s=n.getClientOffset(),d=s.y-o.top;r<t&&d<u||r>t&&d>u||(l(r,t),e.index=t)}}),[{isDragging:s},d]=(0,T.i)({type:F.ROW,item:()=>({index:t}),collect:e=>({isDragging:e.isDragging()}),canDrag:!r,end(e,t){let l=t.didDrop();l||n()}});return(d(u(i)),a)?C.createElement(I,{sortable:!0,ref:i,"data-handler-id":o,style:{opacity:s?0:1}},e):C.createElement(I,null,e)};(n=r||(r={})).Create="new",n.Remove="remove",n.Edit="update";let $="FreeOptionsField",j=(0,o.Ay)(k.A,{name:$,slot:"IconClose",shouldForwardProp:e=>"enable"!==e})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",width:e.spacing(5),height:e.spacing(5),margin:e.spacing(0,.5),"& .ico":{fontSize:e.mixins.pxToRem(16),color:e.palette.text.hint}})),B=(0,o.Ay)(c.A,{name:$,slot:"MutipleLanguage",shouldForwardProp:e=>"minimal"!==e})(({theme:e,minimal:t})=>({display:"block",padding:e.spacing(2,1,1,1),border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,...t?{"& > .item-optional":{display:"none !important"}}:{}})),W=(0,o.Ay)(c.A,{name:$,slot:"RowItem"})(({theme:e})=>({width:"100%"})),D=e=>{let{option:t,error:l,disabled:n,onChange:a,onRemove:i,canRemove:o,sortable:u,index:s,onMoveRow:d,handleDrop:m,setTouched:p,translatableOptions:v,collapseOptions:f=!0}=e,{i18n:g}=(0,w.PCX)(),[h,y]=C.useState(!!f);if(!t||(null==t?void 0:t.status)===r.Remove)return null;let{removable:E=!0,value:x}=t;return C.createElement(z,{sortable:u,index:s,onMoveRow:d,handleDrop:m,disabled:n},C.createElement(W,null,C.createElement(c.A,{sx:{display:"flex",width:"100%",alignItems:"center"}},u?C.createElement(c.A,{sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"32px"}},C.createElement(M.s4,{icon:"ico-arrows-move",sx:{mr:1}})):null,v?C.createElement(B,{sx:{flex:1,minWidth:0,"& > .item":{"& + .item":{mt:2}}},minimal:h},v.map(e=>C.createElement(c.A,{key:e.value,className:e.required?"item":"item item-optional"},C.createElement(S.A,{size:"small",fullWidth:!0,id:"outlined-basic",value:b()(x,e.value),variant:"outlined",onChange:t=>a({[e.value]:t.target.value}),error:b()(l,`value.${e.value}`),disabled:n,onBlur(){p(!0)},required:e.required,label:e.label}),b()(l,`value.${e.value}`)?C.createElement(_.A,{error:b()(l,`value.${e.value}`)}):null)),f?C.createElement(c.A,{mt:1},C.createElement(O.A,{color:"primary",component:"span",onClick(){y(e=>!e)},style:{cursor:"pointer"},variant:"body2"},g.formatMessage({id:h?(null==f?void 0:f.more_label)||"view_more":(null==f?void 0:f.less_label)||"view_less"}))):null):C.createElement(c.A,{sx:{flex:1,minWidth:0,width:"100%"}},C.createElement(S.A,{size:"small",fullWidth:!0,id:"outlined-basic",value:x,variant:"outlined",onChange:e=>a(e.target.value),error:l,disabled:n,onBlur(){p(!0)}}),b()(l,"value")?C.createElement(_.A,{error:b()(l,"value")}):null),C.createElement(R.A,{title:g.formatMessage({id:"remove"}),placement:"top"},C.createElement(j,{onClick:i,disabled:!o||!E},C.createElement(M.s4,{icon:"ico-close"}))))))};var L=l(16535),q=l(19471);(a=i||(i={})).Create="new",a.Remove="remove",a.Edit="update";let H="FreeOptionsField",N=(0,o.Ay)(u.A,{name:H})(({theme:e})=>({display:"block",marginBottom:e.spacing(1)})),X=(0,o.Ay)(s.A,{name:H,slot:"MoreButton"})(({theme:e})=>({marginTop:e.spacing(.5)})),V=({config:e,disabled:t,required:l,name:n,formik:a})=>{let{label:r,margin:o,disabled:u,fullWidth:s,required:p,variant:f,size:h,style:y,minLength:x,sxFieldWrapper:k,sortable:S,translatableOptions:O,description:R,collapseOptions:M}=e,[_,P,{setValue:T,setTouched:F}]=(0,m.Mt)(null!=n?n:"DropdownField"),I=t||u||a.isSubmitting,z=(null==_?void 0:_.value)||[],$=!!O,{i18n:j}=(0,w.PCX)();C.useEffect(()=>{(null==_?void 0:_.value)||!(x>0)||T(E()(0,x).map((e,t)=>({uid:g()("freeOption"),value:$?{}:"",status:i.Create,ordering:t+1})))},[]);let B=()=>{let e=[...z.filter(e=>e.status!==i.Remove),{uid:g()("freeOption"),value:"",status:i.Create},...z.filter(e=>e.status===i.Remove)].map((e,t)=>({...e,ordering:t+1}));T(e)},W=(e,t)=>{z[t]&&T((0,L.Ay)(z,l=>{var n;l[t]={status:i.Edit,...l[t],value:A()(e)?{...null===(n=l[t])||void 0===n?void 0:n.value,...e}:e}}))},H=e=>{!I&&z[e]&&T((0,L.Ay)(z,t=>{t[e].status===i.Create?t.splice(e,1):(t[e].status=i.Remove,t.push(t.splice(e,1)[0])),t.forEach((e,l)=>{let n=l+1;if(t[l].ordering!==n){var a;t[l].ordering=n,t[l].status=null!==(a=t[l].status)&&void 0!==a?a:i.Edit}})}))},V=(e,t)=>{let l=[..._.value];l.splice(t,0,l.splice(e,1)[0]),T(l=null==l?void 0:l.map((e,t)=>({status:i.Edit,...e,ordering:t+1})))},U=()=>{},K=z.filter(e=>e.status!==i.Remove).length>x,Z=!!(P.error&&(P.touched||a.submitCount));return C.createElement(d.A,{margin:null!=o?o:"none",disabled:I,fullWidth:s,required:p,style:y,size:h,variant:f,"data-testid":v()(`field ${n}`),sx:k},C.createElement(c.A,null,r?C.createElement(N,{focused:!1,required:p||l},r):null,R?C.createElement(q.A,{text:R,sx:{mb:1}}):null,z.map((e,t)=>C.createElement(D,{index:t,option:e,error:Z?b()(P.error,`${t}`):void 0,disabled:I,onChange:e=>W(e,t),onRemove:()=>H(t),canRemove:K,sortable:S,key:(null==e?void 0:e.id)||(null==e?void 0:e.uid),onMoveRow:V,handleDrop:U,setTouched:F,translatableOptions:O,collapseOptions:M})),C.createElement(X,{onClick:B,variant:"text",color:"primary",size:"small",disabled:I},j.formatMessage({id:"add_options"}))))},U=V},13948(e,t,l){l.r(t),l.d(t,{StyledTextField:()=>x,default:()=>w});var n=l(91557),a=l(3556),r=l(54358),i=l(18727),o=l(30261),u=l(84058),s=l.n(u),d=l(38221),c=l.n(d),m=l(56449),p=l.n(m),v=l(96540),f=l(40515),g=l(8051);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let b=(0,a.Ay)("div",{name:"ItemWrapper"})(({theme:e})=>({marginLeft:e.spacing(1),flex:1,minWidth:0})),y=({props:e,value:t})=>{if(!t)return null;let{statistic:l,full_name:n,title:a}=t;return v.createElement(g.A,h({component:"div"},e),v.createElement(f.Qm,null,v.createElement(f.H8,{user:t,size:40})),v.createElement(b,null,v.createElement(f.p4,null,v.createElement(f.Et,null,n||a),v.createElement(f.CN,null,v.createElement(f.C8,{values:l,display:"total_mutual"})))))};function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let x=(0,a.Ay)(r.A,{name:"StyledTextField"})(({theme:e})=>({"& input::placeholder":{color:e.palette.text.secondary},"& .MuiInputLabel-outlined":{transform:"translate(16px, 16px)"},"& .MuiInputLabel-outlined.MuiInputLabel-shrink":{transform:"translate(14px, -6px) scale(0.8667)",backgroundColor:e.palette.background.paper,paddingRight:e.spacing(.5)},"& .MuiOutlinedInput-root":{minHeight:e.spacing(6),borderRadius:e.spacing(.5),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},"& .MuiFormHelperText-root":{color:e.palette.grey[500]},"& .MuiOutlinedInput-input":{padding:e.spacing(0,2),height:13},"& .MuiAutocomplete-endAdornment":{top:"auto"}})),A=(0,a.Ay)("div",{name:"FriendPickerField"})(({theme:e})=>({padding:e.spacing(2,0,1)})),C=({config:e,name:t,disabled:l,formik:a})=>{var r,u;let{label:d,placeholder:m,multiple:f,disabled:g,api_endpoint:h="/friend",apiParams:b={limit:10},resetWhenUnmount:C=!1,noOptionsText:w}=e,k=v.useRef(""),[S,O,{setValue:R,setTouched:M}]=(0,o.Mt)(null!=t?t:"FriendPickerField"),{apiClient:_,i18n:P}=(0,n.PCX)(),[T,F]=v.useState([]),[I,z]=v.useState(f?[]:null),[$,j]=v.useState(!1),B=v.useMemo(()=>{let e=()=>{j(!0),_.get(h,{params:{...b,q:k.current||void 0}}).then(e=>e.data.data).then(e=>p()(e)&&F(e)).finally(()=>{j(!1)})};return c()(e,200)},[_,k]),W=(e,t)=>{k.current=t,B()},D=e=>{13===e.keyCode&&e.preventDefault()},L=(e,t)=>{(null==O?void 0:O.touched)||M(!0),t&&(z(t),R(t))};return(0,v.useEffect)(()=>{B()},[]),(0,v.useEffect)(()=>{if(S.value)return z(S.value),()=>{C&&R({})}},[]),v.createElement(A,null,v.createElement(i.A,{clearText:P.formatMessage({id:"clear"}),closeText:P.formatMessage({id:"close"}),openText:P.formatMessage({id:"open"}),multiple:f,id:S.name,options:T,loading:$,loadingText:P.formatMessage({id:"loading_dots"}),disabled:g||l||a.isSubmitting,value:I,onChange:L,onInputChange:W,"data-testid":s()(`field ${t}`),disableCloseOnSelect:f,limitTags:3,isOptionEqualToValue:(e,t)=>(null==e?void 0:e.id)===(null==t?void 0:t.id),getOptionLabel:e=>null!==(u=null!==(r=null==e?void 0:e.full_name)&&void 0!==r?r:null==e?void 0:e.title)&&void 0!==u?u:"",filterSelectedOptions:f,noOptionsText:w||P.formatMessage({id:"no_friends_found"}),renderOption:(e,t)=>v.createElement(y,{key:t.id,props:e,value:t}),renderInput:e=>v.createElement(x,E({},e,{onKeyDown:D,variant:"outlined",label:d,"data-testid":s()(`input ${t}`),placeholder:f&&(null==I?void 0:I.length)?"":m}))}))},w=C},45003(e,t,l){l.d(t,{A:()=>r});var n=l(91557),a=l(96540);function r({text:e}){let{i18n:t}=(0,n.PCX)();return e?e.startsWith("<html>")?a.createElement(a.Fragment,null,t.formatMessage({id:"[placeholder]",defaultMessage:e})):a.createElement(a.Fragment,null,e):null}},51766(e,t,l){l.r(t),l.d(t,{default:()=>d});var n=l(87773),a=l(96540),r=l(84058),i=l.n(r),o=l(91557);let u=({price:e,pattern:t,label:l})=>e&&t?`${l} <b>${t.replace(/{3\}/gi,e)}</b>`:l,s=({config:e,name:t,disabled:l,formik:r})=>{let{i18n:s}=(0,o.PCX)(),{feePercentage:d,exchangeRate:c,exchangeRatePattern:m={decimal_separator:".",pattern:"",precision:2,thousand_separator:","},relatedField:p="points",testid:v,label:f,variant:g,tagName:h="span"}=e,b=isNaN(r.values[p])?0:r.values[p];return a.createElement(n.A,{"data-testid":i()(`field ${v}`),variant:g,component:h},a.createElement("div",{dangerouslySetInnerHTML:{__html:u({price:s.formatNumber(b*c*(1-d),{maximumFractionDigits:m.precision,minimumFractionDigits:m.precision}),pattern:m.pattern,label:f})}}))},d=s},73696(e,t,l){l.r(t),l.d(t,{default:()=>r});var n=l(26287);let a=(0,n.Ay)({resolved:{},chunkName:()=>"FormEditor",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!l.m[t]},importAsync:()=>Promise.all([l.e("vendors-node_modules_lexical_code_LexicalCode_js-node_modules_lexical_mark_LexicalMark_js-nod-3afc0e"),l.e("FormEditor")]).then(l.bind(l,70418)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return l(t)},resolve:()=>70418}),r=a},75622(e,t,l){l.r(t),l.d(t,{default:()=>k});var n=l(3556),a=l(8051),r=l(87773),i=l(67131),o=l(30261),u=l(84058),s=l.n(u),d=l(96540),c=l(91557),m=l(40515),p=l(63461),v=l(20053),f=l(62193),g=l.n(f);let h=(0,n.Ay)("div",{name:"SimpleCategoryField",slot:"itemLink",overridesResolver:(e,t)=>[t.itemLink]})(({theme:e})=>({cursor:"pointer",fontSize:e.mixins.pxToRem(15),display:"flex",flexDirection:"row",alignItems:"center",color:"light"===e.palette.mode?e.palette.text.primary:e.palette.text.secondary,textDecoration:"none",position:"relative"}));function b({item:e,handleSelect:t,active:l,classes:n}){var a;let[r,i]=d.useState(!1),{usePageParams:o}=(0,c.PCX)(),{category_id:u,forum_id:s}=o(),f=null!=u?u:s,[y,E]=d.useState(!1);d.useEffect(()=>{var t;if((null==e?void 0:null===(t=e.subs)||void 0===t?void 0:t.length)>0&&e.subs.filter(e=>e.id.toString()===f).length>0){i(!0),E(!0);return}E(!1)},[f]);let x=d.useCallback(()=>{i(e=>!e)},[]);return d.createElement("div",{className:n.item},d.createElement("div",{className:(0,v.default)(!g()(e.subs)&&n.hasSubs,(l||y&&!r)&&n.itemActive)},d.createElement(h,{"data-testid":"itemCategory",onClick:()=>t(e.id,e.resource_name),className:n.link,color:"inherit","aria-selected":l,"aria-label":e.name},d.createElement("span",{className:n.span},e.name)),g()(e.subs)?null:d.createElement(p.A,{size:"small",className:n.icon,onClick:x},d.createElement(m.s4,{icon:r?"ico-angle-up":"ico-angle-down"}))),r&&(null==e?void 0:null===(a=e.subs)||void 0===a?void 0:a.length)>0?d.createElement("ul",{className:n.subCategory},null==e?void 0:e.subs.map((e,l)=>d.createElement(b,{item:e,key:l.toString(),classes:n,handleSelect:()=>t(e.id,e.resource_name),active:e.id.toString()===f}))):null)}var y=l(56525),E=l(85838);let x=(0,y.A)(e=>(0,E.A)({item:{"& $link":{height:e.spacing(7),padding:e.spacing(0,0,0,2),flex:1,minWidth:0,"&:hover":{backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius}}},hasSubs:{display:"flex",alignItems:"center"},link:{},itemActive:{"& $link":{color:e.palette.primary.main,fontWeight:e.typography.fontWeightBold}},span:{},subCategory:{paddingLeft:e.spacing(0),margin:0,listStyle:"none","& span":{paddingLeft:e.spacing(2)}},icon:{position:"absolute",width:32,height:32,right:e.spacing(1),"& .ico":{fontSize:e.mixins.pxToRem(15)}}})),A="SimpleCategoryField",C=(0,n.Ay)(a.A,{name:A,slot:"boxDivider",overridesResolver:(e,t)=>[t.boxDivider]})(({theme:e})=>({paddingTop:e.spacing(2),paddingBottom:e.spacing(2)})),w=(0,n.Ay)(r.A,{name:A,slot:"titleCategoryField",overridesResolver:(e,t)=>[t.titleCategoryField]})(({theme:e})=>({paddingBottom:e.spacing(1)}));function k({config:{label:e,dataSource:t=[],defaultValue:l},name:n}){let a=x(),[r,,{setValue:u}]=(0,o.Mt)(n),c=d.useCallback(e=>{u(e)},[]);return d.createElement("div",{"data-testid":s()(`field ${n}`)},d.createElement(C,null,d.createElement(i.A,null)),d.createElement(w,{component:"h4",variant:"h4",color:"textPrimary"},e),d.createElement("div",null,t.map(e=>d.createElement(b,{classes:a,item:e,handleSelect:c,key:e.id,active:e.id===r.value}))))}},2048(e,t,l){l.r(t),l.d(t,{default:()=>A});var n=l(91557),a=l(3556),r=l(54358),i=l(20687),o=l(18727),u=l(87773),s=l(30261),d=l(84058),c=l.n(d),m=l(56449),p=l.n(m),v=l(63375),f=l.n(v),g=l(96540),h=l(59262);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let y=(0,a.Ay)(r.A,{name:"Text"})(({theme:e})=>({"& p, input::placeholder":{color:e.palette.text.hint}})),E={size:"small",variant:"outlined"},x=e=>{let t=e.filter(e=>e.trim().length>0);return t},A=function({config:e,name:t,disabled:l,formik:a}){let{variant:r="outlined",label:d,size:m="medium",margin:v="normal",disabled:A,placeholder:C,description:w,required:k,fullWidth:S=!0,search_endpoint:O,disableSuggestion:R=!1,allowSpaceNewTag:M=!1}=e,{i18n:_}=(0,n.PCX)(),[P,T,{setValue:F,setTouched:I}]=(0,s.Mt)(null!=t?t:"tags"),[z,$]=g.useState(""),j=(null==P?void 0:P.value)||[],B=!!(T.error&&(T.touched||a.submitCount)),W=g.useMemo(()=>P.value&&p()(P.value)?P.value:[],[]),D=(e,t)=>{null==e||e.preventDefault(),(null==e?void 0:e.type)!=="blur"&&(F(x(t)),$(""))},[L,q]=(0,n.Pth)({apiUrl:O}),H=e=>{P.onBlur(e),I(!0),z&&!(P.value||[]).includes(z)&&(F(x((P.value||[]).concat([z]))),$(""))},N=e=>{if(z)switch(null==e?void 0:e.keyCode){case 9:if(e.preventDefault(),(P.value||[]).includes(z))break;D(e,(P.value||[]).concat([z])),$("");break;case 32:if(M){if(e.preventDefault(),(P.value||[]).includes(z))break;D(e,(P.value||[]).concat([z])),$("")}}},X=(e,t)=>{D(e,j.concat(f()(t.map(e=>e.trim())).filter(e=>e&&!j.includes(e))))};return g.createElement(i.A,{variant:r,margin:v,fullWidth:S,size:m,"data-testid":c()(`field ${t}`)},g.createElement(o.A,{clearText:_.formatMessage({id:"clear"}),closeText:_.formatMessage({id:"close"}),openText:_.formatMessage({id:"open"}),multiple:!0,freeSolo:!0,autoSelect:!0,value:P.value||[],selectOnFocus:!1,filterSelectedOptions:!0,onBlur:H,id:`tags-${t}`,options:R?[]:L.items,ChipProps:E,disabled:A||l||a.isSubmitting,onInputChange(e,t){let l=t.split(",");if(l.length>1){X(e,l);return}$(t||""),R||q(t,{})},inputValue:z||"",defaultValue:W,onChange:(e,t)=>D(e,t),renderInput(e){var l;return g.createElement(y,b({},e,{required:k,label:d,placeholder:(null==P?void 0:null===(l=P.value)||void 0===l?void 0:l.length)?"":C,inputProps:{...e.inputProps,"data-testid":c()(`input ${t}`)},error:B,onKeyDown:N}))}}),B?g.createElement(h.A,{error:T.error}):null,w?g.createElement(u.A,{sx:{fontSize:"13px"},color:"text.hint",mt:1},w):null)}},22269(e,t,l){l.r(t),l.d(t,{default:()=>x});var n=l(30261),a=l(84058),r=l.n(a),i=l(85015),o=l.n(i),u=l(96540),s=l(91557),d=l(40515),c=l(3556),m=l(63461),p=l(97763);let v=(0,c.Ay)(m.A,{name:"TextareaControl",slot:"IconButtonStyled"})(({theme:e})=>({padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",width:e.spacing(3.5),height:e.spacing(3.5),minWidth:e.spacing(3.5),color:`${e.palette.text.secondary} !important`})),f=(0,c.Ay)(d.s4,{name:"TextAreaControlEmoji",slot:"LineIconStyled"})(({theme:e})=>({fontSize:e.mixins.pxToRem(14),[e.breakpoints.down("sm")]:{fontSize:e.mixins.pxToRem(16)}})),g=u.forwardRef(function({title:e,icon:t,onClick:l,testid:n},a){return u.createElement(p.A,{title:e},u.createElement(v,{onClick:l,size:"smaller",ref:a,"data-testid":n,role:"button"},u.createElement(f,{icon:t})))});var h=l(54358),b=l(8051);let y=(0,c.Ay)(h.A,{name:"Text"})(({theme:e})=>({"& p, textarea::placeholder":{color:e.palette.text.hint}})),E=({config:e,disabled:t,required:l,name:a,formik:i})=>{let[d,c,{setValue:m}]=(0,n.Mt)(null!=a?a:"TextField"),p=u.useRef(),{label:v,disabled:f,labelProps:h,placeholder:E,variant:x,margin:A="normal",fullWidth:C,type:w="text",rows:k=5,description:S,autoFocus:O,required:R,maxLength:M,enableEmoji:_=!1}=e,{jsxBackend:P}=(0,s.PCX)(),T=P.get("textArea.control.attachEmoji");if(!d.value){var F;d.value=null!==(F=e.defaultValue)&&void 0!==F?F:""}let I=Boolean(c.error&&(c.touched||i.submitCount)),z=e=>{let t;if(!(null==p?void 0:p.current))return;let l=p.current,n=l.selectionEnd;m(t=n||0===n?l.value.substring(0,n)+e+l.value.substring(n,l.value.length):(l.value||"")+e),l.value=t,l.selectionEnd=n+e.length},$=e=>{o()(d.value)&&m(d.value.trim()),d.onBlur(e)};return(0,u.createElement)(y,{...d,required:R||l,multiline:!0,disabled:f||t||i.isSubmitting,variant:x,label:v,"data-testid":r()(`field ${a}`),autoFocus:O,inputProps:{"data-testid":r()(`input ${a}`),maxLength:M,ref:p},rows:k,InputLabelProps:h,placeholder:E,margin:A,error:!!I&&c.error,fullWidth:C,type:w,helperText:I?c.error:S,onBlur:$,InputProps:{endAdornment:_&&T?u.createElement(b.A,{sx:{position:"absolute",bottom:0,right:"8px"}},u.createElement(T,{control:g,onChange:z})):null}})},x=E},38581(e,t,l){l.d(t,{A:()=>i});var n=l(87116),a=l(96540),r=l(90243);function i({warning:e}){return e?a.createElement(n.A,{color:"warning",variant:"standard",sx:{fontSize:"small",my:1,p:.5,alignItems:"center"}},a.createElement(r.Ay,{html:e||""})):null}},56753(e,t,l){l.r(t),l.d(t,{default:()=>_});var n=l(3556),a=l(54358),r=l(20687),i=l(87773),o=l(57315),u=l(30261),s=l(84058),d=l.n(s),c=l(58156),m=l.n(c),p=l(62193),v=l.n(p),f=l(85015),g=l.n(f),h=l(99374),b=l.n(h),y=l(19471),E=l(41490),x=l(38581),A=l(96540),C=l(91557),w=l(34978),k=l(90243);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let O=({price:e,pattern:t})=>!e||v()(t)?0:t.replace(/{3\}/gi,`<b>${e}</b>`),R=(0,n.Ay)(a.A,{name:"Text"})(({theme:e})=>({"& p, input::placeholder":{color:e.palette.text.hint}})),M=({config:e,disabled:t,required:l,name:n,formik:a})=>{var s,c;let[p,v,{setValue:f}]=(0,u.Mt)(null!=n?n:"TextField"),[h]=(0,u.Mt)(null==e?void 0:e.relatedFieldName),{relatedFieldConfigs:M}=e,_=h?m()(M,null==h?void 0:h.value):{},P={...e,..._},{label:T,disabled:F,autoComplete:I,placeholder:z,variant:$,margin:j,fullWidth:B,type:W="number",rows:D,size:L,required:q,multiline:H,description:N,autoFocus:X,readOnly:V,maxLength:U,hasFormLabel:K=!1,showErrorTooltip:Z=!1,sx:G,sxFieldWrapper:J,preventScrolling:Q=!1,startAdornment:Y,endAdornment:ee,min:et,max:el,warning:en,defaultValue:ea,inputLabelProps:er={},className:ei,balanceDescription:eo,amountCalculation:eu,...es}=P,{percentageFee:ed,currencyFormattedPattern:ec,totalPhrase:em,description:ep}=eu||{},{i18n:ev}=(0,C.PCX)(),ef="number"===W,eg=!!(v.error&&(v.touched||a.submitCount));I&&X&&(eg=eg&&void 0!==p.value),A.useEffect(()=>{void 0===p.value&&a.submitCount&&I&&X&&f("")},[a.submitCount]);let eh=e=>{g()(p.value)&&f(p.value.trim()),p.onBlur(e)},eb=!Z&&eg&&v.error;return A.createElement(r.A,{margin:j,variant:$,fullWidth:B,"data-testid":d()(`field ${n}`),sx:J,id:n},eo?A.createElement(i.A,{mb:2},A.createElement(k.Ay,{html:eo||""})):null,A.createElement(E.default,{name:p.name,showErrorTooltip:Z},A.createElement(R,S({},es,{value:null!==(s=p.value)&&void 0!==s?s:"",name:p.name,onChange:p.onChange,onKeyDown:ef?e=>{e.ctrlKey||e.metaKey||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Delete"===e.key||"Backspace"===e.key||"Tab"===e.key||"Enter"===e.key||"."===e.key||/[0-9]/.test(e.key)||e.preventDefault()}:void 0,onWheel(e){var t;return Q&&(null===(t=e.target)||void 0===t?void 0:t.blur())},error:eg,multiline:!!(D&&H),disabled:F||t||a.isSubmitting,required:q||l,size:L,onBlur:eh,InputProps:{startAdornment:Y?A.createElement(o.A,{position:"start"},Y):null,endAdornment:ee?A.createElement(o.A,{position:"end"},ee):null},inputProps:{..."number"===W?{min:et,max:el}:{},readOnly:V,autoFocus:X,autoComplete:I,maxLength:U,"data-testid":d()(`input ${n}`)},InputLabelProps:{shrink:p.value||ef&&eg||void 0,...Object.assign({},er)},label:K?void 0:T,rows:D,placeholder:null!=z?z:T,type:W,defaultValue:null!==(c=p.value)&&void 0!==c?c:ea,helperText:A.createElement(A.Fragment,null,N?A.createElement(y.A,{text:N}):null,eb?A.createElement(y.A,{text:v.error,error:!0}):null),variant:$,sx:G,className:ei}))),ep?A.createElement(i.A,{mt:1},A.createElement(k.Ay,{html:ep||""})):null,em?A.createElement(i.A,{mt:1},A.createElement("div",{dangerouslySetInnerHTML:{__html:ev.formatMessage({id:em},{value:O({price:(0,w.CZ)({number:b()(p.value||0)*(1-ed),thousand_separator:null==ec?void 0:ec.thousand_separator,precision:null==ec?void 0:ec.precision,decimal_separator:null==ec?void 0:ec.decimal_separator}),pattern:null==ec?void 0:ec.pattern})})}})):null,A.createElement(x.A,{warning:en}))},_=M},64653(e,t,l){l.d(t,{VY:()=>n.A}),l(87040),l(28816),l(99816),l(82144);var n=l(19471);l(15600),l(45003)},34978(e,t,l){l.d(t,{CZ:()=>m,Cq:()=>c,T3:()=>d}),l(87612);var n=l(56449),a=l.n(n);l(62193),l(1882),l(64846);var r=l(11741),i=l.n(r),o=l(98023),u=l.n(o);l(85015),l(75866),l(18479);let s=e=>{let{type:t,elements:l,name:n,renderer:a,validation:r}=e;if("field"===t&&r)return{[n]:r};let i=reduce(l,(e={},t,l)=>({...e,...s(t)}),{}),o={};return"editable-grid"!==a||isEmpty(i)?!isEmpty(i)&&n?o[n]=[["object",i]]:o={...o,...i}:o[n]=[["array",[["object",i]]]],o};function d(e,t="-"){if(!e)return"";let l={"&":"and"};return e=encodeURIComponent(e=(e=(e=(e=(e=e.replace(/[&]/g,e=>l[e])).toLowerCase().replace(/||||||||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d").replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"").replace(/\u02C6|\u0306|\u031B/g,"")).normalize("NFKD").replace(RegExp("\\p{Diacritic}","gu"),"")).replace(/[^a-zA-Z0-9 ]/g,"")).trim().replaceAll(/\s+/g,t))}function c(e,t=[],l="-"){if(!e)return"";let n="[]";t&&a()(t)&&(n=`[${t.join("")}]`);let r=RegExp(n,"g");return e=(e=e.trim().replaceAll(/\s+/g,l)).replaceAll(r,l)}function m({number:e,thousand_separator:t=",",decimal_separator:l=".",precision:n}){(i()(e)||!u()(e))&&(e=0),e=n?e.toFixed(n):e;let a=e.toString().split("."),r=a[0],o=a[1];return r.replace(/\B(?=(\d{3})+(?!\d))/g,t)+(o?`${l}${o}`:"")}},62383(e,t,l){l.r(t),l.d(t,{default:()=>E});var n=l(91557),a=l(3556),r=l(8051),i=l(20687),o=l(60780),u=l(30261),s=l(96540),d=l(84058),c=l.n(d),m=l(62193),p=l.n(m),v=l(58156),f=l.n(v),g=l(40515),h=l(64653);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let y=(0,a.Ay)(r.A,{name:"Item"})(({theme:e})=>({display:"block","& iframe":{maxWidth:"none"}}));function E(e){let{dialogBackend:t,setNavigationConfirm:l,jsxBackend:a}=(0,n.PCX)(),{config:r,name:d,disabled:m,formik:v}=e,{gateway_field_name:E,gateway_id:x,variant:A,fullWidth:C=!0,margin:w="normal",disabled:k,label:S,size:O,confirmation:R,description:M,icon:_,button_props:P={}}=r,[T,,{setValue:F}]=(0,u.Mt)(null!=E?E:"PaymentGatewayField"),I=s.useRef(!1),z=a.get(`payment.element.GatewayButton.${A}`),{errors:$,initialValues:j}=(0,u.j7)(),[B,W]=s.useState(!0);s.useEffect(()=>{if(I.current&&(null==T?void 0:T.value)===x){if(R){t.confirm(R).then(e=>{if(!e){F(f()(j,d));return}v.submitForm().finally(()=>{F(void 0),l(!1)})});return}v.submitForm().finally(()=>{F(void 0),l(!1)})}},[null==T?void 0:T.value,I.current]);let D=()=>{p()($)&&(I.current=!0,F(x))};return B?s.createElement(i.A,{fullWidth:C,margin:w,size:O,"data-testid":c()(`field ${d}`)},s.createElement(y,null,z?s.createElement(z,b({},e,{setShow:W,handleClickDefault:D})):s.createElement(o.A,b({variant:"outlined",fullWidth:C,disabled:k||m||v.isSubmitting,"data-testid":c()(`button ${d}`),onClick:D,startIcon:s.createElement(g.s4,{icon:_})},P||{}),S)),M?s.createElement(h.VY,{text:M}):null):null}},1200(e,t,l){l.r(t),l.d(t,{default:()=>T});var n=l(91557),a=l(8051),r=l(89481),i=l(20687),o=l(18727),u=l(54358),s=l(88631),d=l(30261),c=l(84058),m=l.n(c),p=l(58156),v=l.n(p),f=l(90179),g=l.n(f),h=l(23805),b=l.n(h),y=l(38221),E=l.n(y),x=l(42194),A=l.n(x),C=l(69843),w=l.n(C),k=l(2404),S=l.n(k),O=l(96540);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}let M=(e,t)=>v()(e,"value")==v()(t,"value"),_=(e,t)=>O.createElement(a.A,R({"data-value":null==t?void 0:t.value,component:"li"},e,{key:`${null==t?void 0:t.value}${null==t?void 0:t.label}`}),t.label),P=({config:e,name:t,disabled:l,formik:c})=>{var p,v;let{variant:f="outlined",label:h,size:y="medium",margin:x="normal",disabled:C,placeholder:k,required:P,fullWidth:T=!0,search_endpoint:F,search_params:I}=e,{values:z}=(0,d.j7)(),{compactData:$}=(0,n.PCX)(),[j,B]=O.useState(""),W=O.useRef(!1),D=W.current,[L,q]=O.useState(1),[H,N,{setValue:X}]=(0,d.Mt)(t||"autoComplete"),V=!!(N.error&&(N.touched||c.submitCount)),U=O.useMemo(()=>{let e=b()(z)?z:{};return A()($(I,g()(e,["q",W.current?t:void 0])),w())},[I,z,j]),K=(0,n.ZCR)(U),[Z,G]=(0,n.Pth)({apiUrl:F,initialParams:U}),J=e=>{H.onBlur(e),j||X(null)},Q=O.useMemo(()=>{let e=()=>{G(j,U)};return E()(e,200)},[j,U]),Y=()=>{Q()};return(O.useEffect(()=>{D&&Q()},[j]),O.useEffect(()=>{!D||S()(U,K)||Q()},[U]),O.useEffect(()=>{H.value||B("")},[H.value]),O.useEffect(()=>{var e;if(D)return;let t=!H.value||(null==Z?void 0:Z.loading)?"":Z.items.find(e=>e.value==H.value);if(t){W.current=!0,B(null==t?void 0:t.label);return}(null==Z?void 0:Z.loading)&&!((null==Z?void 0:null===(e=Z.items)||void 0===e?void 0:e.length)>0)||(q(Math.random()),W.current=!0)},[null==Z?void 0:Z.items,D]),D)?j||(null===(p=Z.items)||void 0===p?void 0:p.length)||Z.loading?O.createElement(i.A,{variant:f,margin:x,fullWidth:T,required:P,size:y,"data-testid":m()(`field ${t}`),error:V},O.createElement(o.A,{freeSolo:!0,key:L,autoHighlight:!0,openOnFocus:!0,onBlur:J,onFocus:Y,onChange(e,t){X(null==t?void 0:t.value)},renderOption:_,disabled:C||l||c.isSubmitting,placeholder:k,isOptionEqualToValue:M,options:null===(v=Z.items)||void 0===v?void 0:v.slice(0,20),loading:Z.loading,loadingText:O.createElement(a.A,{sx:{display:"flex",justifyContent:"center"}},O.createElement(r.A,null)),onInputChange(e,t){B(t)},inputValue:j||"",renderInput:e=>O.createElement(u.A,R({},e,{label:h,"data-testid":m()(`field ${t}`),error:V}))}),V&&O.createElement(s.A,null,null==N?void 0:N.error)):null:O.createElement(a.A,{sx:{textAlign:"center"}},O.createElement(r.A,{color:"inherit",size:20}))},T=P}}]);