"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-quiz-blocks-QuizDetail-Block"],{85809(e,t,n){n.r(t),n.d(t,{default:()=>M});var i=n(91557),a=n(32777),o=n(90243),l=n(84680),r=n(19009),s=n(40515),d=n(67725),m=n(3556),c=n(8051),u=n(87773),p=n(96540),g=n(71468),v=n(1921),h=n(84058),f=n.n(h),y=n(62193),x=n.n(y);let A=(0,m.Ay)("div",{name:"ContentWrapper"})(({theme:e})=>({position:"relative"})),b=(0,m.Ay)(s.C8,{name:"QuizDetail",slot:"Statistic"})(({theme:e})=>({"&:before":{color:e.palette.text.secondary,content:'"\xb7"',paddingLeft:"0.25em",paddingRight:"0.25em"}})),w=(0,m.Ay)(c.A,{name:"QuizDetail",slot:"btnPlay",shouldForwardProp:e=>"isCanViewVoteAnswer"!==e})(({theme:e,isCanViewVoteAnswer:t})=>({display:"inline-block",...t&&{fontSize:e.mixins.pxToRem(13),color:e.palette.primary.main,cursor:"pointer","&:hover":{textDecoration:"underline"}}})),E=(0,m.Ay)("div",{name:"QuizDetail",slot:"bgCover"})(({theme:e})=>({position:"relative",zIndex:2,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain",height:320})),_=(0,m.Ay)("div",{name:"QuizDetail",slot:"bgCover",shouldForwardProp:e=>"isModalView"!==e})(({theme:e})=>({position:"absolute",left:0,right:0,bottom:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",zIndex:1,backgroundColor:e.palette.background.default,filter:"blur(100px)"})),z=(0,m.Ay)(c.A,{slot:"ViewContainer"})(({theme:e})=>({width:"100%",marginLeft:"auto",marginRight:"auto",padding:e.spacing(2),position:"relative"})),k=(0,m.Ay)(c.A,{slot:"ItemContent"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),lineHeight:1.33,"& p + p":{marginBottom:e.spacing(2.5)}})),S=(0,m.Ay)(c.A,{slot:"ActionMenu"})(({theme:e})=>({width:32,height:32,[e.breakpoints.down("sm")]:{position:"absolute",top:e.spacing(-1),right:e.spacing(-1)},"& .ico":{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13)}})),B=(0,m.Ay)(c.A,{slot:"AttachmentTitle"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),marginTop:e.spacing(4),color:e.palette.text.secondary,fontWeight:e.typography.fontWeightBold})),C=(0,m.Ay)(c.A,{slot:"Attachment"})(({theme:e})=>({width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-between",[e.breakpoints.down("sm")]:{flexDirection:"column"}})),W=(0,m.Ay)(c.A,{slot:"AttachmentItemWrapper"})(({theme:e})=>({marginTop:e.spacing(2),flexGrow:0,flexShrink:0,flexBasis:"calc(50% - 8px)",minWidth:300,maxWidth:"100%"})),R=(0,m.Ay)(s.dz,{slot:"ButtonWrapper"})(({theme:e})=>({margin:e.spacing(0,0,2),textTransform:"capitalize"})),q=(0,m.Ay)(c.A,{slot:"Result"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),lineHeight:1.33,marginTop:e.spacing(2),color:e.palette.text.hint})),T=(0,m.Ay)(c.A,{slot:"Count"})(({theme:e})=>({fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,textTransform:"none",margin:e.spacing(2,0,3)})),$=(0,i.$MH)((0,a.F)(function({item:e,user:t,questions:n,actions:a,blockProps:m,identity:h,attachments:y,handleAction:$,state:M,name:D}){var I;let{ItemActionMenu:Q,ItemDetailInteraction:P,i18n:V,dispatch:F,useSession:H,jsxBackend:N,dialogBackend:L,useGetItems:j,useGetItem:G}=(0,i.PCX)(),{user:U}=H(),[X,Z]=p.useState({}),J=(0,g.d4)(t=>(0,r.m)(t,null==e?void 0:e.results)),K=j(null==e?void 0:e.member_results),O=G(null==e?void 0:e.user),Y=N.get("core.itemView.pendingReviewCard");if(!e||!t)return null;let{statistic:ee,id:et,is_featured:en,is_sponsor:ei,is_pending:ea,extra:eo}=e,el=e=>{F({type:"quiz/submitQuiz",payload:{quiz_id:et,answers:X},meta:{onSuccess:e,onError:e}})},er=(0,d.AE)(e.image,"origin"),es=e=>{if(!U){F({type:"user/showDialogLogin"});return}Z(e)},ed=()=>{ec&&L.present({component:"quiz.dialog.PeoplePlayed",props:{dialogTitle:"people_played_this",questions:n,user:K,userOwner:O,item:e}})},em=!J&&!ea&&(null==eo?void 0:eo.can_play),ec=Boolean(null==ee?void 0:ee.total_play)&&(!!J||(null==e?void 0:null===(I=e.extra)||void 0===I?void 0:I.can_view_results_before_answer));return p.createElement(l.eB,{"data-testid":`detailview ${e.resource_name}`},p.createElement(l.tD,null,p.createElement(c.A,null,er?p.createElement(c.A,{sx:{position:"relative",overflow:"hidden"}},p.createElement(E,{style:{backgroundImage:`url(${er})`}}),p.createElement(_,{style:{backgroundImage:`url(${er})`}})):null,p.createElement(z,null,Y&&p.createElement(Y,{sxWrapper:{mb:1},item:e}),p.createElement(A,null,p.createElement(c.A,{display:"flex"},p.createElement(s.Et,{variant:"h3",component:"div",showFull:!0,sx:{flex:1}},p.createElement(s.rL,{variant:"itemView",value:en}),p.createElement(s.FN,{variant:"itemView",value:ei,item:e}),p.createElement(u.A,{component:"h1",variant:"h3",sx:{pr:2.5,display:{sm:"inline",xs:"block"},mt:{sm:0,xs:1},verticalAlign:"middle"}},null==e?void 0:e.title)),p.createElement(S,null,p.createElement(Q,{menuName:"detailActionMenu",identity:h,icon:"ico-dottedmore-vertical-o",state:M,handleAction:$}))),p.createElement(s.at,{item:e,statisticDisplay:!1}),(null==e?void 0:e.text)&&p.createElement(k,null,p.createElement(s.wP,{maxHeight:"300px"},p.createElement(s.np,null,p.createElement(o.Ay,{html:e.text})))),(null==y?void 0:y.length)>0&&p.createElement(c.A,{"data-testid":f()("view attachments")},p.createElement(B,null,V.formatMessage({id:"attachments"})),p.createElement(C,null,y.map((e,t)=>p.createElement(W,{key:e.id.toString(),"data-testid":f()(`item attachments ${t+1}`)},p.createElement(s.Hg,{fileName:e.file_name,downloadUrl:e.download_url,isImage:e.is_image,fileSizeText:e.file_size_text,image:null==e?void 0:e.image,identity:null==e?void 0:e._identity,size:"large",index:t}))))),(null==n?void 0:n.length)>0&&n.map((e,t)=>{var n;return p.createElement(v.A,{key:t.toString(),question:e.question,questionId:e.id,answers:e.answers,order:t+1,setQuizResult:es,disabled:!em,result:null==J?void 0:null===(n=J.user_result)||void 0===n?void 0:n.find(t=>t.question_id===e.id)})}),em&&p.createElement(R,{disabled:x()(X),variant:"contained",color:"primary",action:el,"data-testid":f()("button_submit")},V.formatMessage({id:"submit"})),p.createElement(q,null,J&&p.createElement(c.A,{"data-testid":f()("answered_questions")},V.formatMessage({id:"you_have_correct_answer"},{result:()=>p.createElement("strong",null,null==J?void 0:J.result_correct)})),p.createElement(T,null,p.createElement(w,{isCanViewVoteAnswer:ec,"data-testid":f()("button_total_play"),onClick:ed},V.formatMessage({id:"total_play"},{value:(null==ee?void 0:ee.total_play)||0})),p.createElement(b,{values:ee,display:"total_view",component:"span",skipZero:!1,color:"text.secondary",variant:"body2",fontWeight:"fontWeightBold"}))),p.createElement(P,{identity:h,state:M,handleAction:$}))))))},a.m,{quiz_question:!0,attachments:!0})),M=(0,i.WvA)({extendBlock:$,defaults:{placeholder:"Search",blockLayout:"Detail - Paper - Radius Bottom"}})},1921(e,t,n){n.d(t,{A:()=>_});var i=n(33359),a=n(58407),o=n(3372),l=n(3556),r=n(27155),s=n(14767),d=n(77009),m=n(46772),c=n(88631),u=n(20053),p=n(16535),g=n(84058),v=n.n(g),h=n(56449),f=n.n(h),y=n(96540),x=n(71468),A=n(56525),b=n(85838);let w=(0,A.A)(e=>(0,b.A)({right:{},wrong:{},option:{"& .Mui-disabled":{color:e.palette.text.secondary}},quizWrapper:{marginTop:e.spacing(2),marginBottom:e.spacing(2),borderRadius:e.shape.borderRadius,border:e.mixins.border("secondary"),padding:e.spacing(2),"&$right":{border:"1px solid",borderColor:e.palette.success.main,"& $option .Mui-checked + span":{color:e.palette.success.main,fontWeight:"bold"}},"&$wrong":{border:"1px solid",borderColor:e.palette.error.main,"& $option .Mui-checked + span":{color:e.palette.error.main,fontWeight:"bold"}}},question:{fontSize:e.mixins.pxToRem(15),lineHeight:1.33,fontWeight:"bold",color:e.palette.text.primary,marginBottom:e.spacing(1)},formControl:{}}),{name:"QuizQuestion"}),E=(0,l.Ay)(r.A,{slot:"RadioButton"})(({theme:e})=>({"&.Mui-disabled":{..."dark"===e.palette.mode&&{color:e.palette.text.hint}}}));function _(e){let{question:t,answers:n,order:l,result:r,questionId:g,setQuizResult:h,disabled:A=!1}=e,b=(0,x.d4)(e=>(0,i.S)(e,n)),_=Boolean(r),z=!!_&&Boolean((null==r?void 0:r.correct_answer_id)===(null==r?void 0:r.user_answer_id)),k=w(),[S,B]=y.useState(""),[C,W]=y.useState(""),R=e=>{let{value:t}=e.target,n=parseInt(t);B(t),h(e=>(0,p.Ay)(e,e=>{e[g]=n})),W("")};return y.createElement("div",{className:(0,u.default)(k.quizWrapper,_&&(z?k.right:k.wrong)),"data-testid":v()(`quizWrapper ${l}`)},y.createElement(s.A,{variant:"h5",component:"div",className:k.question},`${l}. ${t}`),y.createElement(d.A,{value:_?null==r?void 0:r.user_answer_id.toString():S,onChange:R},f()(b)?b.map((e,t)=>y.createElement(m.A,{disabled:Boolean(r||A),key:e.id.toString(),value:e.id.toString(),style:{width:"fit-content"},control:y.createElement(E,{color:"primary",size:"small","data-testid":`radioButton${l}.${t+1}`,icon:e.id===(null==r?void 0:r.correct_answer_id)?y.createElement(a.A,{fontSize:"small"}):y.createElement(o.A,{fontSize:"small"})}),label:e.answer,className:k.option})):null),C?y.createElement(c.A,null,C):null)}},32777(e,t,n){n.d(t,{m:()=>a,F:()=>i.FB$});var i=n(91557);function a(e){return{deleteQuiz:()=>e("deleteItem"),approveQuiz:()=>e("approveItem")}}},33359(e,t,n){n.d(t,{S:()=>r});var i=n(1081),a=n(58156),o=n.n(a);let l=(e,t)=>t?null==t?void 0:t.map(t=>o()(e,t)).filter(Boolean):[],r=(0,i.Mz)(l,e=>e)},19009(e,t,n){n.d(t,{m:()=>r});var i=n(1081),a=n(58156),o=n.n(a);let l=(e,t)=>t?o()(e,t):void 0,r=(0,i.Mz)(l,e=>e)}}]);