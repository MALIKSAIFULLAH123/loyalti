(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-core-components-SiteBarBrandHeaderMobileBlock-SiteBarBrandHeaderMobileBlock"],{25669(e,t,a){"use strict";a.d(t,{A:()=>c});var n=a(58168),r=a(98587),o=a(96540);let i=["getTrigger","target"];function l(e,t){let{disableHysteresis:a=!1,threshold:n=100,target:r}=t,o=e.current;return r&&(e.current=void 0!==r.pageYOffset?r.pageYOffset:r.scrollTop),(!!a||void 0===o||!(e.current<o))&&e.current>n}let s="undefined"!=typeof window?window:null;function c(e={}){let{getTrigger:t=l,target:a=s}=e,c=(0,r.A)(e,i),d=o.useRef(),[p,u]=o.useState(()=>t(d,c));return o.useEffect(()=>{let e=()=>{u(t(d,(0,n.A)({target:a},c)))};return e(),a.addEventListener("scroll",e,{passive:!0}),()=>{a.removeEventListener("scroll",e,{passive:!0})}},[a,t,JSON.stringify(c)]),p}},23875(e,t,a){var n=a(96131);e.exports=function(e,t){for(var a=e.length;a--&&n(t,e[a],0)>-1;);return a}},28380(e,t,a){var n=a(96131);e.exports=function(e,t){for(var a=-1,r=e.length;++a<r&&n(t,e[a],0)>-1;);return a}},44826(e,t,a){var n=a(77556),r=a(54128),o=a(28754),i=a(23875),l=a(28380),s=a(63912),c=a(13222);e.exports=function(e,t,a){if((e=c(e))&&(a||void 0===t))return r(e);if(!e||!(t=n(t)))return e;var d=s(e),p=s(t),u=l(d,p),m=i(d,p)+1;return o(d,u,m).join("")}},14035(e,t,a){"use strict";a.d(t,{A:()=>O});var n=a(91557),r=a(40515),o=a(8051),i=a(95223),l=a(3556),s=a(44826),c=a.n(s),d=a(85015),p=a.n(d),u=a(96540),m=a(56525),h=a(85838);let g=(0,m.A)(e=>{var t,a,n,r;return(0,h.A)({root:{width:320,position:"absolute",left:"50%",transform:"translateX(-50%)",top:0,paddingTop:13,overflow:"hidden",zIndex:e.zIndex.appBar},rootOpen:{background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,boxShadow:e.shadows[8],"& $searchIcon":{color:e.palette.primary.main},"& $resultWrapper":{display:"block"}},form:{width:284,position:"relative",background:e.palette.action.hover,borderRadius:"999px",height:e.spacing(4),margin:e.spacing(0,2,0,2),"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputBase-input":{height:e.spacing(4),boxSizing:"border-box"}},formFocused:{border:e.mixins.border("primary"),borderColor:e.palette.primary.main,background:"none"},searchIcon:{color:e.palette.text.secondary,transition:"all .2s ease",cursor:"pointer"},inputRoot:{color:`${e.palette.text.secondary} !important`,width:"100%"},inputInput:{padding:`${e.spacing(.5,1,.75,1)} !important`,boxSizing:"border-box",paddingLeft:"30px",transition:"all .2s ease",width:"100%",height:"32px"},guestBar:{justifyContent:"space-between"},textField:{marginRight:e.spacing(1),height:e.spacing(5),width:"203px","& input":{color:e.palette.text.secondary}},button:{marginRight:e.spacing(2),textTransform:"capitalize",fontWeight:e.typography.fontWeightBold},account:{textTransform:"none",fontWeight:e.typography.fontWeightBold},searchIconFocused:{color:e.palette.primary.main},renderOption:{position:"relative",width:"100%",padding:e.spacing(1,0),display:"flex",alignItems:"center",justifyContent:"space-between"},removeButton:{minWidth:"16px",cursor:"pointer",height:"26px",borderRadius:"26px",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(14)},labelItem:{flexGrow:1,paddingRight:e.spacing(1)},resultWrapper:{display:"none"},menuList:{margin:0,padding:0},menuItem:{"& + $menuItem":{borderTop:"solid 1px",borderTopColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary}},menuItemLink:{padding:e.spacing(1.2,2),display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",color:e.palette.text.primary,transition:"all .2s","&:hover":{backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius}},menuItemAvatar:{width:e.spacing(6),height:e.spacing(6),marginRight:e.spacing(2)},menuItemIcon:{display:"inline-block",width:e.spacing(4),height:e.spacing(4),lineHeight:"32px",backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"50%",color:"#828080",textAlign:"center",marginRight:e.spacing(2)},headerPopup:{padding:e.spacing(1,1,1,2),display:"flex",justifyContent:"space-between",alignItems:"center",textTransform:"capitalize",fontWeight:e.typography.fontWeightBold,fontSize:e.mixins.pxToRem(18)},headerRecent:{borderBottom:"1px solid",borderBottomColor:null===(a=e.palette.border)||void 0===a?void 0:a.secondary},clearButton:{fontWeight:"normal !important"},recentItem:{padding:e.spacing(1,2),display:"flex",alignItems:"center",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(15),cursor:"pointer","& + $recentItem":{borderTop:"solid 1px",borderTopColor:null===(n=e.palette.border)||void 0===n?void 0:n.secondary}},focusedItem:{backgroundColor:e.palette.action.selected},recentLabel:{flexGrow:1,padding:e.spacing(1,0),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},searchItem:{display:"flex",flexDirection:"row",padding:e.spacing(1.5),color:e.palette.text.primary,alignItems:"center",borderTop:"solid 1px",borderTopColor:null===(r=e.palette.border)||void 0===r?void 0:r.secondary},searchContent:{paddingLeft:e.spacing(1),flexGrow:1,overflow:"hidden"},searchAvatar:{width:48,height:48},searchNote:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,fontWeight:"normal"},searchTitle:{padding:e.spacing(.5,0),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"block",maxWidth:"100%",fontWeight:e.typography.fontWeightBold,fontSize:e.mixins.pxToRem(15),color:e.palette.text.primary},itemName:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,paddingTop:e.spacing(.5),fontWeight:"normal"},noOptions:{fontSize:e.mixins.pxToRem(15),padding:e.spacing(2),display:"block"},searchMinimize:{width:"32px",height:"32px",transition:"all .1s",transform:"translateZ(0)","& $searchIcon":{position:"relative",pointerEvents:"inherit"},"& $inputRoot":{position:"absolute",left:0,top:0,width:"32px",height:"30px",opacity:0,zIndex:2,cursor:"pointer"},[e.breakpoints.down("md")]:{}},divider:{margin:`${e.spacing(0,2,0,1)} !important`,height:"32px !important"}})},{name:"AppBar"});var f=a(60780),b=a(63461),x=a(20053),v=a(62193),y=a.n(v),k=a(71468);let E=u.forwardRef(function({onSearch:e,limit:t=5,classes:a},o){let{dispatch:i,i18n:l}=(0,n.PCX)(),[s,c]=u.useState(-1),d=[],p=(0,k.d4)(e=>e.search.recentSearch),{data:m,loaded:h}=p;u.useImperativeHandle(o,()=>({moveNext(){if(!(null==m?void 0:m.length))return;let e=Math.min(m.length,t);e&&c(t=>(t+1+e)%e)},movePrev(){if(!(null==m?void 0:m.length))return;let e=Math.min(m.length,t);e&&c(t=>(Math.max(0,t)-1+e)%e)},selected:()=>s>-1?m[s]:void 0})),u.useEffect(()=>{c(-1)},[m]),u.useEffect(()=>{h||i({type:"recentSearch/INIT",payload:{}})},[i,h]);let g=u.useCallback((e,t)=>{e&&(e.preventDefault(),e.stopPropagation()),i({type:"recentSearch/REMOVE",payload:{text:t}})},[]),v=u.useCallback(()=>{i({type:"recentSearch/CLEAR",payload:{}})},[i]);return y()(m)?u.createElement("div",{className:a.menuList,"data-testid":"noRecentSearches"},u.createElement("span",{className:a.noOptions},l.formatMessage({id:"no_recent_searches"}))):h?u.createElement(u.Fragment,null,u.createElement("div",{className:(0,x.default)(a.headerPopup,a.headerRecent)},u.createElement("span",null,l.formatMessage({id:"recents"})),u.createElement(f.A,{onClick:v,className:a.clearButton,tabIndex:-1,size:"medium"},l.formatMessage({id:"clear"}))),u.createElement("div",{className:a.menuList},m.slice(0,5).map((t,n)=>u.createElement("div",{role:"option",tabIndex:-1,ref(e){d[n]=e},"aria-selected":s===n,key:t.toString(),onClick:()=>e(t),onMouseOver:()=>c(n),onMouseLeave:()=>c(-1),className:(0,x.default)(a.recentItem,s===n&&a.focusedItem)},u.createElement("span",{className:a.recentLabel},t),u.createElement(b.A,{tabIndex:-1,size:"smaller",onClick:e=>g(e,t),sx:{fontSize:16}},u.createElement(r.s4,{color:"textSecondary",icon:"ico-close"})))))):null});var C=a(67725),I=a(87773),R=a(12789),w=a(89481);let S=e=>e.search.suggestions,A=u.forwardRef(function({limit:e=6,text:t,classes:a,onSearch:r,isActionSearch:i,blurSearch:l},s){let{i18n:c}=(0,n.PCX)(),[d,p]=u.useState(-1),m=(0,k.d4)(S),{data:h,loaded:g}=Object.assign({},m[t]);u.useImperativeHandle(s,()=>({moveNext(){if(!(null==h?void 0:h.length))return;let t=Math.min(h.length,e);t&&p(e=>(e+1+t)%t)},movePrev(){if(!(null==h?void 0:h.length))return;let t=Math.min(h.length,e);t&&p(e=>(Math.max(0,e)-1+t)%t)},selected:()=>d>-1?h[d]:void 0}));let f=()=>{"function"==typeof r&&r(t)};return u.createElement(u.Fragment,null,!!t&&u.createElement(I.A,{paragraph:!0,padding:"16px",margin:"0",sx:{cursor:"pointer"}},i&&u.createElement("span",{onClick:f},`${c.formatMessage({id:"search"})} “${t}”`)),u.createElement("div",{className:a.menuList,"data-testid":"suggestions"},g&&h.length?h.slice(0,e).map((e,t)=>u.createElement(n.Wti,{role:"option","data-testid":"suggestion",key:e.to,to:e.to,onClick:l,onMouseOver:()=>p(t),onMouseLeave:()=>p(-1),className:(0,x.default)(a.searchItem,d===t&&a.focusedItem)},u.createElement(R.A,{className:a.searchAvatar,src:(0,C.AE)(null==e?void 0:e.image,"200"),children:(0,C.cb)(e.title),style:{backgroundColor:C.m6.hex((0,C.cb)(e.title)||"")}}),u.createElement("div",{className:a.searchContent},u.createElement(I.A,{variant:"h5",className:a.searchTitle},e.title),u.createElement("div",{className:a.searchNote},e.note)))):null,g?null:u.createElement(o.A,{sx:{display:"flex",justifyContent:"center",pb:2,color:"text.disabled"}},u.createElement(w.A,{variant:"indeterminate",color:"inherit"}))))});var B=a(47186);let z="search",M="MfHeaderSearchForm",T=(0,l.Ay)(o.A,{name:M,slot:"Root",overridesResolver:({placement:e},t)=>[t.root,"left"===e&&t.rootPlacementLeft,"float-left"===e&&t.rootPlacementFloatLeft,"center"===e&&t.rootPlacementCenter,"right"===e&&t.rootPlacementRight]})(({theme:e,open:t,placement:a})=>({width:320,position:"absolute",top:0,paddingTop:13,zIndex:e.zIndex.appBar,transform:"translateX(-50%)",left:"50%",...t&&{background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,boxShadow:e.shadows[8],"& $searchIcon":{color:e.palette.primary.main},"& $resultWrapper":{display:"block"}}})),N=(0,l.Ay)("form",{name:M,slot:"Form",skipSx:!0,skipVariantsResolver:!0,shouldForwardProp:e=>"focused"!==e,overridesResolver:(e,t)=>[t.form]})(({theme:e,focused:t})=>({width:284,position:"relative",background:e.palette.action.hover,borderRadius:"999px",height:e.spacing(4),margin:e.spacing(0,2,0,2),"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputBase-input":{height:e.spacing(4),boxSizing:"border-box"},...t&&{border:e.mixins.border("primary"),borderColor:e.palette.primary.main,background:"none"}})),W=(0,l.Ay)(i.Ay,{name:M,slot:"Input"})(({theme:e})=>({color:`${e.palette.text.secondary} !important`,width:"100%","& input::placeholder":{color:e.palette.text.hint}})),P=(0,l.Ay)(o.A,{name:M,slot:"ResultWrapper"})(({open:e})=>({display:e?"block":"none"})),L=(0,l.Ay)(r.s4,{name:M,slot:"SearchIcon",shouldForwardProp:e=>"active"!==e})(({active:e,theme:t})=>({color:t.palette.text.hint,...e&&{color:t.palette.primary.main}}));function O({openSearch:e,minimize:t,closeSearch:a,placement:o,menuRef:i}){var l;let s=g(),{dispatch:d,usePageParams:m,i18n:h,eventCenter:f,navigate:b,location:x,getSetting:v}=(0,n.PCX)(),y=(0,n.IgF)(z,z,"searchHashtagItem"),k=(0,n.IgF)(z,z,"viewAll"),{pathname:I}=x,{q:R}=m(),w=u.useMemo(()=>/^\/hashtag\/search/.test(I)?R?`#${R}`:"":/^\/search/.test(I)?R:"",[I,R]),[S,M]=u.useState({open:!1,text:w,focus:!1,minimize:!!t}),O=v("search"),$=h.formatMessage({id:"search"}),F=u.useRef(),D=u.useRef(),_=u.useRef();u.useEffect(()=>{let e=f.on("minimizeGlobalSearchForm",()=>{M(e=>({...e,minimize:!0}))});return()=>{f.off("minimizeGlobalSearchForm",e)}},[]),u.useEffect(()=>{!0===e&&Q()},[e]);let H=u.useCallback(e=>{if(M(t=>({...t,text:e})),e&&d({type:"recentSearch/ADD",payload:{text:c()(e)}}),e.startsWith("#")&&e.substring(1)){let t={q:e.substring(1),...null==y?void 0:y.pageParams},a=null==k?void 0:k.apiRules,n=(0,C.FI)(t,a);b({pathname:"/hashtag/search",search:B.stringify(n)},{replace:!0})}else b(`/search/?q=${e}`);(null==D?void 0:D.current)&&D.current.blur(),Y()},[]),j=u.useCallback(()=>{M(e=>({...e,focus:!1,open:!1}))},[]),X=u.useCallback(()=>{var e;(null===(e=F.current)||void 0===e?void 0:e.movePrev)&&F.current.movePrev()},[]),G=u.useCallback(()=>{var e;(null===(e=F.current)||void 0===e?void 0:e.moveNext)&&F.current.moveNext()},[]),Y=u.useCallback(()=>{M(e=>({...e,focus:!1,open:!1})),a&&a()},[a]),q=u.useCallback(e=>{var t;let n=null===(t=D.current)||void 0===t?void 0:t.value;if("#"===n)return;e&&(e.preventDefault(),e.stopPropagation());let r=c()(n);r||Y(),r&&(d({type:"recentSearch/ADD",payload:{text:r}}),H(r)),a&&a()},[a]),K=u.useCallback(e=>{let t=e.currentTarget.value;M(e=>({...e,text:t,selectedIndex:0})),d({type:"suggestions/QUERY",payload:{text:t}})},[]),Q=u.useCallback(()=>{if(!S.open&&(M(e=>({...e,focus:!0,open:!0})),D.current)){var e;null===(e=D.current)||void 0===e||e.focus()}d({type:"suggestions/QUERY",payload:{text:S.text}})},[S.open,S.text]),U=u.useCallback(()=>{a&&a(),M(e=>({...e,open:!1,focus:!1}))},[a]),V=u.useCallback(()=>{var e,t;let a=null===(e=F.current)||void 0===e?void 0:e.selected();if(a){null===(t=D.current)||void 0===t||t.blur(),p()(a)?H(a):b(null==a?void 0:a.to);return}q()},[S.text]),J=u.useCallback(e=>{e.preventDefault(),e.stopPropagation()},[]),Z=u.useCallback(e=>{let t=null==e?void 0:e.keyCode;if(!e.metaKey&&!e.ctrlKey)switch(t){case 9:j();break;case 27:j(),J(e);break;case 13:V(),J(e);break;case 38:X(),J(e);break;case 40:G(),J(e);break;default:S.open||Q()}},[S.open]);return(u.useEffect(()=>{let e=["/search","/hashtag/search"].some(e=>I.startsWith(e));M(t=>({...t,text:e?w:""}))},[I,w]),O)?u.createElement(r.qB,{onClickAway:U,excludeRef:i},u.createElement(T,{ref:_,"data-testid":"formSearch",open:S.open,placement:null!=o?o:"center",role:"search",id:"globalSearchBox"},u.createElement(N,{method:"get",focused:!!S.open,"aria-expanded":!S.minimize,onSubmit:q},u.createElement(W,{startAdornment:u.createElement(L,{active:!!S.open,icon:"ico-search-o"}),placeholder:$,classes:{root:s.inputRoot,input:s.inputInput},autoComplete:"off",value:S.text,name:"globalSearch",inputProps:{"aria-label":"search","data-testid":"searchBox",autoComplete:"off",autoCapitalize:"off"},inputRef:D,onFocus:Q,onChange:K,onKeyDown:Z})),S.open?u.createElement(P,{open:S.open},S.text?u.createElement(A,{ref:F,onSearch:H,classes:s,text:S.text,isActionSearch:(null===(l=D.current)||void 0===l?void 0:l.value)!=="#",blurSearch:U}):u.createElement(E,{onSearch:H,ref:F,classes:s})):null)):null}},87933(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>I});var n=a(91557),r=a(84680),o=a(40515),i=a(3556),l=a(8051),s=a(60780),c=a(30719),d=a(25669),p=a(62193),u=a.n(p),m=a(96540),h=a(14035);let g=(0,i.Ay)("div",{name:"BlockHeader"})(({theme:e,minHeight:t})=>({position:"relative",minHeight:t})),f=(0,i.Ay)(l.A,{name:"MenuWrapper"})(({theme:e,active:t,minHeight:a})=>({display:"flex",height:a,borderBottom:e.mixins.border("secondary"),backgroundColor:e.mixins.backgroundColor("paper"),zIndex:1300,left:0,right:0,position:"fixed",transitionDuration:".5s",top:0,alignItems:"center",justifyContent:"space-between",padding:e.spacing(0,2),...t?{top:`-${a}px`}:{}})),b=(0,i.Ay)(o.s4,{name:"MenuButtonIcon"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18)})),x=(0,i.Ay)(n.N_E,{name:"MenuButton"})(({theme:e})=>({marginRight:e.spacing(-1),width:e.spacing(5),height:e.spacing(5),display:"inline-flex",alignItems:"center",justifyContent:"center"})),v=(0,i.Ay)(n.N_E,{name:"Logo"})(({theme:e})=>({height:35,display:"inline-block"})),y=(0,i.Ay)(s.A,{name:"ButtonSignIn"})(({theme:e})=>({fontSize:15,height:32,padding:e.spacing(0,3),textTransform:"capitalize"})),k=(0,i.Ay)("div",{name:"SearchMobile"})(({theme:e})=>({display:"block",zIndex:"1301",position:"absolute",backgroundColor:e.palette.background.paper,top:0,left:0,width:"100%",height:"100%","& > div":{width:"100%"},"& form":{width:"calc(100% - 96px)"}})),E=(0,i.Ay)(n.N_E,{name:"CancelButton"})(({theme:e})=>({position:"absolute",zIndex:e.zIndex.appBar,right:"16px",top:"50%",transform:"translateY(-50%)"})),C=(0,n.WvA)({name:"SiteBarMobileBlock",extendBlock:function({blockProps:e}){var t,a;let{i18n:o,useSession:i,navigate:s,assetUrl:p}=(0,n.PCX)(),{user:C}=i(),[I,R]=m.useState(!1),w=(0,c.A)(),S=m.useRef(),A=(0,d.A)(),B=null!==(a=null===(t=w.appBarMobileConfig)||void 0===t?void 0:t.nav)&&void 0!==a?a:48,z=p("dark"===w.palette.mode?"layout.image_logo_dark":"layout.image_logo"),M=()=>{R(e=>!e)},T=()=>{s({pathname:"/login"})};return u()(C)?m.createElement(r.eB,null,m.createElement(r.tD,null,m.createElement(g,{minHeight:B},m.createElement(f,{ref:S,active:A,minHeight:B},m.createElement(v,{to:"/",title:o.formatMessage({id:"home"})},m.createElement("img",{src:z,height:"30",alt:"home"})),m.createElement(y,{variant:"contained",color:"primary",size:"small",onClick:T,disableElevation:!0,type:"submit"},o.formatMessage({id:"sign_in"})))))):m.createElement(r.eB,null,m.createElement(r.tD,null,m.createElement(g,{minHeight:B},m.createElement(f,{ref:S,active:A,minHeight:B},m.createElement(v,{to:"/",title:o.formatMessage({id:"home"})},m.createElement("img",{src:z,height:"30",alt:"home"})),m.createElement(l.A,null,m.createElement(x,{role:"button",underline:"none",onClick:M},m.createElement(b,{icon:"ico-search-o"})),I?m.createElement(k,null,m.createElement(h.A,{openSearch:I,menuRef:S,closeSearch:()=>R(!1)}),m.createElement(E,{onClick:M},o.formatMessage({id:"cancel"}))):null)))))},defaults:{}}),I=C}}]);