"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["dialogs"],{33778(e,t,a){a.r(t),a.d(t,{default:()=>g});var i=a(91557),n=a(24721),r=a(51763),o=a(26433),l=a(54358),s=a(43791),c=a(60780),d=a(86139),u=a.n(d),m=a(96540);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function g({title:e,message:t,label:a,value:d,helperText:g,positiveButton:h,negativeButton:f}){let{i18n:v,useDialog:y}=(0,i.PCX)(),{setDialogValue:b,disableBackdropClick:x,dialogProps:E}=y(),C=()=>{b(!1)};m.useEffect(()=>{x(!0)},[]);let{label:w,...A}=u()({label:v.formatMessage({id:"cancel"}),color:"primary"},f),{label:k,...S}=u()({label:v.formatMessage({id:"ok"}),color:"primary"},h);e=null!=e?e:v.formatMessage({id:"prompt"});let[P,_]=m.useState(null!=d?d:""),M=()=>{b(P)};return m.createElement(n.A,p({},E,{fullScreen:!1,"data-testid":"popupConfirm",maxWidth:"xs",role:"alertdialog",fullWidth:!0,"aria-modal":!0,variant:"alert"}),m.createElement(r.A,{id:"dialogTitle","data-testid":"popupTitle"},null!=e?e:"Prompt"),m.createElement(o.A,{dividers:!1},m.createElement(l.A,{onChange:e=>_(e.currentTarget.value),autoFocus:!0,defaultValue:d,fullWidth:!0,required:!0,placeholder:a,InputLabelProps:{shrink:!1},variant:"outlined",helperText:g})),m.createElement(s.A,null,m.createElement(c.A,p({},S,{role:"button","data-testid":"buttonCancel",tabIndex:0,variant:"contained",size:"medium",color:"primary",disabled:!P.trim().length,onClick:M,sx:{minWidth:120}}),k),m.createElement(c.A,p({},A,{role:"button","data-testid":"buttonSubmit",tabIndex:1,variant:"outlined",size:"medium",color:"primary",sx:{minWidth:120},onClick:C}),w)))}},59262(e,t,a){a.d(t,{A:()=>l});var i=a(96540),n=a(23805),r=a.n(n);let o=e=>e?r()(e)?o(Object.values(e)[0]):e.toString():null;function l({error:e,className:t="invalid-feedback order-last"}){return e?i.createElement("div",{"data-testid":"error",className:t},o(e)):null}},61764(e,t,a){a.r(t),a.d(t,{default:()=>E});var i=a(91557),n=a(40515),r=a(67725),o=a(24721),l=a(51763),s=a(26433),c=a(43791),d=a(60780),u=a(54358),m=a(16535),p=a(96540),g=a(56525),h=a(85838);let f=(0,g.A)(e=>(0,h.A)({root:{},actionWrapper:{marginBottom:e.spacing(2),paddingRight:e.spacing(2),"& .MuiButton-root":{marginLeft:e.spacing(1.5)}},suggestionsWrapper:{position:"fixed",zIndex:1,backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(2),borderRadius:"4px",boxShadow:e.shadows[2]},userWrapper:{margin:e.spacing(1,0),minWidth:"385px"},userOuter:{display:"inline-flex",alignItems:"center",padding:e.spacing(.5),color:e.palette.primary.main,border:e.mixins.border("primary"),marginRight:e.spacing(.5),marginBottom:e.spacing(.5),"&:hover":{background:e.palette.primary.main,color:"#fff","& $removeBtn":{color:"#fff"}}},removeBtn:{color:e.palette.primary.main,fontSize:11,margin:e.spacing(0,.5,0,1),cursor:"pointer"},name:{fontSize:e.mixins.pxToRem(13)}}),{name:"DialogCreateCustomListPrivacy"});function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let y=(0,g.A)(e=>(0,h.A)({root:{},mentionSuggestionsWrapper:{position:"absolute",backgroundColor:e.mixins.backgroundColor("paper"),borderRadius:4},mentionOptionWrapper:{display:"flex",alignItems:"center",padding:e.spacing(.5,0),cursor:"pointer"},avatar:{width:32,height:32,borderRadius:"50%"},name:{marginLeft:e.spacing(1),color:e.palette.text.primary,fontSize:e.mixins.pxToRem(13)}}));function b({user:e,...t}){let a=y();return p.createElement("div",v({className:a.root},t),p.createElement("div",{className:a.mentionOptionWrapper},p.createElement("img",{src:e.avatar,alt:e.name,className:a.avatar}),p.createElement("span",{className:a.name},e.name)))}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function E(e){let{customList:t}=e,a=f(),{useDialog:g,i18n:h,apiClient:v}=(0,i.PCX)(),{dialogProps:y,closeDialog:E,setDialogValue:C}=g(),[w,A]=p.useState(""),[k,S]=p.useState([]),[P,_]=p.useState([]),[M,R]=p.useState({listName:!1,friends:!1}),[I,O]=p.useState(!1),[W,z]=p.useState([]),L=p.useRef(),T=p.useCallback(({value:e})=>{v.request({method:"get",url:"/friend",params:{q:e,limit:6}}).then(e=>{var t,a,i;return(null===(t=e.data)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.length)?null===(i=e.data)||void 0===i?void 0:i.data:[]}).then(e=>e.map(e=>({avatar:(0,r.AE)(e.avatar,"240"),name:e.full_name,link:`/${e.resource_name}/${e.id}`}))).then(e=>z(e))},[v]),j=()=>{let e=!1;(B(w)||""===w)&&(R(e=>({...e,listName:!0})),e=!0),0===P.length&&(R(e=>({...e,friends:!0})),e=!0),e||(E(),C(w))},F=e=>{R(e=>({...e,listName:!1}));let t=e.target.value;A(t),B(t)&&R(e=>({...e,listName:!0}))},N=e=>{R(e=>({...e,friends:!1}));let t=e.target.value;S(t),T({value:t}),O(!0)},B=e=>t.includes(e),D=e=>{if(_(t=>[...t,e]),S([]),O(!1),L){var t;null==L||null===(t=L.current)||void 0===t||t.focus()}R(e=>({...e,friends:!1}))},H=e=>{_((0,m.Ay)(P,t=>{t.splice(e,1)})),0===P.length&&R(e=>({...e,friends:!0}))};return p.createElement(o.A,x({},y),p.createElement(l.A,null,h.formatMessage({id:"create_friends_list"})),p.createElement(s.A,null,p.createElement(u.A,{error:M.listName,placeholder:h.formatMessage({id:"list_name"}),label:h.formatMessage({id:"list_name"}),variant:"outlined",fullWidth:!0,margin:"normal",size:"small",value:w,onChange:e=>F(e),autoFocus:!0}),P&&0<P.length?p.createElement("div",{className:a.userWrapper},P.map((e,t)=>p.createElement("div",{key:t.toString(),className:a.userOuter},p.createElement("span",{className:a.name},e.name),p.createElement(n.s4,{icon:"ico-close",className:a.removeBtn,onClick:()=>H(t)})))):null,p.createElement(u.A,{error:M.friends,placeholder:h.formatMessage({id:"add_friend"}),label:h.formatMessage({id:"add_friend"}),variant:"outlined",fullWidth:!0,margin:"normal",size:"small",multiline:!0,value:k,onChange:e=>N(e),inputRef:L}),I&&p.createElement("div",{className:a.suggestionsWrapper},W?W.map((e,t)=>p.createElement(b,{key:t.toString(),user:e,onClick:()=>D(e)})):null)),p.createElement(c.A,null,p.createElement("div",{className:a.actionWrapper},p.createElement(d.A,{variant:"outlined",onClick:E,size:"small"},h.formatMessage({id:"back"})),p.createElement(d.A,{variant:"contained",onClick:j,size:"small",color:"primary"},h.formatMessage({id:"create"})))))}},9793(e,t,a){a.r(t),a.d(t,{default:()=>R});var i=a(91557),n=a(73349),r=a(13272),o=a(69360),l=a(56449),s=a.n(l),c=a(62193),d=a.n(c),u=a(23181),m=a.n(u),p=a(81968),g=a(87773),h=a(46772),f=a(43546),v=a(60780),y=a(96540),b=a(16535),x=a(56525),E=a(85838);let C=(0,x.A)(e=>(0,E.A)({root:{},shareWith:{fontSize:e.mixins.pxToRem(15),color:e.palette.text.primary,fontWeight:e.typography.fontWeightBold,marginBottom:e.spacing(1)},linkContainer:{marginTop:e.spacing(1),display:"flex",alignItems:"center"}}),{name:"DialogCustomListPrivacy"});var w=a(52705);let A=(0,x.A)(e=>(0,E.A)({root:{height:e.spacing(5),display:"flex",alignItems:"center"},checkbox:{marginRight:e.spacing(1)}}),{name:"DialogCustomListPrivacy"});function k(){let e=A();return y.createElement("div",{className:e.root},y.createElement("div",{className:e.checkbox},y.createElement(w.A,{variant:"rectangular",width:16,height:16})),y.createElement(w.A,{variant:"text",width:"50%",height:24}))}var S=a(84680),P=a(67725);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let M=e=>{let t=[];return e.forEach(e=>{(null==e?void 0:e.is_selected)&&t.push(null==e?void 0:e.id)}),t};function R({value:e,feed:t}){let a=C(),{useDialog:l,i18n:c,useFetchItems:u,dispatch:x,getAcl:E}=(0,i.PCX)(),{dialogProps:w,setDialogValue:A,closeDialog:R}=l(),I=(0,i.IgF)("core","privacy","getCustomPrivacyOptions"),O=E("friend.friend_list.create"),[W,z]=u({dataSource:{apiUrl:I.apiUrl,apiParams:(0,P.A8)(I.apiParams,t)},normalize:!1}),[L,T]=y.useState(W),[j,F]=y.useState(Array.isArray(e)?e:[]);y.useEffect(()=>{T(W),d()(W)||s()(e)||F(M(W))},[W,e]);let N=()=>{R(),A(j)},B=e=>{F(t=>t.find(t=>t==e)?t.filter(t=>t!=e):[...t,e])},D=y.useCallback(()=>{x({type:"friend/addNewListWhenCustomPrivacy",meta:{onSuccess(e){F(t=>(0,b.Ay)(t,t=>{t.push(e.id)})),T(t=>(0,b.Ay)(t,t=>{t.push(e)}))}}})},[]);return y.createElement(n.lG,_({},w,{maxWidth:"xs",fullWidth:!0}),y.createElement(n.L3,null,c.formatMessage({id:"custom_privacy"})),y.createElement(n.Cf,null,y.createElement("div",{className:a.shareWith},c.formatMessage({id:"share_with"})),y.createElement(S.P,{autoHide:!0,autoHeight:!0,autoHeightMax:200},z?m()(1,5).map(e=>y.createElement(k,{key:e.toString()})):y.createElement(p.A,null,(null==L?void 0:L.length)===0?y.createElement(g.A,{paragraph:!0,variant:"body1",margin:"0",color:"textSecondary"},c.formatMessage({id:"there_are_no_friend_list"})):null==L?void 0:L.map((e,t)=>y.createElement(h.A,{checked:-1<j.indexOf(e.id),key:t.toString(),value:e.id,label:e.title,onChange:()=>B(e.id),control:y.createElement(f.A,{value:e,icon:y.createElement(o.A,{fontSize:"small"}),checkedIcon:y.createElement(r.A,{fontSize:"small"}),color:"primary"})})))),y.createElement("div",{className:a.linkContainer},O&&y.createElement(y.Fragment,null,y.createElement(v.A,{variant:"link",size:"small",color:"primary",onClick:D},c.formatMessage({id:"create_new_custom_list"})),"\xa0",y.createElement("span",null," ",c.formatMessage({id:"or"})," "),"\xa0"),y.createElement(v.A,{variant:"link",size:"small",href:"/friend",color:"primary"},c.formatMessage({id:"manage_lists"})))),y.createElement(n.ii,null,y.createElement(v.A,{variant:"contained",onClick:N,size:"small",color:"primary",disabled:0===j.length},c.formatMessage({id:"save"})),y.createElement(v.A,{variant:"outlined",onClick:R,size:"small"},c.formatMessage({id:"cancel"}))))}},63301(e,t,a){a.r(t),a.d(t,{default:()=>x});var i=a(91557),n=a(73349),r=a(67725),o=a(8051),l=a(18727),s=a(54358),c=a(3556),d=a(96540),u=a(52705),m=a(87773),p=a(60780),g=a(67131);function h({item:{title:e,keywords:t,description:a,previewImage:n,name:r},onItemSelected:l,onKeyWorkClicked:s}){let{i18n:c}=(0,i.PCX)();return d.createElement(d.Fragment,null,d.createElement(o.A,{component:"div",flexDirection:"row",display:"flex"},d.createElement(o.A,{component:"div",mr:"16px"},d.createElement(u.A,{component:"div",variant:"rectangular",width:"120px",height:"80px",animation:!1})),d.createElement(o.A,{sx:{flex:1}},d.createElement(m.A,{variant:"h4"},null!=e?e:r),d.createElement(m.A,{variant:"body1"},t),d.createElement(m.A,{variant:"body1"},a)),d.createElement(o.A,{sx:{mt:1.5}},d.createElement(p.A,{onClick:()=>l(r)},c.formatMessage({id:"create_layout_block"})))),d.createElement(g.A,{style:{margin:"12px 0"}}))}var f=a(63375),v=a.n(f);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let b=(0,c.Ay)(o.A,{name:"Editor",slot:"Tag"})(({theme:e})=>({display:"inline-block",color:e.palette.primary.main,cursor:"pointer",fontSize:e.typography.body1.fontSize,background:"#2682d511",margin:"2px",padding:"0 4px",borderRadius:"4px"}));function x(e){let{parentBlockId:t,slotName:a,pageName:c,pageSize:u}=e,{useDialog:m,layoutBackend:p,dispatch:g,i18n:f}=(0,i.PCX)(),{dialogProps:x,closeDialog:E}=m(),[C,w]=d.useState(""),A=p.getAllBlockView(),k=i.SDN,S=d.useMemo(()=>{let e=[];return Object.values(A).filter(e=>!e.experiment).filter(e=>!k&&!e.admincp||k&&e.admincp).filter(e=>!e.hiddenOnEditorMode).forEach(({keywords:t})=>{t&&t.split(",").map(e=>e.trim().toLowerCase()).forEach(t=>e.push(t))}),v()(e).filter(Boolean).sort()},[]),P=e=>{(0,r.yy)(150).then(()=>{g({type:"@layout/editBlock",payload:{parentBlockId:t,pageName:c,slotName:a,blockName:e,pageSize:u}})}),E()},_=d.useMemo(()=>Object.values(A).map(e=>({...e})).filter(e=>!e.experiment).filter(e=>!k&&!e.admincp||k&&e.admincp).filter(e=>!e.hiddenOnEditorMode).filter(Boolean),[]),M=d.useMemo(()=>{if(!C)return _;let e=RegExp((0,r.Nt)(C),"i");return _.filter(t=>e.test(t.keywords)||e.test(t.title))},[_,C]);return d.createElement(n.lG,y({},x,{maxWidth:"md",fullWidth:!0}),d.createElement(n.L3,{id:"alert-dialog-title"},f.formatMessage({id:"create_layout_block"})),d.createElement(n.Cf,{sx:{height:"50vh"}},d.createElement(o.A,{sx:{display:"flex",flexDirection:"row"}},d.createElement(o.A,{sx:{width:220,mr:2}},d.createElement(l.A,{sx:{mb:2},freeSolo:!0,options:S,getOptionLabel:e=>e,onChange(e,t){w(t)},value:C,renderInput:e=>d.createElement(s.A,y({},e,{hiddenLabel:!0,autoFocus:!0,fullWidth:!0,size:"small",variant:"outlined",placeholder:f.formatMessage({id:"search"})}))}),S.map(e=>d.createElement(b,{key:e,onClick:()=>w(e)},e))),d.createElement(o.A,{sx:{flex:1}},M.map((e,t)=>d.createElement(h,{key:t.toString(),item:e,onItemSelected:P,onKeyWorkClicked:w}))))))}},69845(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(91557),n=a(53975),r=a(24721),o=a(96540),l=a(67244);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(){let{useDialog:e,i18n:t}=(0,i.PCX)(),{closeDialog:a,dialogProps:c}=e(),d=t.formatMessage({id:"add_new_template"}),u=(0,l.pJ)(d);u.elements.content.elements.name={component:"Text",name:"name",variant:"outlined",margin:"normal",required:!0,defaultValue:"",label:"Template Name",fullWidth:!0},u.elements.footer.elements={cancel:{component:"Button",label:"Cancel",color:"primary",type:"cancel",onClick:a},submit:{component:"Button",label:"Submit",color:"primary",type:"cancel",onClick:a}};let m=()=>{};return o.createElement(r.A,s({},c),o.createElement(n.ok,{dialog:!0,initialValues:{},formSchema:u,onSubmit:m}))}},51687(e,t,a){a.r(t),a.d(t,{ItemView:()=>f,default:()=>y});var i=a(73349),n=a(91557),r=a(3556),o=a(8051),l=a(77299),s=a(67131),c=a(60780),d=a(56525),u=a(85838),m=a(96540);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let g=(0,r.Ay)(o.A,{name:"ThemeItem",slot:"Root"})(({theme:e,selected:t})=>({borderRadius:e.shape.borderRadius,overflow:"hidden",border:`2px solid ${t?e.palette.primary.main:"rgba(0,0,0,0.1)"}}`})),h=(0,r.Ay)(o.A,{name:"ThemeItem",slot:"Content"})(({theme:e})=>({borderRadius:e.shape.borderRadius,display:"block",paddingBottom:"60%",backgroundColor:"rgba(0,0,0,0.1)",backgroundSize:"cover"}));function f({title:e,id:t,image:a,selected:i,onChange:n}){return m.createElement(g,{selected:i},m.createElement(h,{title:e,onClick:()=>n(t),style:{backgroundImage:`url(${a})`}}))}let v=(0,d.A)(e=>(0,u.A)({content:{display:"flex",flexWrap:"nowrap",flexDirection:"row"},divider:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},dialogActions:{margin:e.spacing(1),"& button":{width:94,height:40}}}),{name:"ChooseThemeDialog"});function y(){let{useDialog:e,getSetting:t,i18n:a,usePreference:r}=(0,n.PCX)(),{themeId:o=n.SS4}=r(),{dialogProps:d,closeDialog:u,setDialogValue:g}=e(),[h,y]=m.useState(o),b=v(),x=t("layout.variants",[]),E=m.useCallback(()=>{g(h)},[g,h]),C=m.useCallback(e=>{y(e)},[]);return m.createElement(i.lG,p({},d,{maxWidth:"sm","data-testid":"dialogThemePicker"}),m.createElement(i.L3,null,a.formatMessage({id:"choose_your_preferred_theme"})),m.createElement(i.Cf,null,m.createElement("div",{className:b.content},m.createElement(l.Ay,{container:!0,columnSpacing:1,rowSpacing:2},x.map(e=>{var t;return m.createElement(l.Ay,{item:!0,key:null===(t=e.id)||void 0===t?void 0:t.toString(),xs:12},m.createElement(f,p({},e,{image:e.image,selected:e.id===h,onChange:C})))})))),m.createElement(s.A,{className:b.divider}),m.createElement(i.ii,{className:b.dialogActions},m.createElement(c.A,{onClick:E,variant:"contained",color:"primary",disabled:!h,"data-testid":"buttonSubmit"},a.formatMessage({id:"apply"})),m.createElement(c.A,{onClick:u,type:"button",variant:"outlined",color:"primary","data-testid":"buttonCancel"},a.formatMessage({id:"cancel"}))))}},36582(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(73349),r=a(60780),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s(){let{i18n:e,theme:t,useDialog:a}=(0,i.PCX)(),{closeDialog:s,dialogProps:c}=a();return o.createElement(n.lG,l({},c,{maxWidth:"sm",fullWidth:!0}),o.createElement(n.L3,{id:"alert-dialog-title"},e.formatMessage({id:"layout_inspect_theme"})),o.createElement(n.Cf,null,o.createElement("pre",null,JSON.stringify(t,null,"  "))),o.createElement(n.ii,null,o.createElement(r.A,{onClick:s,color:"primary",autoFocus:!0,children:e.formatMessage({id:"ok"})})))}},61795(e,t,a){a.d(t,{B6:()=>n.A,e6:()=>i.A}),a(52095),a(67336);var i=a(98414),n=a(60300)},7178(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(24721),r=a(96540),o=a(53975);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({config:e}){let{action_name:t,onSubmit:a,formValues:s={},onCancel:c}=e||{},{useDialog:d,dispatch:u}=(0,i.PCX)(),{setDialogResolveValue:m,setDialogValue:p,dialogProps:g,forceClose:h,disableBackdropClick:f}=d(),v=(0,i.IgF)("captcha","captcha","getVerifyForm"),y=r.useMemo(()=>s,[]);r.useEffect(()=>{f(!0)},[]);let b=(e,t)=>{m({...e,formValues:y}),u({type:"@waitingCaptchaImage/start",payload:{form:t,forceClose:h}})},x=()=>{p(null),c&&c()};return r.createElement(n.A,l({},g,{fullScreen:!1,"data-testid":"dialogCaptchaImage",maxWidth:"xs",fullWidth:!0,"aria-modal":!0,onCancel:x}),r.createElement(o.aI,{dataSource:v,onSubmit:a||b,onCancel:x,pageParams:{action_name:t,auto_focus:!0},navigationConfirmWhenDirty:!1,dialog:!0}))}},31349(e,t,a){a.r(t),a.d(t,{default:()=>G,initState:()=>V});var i,n=a(91557),r=a(40515),o=a(67725),l=a(24721),s=a(51763),c=a(63461),d=a(60780),u=a(89481),m=a(8051),p=a(14931),g=a(30719),h=a(2491),f=a(1882),v=a.n(f),y=a(96540);let b=e=>new Promise((t,a)=>{let i=new Image;i.addEventListener("load",()=>t(i)),i.addEventListener("error",e=>a(e)),i.setAttribute("crossOrigin","anonymous"),i.src=e.startsWith("http")?`${e}?not-from-cache`:e});async function x(e,t,a,i=0,n=!1,r=!1){try{let o=await b(e),l=document.createElement("canvas"),s=l.getContext("2d"),c=Math.max(o.width,o.height),d=2*(c/2*Math.sqrt(2));l.width=d,l.height=d,s.translate(d/2,d/2),s.rotate(i*Math.PI/180),s.scale(n?-1:1,r?-1:1),s.translate(-d/2,-d/2),s.drawImage(o,d/2-.5*o.width,d/2-.5*o.height);let u=s.getImageData(0,0,d,d);if(l.width=t.width,l.height=t.height,s.putImageData(u,Math.round(0-d/2+.5*o.width-t.x),Math.round(0-d/2+.5*o.height-t.y)),"base64"===a)return l.toDataURL("image/jpeg");return new Promise(e=>{l.toBlob(t=>{e(URL.createObjectURL(t))},"image/jpeg")})}catch(m){throw Error(m)}}var E=a(14030),C=a.n(E);function w(e,t,a,i,n=0){let{width:r,height:o}=I(t.width,t.height,n);return{x:A(e.x,r,a.width,i),y:A(e.y,o,a.height,i)}}function A(e,t,a,i){let n=t*i/2-a/2;return Math.min(n,Math.max(e,-n))}function k(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function S(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function P(e,t){return Math.min(e,Math.max(0,t))}function _(e,t){return t}function M(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function R(e,t,a,i,n){let r=Math.cos,o=Math.sin,l=n*Math.PI/180,s=(e-a)*r(l)-(t-i)*o(l)+a,c=(e-a)*o(l)+(t-i)*r(l)+i;return[s,c]}function I(e,t,a){let i=e/2,n=t/2,r=[R(0,0,i,n,a),R(e,0,i,n,a),R(e,t,i,n,a),R(0,t,i,n,a)],o=Math.min(...r.map(e=>e[0])),l=Math.max(...r.map(e=>e[0])),s=Math.min(...r.map(e=>e[1])),c=Math.max(...r.map(e=>e[1]));return{width:l-o,height:c-s}}function O(...e){return e.filter(e=>"string"==typeof e&&0<e.length).join(" ").trim()}function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}class z extends(i=y.Component){componentDidMount(){window.addEventListener("resize",this.computeSizes),this.containerRef&&(this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.preventZoomSafari),this.containerRef.addEventListener("gesturechange",this.preventZoomSafari)),this.imageRef&&this.imageRef.complete&&this.onMediaLoad()}componentWillUnmount(){window.removeEventListener("resize",this.computeSizes),this.containerRef&&(this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.containerRef.removeEventListener("gesturechange",this.preventZoomSafari)),this.styleRef&&this.styleRef.remove(),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent()}componentDidUpdate(e){var t,a,i,n,r,o,l,s;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(a=this.props.cropSize)||void 0===a?void 0:a.height)||(null===(i=e.cropSize)||void 0===i?void 0:i.width)!==(null===(n=this.props.cropSize)||void 0===n?void 0:n.width)?this.computeSizes():((null===(r=e.crop)||void 0===r?void 0:r.x)!==(null===(o=this.props.crop)||void 0===o?void 0:o.x)||(null===(l=e.crop)||void 0===l?void 0:l.y)!==(null===(s=this.props.crop)||void 0===s?void 0:s.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent())}getAspect(){let{cropSize:e,aspect:t}=this.props;return e?e.width/e.height:t}onPinchStart(e){let t=z.getTouchPoint(e.touches[0]),a=z.getTouchPoint(e.touches[1]);this.lastPinchDistance=k(t,a),this.lastPinchRotation=S(t,a),this.onDragStart(M(t,a))}onPinchMove(e){let t=z.getTouchPoint(e.touches[0]),a=z.getTouchPoint(e.touches[1]),i=M(t,a);this.onDrag(i),this.rafPinchTimeout&&window.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=window.requestAnimationFrame(()=>{let e=k(t,a),n=this.props.zoom*(e/this.lastPinchDistance);this.setNewZoom(n,i),this.lastPinchDistance=e;let r=S(t,a),o=this.props.rotation+(r-this.lastPinchRotation);this.props.onRotationChange&&this.props.onRotationChange(o),this.lastPinchRotation=r})}render(){let{image:e,video:t,mediaProps:a,transform:i,crop:{x:n,y:r},rotation:o,zoom:l,flipHorizontal:s=!1,flipVertical:c=!1,cropShape:d,showGrid:u,style:{containerStyle:m,cropAreaStyle:p,mediaStyle:g},classes:{containerClassName:h,cropAreaClassName:f,mediaClassName:v}}=this.props,b=c?-1:1,x=s?-1:1;return y.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:e=>this.containerRef=e,"data-testid":"container",style:m,className:O("reactEasyCrop_Container",h)},e?y.createElement("img",W({alt:"",className:O("reactEasyCrop_Image",v)},a,{src:e,ref:e=>this.imageRef=e,style:{...g,transform:i||`translate(${n}px, ${r}px) rotate(${o}deg) scale(${l*b}, ${l*x})`},onLoad:this.onMediaLoad})):t&&y.createElement("video",W({autoPlay:!0,loop:!0,muted:!0,className:O("reactEasyCrop_Video",v)},a,{src:t,ref:e=>this.videoRef=e,onLoadedMetadata:this.onMediaLoad,style:{...g,transform:i||`translate(${n}px, ${r}px) rotate(${o}deg) scale(${l*b}, ${l*x})`},controls:!1})),this.state.cropSize&&y.createElement("div",{style:{...p,width:this.state.cropSize.width,height:this.state.cropSize.height},"data-testid":"cropper",className:O("reactEasyCrop_CropArea","round"===d&&"reactEasyCrop_CropAreaRound",u&&"reactEasyCrop_CropAreaGrid",f)}))}constructor(...e){super(...e),this.imageRef=null,this.videoRef=null,this.containerRef=null,this.styleRef=null,this.containerRect=null,this.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},this.dragStartPosition={x:0,y:0},this.dragStartCrop={x:0,y:0},this.lastPinchDistance=0,this.lastPinchRotation=0,this.rafDragTimeout=null,this.rafPinchTimeout=null,this.wheelTimer=null,this.state={cropSize:null,hasWheelJustStarted:!1},this.preventZoomSafari=e=>e.preventDefault(),this.cleanEvents=()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onDragStopped),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onDragStopped)},this.clearScrollEvent=()=>{this.containerRef&&this.containerRef.removeEventListener("wheel",this.onWheel),this.wheelTimer&&clearTimeout(this.wheelTimer)},this.onMediaLoad=()=>{this.computeSizes(),this.emitCropData(),this.setInitialCrop(),this.props.onMediaLoaded&&this.props.onMediaLoaded(this.mediaSize)},this.setInitialCrop=()=>{let{initialCroppedAreaPixels:e,cropSize:t}=this.props;if(!e)return;let{crop:a,zoom:i}=function(e,t,a){let i=t.width/t.naturalWidth,n=function(e,t,a){let i=t.width/t.naturalWidth;if(a){let n=a.height>a.width;return n?a.height/i/e.height:a.width/i/e.width}let r=e.width/e.height,o=t.naturalWidth>=t.naturalHeight*r;return o?t.naturalHeight/e.height:t.naturalWidth/e.width}(e,t,a),r=i*n,o={x:((t.naturalWidth-e.width)/2-e.x)*r,y:((t.naturalHeight-e.height)/2-e.y)*r};return{crop:o,zoom:n}}(e,this.mediaSize,t);this.props.onCropChange(a),this.props.onZoomChange&&this.props.onZoomChange(i)},this.computeSizes=()=>{let e=this.imageRef||this.videoRef;if(e&&this.containerRef){var t,a,i,n,r,o;this.containerRect=this.containerRef.getBoundingClientRect(),this.mediaSize={width:e.offsetWidth,height:e.offsetHeight,naturalWidth:(null===(t=this.imageRef)||void 0===t?void 0:t.naturalWidth)||(null===(a=this.videoRef)||void 0===a?void 0:a.videoWidth)||0,naturalHeight:(null===(i=this.imageRef)||void 0===i?void 0:i.naturalHeight)||(null===(n=this.videoRef)||void 0===n?void 0:n.videoHeight)||0};let l=this.props.cropSize?this.props.cropSize:function(e,t,a,i,n,r=0){let{width:o,height:l}=I(e,t,r),s=Math.min(o,a),c=Math.min(l,i);return s>c*n?{width:c*n,height:c}:{width:s,height:s/n}}(e.offsetWidth,e.offsetHeight,this.containerRect.width,this.containerRect.height,this.props.aspect,this.props.rotation);((null===(r=this.state.cropSize)||void 0===r?void 0:r.height)!==l.height||(null===(o=this.state.cropSize)||void 0===o?void 0:o.width)!==l.width)&&this.props.onCropSizeChange&&this.props.onCropSizeChange(l),this.setState({cropSize:l},this.recomputeCropPosition)}},this.onMouseDown=e=>{e.preventDefault(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onDragStopped),this.onDragStart(z.getMousePoint(e))},this.onMouseMove=e=>this.onDrag(z.getMousePoint(e)),this.onTouchStart=e=>{e.preventDefault(),document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onDragStopped),2===e.touches.length?this.onPinchStart(e):1===e.touches.length&&this.onDragStart(z.getTouchPoint(e.touches[0]))},this.onTouchMove=e=>{e.preventDefault(),2===e.touches.length?this.onPinchMove(e):1===e.touches.length&&this.onDrag(z.getTouchPoint(e.touches[0]))},this.onDragStart=({x:e,y:t})=>{var a,i;this.dragStartPosition={x:e,y:t},this.dragStartCrop={...this.props.crop},null===(i=(a=this.props).onInteractionStart)||void 0===i||i.call(a)},this.onDrag=({x:e,y:t})=>{this.rafDragTimeout&&window.cancelAnimationFrame(this.rafDragTimeout),this.rafDragTimeout=window.requestAnimationFrame(()=>{if(!this.state.cropSize||void 0===e||void 0===t)return;let a=e-this.dragStartPosition.x,i=t-this.dragStartPosition.y,n={x:this.dragStartCrop.x+a,y:this.dragStartCrop.y+i},r=this.props.restrictPosition?w(n,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):n;this.props.onCropChange(r)})},this.onDragStopped=()=>{var e,t;this.cleanEvents(),this.emitCropData(),null===(t=(e=this.props).onInteractionEnd)||void 0===t||t.call(e)},this.onWheel=e=>{e.preventDefault();let t=z.getMousePoint(e),{pixelY:a}=C()(e),i=this.props.zoom-a*this.props.zoomSpeed/200;this.setNewZoom(i,t),this.state.hasWheelJustStarted||this.setState({hasWheelJustStarted:!0},()=>{var e,t;return null===(t=(e=this.props).onInteractionStart)||void 0===t?void 0:t.call(e)}),this.wheelTimer&&clearTimeout(this.wheelTimer),this.wheelTimer=window.setTimeout(()=>this.setState({hasWheelJustStarted:!1},()=>{var e,t;return null===(t=(e=this.props).onInteractionEnd)||void 0===t?void 0:t.call(e)}),250)},this.getPointOnContainer=({x:e,y:t})=>{if(!this.containerRect)throw Error("The Cropper is not mounted");return{x:this.containerRect.width/2-(e-this.containerRect.left),y:this.containerRect.height/2-(t-this.containerRect.top)}},this.getPointOnMedia=({x:e,y:t})=>{let{crop:a,zoom:i}=this.props;return{x:(e+a.x)/i,y:(t+a.y)/i}},this.setNewZoom=(e,t)=>{if(!this.state.cropSize||!this.props.onZoomChange)return;let a=this.getPointOnContainer(t),i=this.getPointOnMedia(a),n=Math.min(this.props.maxZoom,Math.max(e,this.props.minZoom)),r={x:i.x*n-a.x,y:i.y*n-a.y},o=this.props.restrictPosition?w(r,this.mediaSize,this.state.cropSize,n,this.props.rotation):r;this.props.onCropChange(o),this.props.onZoomChange(n)},this.getCropData=()=>{if(!this.state.cropSize)return null;let e=this.props.restrictPosition?w(this.props.crop,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):this.props.crop;return function(e,t,a,i,n,r=0,o=!0){let l=o&&0===r?P:_,s={x:l(100,((t.width-a.width/n)/2-e.x/n)/t.width*100),y:l(100,((t.height-a.height/n)/2-e.y/n)/t.height*100),width:l(100,a.width/t.width*100/n),height:l(100,a.height/t.height*100/n)},c=Math.round(l(t.naturalWidth,s.width*t.naturalWidth/100)),d=Math.round(l(t.naturalHeight,s.height*t.naturalHeight/100)),u=t.naturalWidth>=t.naturalHeight*i,m=u?{width:Math.round(d*i),height:d}:{width:c,height:Math.round(c/i)},p={...m,x:Math.round(l(t.naturalWidth-m.width,s.x*t.naturalWidth/100)),y:Math.round(l(t.naturalHeight-m.height,s.y*t.naturalHeight/100))};return{croppedAreaPercentages:s,croppedAreaPixels:p}}(e,this.mediaSize,this.state.cropSize,this.getAspect(),this.props.zoom,this.props.rotation,this.props.restrictPosition)},this.emitCropData=()=>{let e=this.getCropData();if(!e)return;let{croppedAreaPercentages:t,croppedAreaPixels:a}=e;this.props.onCropComplete&&this.props.onCropComplete(t,a),this.props.onCropAreaChange&&this.props.onCropAreaChange(t,a)},this.emitCropAreaChange=()=>{let e=this.getCropData();if(!e)return;let{croppedAreaPercentages:t,croppedAreaPixels:a}=e;this.props.onCropAreaChange&&this.props.onCropAreaChange(t,a)},this.recomputeCropPosition=()=>{if(!this.state.cropSize)return;let e=this.props.restrictPosition?w(this.props.crop,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):this.props.crop;this.props.onCropChange(e),this.emitCropData()}}}z.defaultProps={zoom:1,rotation:0,aspect:4/3,flipVertical:!1,flipHorizontal:!1,maxZoom:3,minZoom:1,cropShape:"rect",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},z.getMousePoint=e=>({x:Number(e.clientX),y:Number(e.clientY)}),z.getTouchPoint=e=>({x:Number(e.clientX),y:Number(e.clientY)});var L=a(16535),T=a(2404),j=a.n(T);let F=(0,L.Ay)((e,t)=>{switch(t.type){case"setCrop":e.crop=t.payload;break;case"setFlipVertical":e.flipVertical=!e.flipVertical;break;case"setFlipHorizontal":e.flipHorizontal=!e.flipHorizontal;break;case"pendingSave":e.isLoading=!0;break;case"fullfilSave":e.isLoading=!1,e.isDirty=!1,e.isSuccess=!0;return;case"rejectSave":e.isLoading=!1;break;case"startParseFile":e.isLoadingParseFile=!0,e.progressParseFile=0;break;case"setProgressParseFile":e.progressParseFile=t.payload;break;case"successParseFile":e.isLoadingParseFile=!1,e.progressParseFile=100;break;case"errorParseFile":e.isLoadingParseFile=!1;break;case"updateFile":e.imageSrc=t.payload,e.imageId=null,e.rotation=V.rotation,e.crop=V.crop,e.zoom=V.zoom;break;case"setFromPhoto":e.imageSrc=t.payload.image.origin,e.imageId=t.payload.id,e.rotation=V.rotation,e.crop=V.crop,e.zoom=V.zoom;break;case"setImgSource":e.imageSrc=t.payload;break;case"setZoom":{let{mode:a,zoom:i}=t.payload;if(i){e.zoom=i;break}let n=0;"minus"===a&&(n=1<e.zoom-.2?e.zoom-.2:1),"plus"===a&&(n=3>e.zoom+.2?e.zoom+.2:3),e.zoom=n;break}case"setCroppedAreaPixels":e.croppedAreaPixels=t.payload;break;case"setRotation":e.rotation=t.payload}let r={crop:e.crop,flipVertical:e.flipVertical,flipHorizontal:e.flipHorizontal,rotation:e.rotation,zoom:e.zoom,imageSrc:e.imageSrc},o={crop:V.crop,flipVertical:V.flipVertical,flipHorizontal:V.flipHorizontal,rotation:V.rotation,zoom:V.zoom,imageSrc:V.imageSrc};e.isDirty=!j()(o,r)});var N=a(56525),B=a(85838);let D=(0,N.A)(e=>(0,B.A)({avatarWrapper:{marginTop:-96,marginRight:e.spacing(3),position:"relative"},userAvatar:{width:168,height:168,border:"4px solid",borderColor:e.palette.background.paper},btnClose:{background:"none",boxShadow:"none",padding:0,fontSize:e.mixins.pxToRem(18),minWidth:"1px",color:`${e.palette.text.secondary} !important`,marginRight:`${e.spacing(-1)} !important`,marginLeft:"auto !important",width:e.spacing(4),height:e.spacing(4),borderRadius:e.spacing(4),"&:hover":{background:e.palette.background.default,color:"#fff"}},btnControl:{background:"none",boxShadow:"none",padding:0,fontSize:e.mixins.pxToRem(18),minWidth:e.spacing(4),color:`${e.palette.text.primary} !important`,width:e.spacing(4),height:e.spacing(4),borderRadius:e.spacing(4),"&:hover":{background:"rgba(5, 5, 5, 0.04)",color:e.palette.text.primary,boxShadow:"none"}},btnEditAvatar:{backgroundColor:e.palette.background.paper,textTransform:"capitalize",position:"absolute",top:e.spacing(1),right:e.spacing(1),minWidth:32,height:32,borderRadius:"100%","&:hover":{backgroundColor:e.palette.background.default}},sliderZoom:{margin:e.spacing(0,2)},iconEdit:{},cropDialog:{"& .MuiDialog-paper":{overflowY:"visible"}},titleDialog:{fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary,fontSize:e.mixins.pxToRem(18),padding:e.spacing(2),display:"flex",justifyContent:"space-between",alignItems:"center"},cropContainer:{[e.breakpoints.down("sm")]:{width:"100%"}},cropContent:{position:"relative",height:400,"& .reactEasyCrop_CropArea":{border:"none",color:"rgba(255,255,255,.3)"}},controls:{padding:e.spacing(1),display:"flex"},btnActions:{padding:e.spacing(1),display:"flex",justifyContent:"flex-end","& .Mui-disabled":{..."dark"===e.palette.mode&&{color:`${e.palette.text.hint} !important`}}},btnAction:{margin:`${e.spacing(1)} !important`},btnContainer:{padding:e.spacing(0,1),display:"flex",flexGrow:1,alignItems:"center",maxWidth:500,margin:"auto",justifyContent:"center",marginBottom:e.spacing(2),"& button":{padding:e.spacing(1,2),margin:e.spacing(0,1),whiteSpace:"nowrap",fontWeight:"normal",color:e.palette.text.primary}},sliderContainer:{padding:e.spacing(0,1),display:"flex",flexGrow:1,alignItems:"center",maxWidth:400,margin:"auto"},sliderLabel:{"& + span":{marginLeft:e.spacing(2)}},btnChangePhoto:{position:"relative",overflow:"hidden"},inputFile:{position:"absolute",opacity:0,left:0,top:0,right:0,bottom:0,cursor:"pointer"},cropBackdrop:{top:0,left:0,right:0,bottom:0,display:"flex",overflow:"hidden",position:"absolute",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:e.mixins.backgroundColor("paper")},cropBlurContent:{filter:"blur(10px)",transform:"scale(12)"},blurImage:{width:"100%",height:"100%",objectFit:"cover",border:0}}),{name:"MuiUserAvatarPhoto"});var H=a(48468);function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let V={crop:{x:0,y:0},zoom:1,flipHorizontal:!1,flipVertical:!1,rotation:0,isDirty:!1,isLoading:!1,croppedAreaPixels:null,isSuccess:!1},X=e=>new Promise(t=>{let a=new FileReader;a.addEventListener("load",()=>t(a.result),!1),a.readAsDataURL(e)}),U=({onUpdate:e,item:t,avatar:a})=>{let i=D(),f=(0,g.A)(),b=y.useRef(null),[E,C]=y.useState(null),[w,A]=y.useState(!1),{i18n:k,dispatch:S,dialogBackend:P,useDialog:_,useCheckFileUpload:M,getSetting:R,setNavigationConfirm:I}=(0,n.PCX)(),{dialogProps:O,setUserConfirm:W,closeDialog:L}=_(),T=(0,h.A)(f.breakpoints.down("sm")),j=(0,o.AE)(null==t?void 0:t.avatar),{name:N}=(0,H.o0)()||{},{can_set_profile_avatar:B=!0}=Object.assign({},null==t?void 0:t.extra);a&&(j=(0,o.AE)(a)),V.imageSrc=j;let[U,G]=(0,y.useReducer)(F,{...V}),q=R("core.file_mime_type_accepts.image")||["image/*"],Z=q.join(),[Y]=M({accept:Z}),{crop:J,zoom:Q,rotation:K,flipHorizontal:ee,flipVertical:et,imageSrc:ea,croppedAreaPixels:ei,isLoading:en,isDirty:er,imageId:eo,isSuccess:el,isLoadingParseFile:es,progressParseFile:ec}=U;(0,y.useEffect)(()=>(I&&I(er),W(er),()=>{er&&I&&I(!1)}),[W,er]),(0,y.useEffect)(()=>{el&&L()},[el,L]);let ed=(e,t)=>{G({type:"setCroppedAreaPixels",payload:t})},eu=()=>{let e=360<=U.rotation+90?0:U.rotation+90;G({type:"setRotation",payload:e})},em=async()=>{G({type:"pendingSave"});try{let i=await x(ea,ei,"base64",K,et,ee);i&&S({type:"updateProfileUserAvatar",payload:{avatar:E,avatar_crop:i,userId:null==t?void 0:t.id,identity:null==t?void 0:t._identity,image_id:eo},meta:{onSuccess(){G({type:"fullfilSave"})},onFailure(){G({type:"rejectSave"})}}}),v()(e)&&e(a)}catch(n){P.alert({title:"Error",message:"Ops! Picture format is not correct."}),G({type:"rejectSave"})}},ep=e=>{let t=Math.round(100*e.loaded/e.total);t>99||G({type:"setProgressParseFile",payload:t})},eg=async e=>{if(e.target.files&&0<e.target.files.length){let a=e.target.files,i=Y(a);if(null==i?void 0:i.length){let r=i[0],o=await X(r);["ios","crios"].includes(N)&&(o=await function({url:e,maxWidth:t=2e3,maxHeight:a=2e3}){return new Promise((i,n)=>{let r=document.createElement("canvas"),o=r.getContext("2d"),l=new Image;l.addEventListener("load",()=>{let e=l.width,n=l.height,s=Math.min(t/e,a/n),c=e*s,d=n*s;r.width=c,r.height=d,o.drawImage(l,0,0,c,d),i(r.toDataURL("image/jpeg"))}),l.addEventListener("error",e=>n(e)),l.src=e})}({url:o})),function(e,t){let a=new Image;a.onload=()=>t(!1),a.onerror=()=>t(!0),a.src=e}(o,e=>{e?(G({type:"startParseFile"}),S({type:n.F7S,payload:{item:{source:o,file:r,type:"photo",item_type:null==t?void 0:t.module_name,file_type:"photo",thumbnail_sizes:null==t?void 0:t.avatar_thumbnail_sizes}},meta:{onUploadProgress:ep,onParseFile(e){let{preUploadFile:t,source:a}=e;G({type:"successParseFile"}),C(t),G({type:"updateFile",payload:a}),ev()},onError(){G({type:"errorParseFile"}),(null==b?void 0:b.current)&&(b.current.value=null)}}})):(C(r),G({type:"updateFile",payload:o}),ev())})}}},eh=()=>{b.current.click()},ef=()=>{S({type:"chooseAvatarPhotoDialog",payload:{identity:null==t?void 0:t._identity},meta:{onSuccess(e){G({type:"setFromPhoto",payload:e}),ev()},onFailure:()=>G({type:"failed"})}})},ev=()=>{A(!0)};return y.createElement(l.A,$({},O,{className:i.cropDialog,"aria-labelledby":"dialog-title",maxWidth:"sm",fullWidth:!0,scroll:"body",fullScreen:T}),y.createElement(s.A,{id:"dialog-title"},k.formatMessage({id:"update_your_profile_picture"}),y.createElement(c.A,{size:"small",className:i.btnClose,disabled:en,onClick:L},y.createElement(r.s4,{icon:"ico-close"}))),ea&&w?y.createElement("div",{className:i.cropContainer},y.createElement("div",{className:i.cropContainer},y.createElement("div",{className:i.cropContent},y.createElement("div",{className:i.cropBackdrop},y.createElement("div",{className:i.cropBlurContent},y.createElement("img",{crossOrigin:"anonymous",src:ea,alt:"",className:i.blurImage}))),y.createElement(z,{key:ea,image:ea,crop:J,zoom:Q,aspect:1,flipHorizontal:ee,flipVertical:et,onCropChange:e=>G({type:"setCrop",payload:e}),onCropComplete:ed,onZoomChange:e=>G({type:"setZoom",payload:{zoom:e}}),rotation:K,showGrid:!1,cropShape:"round"})),!(0,o.rI)(ea)&&y.createElement(y.Fragment,null,y.createElement("div",{className:i.controls},y.createElement("div",{className:i.sliderContainer},y.createElement(d.A,{variant:"text",className:i.btnControl,onClick:()=>G({type:"setZoom",payload:{mode:"minus"}})},y.createElement(r.s4,{icon:"ico-minus"})),y.createElement(p.Ay,{className:i.sliderZoom,value:Q,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:(e,t)=>G({type:"setZoom",payload:{zoom:t}})}),y.createElement(d.A,{variant:"text",className:i.btnControl,onClick:()=>G({type:"setZoom",payload:{mode:"plus"}})},y.createElement(r.s4,{icon:"ico-plus"})))),y.createElement("div",{className:i.btnContainer},y.createElement(d.A,{startIcon:y.createElement(r.s4,{icon:"ico-rotate-right-alt"}),onClick:eu},k.formatMessage({id:"rotate"})),y.createElement(d.A,{startIcon:y.createElement(r.s4,{icon:"ico-flip-v"}),onClick:()=>G({type:"setFlipVertical"})},k.formatMessage({id:"flip_vertical"})),y.createElement(d.A,{startIcon:y.createElement(r.s4,{icon:"ico-flip-h"}),onClick:()=>G({type:"setFlipHorizontal"})},k.formatMessage({id:"flip_horizontal"})))),y.createElement("div",{className:i.btnActions},y.createElement("div",{className:i.btnChangePhoto},y.createElement(d.A,{variant:"outlined",disabled:en,className:i.btnAction,size:"small",onClick:()=>A(!1)},k.formatMessage({id:"back"}))),y.createElement(d.A,{variant:"contained",className:i.btnAction,disabled:!er,onClick:em,size:"small"},en?y.createElement(u.A,{color:"inherit",size:"1rem"}):k.formatMessage({id:"save"}))))):y.createElement(m.A,{sx:{p:2}},es?y.createElement(m.A,{sx:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"dark"===f.palette.mode?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.5)",zIndex:5,display:"flex",alignItems:"center",justifyContent:"center"}},y.createElement(u.A,{sx:{width:"56px !important",height:"56px !important"},variant:"determinate",value:ec})):null,y.createElement("input",{type:"file",onChange:eg,accept:Z,className:i.inputFile,ref:b,style:{display:"none"}}),y.createElement(m.A,{sx:{display:"flex",flexDirection:"column","& button":{margin:"0 0 8px 0 !important","&:last-child":{marginBottom:"0 !important"}}}},y.createElement(d.A,{variant:"contained",disabled:en,className:i.btnAction,size:"small",onClick:eh,startIcon:y.createElement(r.s4,{icon:"ico-upload"})},k.formatMessage({id:"upload_photo"})),B?y.createElement(d.A,{variant:"outlined",disabled:en,className:i.btnAction,size:"small",onClick:ef,startIcon:y.createElement(r.s4,{icon:"ico-photo"})},k.formatMessage({id:"choose_from_photos"})):null,ea?y.createElement(d.A,{variant:"outlined",disabled:en,className:i.btnAction,size:"small",onClick:ev,startIcon:y.createElement(r.s4,{icon:"ico-pencil"})},k.formatMessage({id:"edit_avatar"})):null)))},G=U},4941(e,t,a){a.d(t,{A:()=>o});var i=a(89481),n=a(96540);let r={backdrop:{position:"absolute",left:0,top:0,bottom:0,right:0},content:{position:"absolute",left:"50%",top:"50%",marginLeft:-20,marginTop:-20}};function o({size:e=40}){return n.createElement("div",{style:r.backdrop,"data-testid":"loadingIndicator"},n.createElement("div",{style:r.content},n.createElement(i.A,{variant:"indeterminate",size:e})))}},86197(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(73349),r=a(96540),o=a(84680);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:s}){let{useDialog:c,ListView:d,i18n:u,useIsMobile:m}=(0,i.PCX)(),p=m(),{dialogProps:g}=c();return r.createElement(n.lG,l({},g,{maxWidth:"xs",fullWidth:!0}),r.createElement(n.L3,null,u.formatMessage({id:s})),r.createElement(n.Cf,{variant:"fitScroll",sx:{maxHeight:p?"unset":"50vh"}},r.createElement(o.P,null,r.createElement(d,{dataSource:{apiUrl:e,apiParams:t},pagingId:a,canLoadMore:!0,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"announcement.itemView.userRead"}))))}},10644(e,t,a){a.r(t),a.d(t,{default:()=>u});var i=a(91557),n=a(73349),r=a(3556),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let s="BlogViewDialog",c=(0,r.Ay)(n.Cf,{name:s,slot:"root"})(({theme:e})=>({padding:"0 !important",overflowY:"visible",display:"flex"})),d=(0,r.Ay)("div",{name:s,slot:"root"})(({theme:e})=>({width:"100%",maxWidth:"100%"})),u=(0,i.G5k)(function({item:e,identity:t}){let{useDialog:a,jsxBackend:r,useIsMobile:s,i18n:u}=(0,i.PCX)(),{dialogProps:m}=a(),p=r.get("blog.block.blogView"),g=s();return e?o.createElement(n.lG,l({},m,{maxWidth:"md",scroll:"body","data-testid":"popupViewBlog"}),o.createElement(n.L3,{enableBack:g,disableClose:g},u.formatMessage({id:"blog"})),o.createElement(c,null,o.createElement(d,null,o.createElement(p,{item:e,identity:t,isModalView:!0})))):null})},58040(e,t,a){a.d(t,{A:()=>d});var i=a(91557),n=a(40515),r=a(3556),o=a(97763),l=a(96540);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let c=(0,r.Ay)(({className:e,...t})=>l.createElement(o.A,s({},t,{classes:{popper:e}})))(({theme:e})=>({"& .MuiTooltip-tooltip":{"&.MuiTooltip-tooltipPlacementLeft":{marginRight:`${e.spacing(1)} !important`}}})),d=(0,l.memo)(function({identity:e,size:t=30,user:a,showTooltip:r=!1}){let{useGetItem:o}=(0,i.PCX)(),s=o(e);if(!a&&!s)return null;let d=r&&((null==a?void 0:a.full_name)||(null==s?void 0:s.full_name));return l.createElement(c,{title:d,placement:"left",arrow:!1,PopperProps:{popperOptions:{strategy:"fixed"}}},l.createElement("div",null,l.createElement(n.H8,{user:a||s,size:t,noLink:!0})))})},98453(e,t,a){a.r(t),a.d(t,{default:()=>b});var i=a(73349),n=a(91557),r=a(40515),o=a(3556),l=a(97763),s=a(96540);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let d="dialogItemView",u=(0,o.Ay)("div",{name:d,slot:"ico-close",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(4),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"],borderRadius:"50%"},...t&&{top:e.spacing(2.5),right:e.spacing(2.5)}})),m=(0,o.Ay)("div",{name:d,slot:"ico-download",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(10),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"],borderRadius:"50%"},...t&&{top:e.spacing(2.5),right:e.spacing(8.125)}})),p=(0,o.Ay)(i.Cf,{name:d,slot:"content",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("xs")]:{flexFlow:"column"},...t&&{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.grey.A400}})),g=(0,o.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative"})),h=(0,o.Ay)("img")(({theme:e})=>({maxWidth:"100%",maxHeight:" calc(100vh - 88px)",margin:"auto"})),f=(0,o.Ay)("div",{name:d,slot:"button-prev",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:e.spacing(5),left:e.spacing(4),zIndex:2,...t&&{left:e.spacing(.5),zIndex:999,opacity:.8}})),v=(0,o.Ay)("div",{name:d,slot:"button-next",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:e.spacing(5),right:e.spacing(4),...t&&{right:e.spacing(.5),zIndex:999,opacity:.8}})),y=(0,o.Ay)("div",{name:d,slot:"button-image"})(({theme:e})=>({cursor:"pointer",width:e.spacing(5),height:e.spacing(5),borderRadius:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:e.palette.grey["800"],"& .ico":{fontSize:e.mixins.pxToRem(16),color:e.palette.grey["50"]}}));function b({image:e,images:t}){let{useDialog:a,useIsMobile:o,i18n:d,dispatch:b}=(0,n.PCX)(),x=o(),{dialogProps:E,closeDialog:C}=a(),w=t&&t.length-1,A=t&&t.length>1,k=parseInt(null==e?void 0:e.id)||0,[S,P]=s.useState(k),_=e=>{e+1>w?P(0):P(parseInt(e)+1)},M=e=>{e-1<0?P(w):P(parseInt(e)-1)},R=e=>{let t="rtl"===document.dir,a="";switch(e.keyCode){case 27:C();break;case 39:a=t?"prev":"next";break;case 37:a=t?"next":"prev"}if("next"===a&&S!==w){_(S);return}if("prev"===a&&0!==S){M(S);return}},I=e=>{e&&b({type:"chat/image/downloadItem",payload:e})};return(s.useEffect(()=>(document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}),[S]),A)?s.createElement(i.lG,c({},E,{"data-testid":"popupDetailPhoto",maxWidth:x?"xl":"lg",fullScreen:!!x,fullWidth:!1,scroll:"body",sx:{backgroundColor:"rgba(0, 0, 0, 0.9)"}}),s.createElement(l.A,{arrow:!1,placeholder:"top",title:d.formatMessage({id:"press_esc_to_close"})},s.createElement(u,{onClick:C,isMobile:x},s.createElement(r.s4,{icon:"ico-close"}))),0!==S&&s.createElement(f,{isMobile:x},s.createElement(y,{onClick:()=>M(S)},s.createElement(r.s4,{icon:"ico-angle-left"}))),s.createElement(p,{dividers:!1,isMobile:x},t.map((e,t)=>s.createElement("div",{key:t},e.id===S?s.createElement(g,null,(null==e?void 0:e.video_type)?s.createElement("video",{src:e.src,type:e.video_type,controls:!0,autoPlay:!0}):s.createElement(h,{src:e.src,alt:""}),(null==e?void 0:e.imageId)?s.createElement(l.A,{arrow:!1,placeholder:"top",title:d.formatMessage({id:"download"})},s.createElement(m,{onClick:()=>I(e.imageId),isMobile:x},s.createElement(r.s4,{icon:"ico-download"}))):null):null))),S!==w&&s.createElement(v,{isMobile:x},s.createElement(y,{onClick:()=>_(S)},s.createElement(r.s4,{icon:"ico-angle-right"})))):e?s.createElement(i.lG,c({},E,{"data-testid":"popupDetailPhoto",maxWidth:x?"xl":"lg",fullScreen:!!x,fullWidth:!1,scroll:"body",sx:{backgroundColor:"rgba(0, 0, 0, 0.9)"}}),s.createElement(l.A,{arrow:!1,placeholder:"top",title:d.formatMessage({id:"press_esc_to_close"})},s.createElement(u,{onClick:C,isMobile:x},s.createElement(r.s4,{icon:"ico-close"}))),s.createElement(p,{dividers:!1,isMobile:x},s.createElement(g,null,(null==e?void 0:e.video_type)?s.createElement("video",{src:e.src,type:e.video_type,controls:!0,autoPlay:!0}):s.createElement(h,{src:e.src,alt:""}),(null==e?void 0:e.imageId)&&(null==e?void 0:e.is_image)?s.createElement(l.A,{arrow:!1,placeholder:"top",title:d.formatMessage({id:"download"})},s.createElement(m,{onClick:()=>I(e.imageId),isMobile:x},s.createElement(r.s4,{icon:"ico-download"}))):null))):null}},74303(e,t,a){a.r(t),a.d(t,{default:()=>D});var i=a(73349),n=a(91557),r=a(84680),o=a(3556),l=a(80160),s=a(8051),c=a(18579),d=a(62193),u=a.n(d),m=a(85015),p=a.n(m),g=a(96540),h=a(58040),f=a(60780);let v="ChatListItemUserReaction",y=(0,o.Ay)(s.A,{name:v,slot:"Root"})(({theme:e})=>({position:"relative",textDecoration:"none",display:"block",borderBottom:e.mixins.border("secondary"),"& .MuiAvatar-root":{fontSize:e.mixins.pxToRem(16)}})),b=(0,o.Ay)(s.A,{name:v,slot:"ItemOuter"})(({theme:e})=>({height:"100%"})),x=(0,o.Ay)(s.A,{name:v,slot:"ItemSmallInner"})(({theme:e})=>({display:"flex",padding:e.spacing(2),justifyContent:"space-between",alignItems:"center",borderRadius:e.shape.borderRadius})),E=(0,o.Ay)(s.A,{name:v,slot:"ItemMainContent"})(({theme:e})=>({display:"flex",alignItems:"center"})),C=(0,o.Ay)(s.A,{name:v,slot:"ItemSmallMedia"})(({theme:e})=>({transition:"all 300ms ease",borderRadius:"100%",position:"relative"})),w=(0,o.Ay)(s.A,{name:v,slot:"UserSmallInfo"})(({theme:e})=>({marginLeft:e.spacing(1.5),flex:1,overflow:"hidden",paddingRight:e.spacing(1)})),A=(0,o.Ay)(s.A,{name:v,slot:"UserSmallTitle"})(({theme:e})=>({color:e.palette.text.primary,fontSize:e.mixins.pxToRem(15),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightBold})),k=(0,o.Ay)(f.A,{name:v,slot:"ActionContent"})(({theme:e})=>({fontWeight:`${e.typography.fontWeightMedium} !important`})),S=(0,o.Ay)(s.A,{name:v,slot:"ImgSmallWrapper"})(({theme:e})=>({borderRadius:"100%"})),P=(0,o.Ay)(s.A,{name:v,slot:"ItemReactSmall"})(({theme:e})=>({position:"absolute",width:"15px",height:"15px",right:0,bottom:0})),_=(0,o.Ay)("img",{name:v,slot:"ImgSmallReactionIcon"})(({theme:e})=>({width:"100%"})),M=({data:e,unsetReaction:t})=>{let{useDialog:a,i18n:i,useSession:r}=(0,n.PCX)(),{closeDialog:o}=a(),{user:l}=r(),s=l.user_name;return e?e.usernames.map((e,a)=>{var n;return g.createElement(y,{key:a},g.createElement(b,null,g.createElement(x,null,g.createElement(E,null,g.createElement(C,null,g.createElement(S,null,g.createElement(h.A,{user:e.user,size:40})),g.createElement(P,null,g.createElement(_,{src:e.icon,alt:"reaction"}))),g.createElement(w,null,g.createElement(A,{onClick:o},(null===(n=e.user)||void 0===n?void 0:n.full_name)||e.username))),s===e.username&&g.createElement(k,{variant:"outlined",color:"primary",onClick:()=>t(e.id)},i.formatMessage({id:"remove"})))))}):null};var R=a(19740),I=a(12561);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let W="ChatPresenReactionList",z=(0,o.Ay)(l.A,{name:W,slot:"CustomTabs"})(({theme:e})=>({"& .MuiTabs-flexContainer":{margin:e.spacing(1,2,1,2)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:e.shape.borderRadius/2,marginRight:"0.25em",padding:e.spacing(.5,1.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + span":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}})),L=(0,o.Ay)("span",{name:W,slot:"ReactNumber"})(({theme:e})=>({marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}})),T=(0,o.Ay)(s.A,{name:W,slot:"DialogContent"})(({theme:e})=>({height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"})),j={minHeight:32},F={minWidth:16},N={width:15,height:15},B=(e,t)=>{let{i18n:a}=(0,n.PCX)();if(u()(e))return{};try{let i=e=>{let a=p()(e)&&e.split(":")[1].split("_")[1];return a&&t?t.find(e=>e.id===parseInt(a)):{}},r=[],o=Object.keys(e).reduce((t,a)=>{var n;let o=i(a),l=e[a].map(e=>({username:e.user_name,user:e,icon:o.src,id:a}));return r=r.concat(...l),t+(null===(n=e[a])||void 0===n?void 0:n.length)},0),l={all:{id:"all",title:a.formatMessage({id:"all"}),total_reacted:o,usernames:r}};return Object.keys(e).map(t=>{let a=i(t),n=e[t].map(e=>({username:e.user_name,user:e,icon:a.src,id:t}));return l[t]={id:t,icon:a.src,total_reacted:e[t].length,usernames:n}}),l}catch(s){return{}}};function D({identity:e}){let[t,a]=(0,g.useState)("all"),o=(0,g.useRef)(),{useDialog:l,i18n:s,dispatch:d,useGetItem:m}=(0,n.PCX)(),{dialogProps:p,closeDialog:h}=l(),f=m(e),v=g.useCallback(t=>{d({type:"chat/unsetReaction",payload:{identity:e,shortcut:t},meta:{onSuccess:C}})},[e]),y=(0,R.Dr)(),b=(0,I.Rt)(null==f?void 0:f.reactions,y),x=B(b,y);g.useEffect(()=>{(!f||u()(null==f?void 0:f.reactions)||u()(x))&&h()},[f,null==f?void 0:f.reactions,x,h]);let E=(e,t)=>{a(t)},C=()=>{t&&a("all")};return g.createElement(i.lG,O({},p,{maxWidth:"xs",fullWidth:!0}),g.createElement(i.L3,null,s.formatMessage({id:"reacted_by"})),g.createElement(z,{value:t,onChange:E,style:j},Object.values(x).map(e=>g.createElement(c.A,{key:e.id,style:F,disableRipple:!0,icon:e.icon?g.createElement("img",{src:e.icon,alt:e.id,style:N}):g.createElement(L,null,e.title),iconPosition:"start",label:e.total_reacted?g.createElement(L,null,e.total_reacted):void 0,value:e.id,"aria-label":e.id}))),g.createElement(T,{ref:o},g.createElement(r.N2,{scrollRef:o},g.createElement(M,{data:x[t],unsetReaction:v}))))}},19740(e,t,a){a.d(t,{nb:()=>l,Zq:()=>s,iw:()=>o,In:()=>p,f3:()=>u,EH:()=>d,wg:()=>c,eL:()=>m,Dr:()=>r.A,iW:()=>g,oT:()=>h});var i=a(71468),n=a(99477),r=a(44031);function o(){return(0,i.d4)(e=>(0,n.Tr)(e))}let l=e=>(0,i.d4)(t=>(0,n.rS)(t,e)),s=e=>(0,i.d4)(t=>(0,n.vF)(t,e));function c(e){return(0,i.d4)(t=>(0,n.Ax)(t,e))}let d=()=>(0,i.d4)(n.x2),u=()=>(0,i.d4)(n.yr),m=()=>(0,i.d4)(n.Eq),p=()=>(0,i.d4)(n.pR),g=e=>(0,i.d4)(t=>(0,n.gQ)(t,e)),h=()=>(0,i.d4)(n.t8)},44031(e,t,a){a.d(t,{A:()=>o,a:()=>c});var i=a(91557),n=a(71468),r=a(1081);function o(){let{getSetting:e}=(0,i.PCX)(),t=e("preaction.reaction_list",[]).filter(e=>e.is_active),a=e("preaction.inactive_reaction_list",[]),n=[...t,...a];return(null==n?void 0:n.length)?n:[]}let l=e=>(e.preaction.data.reactions||[]).filter(e=>e.is_active),s=(0,r.Mz)(l,e=>e);function c(){return(0,n.d4)(s)}},13586(e,t,a){a.r(t),a.d(t,{default:()=>w});var i=a(91557),n=a(67725),r=a(3556),o=a(12789),l=a(72761),s=a(8051),c=a(30719),d=a(96540),u=a(97837),m=a(65121),p=a(86663),g=a(84058),h=a.n(g);let f=(0,r.Ay)(o.A,{name:"AvatarWrapper"})(({theme:e})=>({borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.border.secondary})),v=(0,r.Ay)(i.N_E,{name:"Link"})(({theme:e})=>({"&:hover":{textDecoration:"none"}})),y=(0,r.Ay)(l.A,{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({"& .MuiBadge-badge":{...t===u.O2.Offline&&{display:"none"},...t===u.O2.Online&&{color:e.palette.success.main,backgroundColor:e.palette.success.main},...t===u.O2.Away&&{color:e.palette.warning.main,backgroundColor:e.palette.warning.main},...t===u.O2.Busy&&{color:e.palette.error.main,backgroundColor:e.palette.error.main},boxShadow:"dark"===e.palette.mode?"none":`0 0 0 2px ${e.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}}})),b=(0,r.Ay)("div",{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"relative",width:"32px",height:"32px",...t&&{width:t,height:t}})),x=(0,r.Ay)(o.A,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"absolute",bottom:0,left:0,width:"26px",height:"26px",backgroundColor:"dark"===e.palette.mode?e.palette.grey["600"]:e.palette.grey["300"],borderWidth:1,borderStyle:"solid",borderColor:"light"===e.palette.mode?e.palette.grey["50"]:e.palette.grey["800"],zIndex:2,...t&&{width:.7*t,height:.7*t}})),E=(0,r.Ay)(s.A,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"relative",width:"100%",height:"100%"})),C=(0,r.Ay)(o.A,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"absolute",top:"50%",right:0,transform:"translate(0%, -50%)",width:"26px",height:"26px",...t&&{width:`${.7*t}px !important`,height:`${.7*t}px !important`}})),w=(0,d.memo)(function({username:e="Name",name:t="Name",src:a,size:r,to:l,onClick:s,status:g=0,room:w,uploadLocal:A=!1,roomType:k=null,avatarETag:S,component:P="span",target:_="_self",noLink:M}){var R,I;let{getSetting:O}=(0,i.PCX)(),W=(0,c.A)(),z=M,L=l,T=k||(null==w?void 0:w.t),j=(0,n.cb)(t),F={width:r,height:r,color:W.palette.grey["50"],fontSize:r/3},N=O("chatplus"),B=null==N?void 0:null===(R=N.server)||void 0===R?void 0:R.replace(/\/$/,""),D=a;if(D||(D=S?`${B}/avatar/${e}?${p.stringify({etag:S})}`:""),j&&(F.backgroundColor=n.m6.hex(j)),(null==w?void 0:w.isBotRoom)&&(L=null,z=!0),L)return d.createElement(v,{target:_,to:L||`/${e}`},d.createElement(f,{"data-testid":h()("chatplus avatar"),src:D,alt:t,style:F,component:P,children:j}));if([u.CJ.Private,u.CJ.Public].includes(T)){if(A)return d.createElement(f,{"data-testid":h()("chatplus avatar"),src:D,alt:t,style:F,component:P,children:j});if(null==w?void 0:w.avatarETag)return D=`${B}/avatar/room/${null==w?void 0:w.id}?${p.stringify({etag:null==w?void 0:w.avatarETag})}`,d.createElement(f,{"data-testid":h()("chatplus avatar"),src:D,alt:t,style:F,component:P,children:j});{let H=`${B}/avatar/${null==w?void 0:null===(I=w.u)||void 0===I?void 0:I.username}`;return d.createElement(b,{"data-testid":h()("chatplus avatar"),sizeProps:r},d.createElement(x,{sizeProps:r,src:H,alt:t,component:P,children:j}),d.createElement(E,null,d.createElement(C,{sizeProps:r,src:D,alt:t,style:F,component:P,children:j})))}}if(T===u.CJ.Direct&&g){let $=(0,m.cR)(g);return d.createElement(y,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",status:$},d.createElement(o.A,{"data-testid":h()("chatplus avatar"),src:D,alt:t,style:F,component:P,children:j}))}return d.createElement(f,{"data-testid":h()("chatplus avatar"),src:D,alt:t,style:F,component:P,children:j,onClick:s,to:z?null:e})})},83694(e,t,a){a.r(t),a.d(t,{default:()=>x});var i=a(88485),n=a(97837),r=a(91557),o=a(3556),l=a(60780),s=a(24721),c=a(51763),d=a(26433),u=a(43791),m=a(96540),p=a(13586);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let h="IncomingCallPopup",f=(0,o.Ay)("div")(({theme:e})=>({display:"flex",justifyContent:"flex-end",alignItems:"center"})),v=(0,o.Ay)(l.A)(({theme:e})=>({marginRight:e.spacing(1)})),y=(0,o.Ay)("div",{name:h,slot:"uiChat_call-info"})(({theme:e})=>({display:"flex",alignItems:"center"})),b=(0,o.Ay)("div",{name:h,slot:"UserCallingYou-info"})(({theme:e})=>({marginLeft:e.spacing(1),...e.typography.body1})),x=function({callId:e}){let{useDialog:t,i18n:a,dispatch:o}=(0,r.PCX)(),{dialogProps:h,closeDialog:x}=t(),E=(0,i.hB)(),C=(0,i.vY)(e),w=(0,i.sz)(),{Website:A,Metafox_Ringtone_Sound_Url:k}=w,S=`${A}${k}`,{subject:P,displayName:_,avatar:M,group:R,callStatus:I,callType:O,userId:W}=C,z=O&&O.split("_")[2]||n.CJ.Direct;(0,m.useEffect)(()=>{("end"===I||"start"===I&&W===(null==E?void 0:E._id))&&x()},[I,W,null==E?void 0:E._id]);let L=()=>{o({type:"chatplus/room/rejectCallFromPopup",payload:{callId:e}}),x()},T=()=>{o({type:"chatplus/room/acceptCallFromPopup",payload:{callId:e}}),x()};return m.createElement(s.A,g({},h,{maxWidth:"sm",fullWidth:!0}),m.createElement(c.A,null,R?P:a.formatMessage({id:P})),m.createElement(d.A,null,m.createElement(y,null,m.createElement(p.default,{size:40,src:M,name:_,username:_,roomType:z}),m.createElement(b,null,a.formatMessage({id:"user_is_calling_you"},{user:m.createElement("b",null,_)}),"."),S&&m.createElement("audio",{style:{display:"none"},src:S,loop:!0,autoPlay:!0,type:"audio/mpeg"}))),m.createElement(u.A,null,m.createElement(f,null,m.createElement(v,{variant:"outlined",onClick:L,size:"small"},a.formatMessage({id:"reject"})),m.createElement(l.A,{variant:"contained",onClick:T,size:"small",color:"primary"},a.formatMessage({id:"accept"})))))}},7838(e,t,a){a.r(t),a.d(t,{default:()=>P});var i=a(88485),n=a(91557),r=a(84680),o=a(3556),l=a(60780),s=a(24721),c=a(51763),d=a(26433),u=a(43791),m=a(96540),p=a(40515),g=a(67912);let h=(0,o.Ay)("div")(({theme:e})=>({padding:e.spacing(1.5,0),display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"})),f=(0,o.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center"})),v=(0,o.Ay)("span")(({theme:e})=>({...e.typography.h5,marginLeft:e.spacing(1)}));function y({user:e,selected:t,toggleSelect:a}){return m.createElement(h,{onClick:()=>a(e)},m.createElement(f,null,m.createElement(g.A,{name:e.name,username:e.username,avatarETag:null==e?void 0:e.avatarETag,size:32}),m.createElement(v,null,e.name?e.name:e.username)),m.createElement(p.s4,{icon:`${t?"ico ico-check active":""}`,sx:{mr:"12px"}}))}var b=a(73419),x=a(65121);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let C=(0,o.Ay)("div")(({theme:e})=>({display:"flex",justifyContent:"flex-end",alignItems:"center"})),w=(0,o.Ay)(l.A)(({theme:e})=>({marginRight:e.spacing(1)})),A=(0,o.Ay)("div")(({theme:e})=>({})),k=(0,o.Ay)("div")(({theme:e})=>({display:"flex",justifyContent:"flex-end",alignItems:"center"})),S=(0,o.Ay)(l.A)(({theme:e})=>({...e.typography.body1,cursor:"pointer",padding:e.spacing(1,0,1,2)})),P=function(e){let{rid:t,limit:a,okLabel:o="continue",cancelLabel:p="cancel",title:g,alertMsg:h,onSuccess:f}=e,{useDialog:v,i18n:P,dialogBackend:_,dispatch:M}=(0,n.PCX)(),{dialogProps:R,closeDialog:I}=v(),O=(0,i.hB)(),[W,z]=(0,m.useState)([]),[L,T]=(0,m.useState)(!1),[j,F]=(0,m.useState)([]),N=m.useRef([]);m.useEffect(()=>{B()},[t]);let B=()=>{M({type:"chatplus/room/presentMembers",payload:{rid:t},meta:{onSuccess:D}})},D=e=>{Array.isArray(e.users)&&(F(e.users),N.current=e.users)},H=()=>{_.alert({title:"Oops!",message:P.formatMessage({id:h},{value:a})})},$=({username:e})=>{let t=[...W];W.includes(e)?t=W.filter(t=>t!==e):W.length<a?t.push(e):H(),z(t),T(t.length>0)},V=()=>{let{username:e}=O,t=j.map(({username:e})=>e).filter(t=>t!==e);z(t),T(!0)},X=()=>{z([]),T(!1)},U=()=>{f&&f(W),I()},G=e=>{if(!e){F(N.current);return}let t=(0,x._x)(e),a=j.filter(e=>t(null==e?void 0:e.name));F(a)},q=j.length,Z=q>0&&q<a+2&&W.length<a,Y=W.length;return m.createElement(s.A,E({},R,{maxWidth:"sm",fullWidth:!0}),m.createElement(c.A,null,P.formatMessage({id:g})),m.createElement(d.A,null,m.createElement(b.A,{placeholder:"chatplus_search_for_members",onQueryChange:G,sx:{margin:0,marginBottom:e=>e.spacing(1)}}),m.createElement("div",null,m.createElement(k,{className:"uiSelectAllBar"},Y>0?m.createElement(S,{onClick:X},P.formatMessage({id:"deselect_value"},{value:Y})):null,Z?m.createElement(S,{onClick:V},P.formatMessage({id:"select_all"})):null),m.createElement(A,null,m.createElement(r.P,{autoHide:!0,autoHeight:!0},j.filter(e=>e.username!==O.username).map((e,t)=>m.createElement(y,{key:`member-${t}`,user:e,selected:W.includes(e.username),toggleSelect:$})))))),m.createElement(u.A,null,m.createElement(C,null,m.createElement(w,{variant:"outlined",onClick:I,size:"small"},P.formatMessage({id:p})),m.createElement(l.A,{variant:"contained",onClick:U,size:"small",color:"primary",disabled:!L},P.formatMessage({id:o})))))}},93624(e,t,a){a.d(t,{qJ:()=>m,Zk:()=>R,WH:()=>x,aO:()=>A,xw:()=>el,qC:()=>em,$6:()=>Y});var i=a(40515),n=a(3556),r=a(8051),o=a(60780),l=a(96540);let s=(0,n.Ay)("div",{name:"ChatDockFilter"})(({theme:e})=>({position:"relative"})),c=(0,n.Ay)(r.A,{name:"ChatDockFilter"})(({theme:e})=>({padding:e.spacing(1,2,1,2),display:"flex",flexDirection:"row",alignItems:"center"})),d=(0,n.Ay)(o.A,{name:"ChatDockFilter"})(({theme:e})=>({marginLeft:e.spacing(.5)})),u=(0,n.Ay)(i.Gd,{name:"SearchWrapper"})(({theme:e})=>({"& input::placeholder, .ico":{color:e.palette.text.hint}}));function m({placeholder:e,size:t,hide:a=!1,label:i,disabled:n,valueSearch:r,onChangeSearch:o,onKeyUp:m,onSubmit:p,variant:g="direct",isShowButtonSubmit:h=!0,sx:f}){return a?null:l.createElement(s,null,l.createElement(c,{sx:f},l.createElement(u,{placeholder:e,onKeyUp:m,value:r,onChange:o}),h&&p?l.createElement(d,{disabled:n,size:"medium",color:"primary",variant:"text",onClick:p},i):null))}a(88485);var p=a(97837),g=a(91557);a(84680),a(97648),a(13586);let h="AddNewMembers",f=((0,n.Ay)("div")(({theme:e})=>({padding:e.spacing(0,1,0,2)})),(0,n.Ay)("div",{shouldForwardProp:e=>"users"!==e})(({theme:e,users:t})=>({...t&&{padding:e.spacing(0,1,1,2)},listStyle:"none",display:"flex",alignItems:"center",flexWrap:"wrap"})),(0,n.Ay)("li")(({theme:e})=>({margin:e.spacing(.5)})),(0,n.Ay)("div")(({theme:e})=>({padding:e.spacing(1.75,0),display:"flex",alignItems:"center",cursor:"pointer"})),(0,n.Ay)("span")(({theme:e})=>({...e.typography.h5,marginLeft:e.spacing(1)})),(0,n.Ay)("div",{name:h,slot:"RootSearch"})(({theme:e})=>({})),(0,n.Ay)("div",{name:h,slot:"SearchControl"})(({theme:e})=>({padding:e.spacing(0,1,0,2),display:"flex",flexDirection:"row",alignItems:"center"})),(0,n.Ay)(o.A,{name:h,slot:"ButtonCustom"})(({theme:e})=>({marginLeft:e.spacing(.5)})),(0,n.Ay)("input",{name:h,slot:"InputWrapper"})(({theme:e})=>({zIndex:"auto",backgroundColor:e.mixins.backgroundColor("paper"),color:"dark"===e.palette.mode?e.palette.grey["50"]:e.palette.grey["700"],height:"35px",borderRadius:"2px",fontSize:"14px",padding:"8px",paddingLeft:"12px",paddingRight:"72px",display:"block",width:"100%",margin:"0",border:e.mixins.border("secondary"),"&:focus":{borderColor:"#a2a2a2",boxShadow:"0 1px 4px 0 rgba(0,0,0,0.1)",outline:"none"},"&::placeholder":{fontSize:"14px"}})),(0,n.Ay)("div",{name:"ChatDockContent",slot:"root",shouldForwardProp:e=>"searching"!==e&&"collapsed"!==e})(({theme:e,searching:t,collapsed:a})=>({flex:1,maxHeight:"100%",position:"relative",paddingBottom:e.spacing(.75),...t&&{borderTop:"none"},...a&&{display:"none"},"&::-webkit-scrollbar":{height:"5px",width:"5px",background:"gray",borderRadius:e.spacing(.5),transition:"opacity 200ms"},"&::-webkit-scrollbar-track":{borderRadius:e.spacing(.5),background:"light"===e.palette.mode?"white":e.palette.grey["300"]},"&::-webkit-scrollbar-thumb":{background:e.palette.grey["600"],borderRadius:e.spacing(.5)},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.grey["700"]},"&::-webkit-scrollbar-thumb:horizontal":{background:"#000",borderRadius:"10px"}})),"ChatDockFooter"),v=(0,n.Ay)("div",{name:f,slot:"root",shouldForwardProp:e=>"isAllPageMessages"!==e})(({theme:e,isAllPageMessages:t})=>({position:"relative",display:"flex",minHeight:e.spacing(5),zIndex:e.zIndex.tooltip+11,backgroundColor:e.palette.background.paper,borderTop:e.mixins.border("divider"),...t&&{minHeight:e.spacing(6)}})),y=(0,n.Ay)("div",{name:f,slot:"uiChatRoomFooter",shouldForwardProp:e=>"disable"!==e&&"isAllPageMessages"!==e})(({theme:e,disable:t,isAllPageMessages:a})=>({position:"relative",borderTop:e.mixins.border("secondary"),display:"flex",alignItems:"flex-end",minHeight:e.spacing(5),zIndex:e.zIndex.tooltip+11,flexFlow:"wrap",justifyContent:"center",...t&&{userSelect:"none",backgroundColor:"dark"===e.palette.mode?e.palette.grey["700"]:e.palette.background.paper},...a&&{minHeight:e.spacing(6)}})),b=(0,n.Ay)("div",{name:f,slot:"uiChatComposerContainer"})(({theme:e})=>({textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",padding:"4px 8px",color:e.palette.grey["500"]}));function x({children:e,archived:t,isReadOnly:a,isMuted:i,searching:n,isBlocked:r,reactMode:o,allowMsgNoOne:s}){let{i18n:c,usePageParams:d}=(0,g.PCX)(),u=d(),m=(null==u?void 0:u.isAllPageMessages)||!1;return n?null:t?l.createElement(y,{disable:!0,isAllPageMessages:m},l.createElement(b,null,c.formatMessage({id:"this_group_is_archived"}))):a?l.createElement(y,{disable:!0,isAllPageMessages:m},l.createElement(b,null,c.formatMessage({id:"this_group_is_readonly"}))):i?l.createElement(y,{disable:!0,isAllPageMessages:m},l.createElement(b,null,c.formatMessage({id:"you_have_been_muted_in_this_group"}))):r||s&&"edit"!==o?l.createElement(y,{disable:!0,isAllPageMessages:m},l.createElement(b,null,c.formatMessage({id:"you_can_not_send_message_in_this_conversation"}))):l.createElement(v,{isAllPageMessages:m},e)}var E=a(84058),C=a.n(E);let w=(0,n.Ay)("div",{shouldForwardProp:e=>"searching"!==e&&"addNewMembers"!==e})(({theme:e,searching:t,addNewMembers:a})=>({display:"flex",alignItems:"center",minHeight:e.spacing(7),padding:e.spacing(1.5,1.25,1.5,2),borderBottom:e.mixins.border("secondary"),...(t||a)&&{borderBottom:"none"}}));function A({children:e,onClick:t,searching:a,addNewMembers:i}){let n=l.useCallback(e=>{e.preventDefault(),t&&t()},[t]);return l.createElement(w,{"data-testid":C()("Chat Dock Header"),onClick:n,searching:a,addNewMembers:i},e)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let S="ChatDockPanel",P=(0,n.Ay)("div",{name:S,slot:"Root"})(({theme:e})=>({display:"flex",alignItems:"flex-end",marginLeft:e.spacing(2),width:"328px",zIndex:999})),_=(0,n.Ay)("div",{name:S,slot:"PanelStyled"})(({theme:e})=>({display:"flex",flexDirection:"column",zIndex:10,backgroundColor:e.mixins.backgroundColor("paper"),borderTopLeftRadius:e.shape.borderRadius/2,borderTopRightRadius:e.shape.borderRadius/2,boxShadow:"0 0 4px 0 rgba(0,0,0,0.2)",wordBreak:"break-word",wordWrap:"break-word",borderStartStartRadius:e.shape.borderRadius,borderStartEndRadius:e.shape.borderRadius,height:"455px",maxHeight:"calc(100vh - 60px)",position:"relative"})),M=(0,n.Ay)("div",{name:S,slot:"StageStyled"})(({theme:e})=>({width:"100%"})),R=l.forwardRef(function({children:e,...t},a){return l.createElement(P,k({ref:a},t),l.createElement(M,null,l.createElement(_,null,e)))});var I=a(61341),O=a(97763),W=a(95223),z=a(20053),L=a(38221),T=a.n(L),j=a(62193),F=a.n(j),N=a(56525),B=a(85838);let D=(0,N.A)(e=>(0,B.A)({optionLabel:{width:"32px",height:"32px",display:"inline-flex",alignItems:"center",justifyContent:"center",margin:"0",color:"#a2a2a2"},optionChecked:{color:e.palette.primary.main},optionInput:{display:"none"},optionIcon:{display:"inline-flex",alignItems:"center",marginTop:"1px",height:"14px",marginRight:"4px"}}),{name:"ChatDockSearchFilter"}),H=(0,n.Ay)("div")(({theme:e})=>({})),$=(0,n.Ay)("div")(({theme:e})=>({display:"inline-flex"})),V=(0,n.Ay)("label",{shouldForwardProp:e=>"id"!==e})(({theme:e,id:t})=>({cursor:"pointer",..."close"===t&&{"& span.ico":{"&:hover":{background:e.palette.action.selected,width:e.spacing(2.8),height:e.spacing(2.8),display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"40px"}}}})),X=(0,n.Ay)(r.A,{name:"SearchBox",slot:"Root"})(({theme:e})=>({margin:e.spacing(0,2,1,2),height:e.spacing(5),borderRadius:e.spacing(2.5),display:"flex",alignItems:"center",backgroundColor:e.palette.action.hover,"& input::placeholder":{color:e.palette.text.hint}})),U=(0,n.Ay)(i.s4,{shouldForwardProp:e=>"isMobile"!==e&&"disabled"!==e})(({theme:e,isMobile:t,disabled:a})=>({color:e.palette.text.primary,transition:"all .2s ease",cursor:"pointer",padding:e.spacing(0,1),width:e.spacing(4),height:e.spacing(4),display:"flex",justifyContent:"center",alignItems:"center",fontWeight:e.typography.fontWeightSemiBold,...t&&{padding:0},...a&&{cursor:"not-allowed",color:`${e.palette.text.disabled} !important`,fontWeight:e.typography.fontWeightMedium}})),G=(0,n.Ay)(r.A)(({theme:e})=>({display:"flex",alignItems:"center"}));function q({id:e,checked:t,icon:a,classes:n,value:r,roomId:o,onClick:s,tooltip:c}){let{dispatch:d,i18n:u}=(0,g.PCX)(),m=()=>{d({type:r,payload:{identity:o}}),"function"==typeof s&&s(t?void 0:e)};return l.createElement(O.A,{title:c?u.formatMessage({id:c}):"",placement:"top"},l.createElement(V,{id:e,className:(0,z.default)(n.optionLabel,t&&n.optionChecked)},l.createElement("input",{className:n.optionInput,type:"checkbox"}),l.createElement(i.s4,{icon:a,className:n.optionIcon,onClick:m})))}let Z=({hide:e,roomId:t,searching:a,chatRoom:n,isBuddy:r=!1})=>{let o=D(),{dispatch:s,i18n:c}=(0,g.PCX)(),d=(0,l.useRef)(null),u=(0,l.useRef)(null),{msgSearch:m}=n||{},p=m?(null==m?void 0:m.slot)+1:0,[h,f]=l.useState((null==m?void 0:m.total)||0),v=(0,l.useMemo)(()=>!!F()(m)||(null==m?void 0:m.slot)===0,[m]),y=(0,l.useMemo)(()=>!!F()(m)||h===p,[m,h,p]),[b,x]=l.useState(null),E=c.formatMessage({id:"search_messages_dots"});(null==n?void 0:n.pinned)&&(E=c.formatMessage({id:"search_pinned_messages"})),(null==n?void 0:n.starred)&&(E=c.formatMessage({id:"search_starred_messages"}));let C=(0,l.useMemo)(()=>[{icon:"ico-close",value:"chatplus/room/toggleSearching",tooltip:"close",id:"close"}],[]);(0,l.useEffect)(()=>{d.current="",x(""),u.current=null,P()},[a]);let w=e=>{d.current=e.target.value,x(e.target.value),P()},A=e=>{f((null==e?void 0:e.total)||0)},k=()=>{},S=l.useCallback(()=>{s({type:u.current?"chatplus/room/pinnedMessages":"chatplus/room/searchMessages",payload:{roomId:t,text:d.current,filter:u.current,isBuddy:r},meta:{onSuccess:A,onFailure:k}})},[s,t]),P=(0,l.useMemo)(()=>T()(S,I.IG),[S]);(0,l.useEffect)(()=>{!t||(d.current="",x(""),(null==n?void 0:n.pinned)&&(u.current="pin",P()),(null==n?void 0:n.starred)&&(u.current="star",P()),(null==n?void 0:n.pinned)||(null==n?void 0:n.starred)||(u.current=null,P()))},[null==n?void 0:n.pinned,null==n?void 0:n.starred,t]);let _=l.useCallback(()=>{v||s({type:"chatplus/room/searchChangePosition",payload:{rid:t,mid:null==m?void 0:m.id,type:I.rs}})},[null==m?void 0:m.id,t,v]),M=l.useCallback(()=>{y||s({type:"chatplus/room/searchChangePosition",payload:{rid:t,mid:null==m?void 0:m.id,type:I.mR}})},[null==m?void 0:m.id,t,y]);return e||!t?null:l.createElement(H,null,l.createElement(X,null,l.createElement(W.Ay,{sx:{width:"100%"},variant:"search",onChange:w,placeholder:E,startAdornment:l.createElement(i.s4,{icon:"ico-search-o"}),"aria-controls":"search_complete",value:b,endAdornment:l.createElement(G,null,(null==n?void 0:n.pinned)||(null==n?void 0:n.starred)?null:l.createElement(l.Fragment,null,l.createElement(U,{icon:"ico-angle-up",onClick:_,disabled:v}),l.createElement(U,{icon:"ico-angle-down",onClick:M,disabled:y})),C&&C.length?l.createElement($,null,C.map(e=>l.createElement(q,{id:e.id,key:e.id.toString(),checked:null==e?void 0:e.checked,classes:o,icon:e.icon,value:e.value,roomId:t,tooltip:null==e?void 0:e.tooltip}))):null)})))},Y=(0,l.memo)(Z);var J=a(65121),Q=a(72761),K=a(98023),ee=a.n(K);let et=(0,n.Ay)("div")(({theme:e})=>({flex:1,fontWeight:"bold",display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"})),ea=(0,n.Ay)("span",{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({fontSize:e.mixins.pxToRem(13),color:e.palette.text.primary,lineHeight:e.spacing(2.375),...t===p.O2.Offline&&{color:e.palette.text.secondary}})),ei=(0,n.Ay)("span",{shouldForwardProp:e=>"variant"!==e&&"type"!==e&&"isChatBot"!==e})(({theme:e,variant:t,type:a,isChatBot:i})=>({...e.typography.subtitle1,fontSize:"15px",lineHeight:e.spacing(2.375),...a===p.CJ.Direct&&{":hover":{cursor:"pointer",textDecoration:"underline"}},..."new_message"===t&&{fontSize:e.typography.pxToRem(18),":hover":{cursor:"auto",textDecoration:"none"}},...i&&{":hover":{cursor:"auto",textDecoration:"none"}}})),en=(0,n.Ay)(Q.A,{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({margin:e.spacing(0,1,0,.5),"& .MuiBadge-badge":{...t===p.O2.Online&&{color:e.palette.success.main,backgroundColor:e.palette.success.main},...t===p.O2.Away&&{color:e.palette.warning.main,backgroundColor:e.palette.warning.main},...t===p.O2.Busy&&{color:e.palette.error.main,backgroundColor:e.palette.error.main},"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},...t===p.O2.Invisible&&{display:"none"}})),er=(0,n.Ay)("div",{name:"DockPanelTitle"})(({theme:e})=>({display:"flex",alignItems:"center",marginTop:e.spacing(.25)})),eo=({statusProps:e,user:t,isSelfChat:a})=>{var i,n;let{i18n:r}=(0,g.PCX)();if(e===p.O2.Invisible||!a&&!(null==t?void 0:null===(i=t.lastStatusUpdated)||void 0===i?void 0:i.$date))return null;let o="";switch(e){case p.O2.Offline:{let s=(0,J.Rn)(null==t?void 0:null===(n=t.lastStatusUpdated)||void 0===n?void 0:n.$date);o=s?r.formatMessage({id:"active_time_ago"},{time:s}):"";break}case p.O2.Online:o=r.formatMessage({id:"online"});break;case p.O2.Away:o=r.formatMessage({id:"away"});break;case p.O2.Busy:o=r.formatMessage({id:"busy"})}return l.createElement(er,null,e!==p.O2.Offline&&l.createElement(en,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",status:e}),l.createElement(ea,{status:e},o))};function el({room:e,children:t,status:a,user:i,variant:n,isSelfChat:r=!1}){let{navigate:o}=(0,g.PCX)(),s=null==e?void 0:e.isBotRoom,c=()=>{!s&&(null==e?void 0:e.t)===p.CJ.Direct&&i&&i.username&&o(`/${i.username}`)};return(null==e?void 0:e.t)===p.CJ.Direct?l.createElement(et,{"data-testid":C()("Chat Dock Header title")},l.createElement(ei,{onClick:c,type:null==e?void 0:e.t,isChatBot:s},t),(null==e?void 0:e.t)===p.CJ.Direct&&ee()(a)?l.createElement(eo,{statusProps:a,user:i,isSelfChat:r}):null):l.createElement(et,{"data-testid":C()("Chat Dock Header title")},l.createElement(ei,{type:null==e?void 0:e.t,variant:n},t))}var es=a(24713),ec=a.n(es);let ed=(0,N.A)(e=>(0,B.A)({root:{display:"flex",padding:"0",margin:"0",listStyle:"none"},item:{position:"relative",lineHeight:"34px",padding:"0",margin:"0",".panelHeader &":{height:"30px",width:"30px",marginLeft:e.spacing(.5)},".panelHeader &:hover button":{color:e.palette.text.secondary,backgroundColor:e.palette.action.selected,borderRadius:"50%"}},btn:{height:"34px",lineHeight:"20px",fontSize:"17px",padding:"0 6px",cursor:"pointer",color:"light"===e.palette.mode?e.palette.grey["600"]:e.palette.text.secondary,position:"relative",minWidth:e.spacing(3),display:"inline-flex",textAlign:"center",alignItems:"center",justifyContent:"center",border:"none",outline:"none",backgroundColor:"transparent",".panelHeader &":{height:"30px",width:"30px"}},itemActive:{},btnActive:{color:e.palette.primary.main}}),{name:"ChatDockToolbar"}),eu=(0,n.Ay)("div",{name:"ToolbarChat",slot:"root",shouldForwardProp:e=>"variant"!==e})(({theme:e,variant:t})=>({display:"flex",padding:"0",margin:"0",listStyle:"none",..."pageMessage"===t&&{"& .MuiListItem-root .ico":{fontSize:e.mixins.pxToRem(13)}}}));function em({items:e,displayLimit:t=4,variant:a=null,handleAction:n,popperOptions:r}){var o,s,c;let d=ed();if(!Array.isArray(e))return null;if("roomPanel"===a){let u=t-2,m=ec()(e,{testid:"startVoiceCall"}),p=ec()(e,{testid:"startVideoChat"});u=t-2-(m>-1?0:1)-(p>-1?0:1);let g=e.filter((e,t)=>t<u||e.behavior),h=ec()(g,{behavior:"more"});if(h>-1){if(null===(o=g[h].items)||void 0===o?void 0:o.length)g[h].as="dropdown";else{let f=e.filter((e,t)=>t>u-1&&!e.behavior);g[h]={...g[h],items:f,as:"dropdown"}}}return l.createElement(eu,{variant:a},l.createElement(i.c,{items:g,prefixName:"chatplusToolbar.item.",fallbackName:"button",classes:d,handleAction:n,popperOptions:r,menuStyles:I.E1}))}if("pageMessage"===a){let v=e.filter((e,t)=>e.behavior),y=ec()(v,{behavior:"more"});if(y>-1){if(null===(s=v[y].items)||void 0===s?void 0:s.length)v[y].as="dropdown";else{let b=e.filter((e,t)=>!e.behavior);v[y]={...v[y],items:b,as:"dropdown"}}}return l.createElement(eu,{variant:a},l.createElement(i.c,{items:v,prefixName:"chatplusToolbar.item.",fallbackName:"button",classes:d,handleAction:n,variant:a,popperOptions:r}))}let x=e.filter((e,a)=>a<t-1||e.behavior),E=ec()(x,{behavior:"more"});if(E>-1){if(null===(c=x[E].items)||void 0===c?void 0:c.length)x[E].as="dropdown";else{let C=e.filter((e,a)=>a>t-2&&!e.behavior);x[E]={...x[E],items:C,as:"dropdown"}}}return l.createElement(eu,null,l.createElement(i.c,{items:x,prefixName:"chatplusToolbar.item.",fallbackName:"button",classes:d,handleAction:n,popperOptions:r,menuStyles:I.E1}))}},67912(e,t,a){a.d(t,{A:()=>d});var i=a(97837),n=a(3556),r=a(97763),o=a(96540),l=a(13586);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let c=(0,n.Ay)(({className:e,...t})=>o.createElement(r.A,s({},t,{classes:{popper:e}})))(({theme:e})=>({"& .MuiTooltip-tooltip":{"&.MuiTooltip-tooltipPlacementLeft":{marginRight:`${e.spacing(1)} !important`}}})),d=(0,o.memo)(function({username:e,name:t,size:a="sm",status:n=null,room:r=null,avatarETag:s,hoverCard:d,showTooltip:u=!1}){return o.createElement(c,{title:u&&(t||e),placement:"left",arrow:!1,PopperProps:{popperOptions:{strategy:"fixed"}}},o.createElement("div",null,o.createElement(l.default,{username:e,size:a,name:t,roomType:i.CJ.Direct,status:n,room:r,avatarETag:s,hoverCard:d})))})},73419(e,t,a){a.d(t,{A:()=>d});var i=a(91557),n=a(40515),r=a(8051),o=a(95223),l=a(3556),s=a(96540);let c=(0,l.Ay)(r.A,{name:"MuiLayoutSearchBox",slot:"Root"})(({theme:e})=>({height:e.spacing(5),display:"flex",alignItems:"center",margin:e.spacing(1.5,2)}));function d({placeholder:e="chatplus_search_for_members",value:t,onQueryChange:a,sx:r}){let{i18n:l}=(0,i.PCX)(),[d,u]=s.useState(t),m=e=>{let t=e.target.value;u(t),a&&a(t)};return s.createElement(c,{sx:r},s.createElement(o.Ay,{variant:"search",name:"q",type:"search",value:d,onChange:m,placeholder:l.formatMessage({id:e}),autoComplete:"off",startAdornment:s.createElement(n.s4,{icon:"ico-search-o"}),"aria-controls":"search_complete",inputProps:{"aria-label":`${l.formatMessage({id:e})}`,"aria-autocomplete":"list","aria-expanded":!0,"data-testid":"search box",role:"combobox",spellCheck:!1},sx:{width:"100%"}}))}},67999(e,t,a){a.d(t,{A:()=>L});var i=a(96540),n=a(3556),r=a(14931),o=a(8051),l=a(97763),s=a(40244),c=a(96327),d=a(8586),u=a(58654),m=a(90590),p=a(64992),g=a(99520),h=a(4634),f=a(91557),v=a(1882),y=a.n(v),b=a(84149);let x="control-video",E=(0,n.Ay)("div",{name:x,slot:"root"})(({theme:e})=>({position:"absolute",bottom:0,right:0,left:0,transition:"all 150ms ease",width:"100%",userSelect:"none"})),C=(0,n.Ay)("div",{name:x,slot:"bottom",shouldForwardProp:e=>"isMinimize"!==e})(({theme:e,isMinimize:t})=>({width:"100%",padding:e.spacing(0,t?1:2),maxHeight:"65%",backgroundImage:"linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.35) 40%, transparent)",borderRadius:e.shape.borderRadius})),w=(0,s.A)({root:{color:"#fff",width:"10px !important"},thumb:{width:"16px !important",height:"16px !important",boxShadow:"none !important",color:"#fff"},track:{width:"10px !important"},rail:{color:"#fff"}})(r.Ay),A=(0,n.Ay)(o.A,{name:x,slot:"VolumeSliderWrapper",shouldForwardProp:e=>"isHover"!==e&&"isMinimize"!==e})(({theme:e,isHover:t,isMinimize:a})=>({height:70,visibility:"hidden",opacity:0,transition:"all 300ms ease",position:"absolute",bottom:"100%",paddingBottom:e.spacing(2),left:0,...a&&{height:50,paddingBottom:0},...t&&{visibility:"visible",opacity:1}})),k=(0,n.Ay)(o.A,{name:x,slot:"ButtonVolume"})(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",position:"relative",padding:e.spacing(1)})),S=(0,s.A)({root:{padding:0,height:"3px !important",color:"#fff !important",display:"flex",justifyContent:"center",alignItems:"center",flex:1,"& .MuiSlider-thumb:is(:focus, :hover, $active, .Mui-active)":{display:"inline-block !important"}},thumb:{height:"14px !important",width:"14px !important",backgroundColor:"#fff !important",border:"2px solid currentColor",marginTop:0,marginLeft:0,display:"none !important","&:focus, &:hover, &$active":{boxShadow:"inherit !important"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{border:"0 !important",height:"4px !important",borderRadius:4,width:"100%"},rail:{height:"4px !important",borderRadius:4}})(r.Ay),P=(0,n.Ay)("div",{name:x,slot:"slider",shouldForwardProp:e=>"isMinimize"!==e})(({theme:e,isMinimize:t})=>({display:"flex",alignItems:"center",padding:e.spacing(0,2),flex:1,paddingLeft:0,...t&&{paddingRight:e.spacing(.75),paddingLeft:e.spacing(.75)}})),_=(0,n.Ay)("div",{name:x,slot:"ControlBox"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between"})),M=(0,n.Ay)("div",{name:x,slot:"InnerControls",shouldForwardProp:e=>!/visible|isMinimize/i.test(e)})(({theme:e,visible:t,isMinimize:a})=>({display:"flex",...!a&&{padding:e.spacing(1.25,0)},alignItems:"center",width:"100%",...!t&&{"& > *":{opacity:0}}})),R=(0,n.Ay)("div",{name:x,slot:"icon-button"})(({theme:e})=>({display:"flex",alignItems:"center",color:"#fff !important",fontSize:e.mixins.pxToRem(15),zIndex:1,"&:hover":{cursor:"pointer"}})),I=(0,n.Ay)(o.A,{name:x,slot:"icon-button"})(({theme:e})=>({padding:e.spacing(1)})),O=(0,n.Ay)("span",{name:x,slot:"TimeSpan"})(({theme:e})=>({color:"#fff",fontSize:e.mixins.pxToRem(12),"& > span":{minWidth:"40px",display:"inline-block","&:nth-of-type(1)":{textAlign:"end"},"&:nth-of-type(2)":{textAlign:"start"}}})),W=(0,n.Ay)(o.A,{name:x,slot:"ProgressWrapper"})(({theme:e})=>({position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",flex:1})),z=e=>{var t;let{onPlayPause:a,playing:n,played:r,onSeek:o,onSeekMouseUp:s,onVolumeChangeHandler:v,volume:x,mute:z,onMute:L,formatDuration:T,duration:j,currentTime:F,onMouseSeekDown:N,controlRef:B,loaded:D,onFullScreen:H,showFullScreen:$=!1,isMinimize:V}=e||{},{i18n:X,useIsMobile:U}=(0,f.PCX)(),G=U(!0),[q,Z]=i.useState(!1),[Y,J]=i.useState(!0),[Q,K]=i.useState(""),ee=i.useRef({x:0}),et=i.useRef(null),ea=i.useRef(null),ei=()=>{y()(H)&&H()};i.useImperativeHandle(B,()=>({setVisible(e){J(e)},visible:Y}));let en=i.useCallback(e=>{try{let t=e.currentTarget.getBoundingClientRect(),a=e.clientX-e.currentTarget.getBoundingClientRect().left,i=(0,b.f)(Math.max(0,a/t.width*j));K(i),ee.current={x:e.clientX},null!=et.current&&et.current.update()}catch(n){}},[K,j]);return i.createElement(E,{ref:B},i.createElement(C,{isMinimize:V},i.createElement(_,null,i.createElement(M,{visible:Y,isMinimize:V},i.createElement(R,{onClick:a},1===r?i.createElement(h.A,{fontSize:"medium"}):n?i.createElement(c.A,{fontSize:"medium"}):i.createElement(d.A,{fontSize:"medium"})),i.createElement(P,{isMinimize:V},V?null:i.createElement(O,null,i.createElement("span",null,F)," / ",i.createElement("span",null,T)),i.createElement(W,null,i.createElement(l.A,{title:Q,placement:"top",arrow:!0,PopperProps:{container:null!==(t=document.fullscreenElement)&&void 0!==t?t:document.body,popperRef:et,sx:{pointerEvents:"none",display:Y?void 0:"none !important"},anchorEl:{getBoundingClientRect:()=>new DOMRect(ee.current.x,ea.current.getBoundingClientRect().y+10,0,0)}}},i.createElement(S,{min:0,max:100,value:100*r,onChange:o,onChangeCommitted:s,onMouseDown:N,onMouseMove:en,ref:ea})),i.createElement(S,{disabled:!0,min:0,max:100,value:100*D,sx:{position:"absolute",top:0,left:0,opacity:.3}}))),V?null:i.createElement(I,null,i.createElement(l.A,{title:X.formatMessage({id:$?"exit_full_screen":"switch_to_full_screen"})},i.createElement(R,{onClick:ei},$?i.createElement(p.A,null):i.createElement(g.A,null)))),i.createElement(k,{sx:{opacity:"1 !important"},onMouseEnter:()=>Z(!0),onMouseLeave:()=>Z(!1)},G?null:i.createElement(A,{isHover:q,isMinimize:V},i.createElement(w,{min:0,max:1,step:.1,orientation:"vertical",onChange:v,value:x})),i.createElement(R,{onClick:L},z?i.createElement(u.A,{fontSize:"medium"}):i.createElement(m.A,{fontSize:"medium"})))))))},L=z},27571(e,t,a){a.d(t,{A:()=>d});var i=a(8051),n=a(89481),r=a(3556),o=a(96540);let l="loading-video",s=(0,r.Ay)(i.A,{name:l,slot:"backdrop"})(({theme:e})=>({position:"absolute",left:0,top:0,bottom:0,right:0,zIndex:10})),c=(0,r.Ay)(i.A,{name:l,slot:"conent"})(({theme:e})=>({position:"absolute",left:"50%",top:"50%",marginLeft:-20,marginTop:-20}));function d({size:e=40}){return o.createElement(s,{"data-testid":"loadingIndicator"},o.createElement(c,null,o.createElement(n.A,{color:"primary",size:e})))}},84053(e,t,a){a.r(t),a.d(t,{default:()=>b});var i=a(65121),n=a(73349),r=a(91557),o=a(40515),l=a(3556),s=a(97763),c=a(96540),d=a(62193),u=a.n(d),m=a(85376);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let g="dialogItemView",h=(0,l.Ay)("div",{name:g,slot:"ico-close",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(4),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"],borderRadius:"50%"},...t&&{top:e.spacing(2.5),right:e.spacing(2.5)}})),f=(0,l.Ay)("div",{name:g,slot:"ico-download",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(10),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"],borderRadius:"50%"},...t&&{top:e.spacing(2.5),right:e.spacing(8.125)}})),v=(0,l.Ay)(n.Cf,{name:g,slot:"content",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("xs")]:{flexFlow:"column"},...t&&{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.grey.A400}})),y=(0,l.Ay)("div",{name:g,slot:"DialogVideo",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative","& video":{maxHeight:`calc(100vh - ${t?"150px":"80px"})`}}));function b({src:e,currentTime:t,thumbUrl:a}){let{useDialog:l,useIsMobile:d,i18n:g}=(0,r.PCX)(),b=d(),{dialogProps:x,closeDialog:E}=l(),C=e=>{e&&(0,i.NK)(e,!1,!0)};if(!u()(e))return c.createElement(n.lG,p({},x,{"data-testid":"popupDetailVideo",maxWidth:b?"xl":"md",fullScreen:!!b,fullWidth:!1,scroll:"body",sx:{backgroundColor:"rgba(0, 0, 0, 0.9)"},PaperProps:{style:{background:"transparent"}}}),c.createElement(s.A,{arrow:!1,placeholder:"top",title:g.formatMessage({id:"download"})},c.createElement(f,{onClick:()=>C(e),isMobile:b},c.createElement(o.s4,{icon:"ico-download"}))),c.createElement(s.A,{arrow:!1,placeholder:"top",title:g.formatMessage({id:"press_esc_to_close"})},c.createElement(h,{onClick:E,isMobile:b},c.createElement(o.s4,{icon:"ico-close"}))),c.createElement(v,{dividers:!1,isMobile:b},c.createElement(y,{isMobile:b},c.createElement(m.A,{width:"100%",height:"100%",src:e,currentTime:t||0,autoPlay:!0,isMinimize:!1,thumbUrl:a,isDialog:!0}))))}},84149(e,t,a){a.d(t,{f:()=>i,h:()=>n});let i=e=>{if(isNaN(e)||0===e)return"00:00";let t=new Date(1e3*e),a=t.getUTCHours(),i=t.getUTCMinutes(),n=t.getUTCSeconds().toString().padStart(2,"0");return a?`${a}:${i.toString().padStart(2,"0")} `:`${i}:${n}`},n=(e,t)=>{let a=e/t;return isNaN(a)||0===a?"56.25%":`${e/t*100}%`}},85376(e,t,a){a.d(t,{A:()=>I});var i=a(91557),n=a(40515),r=a(3556),o=a(8051),l=a(96540),s=a(26287),c=a(47695),d=a(97200),u=a.n(d),m=a(67999),p=a(84149),g=a(27571),h=a(67725);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let v=(0,s.Ay)({resolved:{},chunkName:()=>"VideoPlayer",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e("VideoPlayer").then(a.bind(a,13554)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return a(t)},resolve:()=>13554}),y="VideoPlayer",b=(0,r.Ay)(o.A,{name:y,slot:"root"})(({theme:e})=>({width:"100%",height:"100%",display:"flex",alignItems:"center",overflow:"hidden",position:"relative","& .react-player__preview":{position:"relative","&:before":{content:'""',position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"#000",opacity:.4}},"& .ico-play-circle-o":{fontSize:e.mixins.pxToRem(48),color:"#fff",position:"relative"}})),x=(0,r.Ay)("div",{name:y,slot:"playerContainer",shouldForwardProp:e=>!/ratioPercent/i.test(e)})(({theme:e,ratioPercent:t})=>({width:"100%",height:"100%",...t&&{"&:before":{content:'""',paddingTop:null!=t?t:"56.25%",backgroundColor:e.palette.grey.A700,display:"block",width:"100%",borderRadius:e.shape.borderRadius}}})),E=(0,r.Ay)(o.A,{name:y,slot:"playerWrapper"})(({theme:e})=>({width:"100%",height:"100%"})),C=(0,r.Ay)(v,{name:y,slot:"reactPlayer"})(({theme:e})=>({display:"flex",minHeight:"104px",".controls":{width:"10px"},"& video":{maxWidth:"100%",display:"inline-block",borderRadius:e.shape.borderRadius}})),w=(0,r.Ay)("div",{name:y,slot:"ThumbImageWrapper"})(({theme:e})=>({width:"100%",height:"100%",position:"absolute",top:0,zIndex:1,filter:"brightness(0.7)"})),A=(0,r.Ay)(n.s4,{name:y,slot:"CustomPlayButton"})({position:"absolute !important",top:0,bottom:0,left:0,right:0,margin:"auto",width:"fit-content",height:"fit-content",zIndex:2,pointerEvents:"none"}),k=(0,r.Ay)(n._V,{name:y,slot:"imageThumbnail"})(({theme:e})=>({width:"100%",height:"100%","& img":{borderRadius:e.shape.borderRadius}})),S=0,P=e=>Math.min(e/100,.99),_=l.forwardRef((e,t)=>l.createElement(C,f({},e,{ref:t}))),M={},R={};function I(e){var t,a,r,s,d;let{src:f,autoPlay:v=!1,autoplayIntersection:y=!1,idPlaying:C,width:I,height:O,isMinimize:W=!0,currentTime:z,thumb_url:L,allowOpenPreview:T,isDialog:j=!1}=e||{},{dialogBackend:F,useMediaPlaying:N,useSession:B,useIsMobile:D,assetUrl:H,useDialog:$}=(0,i.PCX)(),{dialogProps:V}=$(),X=D(),U=l.useRef(!1),{user:G}=B(),q=l.useMemo(()=>C||u()("video"),[C]),Z=(0,p.h)(O,I),Y=(0,h.AE)(L,"500",H("video.no_image")),[J,Q]=N(q),[K,ee]=l.useState(!1),[et,ea]=l.useState(!1),[ei,en]=(0,c.Wx)({threshold:.5}),[er,eo]=l.useState(!0),el=l.useRef(null),es=l.useRef(null),ec=l.useRef(null),[ed,eu]=l.useState({muted:null===(s=null==R?void 0:R.muted)||void 0===s||s,volume:null!==(d=null==R?void 0:R.volume)&&void 0!==d?d:1,played:0,seeking:!1,buffer:!0,loadedSeconds:0}),em=l.useRef(!1),ep=(0,i.zy2)();l.useLayoutEffect(()=>{v&&eo(!0)},[v]),l.useEffect(()=>{eu(e=>({...e,...R}))},[J]),l.useEffect(()=>{if(M[f]||z){var e;null===(e=el.current)||void 0===e||e.seekTo(M[f]||z,"fraction")}},[null==ep?void 0:ep.pathname,z]),l.useEffect(()=>()=>{M[f]=void 0,Q(!1)},[]);let{muted:eg,volume:eh,played:ef,buffer:ev,loadedSeconds:ey,seeking:eb}=ed||{};l.useEffect(()=>{M[f]=ef},[ef]);let ex=null===(t=el.current)||void 0===t?void 0:t.getDuration(),eE=el.current?null===(a=el.current)||void 0===a?void 0:a.getCurrentTime():0,eC=el.current?ex:0,ew=null==G?void 0:null===(r=G.video_settings)||void 0===r?void 0:r.user_auto_play_videos,eA=ew&&y,ek=e=>{!K&&(ee(!0),eA||!v||J||Q(!0))},eS=l.useCallback(e=>{Q(!0)},[Q]),eP=l.useCallback(e=>{Q(!1)},[Q]);(0,l.useEffect)(()=>{eA&&Q(en)},[en]);let e_=(0,p.f)(eE),eM=(0,p.f)(eC),eR=e=>{T&&(e.stopPropagation(),eo(!1),Q(!0))};(0,l.useEffect)(()=>{j&&(eo(!1),Q(!0))},[j]);let eI=(e,t=!1)=>{if(e.stopPropagation(),1===ef){var a,i,n,r;null===(a=el.current)||void 0===a||a.seekTo(0),(null===(i=el.current)||void 0===i?void 0:i.getInternalPlayer())&&(null===(r=null===(n=el.current)||void 0===n?void 0:n.getInternalPlayer())||void 0===r||r.play());return}if(J&&!V.open&&!t){F.present({component:"chatplus.dialog.VideoPlayer",props:{src:f,currentTime:ef,thumbUrl:Y}});return}Q(!J)},eO=e=>{var t;S>3e3?eH():(null===(t=es.current)||void 0===t?void 0:t.visible)&&(S+=200),eb||eu({...ed,...e})},eW=(e,t)=>{var a;let i=P(t);eu({...ed,played:i}),null===(a=el.current)||void 0===a||a.seekTo(i,"fraction")},ez=(e,t)=>{var a;em.current&&(Q(!0),em.current=!1);let i=P(t);eu({...ed,seeking:!1}),null===(a=el.current)||void 0===a||a.seekTo(i,"fraction")},eL=e=>{J&&(em.current=!0),eu({...ed,seeking:!0})},eT=(e,t)=>{e.stopPropagation();let a={muted:0===Number(t),volume:t};R=a,eu(e=>({...e,...a}))},ej=e=>{e.stopPropagation();let t={muted:!ed.muted,volume:0===ed.volume&&ed.muted?1:ed.volume};R=t,eu(e=>({...e,...t}))},eF=()=>{eD(),U.current=!1},eN=e=>{eu({...ed,buffer:!0})},eB=e=>{eu({...ed,buffer:!1})},eD=l.useCallback(()=>{es.current&&(es.current.setVisible(!0),S=0)},[]),eH=()=>{1!==ed.played&&J&&!et&&es.current&&es.current.setVisible(!1)},e$=()=>{var e,t,a,i,n;if(es.current&&ec.current){if(X){let r=null===(e=ec.current)||void 0===e?void 0:e.querySelector("video");if(!r)return;if(r.webkitSupportsFullscreen){r.webkitEnterFullscreen();return}r.requestFullscreen();return}document.fullscreenElement?document.exitFullscreen():(null===(t=ec.current)||void 0===t?void 0:t.requestFullscreen)?null===(i=ec.current)||void 0===i||i.requestFullscreen():(null===(a=ec.current)||void 0===a?void 0:a.webkitRequestFullscreen)&&(null===(n=ec.current)||void 0===n||n.webkitRequestFullscreen())}},[eV,eX]=l.useState(!1);return l.useEffect(()=>{let e=()=>{document.fullscreenElement?eX(!0):eX(!1)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]),l.createElement(l.Fragment,null,l.createElement(o.A,{display:er&&L?"inherit":"none !important"},l.createElement(b,{width:`${I}px !important`},l.createElement(x,{ratioPercent:Z},l.createElement(w,{onClick:eR},l.createElement(k,{src:Y,aspectRatio:"fixed"})),l.createElement(A,{icon:"ico-play-circle-o"})))),l.createElement(b,{display:er&&L?"none !important":"inherit",ref:ei,onMouseLeave:eH,onMouseMove:eD},l.createElement(x,{ref:ec},l.createElement(E,{onClick:eI},ev&&J?l.createElement(g.A,{size:W?26:50}):null,l.createElement(_,{ref:el,onEnded:eF,onPause:eP,onPlay:eS,onClickPreview:eS,progressInterval:200,url:f,controls:!1,config:{...X&&{file:{attributes:{controlsList:"nofullscreen",disablePictureInPicture:"",playsInline:!0}}}},onReady:ek,className:"player",width:I,height:O,playing:J&&!em.current,volume:eh,muted:eg,playIcon:l.createElement(n.s4,{icon:"ico-play-circle-o"}),onProgress:eO,onBuffer:eN,onBufferEnd:eB})),K?l.createElement(m.A,{controlRef:es,onPlayPause:e=>eI(e,!0),playing:J,played:ef,loaded:ey/ex,buffer:ev,onSeek:eW,onSeekMouseUp:ez,onMouseSeekDown:eL,volume:eg?0:eh,onVolumeChangeHandler:eT,mute:eg,onMute:ej,duration:eC,formatDuration:eM,currentTime:e_,onFullScreen:e$,showFullScreen:eV,setIsEditControl:ea,isMinimize:W}):null)))}},78444(e,t,a){a.r(t),a.d(t,{default:()=>P});var i=a(73349),n=a(91557),r=a(40515),o=a(67725),l=a(3556),s=a(8051),c=a(88631),d=a(54358),u=a(96540),m=a(71468),p=a(13586),g=a(88485),h=a(16677),f=a(9013),v=a(62193),y=a.n(v),b=a(90243),x=a(61341);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let C=(0,l.Ay)("div",{name:"WrapperAvatar"})(({theme:e})=>({marginBottom:e.spacing(2.5)})),w=(0,l.Ay)("div",{name:"EditAvatarButton"})(({theme:e})=>({width:100,height:100,borderRadius:100,position:"relative","&:hover":{opacity:.47},"&:hover .ico":{visibility:"visible"}})),A=(0,l.Ay)(r.s4,{name:"LineIconCamera"})(({theme:e})=>({fontSize:30,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",visibility:"hidden",zIndex:99})),k=(0,l.Ay)(s.A,{name:"WrapperInput"})(({theme:e})=>({marginBottom:e.spacing(2)}));function S({text:e,sx:t,error:a=!1}){return e?u.createElement(c.A,{sx:t,error:a},u.createElement(b.Ay,{html:e})):null}function P(e){let{title:t,allowEditing:a,rid:l,room:c}=e,{i18n:v,useDialog:b,dispatch:P,dialogBackend:_}=(0,n.PCX)(),{dialogProps:M,closeDialog:R}=b(),I=(null==c?void 0:c.ro)||!1,O=(null==c?void 0:c.t)==="c",W=(null==c?void 0:c.fname)||"",z=(null==c?void 0:c.topic)||"",L=(null==c?void 0:c.description)||"",T=(null==c?void 0:c.announcement)||"",[j,F]=u.useState(I),[N,B]=u.useState(O),[D,H]=u.useState(W),[$,V]=u.useState(z),[X,U]=u.useState(!1),[G,q]=u.useState(L),[Z,Y]=u.useState(T),[J,Q]=u.useState(""),K=u.useRef(),ee=(0,m.d4)(e=>(0,h.a7)(e,l)),et=(0,g.sz)(),ea=null,ei=()=>{K&&K.current&&K.current.click()},en=e=>{var t;e.preventDefault(),e.stopPropagation();let a=K.current;if(!a||!(null===(t=a.files)||void 0===t?void 0:t.length))return;let i=a.files[0],n=new FileReader,r="",l=(null==et?void 0:et.RoomAvatarUpload_MaxFileSize)||8e3;n.addEventListener("load",e=>{r=e.target.result;let t=null==i?void 0:i.size,a=i.name;if(t&&t<l&&0!==l){if(!r)return;Q(r)}else _.alert({message:v.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,o.Tu)(a,30),fileSize:(0,o.lT)(i.size),maxSize:(0,o.lT)(l)})})}),n.readAsDataURL(i)},er=e=>{R(),e()},eo=((e,t)=>{let a={};return Object.keys(e).forEach(i=>{t[i]!==e[i]&&(a[i]="string"==typeof t[i]?t[i].trim():t[i])}),a})({roomAvatar:"",readOnly:I,roomType:O?"c":"p",roomName:W,roomTopic:z,roomDescription:L,roomAnnouncement:T},{roomAvatar:J,readOnly:j,roomType:N?"c":"p",roomName:D,roomTopic:$,roomDescription:G,roomAnnouncement:Z}),el=e=>{if(y()(D)){ea=u.createElement(S,{text:"Group Name is required",error:!0});return}U(!0),P({type:"chatplus/room/editSettings",payload:{identity:null==c?void 0:c.id,value:eo},meta:{onSuccess(){R(),e(),U(!1)},onFailure(){e(),U(!1)}}})};y()(D)&&(ea=u.createElement(S,{text:v.formatMessage({id:"group_name_is_required"}),error:!0}));let es=u.useMemo(()=>Boolean(y()(D)),[D]),ec=()=>{H(null==D?void 0:D.trim())};return u.createElement(i.lG,E({maxWidth:"sm",fullWidth:!0},M),u.createElement(i.L3,{disableClose:!1},t||v.formatMessage({id:"room_info"})),u.createElement(i.Cf,{sx:{py:2,px:3}},u.createElement(C,null,a?u.createElement(w,{onClick:ei},u.createElement(p.default,{name:null==ee?void 0:ee.name,username:null==ee?void 0:ee.name,src:J||(null==ee?void 0:ee.avatar),size:100,room:c,uploadLocal:!!J}),u.createElement(A,{icon:"ico-camera"})):u.createElement(p.default,{name:null==ee?void 0:ee.name,username:null==ee?void 0:ee.name,size:100,src:null==ee?void 0:ee.avatar,room:c}),u.createElement("input",{accept:"image/*",style:{display:"none"},type:"file",ref:K,onChange:en})),u.createElement(k,null,u.createElement(d.A,{disabled:!a,defaultValue:D,value:D,error:es,onChange(e){H(e.currentTarget.value)},onBlur:ec,fullWidth:!0,required:!0,variant:"outlined",placeholder:v.formatMessage({id:"name"}),label:v.formatMessage({id:"channel_name"}),helperText:ea,inputProps:{maxLength:x.uK}})),a||z?u.createElement(k,null,a?u.createElement(d.A,{disabled:!a,defaultValue:$,value:$,onChange:e=>V(e.currentTarget.value),fullWidth:!0,variant:"outlined",placeholder:v.formatMessage({id:"topic"}),label:v.formatMessage({id:"topic"})}):u.createElement(d.A,{disabled:!0,defaultValue:z||v.formatMessage({id:"empty"}),fullWidth:!0,variant:"outlined",label:v.formatMessage({id:"topic"})})):null,a||L?u.createElement(k,null,a?u.createElement(d.A,{multiline:!0,rows:2,disabled:!a,defaultValue:G,value:G,onChange:e=>q(e.currentTarget.value),fullWidth:!0,variant:"outlined",placeholder:v.formatMessage({id:"description"}),label:v.formatMessage({id:"description"})}):u.createElement(d.A,{multiline:!0,rows:4,disabled:!0,value:L||v.formatMessage({id:"empty"}),fullWidth:!0,variant:"outlined",label:v.formatMessage({id:"description"})})):null,a||T?u.createElement(k,null,a?u.createElement(d.A,{multiline:!0,rows:2,disabled:!a,defaultValue:Z,value:Z,onChange:e=>Y(e.currentTarget.value),fullWidth:!0,variant:"outlined",placeholder:v.formatMessage({id:"announcement"}),label:v.formatMessage({id:"announcement"})}):u.createElement(d.A,{multiline:!0,rows:4,disabled:!0,value:T||v.formatMessage({id:"empty"}),fullWidth:!0,variant:"outlined",label:v.formatMessage({id:"announcement"})})):null,u.createElement(s.A,null,u.createElement(f.CheckboxLabels,{allowEditing:a,readonly:j,isPublic:N,setReadonly:F,setIsPublic:B}))),a?u.createElement(i.ii,null,u.createElement(r.dz,{disabled:es||y()(eo),action:el,color:"primary",variant:"contained",children:v.formatMessage({id:"save"})}),u.createElement(r.dz,{disabled:X,action:er,color:"primary",variant:"outlined",children:v.formatMessage({id:"cancel"})})):null)}},69732(e,t,a){a.r(t),a.d(t,{SelectItem:()=>E,default:()=>C});var i=a(73349),n=a(91557),r=a(40515),o=a(3556),l=a(42335),s=a(50203),c=a(29349),d=a(57660),u=a(2379),m=a(60780),p=a(56449),g=a.n(p),h=a(96540),f=a(88485);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let y=(0,o.Ay)(l.Ay,{name:"StyledListItem"})(({theme:e})=>{var t;return{borderBottom:"solid 1px",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,padding:"22px 0 !important",display:"flex",justifyContent:"space-between","&:first-of-type":{paddingTop:6},"&:last-child":{paddingBottom:6,borderBottom:"none"}}}),b=(0,o.Ay)(r.mE)(({theme:e})=>({display:"flex",justifyContent:"center",flex:1,minWidth:0})),x=(0,o.Ay)(s.A)(({theme:e})=>({"& .MuiInputBase-input":{fontWeight:"normal"}}));function E({item:e,onChanged:t}){var a;let[i,n]=h.useState(null==e?void 0:e.value),r=a=>{let i=a.target.value;n(i),t(i,null==e?void 0:e.var_name)};return h.createElement(y,null,h.createElement(c.A,{primary:e.phrase,sx:{pr:2}}),h.createElement(x,{className:"select-quick-sort",variant:"standard",value:i,onChange:r,disableUnderline:!0},null==e?void 0:null===(a=e.options)||void 0===a?void 0:a.map((e,t)=>h.createElement(d.A,{value:e.value,key:t},e.label))))}let C=function(e){var t,a;let{i18n:r,useDialog:o,dispatch:l,useIsMobile:s}=(0,n.PCX)(),c=s(),d=(0,f.HW)(),{dialogProps:p,closeDialog:y}=o(),[x,C]=(0,h.useState)(null!==(t=null==d?void 0:d.mobileNotifications)&&void 0!==t?t:"all"),[w,A]=(0,h.useState)(null!==(a=null==d?void 0:d.audioNotifications)&&void 0!==a?a:"all"),k=[{default_value:x,ordering:1,value:x,phrase:r.formatMessage({id:"receive_mobile_notifications"}),var_name:"mobileNotifications",options:[{label:r.formatMessage({id:"all_messages"}),value:"all"},{label:r.formatMessage({id:"mentions"}),value:"mentions"},{label:r.formatMessage({id:"nothing"}),value:"nothing"}]},{default_value:w,ordering:2,value:w,phrase:r.formatMessage({id:"receive_sound_notifications"}),var_name:"audioNotifications",options:[{label:r.formatMessage({id:"all_messages"}),value:"all"},{label:r.formatMessage({id:"mentions"}),value:"mentions"},{label:r.formatMessage({id:"nothing"}),value:"nothing"}]}],S=(e,t)=>{switch(t){case"mobileNotifications":C(e);break;case"audioNotifications":A(e)}},P=()=>{y()},_=()=>{let e={...d,mobileNotifications:x,audioNotifications:w};l({type:"chatplus/room/saveUserPreferences",payload:e,meta:{onSuccess:()=>y()}})};return c?h.createElement(i.lG,v({maxWidth:"sm",fullWidth:!0},p),h.createElement(i.L3,{enableDone:!0,onDoneClick:_,enableBack:!0,onBackClick:P,disableClose:!0},h.createElement(b,{lines:1,color:"text.primary",variant:"h2",fontSize:18},r.formatMessage({id:"settings"}))),h.createElement(i.Cf,{sx:{p:"0 16px"}},h.createElement(u.A,{disablePadding:!0},g()(k)?k.map(e=>h.createElement(E,{key:null==e?void 0:e.var_name,onChanged:S,item:e})):null))):h.createElement(i.lG,v({maxWidth:"sm",fullWidth:!0},p),h.createElement(i.L3,{disableClose:!1},r.formatMessage({id:"settings"})),h.createElement(i.Cf,{sx:{p:"0 16px"}},h.createElement(u.A,{disablePadding:!0},g()(k)?k.map(e=>h.createElement(E,{key:null==e?void 0:e.var_name,onChanged:S,item:e})):null)),h.createElement(i.ii,{sx:{mt:.5}},h.createElement(m.A,{onClick:_,color:"primary",autoFocus:!0,variant:"contained",children:r.formatMessage({id:"save"})}),h.createElement(m.A,{onClick:P,color:"primary",autoFocus:!0,variant:"outlined",children:r.formatMessage({id:"cancel"})})))}},85477(e,t,a){a.r(t),a.d(t,{default:()=>E});var i=a(65121),n=a(73349),r=a(91557),o=a(40515),l=a(3556),s=a(97763),c=a(96540);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let u="dialogItemView",m=(0,l.Ay)("div",{name:u,slot:"ico-close",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(4),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"],borderRadius:"50%"},...t&&{top:e.spacing(2.5),right:e.spacing(2.5)}})),p=(0,l.Ay)("div",{name:u,slot:"ico-download",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(10),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"],borderRadius:"50%"},...t&&{top:e.spacing(2.5),right:e.spacing(8.125)}})),g=(0,l.Ay)(n.Cf,{name:u,slot:"content",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("xs")]:{flexFlow:"column"},...t&&{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.grey.A400}})),h=(0,l.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative"})),f=(0,l.Ay)("img")(({theme:e})=>({maxWidth:"100%",maxHeight:" calc(100vh - 88px)",margin:"auto"})),v=(0,l.Ay)("video")(({theme:e})=>({maxWidth:"100%",maxHeight:" calc(100vh - 88px)",margin:"auto"})),y=(0,l.Ay)("div",{name:u,slot:"button-prev",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:e.spacing(5),left:e.spacing(4),zIndex:2,...t&&{left:e.spacing(.5),zIndex:999,opacity:.8}})),b=(0,l.Ay)("div",{name:u,slot:"button-next",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:e.spacing(5),right:e.spacing(4),...t&&{right:e.spacing(.5),zIndex:999,opacity:.8}})),x=(0,l.Ay)("div",{name:u,slot:"button-image"})(({theme:e})=>({cursor:"pointer",width:e.spacing(5),height:e.spacing(5),borderRadius:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:e.palette.grey["800"],"& .ico":{fontSize:e.mixins.pxToRem(16),color:e.palette.grey["50"]}}));function E({image:e,images:t}){let{useDialog:a,useIsMobile:l,i18n:u}=(0,r.PCX)(),E=l(),{dialogProps:C,closeDialog:w}=a(),A=t&&t.length-1,k=t&&t.length>1,S=parseInt(null==e?void 0:e.id)||0,[P,_]=c.useState(S),M=e=>{e+1>A?_(0):_(parseInt(e)+1)},R=e=>{e-1<0?_(A):_(parseInt(e)-1)},I=e=>{let t="rtl"===document.dir,a="";switch(e.keyCode){case 27:w();break;case 39:a=t?"prev":"next";break;case 37:a=t?"next":"prev"}if("next"===a&&P!==A){M(P);return}if("prev"===a&&0!==P){R(P);return}},O=e=>{e&&(0,i.NK)(e,!1,!0)};return(c.useEffect(()=>(document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}),[P]),k)?c.createElement(n.lG,d({},C,{"data-testid":"popupDetailPhoto",maxWidth:E?"xl":"lg",fullScreen:!!E,fullWidth:!1,scroll:"body",sx:{backgroundColor:"rgba(0, 0, 0, 0.9)"}}),c.createElement(s.A,{arrow:!1,placeholder:"top",title:u.formatMessage({id:"press_esc_to_close"})},c.createElement(m,{onClick:w,isMobile:E},c.createElement(o.s4,{icon:"ico-close"}))),0!==P&&c.createElement(y,{isMobile:E},c.createElement(x,{onClick:()=>R(P)},c.createElement(o.s4,{icon:"ico-angle-left"}))),c.createElement(g,{dividers:!1,isMobile:E},t.map((e,t)=>c.createElement("div",{key:t},e.id===P?c.createElement(h,null,(null==e?void 0:e.video_type)?c.createElement(v,{src:null==e?void 0:e.src,type:e.video_type,controls:!0,autoPlay:!0}):c.createElement(f,{src:(null==e?void 0:e.video_thumb_url)||(null==e?void 0:e.src),alt:""}),c.createElement(s.A,{arrow:!1,placeholder:"top",title:u.formatMessage({id:"download"})},c.createElement(p,{onClick:()=>O(e.src),isMobile:E},c.createElement(o.s4,{icon:"ico-download"})))):null))),P!==A&&c.createElement(b,{isMobile:E},c.createElement(x,{onClick:()=>M(P)},c.createElement(o.s4,{icon:"ico-angle-right"})))):e?c.createElement(n.lG,d({},C,{"data-testid":"popupDetailPhoto",maxWidth:E?"xl":"lg",fullScreen:!!E,fullWidth:!1,scroll:"body",sx:{backgroundColor:"rgba(0, 0, 0, 0.9)"}}),c.createElement(s.A,{arrow:!1,placeholder:"top",title:u.formatMessage({id:"press_esc_to_close"})},c.createElement(m,{onClick:w,isMobile:E},c.createElement(o.s4,{icon:"ico-close"}))),c.createElement(g,{dividers:!1,isMobile:E},c.createElement(h,null,(null==e?void 0:e.video_type)?c.createElement("video",{src:e.src,type:e.video_type,controls:!0,autoPlay:!0}):c.createElement(f,{src:e.src,alt:""}),(null==e?void 0:e.video_type)||!e.src?null:c.createElement(s.A,{arrow:!1,placeholder:"top",title:u.formatMessage({id:"download"})},c.createElement(p,{onClick:()=>O(e.src),isMobile:E},c.createElement(o.s4,{icon:"ico-download"})))))):null}},83790(e,t,a){a.r(t),a.d(t,{MembersDialog:()=>_,default:()=>M});var i=a(88485),n=a(73349),r=a(91557),o=a(84680),l=a(4941),s=a(3556),c=a(62193),d=a.n(c),u=a(96540),m=a(13586),p=a(40515),g=a(67725),h=a(8051);let f="MemberItem",v=(0,s.Ay)("div",{name:f,slot:"UIChatBuddyItem"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(1.5,2),color:"#555555",fontSize:"14px",cursor:"pointer","&:hover":{background:"dark"===e.palette.mode?e.palette.grey["700"]:e.palette.grey["50"]}})),y=(0,s.Ay)("div",{name:f,slot:"UIChatBuddyItemWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:0,flex:1,overflow:"hidden"})),b=(0,s.Ay)("div")(({theme:e})=>({marginLeft:e.spacing(1.5),display:"flex",alignItems:"flex-start",flexDirection:"column",flex:1,overflow:"hidden"})),x=(0,s.Ay)("div")(({theme:e})=>({color:e.palette.grey["600"],fontSize:e.spacing(2),padding:e.spacing(0,1)})),E=(0,s.Ay)(p.mE)(({theme:e})=>({..."dark"===e.palette.mode&&{color:e.palette.grey["400"]}})),C=(0,s.Ay)("div")(({theme:e})=>({..."dark"===e.palette.mode&&{color:e.palette.grey["500"]},display:"flex",flexWrap:"wrap","& > *:not(:last-child):after":{content:"'\xb7'",margin:e.spacing(0,.5)}}));function w({u:e,user:t,room:a,perms:i={},setReloadData:n}){var o,l;let{i18n:s,chatplus:c,useActionControl:d,useDialog:f}=(0,r.PCX)(),{closeDialog:w}=f(),A={moderator:0,leader:0,owner:0};e&&e.roles&&Array.isArray(e.roles)&&Object.keys(A).forEach(t=>{e.roles.includes(t)&&(A[t]=1)});let{_id:k,muted:S}=a,{_id:P,username:_}=e,M=P===t._id,R=S&&S.includes(_),[I]=d(k,{}),O=(e,t,a)=>{I(e,t,a),n&&n(!0)},W=u.useMemo(()=>[{label:"unmute_room_user",icon:"ico-unlock-o",value:"closeMenu, chatplus/room/unmuteUserInRoom",params:{userId:P},showWhen:["and",["truthy","perms.mute-user"],["falsy","isOwner"],["truthy","isMuted"]]},{label:"mute",icon:"ico-lock",value:"closeMenu, chatplus/room/muteUserInRoom",params:{userId:P},showWhen:["and",["truthy","perms.mute-user"],["falsy","isOwner"],["falsy","isMuted"]]},{label:"set_room_owner",icon:"ico-businessman-plus",value:"closeMenu, chatplus/room/addRoomOwner",params:{userId:P},showWhen:["and",["truthy","perms.set-owner"],["falsy","roles.owner"],["falsy","isOwner"]]},{label:"remove_room_owner",icon:"ico-businessman-del",value:"closeMenu, chatplus/room/removeRoomOwner",params:{userId:P},showWhen:["and",["truthy","perms.set-owner"],["truthy","roles.owner"]]},{label:"set_room_moderator",icon:"ico-businessman-plus",value:"closeMenu, chatplus/room/addRoomModerator",params:{userId:P},showWhen:["and",["truthy","perms.set-moderator"],["falsy","roles.moderator"],["falsy","isOwner"]]},{label:"remove_room_moderator",icon:"ico-businessman-del",value:"closeMenu, chatplus/room/removeRoomModerator",params:{userId:P},showWhen:["and",["truthy","perms.set-moderator"],["truthy","roles.moderator"]]},{label:"set_room_leader",icon:"ico-businessman-plus",value:"closeMenu, chatplus/room/addRoomLeader",params:{userId:P},showWhen:["and",["truthy","perms.set-leader"],["falsy","roles.leader"],["falsy","isOwner"]]},{label:"remove_room_leader",icon:"ico-businessman-del",value:"closeMenu, chatplus/room/removeRoomLeader",params:{userId:P},showWhen:["and",["truthy","perms.set-leader"],["truthy","roles.leader"]]},{label:"remove_room_user",icon:"ico-trash-o",value:"closeMenu, chatplus/room/removeUserFromRoom",params:{userId:P},showWhen:["and",["truthy","perms.remove-user"],["falsy","isOwner"]]}],[P]),z=u.useMemo(()=>(0,g.Ue)(W,{isOwner:M,roles:A,perms:i,isMuted:R}),[W,M,A,i,R]);if(!e)return null;let L=()=>{c.openDirectMessageByUserId(null==e?void 0:e._id),w()};return u.createElement(v,null,u.createElement(y,{onClick:L},u.createElement(m.default,{username:e.username,name:e.name,size:40,status:e.status,avatarETag:null==e?void 0:e.avatarETag,hoverCard:null==e?void 0:e.metafoxUserId,component:r.Wti}),u.createElement(b,null,u.createElement(E,{lines:1,variant:"h5"},u.createElement(r.N_E,{children:e.name,hoverCard:`/user/${null==e?void 0:e.metafoxUserId}`,underline:"none",sx:{color:e=>e.palette.text.primary}})),u.createElement(C,null,e.roles?e.roles.map(e=>u.createElement(h.A,{key:e},s.formatMessage({id:e}))):null,(null==e?void 0:e.inviter)?u.createElement(h.A,null,s.formatMessage({id:"added_by_name"},{name:(null==t?void 0:t._id)===(null===(o=e.inviter)||void 0===o?void 0:o._id)?"you":null===(l=e.inviter)||void 0===l?void 0:l.name})):null))),z.length?u.createElement(x,null,u.createElement(p.pN,{identity:k,icon:"ico-dottedmore-vertical-o",items:z,menuName:"detailActionMenu",handleAction:O,size:"smaller"})):null)}var A=a(65121),k=a(73419);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}a(85376),a(99087);let P=(0,s.Ay)("div")(({theme:e})=>({padding:e.spacing(.25,0)}));function _({rid:e,users:t}){let{useDialog:a,dispatch:s,i18n:c,useIsMobile:m}=(0,r.PCX)(),p=m(),{dialogProps:g}=a(),h=(0,i.hB)(),f=(0,i.iW)(e),v=(0,i.y8)(e),y=t?Object.values(t):[],[b,x]=u.useState(y),[E,C]=u.useState(!1),_=u.useRef(y);u.useEffect(()=>{M()},[null==f?void 0:f.usersCount]),u.useEffect(()=>{E&&M()},[E,s]);let M=()=>{s({type:"chatplus/room/getRoomMembers",payload:{rid:e},meta:{onSuccess(e){x(Object.values(e)),_.current=Object.values(e),C(!1)}}})},R=e=>{if(!e){x(_.current);return}let t=(0,A._x)(e),a=b.filter(e=>t(null==e?void 0:e.name));x(a)};return u.createElement(n.lG,S({maxWidth:"sm",fullWidth:!0},g),u.createElement(n.L3,{disableClose:!1},c.formatMessage({id:"members"})),u.createElement(n.Cf,{sx:{p:0}},u.createElement(k.A,{placeholder:"chatplus_search_for_members",onQueryChange:R}),u.createElement(o.P,{autoHide:!0,autoHeight:!0,autoHeightMax:p?"100%":300},u.createElement(P,null,d()(t)?u.createElement(l.A,null):b.map(e=>u.createElement(w,{key:e._id,u:e,room:f,user:h,perms:v,setReloadData:C}))))))}let M=_},9013(e,t,a){a.r(t),a.d(t,{CheckboxLabels:()=>T,default:()=>j});var i=a(73349),n=a(91557),r=a(67131),o=a(60780),l=a(43546),s=a(46772),c=a(81968),d=a(96540),u=a(84680),m=a(12092),p=a(3556),g=a(52705),h=a(87773),f=a(77298),v=a(97648),y=a.n(v),b=a(71468),x=a(88485),E=a(16677),C=a(13586),w=a(93624),A=a(22220),k=a(40515);let S=(0,p.Ay)("div",{shouldForwardProp:e=>"suggestList"!==e&&"height"!==e&&"loading"!==e})(({theme:e,suggestList:t,height:a,loading:i})=>({padding:e.spacing(1,1,1,2),...!1===t&&!i&&{display:"flex",justifyContent:"center"},...i&&{display:"block"},...a&&{height:a}})),P=(0,p.Ay)("div",{shouldForwardProp:e=>"users"!==e})(({theme:e,users:t})=>({...t&&{padding:e.spacing(0,2,1,2)},listStyle:"none",display:"flex",alignItems:"center",flexWrap:"wrap"})),_=(0,p.Ay)("li")(({theme:e})=>({margin:e.spacing(.5),maxWidth:"100%"})),M=(0,p.Ay)("div",{shouldForwardProp:e=>"loading"!==e})(({theme:e,loading:t})=>({padding:e.spacing(1.75,0),display:"flex",alignItems:"center",cursor:"pointer",...t&&{padding:e.spacing(1.25,0)}})),R=(0,p.Ay)("span")(({theme:e})=>({...e.typography.h5,marginLeft:e.spacing(1)})),I=(0,p.Ay)(w.qJ,{name:"AddFilterText"})(({theme:e})=>({"& input::placeholder, ico":{color:e.palette.text.hint}})),O=({user:e,onSelectItem:t})=>{let a=(0,x.Fz)(null==e?void 0:e._id);return d.createElement(d.Fragment,null,d.createElement(M,{onClick:()=>t(e)},d.createElement(C.default,{name:e.label,username:e.value,avatarETag:(null==e?void 0:e.avatarETag)||(null==a?void 0:a.avatarETag),size:32}),d.createElement(R,null,e.label)),d.createElement(r.A,null))},W=({loading:e,suggest:t,height:a,onSelectItem:i})=>{let{i18n:r}=(0,n.PCX)();return e?d.createElement(d.Fragment,null,[,,,,].fill(0).map((e,t)=>d.createElement(M,{key:t,loading:!0},d.createElement(k.Qm,null,d.createElement(g.A,{variant:"avatar",width:40,height:40,sx:{mr:2}})),d.createElement(k.p4,null,d.createElement(k.Et,null,d.createElement(g.A,{variant:"text",width:"50%"})))))):t&&t.length?d.createElement(u.P,{autoHide:!0,autoHeight:!a},t.map((e,t)=>d.createElement(O,{key:null==e?void 0:e._id,user:e,onSelectItem:i}))):d.createElement(h.A,{mt:1,variant:"body1"},r.formatMessage({id:"no_friend_found"}))},z=function({variant:e="direct",placeholder:t,users:a=[],members:i=[],divider:o=!0,isShowButtonSubmit:l=!0,setUsers:s,onSubmit:c,height:u=335}){let{i18n:p,dispatch:g}=(0,n.PCX)(),h=(0,A.h)(),[v,C]=d.useState(h||[]),[w,k]=d.useState(!1),M=(0,x.hB)(),R=(0,b.d4)(E.M7),[O,z]=d.useState("");d.useEffect(()=>()=>{g({type:"chatplus/spotlight/reset"})},[]);let L=t||p.formatMessage({id:"search_people"}),T=e=>{z(""),s(t=>[...t,e])},j=e=>{s(t=>t.filter(t=>t.value!==e.value))},F=d.useCallback(e=>{var t;let a=null===(t=e.currentTarget)||void 0===t?void 0:t.value;k(!0),g({type:"chatplus/spotlight/user",payload:{query:a},meta:{onSuccess(e){C(e||[]),k(!1)}}})},[g,O,R]),N=d.useCallback(e=>{var t;let a=null===(t=e.currentTarget)||void 0===t?void 0:t.value;z(a)},[]),B=d.useMemo(()=>{let e=i.map(e=>e.value);return a.filter(t=>!e.includes(t.value))},[a,i]),D=v.filter(t=>"group"===e?t.username!==(null==M?void 0:M.username):"direct"===e?t:void 0).map(e=>({value:e.username,label:e.name,_id:e._id,avatarETag:null==e?void 0:e.avatarETag})),H=y()(D,a,"value");return d.createElement("div",null,d.createElement(I,{disabled:!a.length,valueSearch:O,onChangeSearch:N,onKeyUp:F,placeholder:L,size:30,onSubmit:c,label:p.formatMessage({id:"next"}),variant:e,isShowButtonSubmit:l}),d.createElement(P,{users:a.length},B.map((e,t)=>d.createElement(_,{key:t},d.createElement(f.A,{size:"medium",onDelete:()=>j(e),label:e.label,deleteIcon:d.createElement(m.A,{style:{fontSize:"20px"}})})))),o&&d.createElement(r.A,null),d.createElement(S,{suggestList:Boolean(H&&H.length),height:u,loading:w},d.createElement(W,{loading:w,suggest:H,height:u,onSelectItem:T})))};function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function T({setIsPublic:e,setReadonly:t,readonly:a=!1,isPublic:i=!1,allowEditing:r=!0}){let{i18n:o}=(0,n.PCX)();return d.createElement(c.A,null,d.createElement(s.A,{control:d.createElement(l.A,{disabled:!r,defaultChecked:!0,checked:a,onChange:e=>t(e.target.checked)}),label:o.formatMessage({id:"read_only_chat"})}),d.createElement(s.A,{control:d.createElement(l.A,{disabled:!r,defaultChecked:!0,checked:i,onChange:t=>e(t.target.checked)}),label:o.formatMessage({id:"public_group_chat"})}))}let j=function(e){let{i18n:t,useDialog:a,dispatch:l}=(0,n.PCX)(),{dialogProps:s,closeDialog:c}=a(),u=(0,x.hB)(),m=((null==e?void 0:e.users)||[]).filter(e=>e.username!==u.username).map(e=>({value:e.username,label:e.name,_id:e._id})),p=null==e?void 0:e.roomId,g=(null==e?void 0:e.isNewConversation)||!1,h=(null==e?void 0:e.readonly)||!1,f=(null==e?void 0:e.isPublic)||!1,v=(null==e?void 0:e.isAddMember)||!1,[y,b]=d.useState(m||[]),[E,C]=d.useState(h),[w,A]=d.useState(f),k=function(e,t,a,i){let n=!1;switch(e){case!0:n=!1;break;case!1:if(i&&t.length>=1&&a&&t.length!==a.length){n=!1;break}n=t.length<2||!!a&&t.length===a.length}return n}(g,y,m,v),S=function(e,t,a){let i=!0;switch(e){case!0:i=t.length>1;break;case!1:a&&(i=!1)}return i}(g,y,v),P=function(e,t,a){let i="new_group_conversation";switch(e){case!0:i=t.length>1?"new_group_conversation":"new_conversation";break;case!1:a&&(i="add_members")}return i}(g,y,v),_=d.useMemo(()=>y.find(e=>e.value===(null==u?void 0:u.username)),[y,u]);d.useEffect(()=>{_&&l({type:"chatplus/chatRoom/newConversation",payload:{users:y}})},[_,y]);let M=d.useCallback(()=>{let e=y.length;if(e){if(v&&p){let t=y.map(e=>e.value);l({type:"chatplus/room/addUsers",payload:{rid:p,users:t,isAddMember:v},meta:{onSuccess:c}})}else l({type:"chatplus/chatRoom/newConversation",payload:{users:y,readonly:E,isPublic:w,nameGroup:""}})}},[l,y,E,w,"",p,v]);return d.createElement(i.lG,L({maxWidth:"sm",fullWidth:!0},s),d.createElement(i.L3,{disableClose:!1},t.formatMessage({id:P})),d.createElement(i.Cf,{sx:{p:0}},d.createElement(z,{members:m,users:y,setUsers:b,placeholder:t.formatMessage({id:"search_people"}),variant:g&&0===y.length?"direct":"group",isShowButtonSubmit:!1,height:260})),S?d.createElement("div",{style:{padding:"8px 16px"}},d.createElement(T,{readonly:E,isPublic:w,setReadonly:C,setIsPublic:A})):null,d.createElement(r.A,null),d.createElement(i.ii,null,d.createElement(o.A,{disabled:k,onClick:M,color:"primary",autoFocus:!0,variant:"contained",children:t.formatMessage({id:v?"add":"create_conversation"})})))}},54675(e,t,a){a.r(t),a.d(t,{SelectItem:()=>w,default:()=>A});var i=a(73349),n=a(91557),r=a(40515),o=a(67725),l=a(3556),s=a(42335),c=a(50203),d=a(29349),u=a(57660),m=a(2379),p=a(60780),g=a(56449),h=a.n(g),f=a(96540),v=a(88485),y=a(97837);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let x=(0,l.Ay)(s.Ay,{name:"StyledListItem"})(({theme:e})=>{var t;return{borderBottom:"solid 1px",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,padding:"22px 0 !important",display:"flex",justifyContent:"space-between","&:first-of-type":{paddingTop:6},"&:last-child":{paddingBottom:6,borderBottom:"none"}}}),E=(0,l.Ay)(r.mE)(({theme:e})=>({display:"flex",justifyContent:"center",flex:1,minWidth:0})),C=(0,l.Ay)(c.A)(({theme:e})=>({"& .MuiInputBase-input":{fontWeight:"normal"}}));function w({item:e,onChanged:t,disableNotifications:a}){var i;let[n,r]=f.useState(null==e?void 0:e.value),l=a=>{let i=a.target.value;r(i),t(i,null==e?void 0:e.var_name)},s=!!e.disable&&(0,o.z7)({disableNotifications:a},e.disable);return f.createElement(x,null,f.createElement(d.A,{primary:e.phrase,sx:{pr:2}}),f.createElement(C,{className:"select-quick-sort",variant:"standard",value:n,onChange:l,disableUnderline:!0,disabled:s},null==e?void 0:null===(i=e.options)||void 0===i?void 0:i.map((e,t)=>f.createElement(u.A,{value:e.value,key:t},e.label))))}let A=function({rid:e}){let{i18n:t,useDialog:a,useIsMobile:r}=(0,n.PCX)(),o=(0,v.GV)(e),l=r(),s=(0,v.HW)(),c=o.t||y.CJ.Direct,d=c===y.CJ.Direct&&((null==s?void 0:s.mobilePushNotifications)==="mentions"||(null==o?void 0:o.mobilePushNotifications)==="mentions")?"all":o.mobilePushNotifications||(null==s?void 0:s.mobilePushNotifications)||"all",u=c===y.CJ.Direct&&((null==s?void 0:s.audioNotifications)==="mentions"||"mentions"===o.audioNotifications)?"all":o.audioNotifications||(null==s?void 0:s.audioNotifications)||"all",{dialogProps:g,closeDialog:x,setDialogValue:C}=a(),[A,k]=(0,f.useState)(o.disableNotifications||s.disableNotifications||!1),[S,P]=(0,f.useState)(d),[_,M]=(0,f.useState)(u),R=c===y.CJ.Direct?[{label:t.formatMessage({id:"all_messages"}),value:"all"},{label:t.formatMessage({id:"nothing"}),value:"nothing"}]:[{label:t.formatMessage({id:"all_messages"}),value:"all"},{label:t.formatMessage({id:"mentions"}),value:"mentions"},{label:t.formatMessage({id:"nothing"}),value:"nothing"}],I=[{default_value:A,ordering:1,value:A,phrase:t.formatMessage({id:"disable_notifications"}),var_name:"disableNotifications",options:[{label:t.formatMessage({id:"yes"}),value:!0},{label:t.formatMessage({id:"no"}),value:!1}]},{default_value:S,ordering:2,value:S,phrase:t.formatMessage({id:"receive_mobile_notifications"}),var_name:"mobilePushNotifications",options:R,disable:["eq","disableNotifications",!0]},{default_value:_,ordering:3,value:_,phrase:t.formatMessage({id:"receive_sound_notifications"}),var_name:"audioNotifications",options:R,disable:["eq","disableNotifications",!0]}],O=(e,t)=>{switch(t){case"mobilePushNotifications":P(e);break;case"audioNotifications":M(e);break;case"disableNotifications":k(e)}},W=()=>{x()},z=()=>{let e={ignored:1,audioNotifications:"all",audioNotificationValue:1,desktopNotificationDuration:1,mobilePushNotifications:"all",disableNotifications:!1,userHighlights:1,emailNotifications:(null==s?void 0:s.emailNotifications)||"mentions",desktopNotifications:(null==s?void 0:s.desktopNotifications)||"all",muteGroupMentions:(c!==y.CJ.Direct||null==s||!s.muteGroupMentions)&&((null==s?void 0:s.muteGroupMentions)||!1)},t={...e,mobilePushNotifications:S,audioNotifications:_,disableNotifications:A};C(t)};return l?f.createElement(i.lG,b({maxWidth:"sm",fullWidth:!0},g),f.createElement(i.L3,{enableDone:!0,onDoneClick:z,enableBack:!0,onBackClick:W,disableClose:!0},f.createElement(E,{lines:1,color:"text.primary",variant:"h2",fontSize:18},t.formatMessage({id:"settings"}))),f.createElement(i.Cf,{sx:{p:"0 16px"}},f.createElement(m.A,{disablePadding:!0},h()(I)?I.map(e=>f.createElement(w,{key:null==e?void 0:e.var_name,onChanged:O,item:e,disableNotifications:A})):null))):f.createElement(i.lG,b({maxWidth:"sm",fullWidth:!0},g),f.createElement(i.L3,{disableClose:!1},t.formatMessage({id:"settings"})),f.createElement(i.Cf,{sx:{p:"0 16px"}},f.createElement(m.A,{disablePadding:!0},h()(I)?I.map(e=>f.createElement(w,{key:null==e?void 0:e.var_name,onChanged:O,item:e,disableNotifications:A})):null)),f.createElement(i.ii,null,f.createElement(p.A,{onClick:z,color:"primary",autoFocus:!0,variant:"contained",children:t.formatMessage({id:"save"})}),f.createElement(p.A,{onClick:W,color:"primary",autoFocus:!0,variant:"outlined",children:t.formatMessage({id:"cancel"})})))}},1122(e,t,a){a.r(t),a.d(t,{default:()=>P});var i=a(73349),n=a(91557),r=a(84680),o=a(80160),l=a(18579),s=a(56525),c=a(85838),d=a(62193),u=a.n(d),m=a(85015),p=a.n(m),g=a(96540),h=a(67912),f=a(88485),v=a(60780);let y=(0,s.A)(e=>(0,c.A)({root:{position:"relative",textDecoration:"none",display:"block",borderBottom:e.mixins.border("secondary"),"&:hover":{backgroundColor:e.palette.action.hover}},itemOuter:{height:"100%"},itemInner:{height:"100%",position:"relative",padding:e.spacing(1),alignItems:"center",display:"flex",flexDirection:"row",overflow:"hidden"},itemMainContent:{display:"flex",alignItems:"center"},itemSmallInner:{display:"flex",padding:e.spacing(2),justifyContent:"space-between",alignItems:"center",borderRadius:e.shape.borderRadius},actionContent:{fontWeight:`${e.typography.fontWeightMedium} !important`},itemSmallRequestInner:{display:"flex",padding:e.spacing(2),borderRadius:e.shape.borderRadius},itemMedia:{overflow:"hidden",position:"relative"},itemSmallMedia:{transition:"all 300ms ease",borderRadius:"100%",position:"relative"},itemReactSmall:{position:"absolute",width:"15px",height:"15px",right:0,bottom:0},imgSmallReactionIcon:{width:"100%"},imgWrapper:{margin:"auto"},imgSmallWrapper:{borderRadius:"100%"},userInfo:{flex:1,overflow:"hidden",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),flexBasis:"auto"},userSmallInfo:{marginLeft:e.spacing(1.5),flex:1,overflow:"hidden",paddingRight:e.spacing(1)},userSmallInfoRequest:{marginLeft:e.spacing(1.5),flex:1,overflow:"hidden"},userTitle:{color:e.palette.text.primary,fontSize:"1.125rem",marginBottom:e.spacing(1),transition:"all 300ms ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightBold},userSmallTitle:{color:e.palette.text.primary,fontSize:e.mixins.pxToRem(15),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightBold},friendInfo:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary},friendSmallInfo:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,marginTop:e.spacing(.5),display:"inline-block"},userLocation:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:e.spacing(1)},userJoined:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:e.spacing(1)},friendActions:{position:"relative",display:"flex"},friendActionsDropdown:{boxShadow:"none",padding:0,marginLeft:e.spacing(1)},iconButton:{border:"1px solid",width:"40px",height:"40px",borderRadius:e.spacing(.5),display:"flex",alignItems:"center",color:e.palette.primary.main,justifyContent:"center"},button:{boxShadow:"none",borderRadius:e.spacing(.5),fontSize:"1rem",textTransform:"capitalize"},friendRequestActions:{display:"flex",marginTop:e.spacing(1.5)},requestOption:{textTransform:"capitalize",fontSize:e.mixins.pxToRem(15),fontWeight:"bold",flexGrow:1,"& + $requestOption":{marginLeft:e.spacing(1)}},mutualFriend:{marginRight:e.spacing(.5)},btnAddFriend:{textTransform:"capitalize",fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,padding:e.spacing(.25,1.5),minWidth:"inherit"}}),{name:"ReactedUserItemView"}),b=({data:e,unsetReaction:t})=>{let a=y(),{useDialog:i,i18n:r}=(0,n.PCX)(),{closeDialog:o}=i(),l=(0,f.hB)(),s=l.username;return e?e.usernames.map((e,i)=>g.createElement("div",{className:a.root,key:i},g.createElement("div",{className:a.itemOuter},g.createElement("div",{className:a.itemSmallInner},g.createElement("div",{className:a.itemMainContent},g.createElement("div",{className:a.itemSmallMedia},g.createElement("div",{className:a.imgSmallWrapper},g.createElement(h.A,{username:e.username,name:e.name,size:40,avatarETag:new Date().toString()})),g.createElement("div",{className:a.itemReactSmall},g.createElement("img",{className:a.imgSmallReactionIcon,src:e.icon,alt:"reaction"}))),g.createElement("div",{className:a.userSmallInfo},g.createElement("div",{className:a.userSmallTitle,onClick:o},g.createElement(n.N_E,{to:`/${e.username}`,color:"inherit"},e.name)))),s===e.username&&g.createElement(v.A,{className:a.actionContent,color:"primary",onClick:()=>t(e.id)},r.formatMessage({id:"remove"})))))):null};var x=a(65121);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let C=(0,s.A)(e=>(0,c.A)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,2,1,2)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:e.shape.borderRadius/2,marginRight:"0.25em",padding:e.spacing(.5,1.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"}),w={minHeight:32},A={minWidth:16},k={width:15,height:15},S=(e,t)=>{let{i18n:a}=(0,n.PCX)();if(u()(e))return{};try{let i=e=>{let a=p()(e)&&e.split(":")[1].split("_")[1];return a&&t?t.find(e=>e.id==parseInt(a)):{}},r=[],o=Object.keys(e).sort((t,a)=>{var i,n,r,o,l,s,c,d;return((null===(i=e[a])||void 0===i?void 0:null===(n=i.usernames)||void 0===n?void 0:n.length)||1)-((null===(r=e[t])||void 0===r?void 0:null===(o=r.usernames)||void 0===o?void 0:o.length)||1)-((null===(l=e[a])||void 0===l?void 0:null===(s=l.updatedAt)||void 0===s?void 0:s.$date)||1)-((null===(c=e[t])||void 0===c?void 0:null===(d=c.updatedAt)||void 0===d?void 0:d.$date)||1)}).reduce((t,a)=>{var n,o;let l=i(a),s=e[a].usernames.map((t,i)=>{var n;return{username:t,name:(null===(n=e[a])||void 0===n?void 0:n.names[i])||t,icon:l.src,id:a}});return r=r.concat(...s),t+(null===(n=e[a])||void 0===n?void 0:null===(o=n.usernames)||void 0===o?void 0:o.length)},0),l={all:{id:"all",title:a.formatMessage({id:"all"}),total_reacted:o,usernames:r}};return Object.keys(e).map(t=>{let a=i(t),n=e[t].usernames.map((i,n)=>{var r;return{username:i,name:(null===(r=e[t])||void 0===r?void 0:r.names[n])||i,icon:a.src,id:t}});return l[t]={id:t,icon:a.src,total_reacted:e[t].usernames.length,usernames:n}}),l}catch(s){return{}}};function P({identity:e}){let t=C(),[a,s]=(0,g.useState)("all"),c=(0,g.useRef)(),{useDialog:d,i18n:m,dispatch:p,useGetItem:h}=(0,n.PCX)(),{dialogProps:v,closeDialog:y}=d(),P=h(e),_=(0,f.Dr)(),M=(0,x.Rt)(null==P?void 0:P.reactions,_),R=S(M,_),I=g.useCallback(t=>{p({type:"chatplus/unsetReaction",payload:{identity:e,shortcut:t},meta:{onSuccess:W}})},[e,a]);g.useEffect(()=>{(!P||u()(null==P?void 0:P.reactions)||u()(R))&&y()},[P,null==P?void 0:P.reactions,R,y]);let O=(e,t)=>{s(t)},W=()=>{var e;if(u()(null==R?void 0:R[a])||(null==R?void 0:null===(e=R[a])||void 0===e?void 0:e.total_reacted)===1){s("all");return}};return g.useEffect(()=>{if(c.current){var e;null===(e=c.current)||void 0===e||e.scrollTo({top:0})}},[a]),g.createElement(i.lG,E({},v,{maxWidth:"xs",fullWidth:!0}),g.createElement(i.L3,null,m.formatMessage({id:"reacted_by"})),g.createElement(o.A,{value:a,onChange:O,style:w,className:t.customTabs},Object.values(R).map(e=>g.createElement(l.A,{key:e.id,style:A,disableRipple:!0,icon:e.icon?g.createElement("img",{src:e.icon,alt:e.id,style:k}):g.createElement("span",{className:t.reactNumber},e.title),iconPosition:"start",label:e.total_reacted?g.createElement("span",{className:t.reactNumber},e.total_reacted):void 0,value:e.id,"aria-label":e.id}))),g.createElement("div",{className:t.dialogContent,ref:c},g.createElement(r.N2,{scrollRef:c},g.createElement(b,{data:R[a],unsetReaction:I}))))}},98278(e,t,a){a.r(t),a.d(t,{default:()=>b});var i=a(73349),n=a(91557),r=a(40515),o=a(3556),l=a(96540),s=a(65121),c=a(88485),d=a(13586);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let m="MemberItem",p=(0,o.Ay)("div",{name:m,slot:"UIChatBuddyItem"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(1.5,2,1.5,0),color:"#555555",fontSize:"14px"})),g=(0,o.Ay)("div",{name:m,slot:"UIChatBuddyItemWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:0,flex:1})),h=(0,o.Ay)("div")(({theme:e})=>({marginLeft:e.spacing(1.5),display:"flex",alignItems:"flex-start",flexDirection:"column",flex:1})),f=(0,o.Ay)(r.mE)(({theme:e})=>({..."dark"===e.palette.mode&&{color:e.palette.grey["400"]}})),v=(0,o.Ay)("div")(({theme:e})=>({..."dark"===e.palette.mode&&{color:e.palette.grey["500"]}})),y=({item:e})=>{let t=(0,c.Fz)(null==e?void 0:e._id);return l.createElement(p,null,l.createElement(g,null,l.createElement(d.default,{name:null==e?void 0:e.name,username:null==e?void 0:e.username,noLink:"bot"===e.type,size:32,avatarETag:(null==e?void 0:e.avatarETag)||(null==t?void 0:t.avatarETag),hoverCard:null!=e&&!!e.metafoxUserId&&`/user/${null==e?void 0:e.metafoxUserId}`,component:n.Wti}),l.createElement(h,null,l.createElement(f,{lines:1,variant:"h5"},l.createElement(n.N_E,{to:"bot"===e.type?null:null==e?void 0:e.username,children:e.name,hoverCard:null!=e&&!!e.metafoxUserId&&`/user/${null==e?void 0:e.metafoxUserId}`,underline:"none",color:"text.primary"})),l.createElement(v,null,(0,s.rb)(null==e?void 0:e.seenAt.$date)))))},b=function({users:e}){let{useDialog:t,i18n:a}=(0,n.PCX)(),{closeDialog:r,dialogProps:o}=t();return e&&e.length?l.createElement(i.lG,u({maxWidth:"sm",fullWidth:!0},o),l.createElement(i.L3,{disableClose:!1},a.formatMessage({id:"seen_users"})),l.createElement(i.Cf,{sx:{maxHeight:"300px",py:.5}},e.map((e,t)=>l.createElement(y,{key:t,item:e})))):(r(),null)}},22220(e,t,a){a.d(t,{A:()=>r,h:()=>o});var i=a(71468),n=a(16677);function r(){return(0,i.d4)(e=>(0,n.F6)(e))}function o(){var e;let t=(0,i.d4)(e=>(0,n.M7)(e));return Object.values(t)?null===(e=Object.values(t))||void 0===e?void 0:e.slice(0,4):[]}},91476(e,t,a){a.r(t),a.d(t,{default:()=>C});var i=a(73349),n=a(91557),r=a(40515),o=a(3556),l=a(60780),s=a(8051),c=a(87773),d=a(67131),u=a(96540),m=a(71468);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let g="CommentDialog",h=(0,o.Ay)(i.lG,{name:g,slot:"DialogStyled"})(({theme:e})=>({[e.breakpoints.down("sm")]:{"& .MuiDialog-container":{position:"fixed",zIndex:1300,right:0,bottom:0,top:0,left:0}}})),f=(0,o.Ay)(l.A,{name:g,slot:"btnBack"})(({theme:e})=>({color:`${e.palette.text.hint} !important`,[e.breakpoints.down("sm")]:{paddingRight:`${e.spacing(2.5)} !important`}})),v=(0,o.Ay)(i.Cf,{name:g,slot:"DialogContentStyled"})(({theme:e})=>({display:"flex",flexDirection:"column",borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,[e.breakpoints.down("sm")]:{borderRadius:0}})),y=(0,o.Ay)(s.A,{name:g,slot:"CommentBoxWrapper"})(({theme:e})=>({backgroundColor:e.palette.background.paper,display:"block",left:0,right:0,bottom:0,zIndex:e.zIndex.modal})),b=(0,o.Ay)(s.A,{name:g,slot:"actionButtonStaticsWrapper"})(({theme:e})=>{var t;return{display:"flex",alignItems:"center",borderBottom:"solid 1px",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,padding:0,[e.breakpoints.down("sm")]:{flexDirection:"column-reverse"}}}),x=(0,o.Ay)(s.A,{name:g,slot:"reactionWrapper"})(({theme:e})=>({padding:0,"& .MuiFeedCommentBlock-itemOuter":{border:"none"},[e.breakpoints.down("sm")]:{width:"100%"}})),E=(0,o.Ay)(s.A,{name:g,slot:"FeedStatisticWrapper"})(({theme:e})=>{var t;return{flex:1,display:"flex",justifyContent:"flex-end",padding:"8px 0",[e.breakpoints.down("sm")]:{width:"100%",fontWeight:e.typography.fontWeightBold,borderBottom:"solid 1px",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary}}});function C({identity:e,handleAction:t,isFocus:a,viewMoreComments:o}){var l,g;let C=(0,u.useRef)(null),w=(0,u.useRef)(null),A=(0,u.useRef)(null),{dialogProps:k,closeDialog:S}=(0,i.sp)(),{i18n:P,CommentList:_,CommentActButton:M,ShareActButton:R,ReactionActButton:I,CommentReaction:O,useSession:W,useTheme:z,jsxBackend:L,useSortComment:T}=(0,n.PCX)(),j=z(),F=W(),[N,B]=T(),D=L.get("CommentComposer"),H=(0,m.d4)(t=>(0,n.B_w)(t,e)),{statistic:$,most_reactions_information:V,like_phrase:X}=H;return u.createElement(h,p({},k,{scroll:"body"}),u.createElement(s.A,{sx:{height:"100%",display:"flex",flexDirection:"column"}},u.createElement(i.L3,{ref:w,disableClose:!0},u.createElement("div",null,u.createElement(f,{onClick:S,sx:{minWidth:0,paddingRight:j.spacing(2.5)},color:"secondary",size:"medium"},u.createElement(r.s4,{icon:"ico-angle-left"})),u.createElement(c.A,{component:"span",fontWeight:"bold"},P.formatMessage({id:"comments"})))),u.createElement(v,{ref:A},u.createElement(b,{ref:C},u.createElement(x,null,O?u.createElement(O,null,F.loggedIn&&(null===(l=H.extra)||void 0===l?void 0:l.can_like)&&I?u.createElement(I,{reacted:H.user_reacted,identity:e,handleAction:t}):null,F.loggedIn&&(null===(g=H.extra)||void 0===g?void 0:g.can_comment)&&M?u.createElement(M,{identity:e,handleAction:t}):null,F.loggedIn&&H.extra.can_share&&R?u.createElement(R,{handleAction:t,identity:e}):null):null),u.createElement(E,null,u.createElement(r.DN,{handleActionCommentStatistic:!1,handleAction:t,identity:e,reactions:V,message:X,statistic:$}))),u.createElement("div",{style:{flex:1,minHeight:0}},u.createElement(s.A,{sx:{maxHeight:"100%",overflow:"auto"}},u.createElement(_,{identity:e,handleAction:t,data:H.related_comments,viewMoreComments:o,total_comment:null==$?void 0:$.total_comment,total_reply:null==$?void 0:$.total_reply,setSortType:B,sortType:N,isDetailPage:!0}))),F.loggedIn&&H.extra.can_comment&&D?u.createElement(y,null,u.createElement(d.A,{sx:{display:{xs:"block",md:"none"}}}),u.createElement(D,{identity:e,open:!0})):null)))}},66379(e,t,a){a.r(t),a.d(t,{default:()=>u});var i=a(73349),n=a(91557),r=a(3556),o=a(8051),l=a(89481),s=a(96540);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let d=(0,r.Ay)(i.Cf,{name:"HistoryDialog",slot:"DialogContentStyled"})(({theme:e})=>({borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,maxHeight:290,[e.breakpoints.down("sm")]:{borderRadius:0}}));function u({dataSource:e,pageParams:t}){let{dialogProps:a}=(0,i.sp)(),{i18n:r,useFetchItems:u,jsxBackend:m}=(0,n.PCX)(),p=m.get("CommentHistoryItem"),[g,h]=u({dataSource:e,pageParams:t,data:[]});return s.createElement(i.lG,c({},a,{fullWidth:!0,scroll:"body"}),s.createElement(i.L3,null,r.formatMessage({id:"edit_history"})),s.createElement(d,null,h?s.createElement(o.A,{p:2,sx:{display:"flex",alignItems:"center",justifyContent:"center"}},s.createElement(l.A,{size:16})):null,g&&g.length?s.createElement(o.A,{mt:2},g.map(e=>s.createElement(o.A,{mb:2,key:`k${e.id}`},s.createElement(p,{item:e})))):null))}},58614(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(73349),n=a(91557),r=a(60780),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s(){let{useDialog:e}=(0,n.PCX)(),{pathname:t}=(0,n.zy2)(),{dialogProps:a,setDialogValue:s}=e(),c=({payload:e,type:t="@core/codeGenerate/make",children:a})=>o.createElement(r.A,{onClick:()=>s({type:t,payload:e})},a);return o.createElement(i.lG,l({},a,{maxWidth:"xs",fullWidth:!0}),o.createElement(i.L3,null,"Code Generator"),o.createElement(i.Cf,null,o.createElement(c,{payload:"package"},"New App"),o.createElement(c,{payload:"migration"},"Migration"),o.createElement(c,{payload:"model"},"Model"),o.createElement(c,{payload:"web-api"},"Web API"),o.createElement(c,{payload:"admin-api"},"Admin API"),o.createElement(c,{payload:"form"},"Forms"),o.createElement(c,{payload:"request"},"Request"),o.createElement(c,{payload:"category"},"Category"),o.createElement(c,{payload:"data-grid"},"DataGrid"),o.createElement(c,{payload:"listener"},"Listener"),o.createElement(c,{payload:"notification"},"Notification"),o.createElement(c,{payload:"job"},"Job"),o.createElement(c,{payload:"mail"},"Mail"),o.createElement(c,{payload:"export"},"Export"),o.createElement(c,{payload:"inspect"},"Inspect"),o.createElement(c,{payload:"importer"},"Importer"),o.createElement(r.A,{onClick:()=>s({type:"@core/codeGenerate/editCurrentSeo",payload:{url:t.replace(/^\/|\/$/g,"")}})},"Edit Meta"),o.createElement(r.A,{onClick:()=>s({type:"@core/codeGenerate/ideFix"})},"IDE Fix")))}},96021(e,t,a){a.r(t),a.d(t,{default:()=>y});var i=a(91557),n=a(73349),r=a(24721),o=a(26433),l=a(41119),s=a(43791),c=a(60780),d=a(86139),u=a.n(d),m=a(85015),p=a.n(m),g=a(96540),h=a(90243),f=a(40515);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function y({title:e,message:t,positiveButton:a,maxWidth:d="sm",disableClose:m=!1,onClose:y}){let{useDialog:b,i18n:x}=(0,i.PCX)(),{setDialogValue:E,disableBackdropClick:C,dialogProps:w,closeDialog:A}=b(),k=()=>E(!0),S=()=>{A(),y&&y()};g.useEffect(()=>{C(!0)},[]);let{label:P,..._}=u()({label:x.formatMessage({id:"ok"}),color:"primary"},a);return e=null!=e?e:x.formatMessage({id:"alert"}),g.createElement(r.A,v({},w,{fullScreen:!1,"data-testid":"popupAlert",role:"alertdialog",maxWidth:d,fullWidth:!0,"aria-modal":!0,disableEscapeKeyDown:!0,variant:"alert"}),g.createElement(n.L3,{children:null!=e?e:"Alert",disableClose:m,onCancel:S}),g.createElement(o.A,{dividers:!1},p()(t)?g.createElement(l.A,{id:"dialogDescription","data-testid":"popupMessage",paragraph:!1},g.createElement(f.np,{mt:0},g.createElement(h.Ay,{html:t}))):t),g.createElement(s.A,null,g.createElement(c.A,v({"data-testid":"buttonSubmit",role:"button",id:"buttonSubmit",autoFocus:!0,color:"primary",size:"medium",variant:"contained",onClick:k,sx:{minWidth:120},disableRipple:!0},_),P)))}},71305(e,t,a){a.r(t),a.d(t,{default:()=>v});var i=a(91557),n=a(73349),r=a(3556),o=a(8051),l=a(96540),s=a(40515),c=a(42335),d=a(10597),u=a(29349),m=a(771);let p=(0,r.Ay)(c.Ay,{name:"AlertReminderListItem",slot:"Item",shouldForwardProp:e=>"isRead"!==e})(({theme:e,isRead:t})=>({backgroundColor:t?(0,m.X4)(e.palette.background.default,.5):(0,m.X4)(e.palette.primary.light,.1),"&:not(:last-of-type)":{borderBottom:e.mixins.border("secondary")}}));function g({item:e,presentAlert:t}){let{title:a,extra:i}=e,{can_close:n}=i||{},[r,o]=l.useState(!1),c=()=>{o(!0),t&&t(e)};return l.createElement(p,{sx:{cursor:"pointer"},onClick:c,isRead:r},l.createElement(d.A,null,l.createElement(s.s4,{icon:n?"ico-info-circle-o":"ico-warning-o"})),l.createElement(u.A,{primary:a}))}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let f=(0,r.Ay)(o.A,{name:"AlertReminderList",slot:"Content"})(({theme:e})=>({display:"block"}));function v({title:e,data:t,presentAlert:a,disableCloseAll:r,handleDismissAll:o}){let{useDialog:s,i18n:c}=(0,i.PCX)(),{dialogProps:d,disableBackdropClick:u,closeDialog:m}=s(),p=()=>{m(),o()};return(l.useEffect(()=>{u(!0)},[]),null==t?void 0:t.length)?l.createElement(n.lG,h({},d,{maxWidth:"sm",fullWidth:!0,fullScreen:!1,"data-testid":"dialogAlertReminderList"}),l.createElement(n.L3,{disableClose:r,onCancel:p},c.formatMessage({id:e||"notifications"})),l.createElement(n.Cf,{sx:{padding:0}},l.createElement(f,null,t.map(e=>l.createElement(g,{key:null==e?void 0:e.id,presentAlert:a,item:e}))))):null}},65510(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(73349),r=a(53975),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({title:e="Edit",maxWidth:t="sm",fullWidth:a=!0,...s}){let{useDialog:c}=(0,i.PCX)(),d=c(),{dialogProps:u}=d;return o.createElement(n.lG,l({},u,{maxWidth:t,fullWidth:a,"data-testid":"multiStepFormDialog"}),o.createElement(r.FF,l({dialog:!0,dialogTitle:e,dialogItem:d},s)))}},83808(e,t,a){a.r(t),a.d(t,{default:()=>S});var i=a(91557),n=a(73349),r=a(40515),o=a(86139),l=a.n(o),s=a(96540),c=a(85838),d=a(40244),u=a(32485),m=a.n(u);let p=e=>{var t;return(0,c.A)({root:{borderBottom:"1px solid",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,padding:e.spacing(2),display:"flex",alignItems:"flex-start","&:hover":{backgroundColor:e.palette.action.hover}},info:{display:"flex",flexDirection:"column"},title:{flex:1,fontSize:e.mixins.pxToRem(15),fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary},icon:{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(2),marginTop:e.spacing(.5),color:e.palette.text.secondary},address:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,marginRight:e.spacing(2)},media:{},active:{color:e.palette.primary.main,"& $icon":{color:e.palette.primary.main}}})},g=(0,d.A)(p)(function({name:e,address:t,classes:a,active:i,onClick:n}){return s.createElement("div",{role:"button","aria-label":"select place","data-testid":"suggestion",className:m()([a.root,i&&a.active]),onClick:n},s.createElement(r.s4,{icon:"ico-checkin-o",className:a.icon}),s.createElement("div",{className:a.info},s.createElement("span",{className:m()([a.title,i&&a.active])},e),t?s.createElement("div",{className:m()([a.address,i&&a.active]),children:t}):null))});var h=a(56525);let f=(0,h.A)(e=>(0,c.A)({dialog:{},dialogContent:{height:370,padding:`${e.spacing(0,0,2,0)} !important`},inputStage:{padding:e.spacing(2)},btnCancel:{minWidth:e.spacing(3),padding:0,marginRight:e.spacing(1),color:e.palette.text.secondary},searchIcon:{color:e.palette.text.secondary},dialogTitle:{},dialogContentTitle:{color:e.palette.text.secondary,padding:e.spacing(.5,0,.5,2)},mapStage:{}}));var v=a(8051),y=a(89481),b=a(84680),x=a(84022),E=a(38221),C=a.n(E);let w=(e,t,a=6)=>{var i,n,r,o;if(!e||!t)return!1;let l=parseFloat(null==e?void 0:null===(i=e.lat)||void 0===i?void 0:i.toFixed(a)),s=parseFloat(null==e?void 0:null===(n=e.lng)||void 0===n?void 0:n.toFixed(a)),c=parseFloat(null==t?void 0:null===(r=t.lat)||void 0===r?void 0:r.toFixed(a)),d=parseFloat(null==t?void 0:null===(o=t.lng)||void 0===o?void 0:o.toFixed(a));return l===c&&s===d};function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let k=(e,t)=>e?(null==e?void 0:e.name)&&(null==e?void 0:e.address)&&e.name!==e.address?e:l()({},e,t):{},S=function({defaultValue:e}){let t=f(),{useDialog:a,i18n:o}=(0,i.PCX)(),{dialogProps:l,setDialogValue:c}=a(),d=o.formatMessage({id:"search_for_location"}),u=o.formatMessage({id:"search_dots"}),m=s.useRef(),[p,h,E,S,{loading:P}]=function(e,t,a={}){let n=(0,i.T6y)(),r="ready"===n,[o,l]=s.useState([]),[c,d]=s.useState({loading:!0,error:!1}),[u,m]=s.useState(),[p,g]=s.useState(""),h=s.useRef(),f=s.useRef(),v=s.useRef(),y=(0,x.A)(),b=s.useRef(null),E=s.useRef(),w=({lat:a,lng:i})=>{if(h.current=new google.maps.Map(e.current,{zoom:15,center:{lat:a,lng:i},backgroundColor:y.palette.background.default}),f.current=new google.maps.places.PlacesService(h.current),E.current=a&&i?new google.maps.LatLng(a,i):void 0,v.current=new google.maps.Geocoder,!(null==t?void 0:t.full_address)&&((null==t?void 0:t.address)||t.name))try{let n={lat:parseFloat(a),lng:parseFloat(i)};S({location:n},e=>{if(e[0]){var a;m({name:(null==t?void 0:t.address)||t.name,full_address:null===(a=e[0])||void 0===a?void 0:a.formatted_address})}})}catch(r){}A()},A=()=>{if(E.current){f.current.nearbySearch({location:E.current,radius:50,...a},(e,t)=>{"OK"===t&&b.current&&l(e.filter(e=>e.formatted_address||e.vicinity).map(e=>({icon:e.icon,name:e.name,full_address:e.formatted_address||e.vicinity||"",lat:e.lat||e.geometry.location.lat(),lng:e.lng||e.geometry.location.lng()}))),d(e=>({...e,loading:!1}))});return}d(e=>({...e,loading:!1}))},k=s.useCallback(()=>{e.current&&!f.current&&r&&(d(e=>({...e,loading:!0})),navigator.geolocation.getCurrentPosition(e=>{w({lat:(null==t?void 0:t.lat)||e.coords.latitude,lng:(null==t?void 0:t.lng)||e.coords.longitude})},()=>{w({lat:(null==t?void 0:t.lat)||0,lng:(null==t?void 0:t.lng)||0})}))},[e,r]),S=s.useCallback((e,t)=>{f.current&&v.current&&v.current.geocode(e,(e,a)=>{"OK"===a&&b.current&&t(e)})},[]),P=s.useMemo(()=>C()(function(e){if(f.current){if(!(null==e?void 0:e.query)){A();return}d(e=>({...e,loading:!0})),f.current.textSearch({location:E.current,...e},(e,t)=>{"OK"===t&&b.current?l(e.map(e=>({icon:e.icon,name:e.name,full_address:e.formatted_address,lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}))):d(t=>({...t,extra:e})),d(e=>({...e,loading:!1}))})}},200),[]);(0,s.useEffect)(()=>(b.current=!0,()=>{b.current=!1}),[]),s.useEffect(()=>{setImmediate(()=>k())},[r]);let _=s.useCallback((e,t={})=>{g(e),P({query:e,...a,...t})},[a,P]);return[o,p,_,u,c]}(m,{...e}),_=k(e,S),M=s.useCallback(e=>E(e),[E]),R=e=>{c({...e,query:h,show_map:!0})},I=()=>{c(!1)};return s.createElement(n.lG,A({className:t.dialog,maxWidth:"sm",fullWidth:!0,"data-testid":"dialogLocationPicker"},l),s.createElement(n.L3,{"data-testid":"popupTitle",enableBack:!0,disableClose:!0},d),s.createElement("div",{className:t.inputStage},s.createElement(r.rq,{autoFocus:!0,"data-testid":"searchBox",placeholder:u,onChanged:M})),s.createElement(n.Cf,{className:t.dialogContent},s.createElement(b.P,{autoHide:!0,autoHeight:!0,autoHeightMax:"100%"},s.createElement("div",{className:t.dialogContentTitle},o.formatMessage({id:"base_on_your_location"})),s.createElement("div",{className:t.mapStage,ref:m}),(null==_?void 0:_.full_address)&&!h&&s.createElement(g,{active:!0,name:_.name||_.address,address:_.full_address,onClick:I}),P?s.createElement(v.A,{p:2,sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}},s.createElement(y.A,{size:24})):s.createElement(v.A,null,!!(null==p?void 0:p.length)&&p.map((e,t)=>{var a;return w(e,_)||w(e,_,1)&&e.name===_.name&&(null===(a=_.address)||void 0===a?void 0:a.includes(e.address))?null:s.createElement(g,{name:e.name,address:e.full_address||e.address,key:t.toString(),onClick:()=>R(e)})})))))}},60968(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(73349),r=a(53975),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({title:e="Edit",maxWidth:t="sm",fullWidth:a=!0,dialogProps:s={},...c}){let{useDialog:d}=(0,i.PCX)(),u=d(),{dialogProps:m}=u;return o.createElement(n.lG,l({},m,{maxWidth:t,fullWidth:a,"data-testid":"editPopup"},s),o.createElement(r.FF,l({dialog:!0,dialogTitle:e,dialogItem:u},c)))}},40982(e,t,a){a.r(t),a.d(t,{default:()=>f});var i=a(91557),n=a(73349),r=a(40515),o=a(3556),l=a(95223),s=a(20053),c=a(96540),d=a(56525),u=a(85838);let m=(0,d.A)(e=>(0,u.A)({root:{display:"flex",position:"relative"},titleDialog:{display:"flex",alignItems:"center"},closeDialog:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),marginLeft:"auto",cursor:"pointer"},searchFocused:{border:e.mixins.border("primary"),background:"none"},searchIcon:{top:0,width:e.mixins.pxToRem(32),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",transition:"all .2s ease",cursor:"pointer"},searchIconFocused:{color:e.palette.primary.main},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1,2,1,0),boxSizing:"border-box",paddingLeft:"30px !important",transition:"all .2s ease",width:"100%",height:e.mixins.pxToRem(32)}}),{name:"SearchInModule"});var p=a(86663);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let h=(0,o.Ay)(l.Ay)(({theme:e})=>({"& input":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));function f({title:e,placeholder:t,item:a,params:o}){let{useDialog:l,navigate:d}=(0,i.PCX)(),{dialogProps:u,closeDialog:f}=l(),v=m(),[y,b]=(0,c.useState)(!1),[x,E]=(0,c.useState)(""),C=()=>{b(!0)},w=()=>{b(!1)},A=e=>{let{value:t}=e.target;E(t)},k=e=>{let t=null==e?void 0:e.keyCode;13===t&&(e.preventDefault(),S())},S=()=>{let e=x.trim();if(!e)return;let{id:t,module_name:i}=a;d({pathname:`/${i}/search/${t}`,search:p.stringify({q:e,...o})}),f()};return c.createElement(n.lG,g({},u,{maxWidth:"sm",fullWidth:!0,fullScreen:!1,"data-testid":"dialogSearchInApp"}),c.createElement(n.L3,null,c.createElement("div",{className:v.titleDialog},e)),c.createElement(n.Cf,{className:v.root},c.createElement("div",{className:(0,s.default)(v.searchIcon,y&&v.searchIconFocused)},c.createElement(r.s4,{icon:"ico-search-o"})),c.createElement(h,{placeholder:t,classes:{root:v.inputRoot,input:v.inputInput},value:x,name:"searchBox",autoComplete:"off",autoCapitalize:"off",inputProps:{"aria-label":"search","data-testid":"search_box_in_module"},onFocus:C,onChange:A,onKeyDown:k,onBlur:w})))}},84492(e,t,a){a.r(t),a.d(t,{default:()=>w});var i=a(73349),n=a(91557),r=a(40515),o=a(3556),l=a(60780),s=a(52705),c=a(97763),d=a(84058),u=a.n(d),m=a(96540);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let g="GenerateLinkField",h=(0,o.Ay)("div",{name:g})(({theme:e})=>({padding:e.spacing(.5,1.75),margin:e.spacing(2),border:e.mixins.border("secondary"),borderRadius:e.spacing(.5),display:"flex",alignItems:"center",justifyContent:"space-between"})),f=(0,o.Ay)("div",{name:g})(({theme:e})=>({display:"flex",alignItems:"center",overflow:"hidden",width:"90%"})),v=(0,o.Ay)(r.s4,{name:"ReloadIcon"})(({theme:e})=>({fontSize:e.spacing(1.875),color:(e.palette.mode,e.palette.primary.main),cursor:"pointer"})),y=(0,o.Ay)(l.A,{name:"ReloadButton"})(({theme:e})=>({fontWeight:"bold",height:e.spacing(4),marginLeft:e.spacing(1)})),b=(0,o.Ay)(r.mE,{name:"CodeText"})(({theme:e})=>({color:e.palette.text.hint,overflow:"hidden"})),x=(0,o.Ay)("div",{name:"WrapperLoading"})(({theme:e})=>({margin:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center"})),E=(0,o.Ay)(l.A)(()=>({"& span":{margin:0}})),C=e=>{let{useDialog:t,i18n:a,dispatch:r,copyToClipboard:o,toastBackend:l}=(0,n.PCX)(),{dialogProps:d}=t(),[g,C]=m.useState(null),w=t=>{r({type:t,payload:e,meta:{onSuccess(e){C(e)},onFailure(){}}})};m.useEffect(()=>{e&&w("event/getCode")},[]);let A=()=>{o(g.url),l.success(a.formatMessage({id:"copied_to_clipboard"}))},k=()=>{w("event/refreshCode")};return m.createElement(i.lG,p({},d,{maxWidth:"sm",fullWidth:!0,"data-testid":u()("dialog generate_invite_link")}),m.createElement(i.L3,null,a.formatMessage({id:"generate_invite_link"})),m.createElement(i.Cf,{variant:"fitScroll"},g?m.createElement(h,null,m.createElement(f,null,m.createElement(b,{lines:1},g.url)),(null==g?void 0:g.status)?null:m.createElement(c.A,{title:a.formatMessage({id:"refresh"}),placement:"top"},m.createElement(E,{onClick:k,variant:"outlined",size:"small",startIcon:m.createElement(v,{icon:"ico-refresh-o"}),"data-testid":u()("button refresh")})),m.createElement(y,{variant:"outlined",onClick:A,"data-testid":u()("button copy")},a.formatMessage({id:"copy"}))):m.createElement(x,null,m.createElement(s.A,{variant:"rounded",width:"100%",height:35}))))},w=C},23041(e,t,a){a.r(t),a.d(t,{default:()=>h});var i=a(73349),n=a(30691),r=a(91557),o=a(84680),l=a(80160),s=a(18579),c=a(96540),d=a(56525),u=a(85838);let m=(0,d.A)(e=>(0,u.A)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:e.shape.borderRadius/2,marginRight:"0.25em",padding:e.spacing(.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let g=e=>{var t,a;let i=(0,r.IgF)(n.P,"event_member","viewAll"),o=(0,r.IgF)(n.P,"event_invite","viewAll"),l={joined:{id:"going",value:"joined",itemView:"event.itemView.guestSmallCard",emptyPage:"core.block.no_content",invisible:!0,dataSource:{apiUrl:i.apiUrl,apiParams:{event_id:e.id,view:"joined"}},total:"total_member"},interested:{id:"interested",value:"interested",itemView:"event.itemView.guestSmallCard",emptyPage:"core.block.no_content_with_button",emptyPageProps:{icon:"ico-user3-three",description:"no_one_has_been_interested"},invisible:!0,dataSource:{apiUrl:i.apiUrl,apiParams:{event_id:e.id,view:"interested"}},total:"total_interested"},invited:{id:"invited",value:"invited",invisible:(null===(t=e.extra)||void 0===t?void 0:t.can_invite)||!1,itemView:"event.itemView.inviteCard",emptyPage:"core.block.no_content_with_button",emptyPageProps:{icon:"ico-user3-three",description:"no_one_has_been_invited",buttonCustom:(null===(a=e.extra)||void 0===a?void 0:a.can_invite)?{component:"event.invitedButton",props:{item:e,type:"event/invitePeopleToCome"}}:null},dataSource:{apiUrl:o.apiUrl,apiParams:{event_id:e.id}},total:"total_pending_invite"}};return l};function h({item:e,defaultTab:t="joined"}){let a=m(),n=g(e),[d,u]=(0,c.useState)(t),h=(0,c.useRef)(),{useDialog:f,i18n:v,ListView:y,useGetItem:b}=(0,r.PCX)(),{dialogProps:x}=f(),{resource_name:E,item_id:C}=e,w=`event_guest/${E}/${C}/${d}`,A=b(e._identity),k=(e,t)=>{u(t)};return c.createElement(i.lG,p({},x,{maxWidth:"xs",fullWidth:!0}),c.createElement(i.L3,null,v.formatMessage({id:"guests"})),c.createElement(l.A,{value:d,onChange:k,className:a.customTabs},Object.keys(n).filter(e=>n[e].invisible).map(e=>{var t;return c.createElement(s.A,{key:n[e].id,disableRipple:!0,label:`${v.formatMessage({id:n[e].id})} (${A.statistic[null===(t=n[e])||void 0===t?void 0:t.total]||0})`,value:n[e].value,"aria-label":n[e].value})})),c.createElement("div",{className:a.dialogContent,ref:h},c.createElement(o.P,{autoHeightMax:"100%",autoHide:!0,autoHeight:!0},c.createElement(y,{dataSource:n[d].dataSource,pagingId:w,canLoadMore:!0,clearDataOnUnMount:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",emptyPage:n[d].emptyPage,emptyPageProps:n[d].emptyPageProps,itemView:n[d].itemView}))))}},83263(e,t,a){a.r(t),a.d(t,{default:()=>f});var i=a(73349),n=a(30691),r=a(91557),o=a(84680),l=a(67725),s=a(80160),c=a(18579),d=a(96540),u=a(56525),m=a(85838);let p=(0,u.A)(e=>(0,m.A)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:e.shape.borderRadius/2,marginRight:"0.25em",padding:e.spacing(.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let h=e=>{var t;let a=(0,r.IgF)(n.P,"event_member","viewHosts"),i=(0,r.IgF)(n.P,"event_host_invite","viewAll"),o=(0,l.A8)(a.apiParams,{id:e.id}),s=(0,l.A8)(null==i?void 0:i.apiParams,{id:e.id}),c={list_host:{id:"host_list",value:"list_host",itemView:"event.itemView.hostCard",invisible:!0,dataSource:{apiUrl:null==a?void 0:a.apiUrl,apiParams:o},emptyPage:"core.block.no_content",total:"total_host"},invited:{id:"invited",value:"invited",invisible:(null===(t=e.extra)||void 0===t?void 0:t.can_invite)&&e.extra.can_manage_host,itemView:"event.itemView.hostInviteCard",dataSource:{apiUrl:null==i?void 0:i.apiUrl,apiParams:s},emptyPage:"core.block.no_content_with_button",emptyPageProps:{icon:"ico-user3-three",description:"no_one_has_been_invited",buttonCustom:{component:"event.invitedButton",props:{item:e,type:"event/inviteToComeHost"}}},total:"total_pending_host_invite"}};return c};function f({item:e,defaultTab:t="list_host"}){let a=p(),n=h(e),[l,u]=(0,d.useState)(t),m=(0,d.useRef)(),{useDialog:f,i18n:v,ListView:y}=(0,r.PCX)(),{dialogProps:b}=f(),{resource_name:x,item_id:E}=e,C=`event_host/${x}/${E}/${l}`,w=(0,r.dx2)(e._identity),A=(e,t)=>{u(t)};return d.createElement(i.lG,g({},b,{maxWidth:"xs",fullWidth:!0}),d.createElement(i.L3,null,v.formatMessage({id:"manage_host_list"})),d.createElement(s.A,{value:l,onChange:A,className:a.customTabs},Object.keys(n).filter(e=>n[e].invisible).map(e=>{var t;return d.createElement(c.A,{key:n[e].id,disableRipple:!0,label:`${v.formatMessage({id:n[e].id})} (${w.statistic[null===(t=n[e])||void 0===t?void 0:t.total]||0})`,value:n[e].value,"aria-label":n[e].value})})),d.createElement("div",{className:a.dialogContent,ref:m},d.createElement(o.P,{autoHeightMax:"100%",autoHide:!0,autoHeight:!0},d.createElement(y,{dataSource:n[l].dataSource,pagingId:C,canLoadMore:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:n[l].itemView,emptyPage:n[l].emptyPage,emptyPageProps:n[l].emptyPageProps}))))}},27673(e,t,a){a.r(t),a.d(t,{default:()=>d});var i=a(91557),n=a(96540),r=a(73349),o=a(84680),l=a(67725),s=a(3282);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function d(e){let{i18n:t,useDialog:a,ListView:d,useIsMobile:u}=(0,i.PCX)(),m=u(),{dialogProps:p}=a(),g=(0,i.IgF)(s.RO,s.RO,"taggedFriends");if(!g)return null;let h={apiParams:(0,l.A8)(e,g.apiParams),apiUrl:g.apiUrl};return n.createElement(r.lG,c({},p,{maxWidth:"xs",fullWidth:!0}),n.createElement(r.L3,null,t.formatMessage({id:"tagged_friends"})),n.createElement(r.Cf,null,n.createElement(o.P,{autoHide:!0,autoHeight:!0,autoHeightMax:m?"100%":300},n.createElement(d,{dataSource:h,canLoadMore:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.itemView.smallCard",canLoadSmooth:!0,numberOfItemsPerPage:10}))))}},76908(e,t,a){a.r(t),a.d(t,{default:()=>m});var i=a(73349),n=a(91557),r=a(3556),o=a(8051),l=a(89481),s=a(96540);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let d=(0,r.Ay)(i.Cf,{name:"HistoryDialog",slot:"DialogContentStyled"})(({theme:e})=>({borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,[e.breakpoints.down("sm")]:{borderRadius:0}})),u=({dataSource:e,pageParams:t})=>{let{useDialog:a,i18n:r,useFetchItems:u,jsxBackend:m}=(0,n.PCX)(),p=m.get("FeedHistoryItem"),{dialogProps:g}=a(),[h,f]=u({dataSource:e,pageParams:t,data:[]});return s.createElement(i.lG,c({},g,{"data-testid":"dialogStatusComposer",maxWidth:"sm",fullWidth:!0}),s.createElement(i.L3,null,r.formatMessage({id:"edit_history"})),s.createElement(d,null,f?s.createElement(o.A,{p:2,sx:{display:"flex",alignItems:"center",justifyContent:"center"}},s.createElement(l.A,{size:16})):null,h&&h.length?s.createElement(o.A,{mt:2},h.map(e=>s.createElement(o.A,{mb:3,key:`k${e.id}`},s.createElement(p,{item:e})))):null))},m=u},20146(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(73349),r=a(53975),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({initialValues:e,formUrl:t}){let{useDialog:a}=(0,i.PCX)(),s=a(),{dialogProps:c}=s;return t?o.createElement(n.lG,l({},c,{maxWidth:"sm",fullWidth:!0}),o.createElement(r.aI,{initialValues:e,dataSource:{apiUrl:t},dialog:!0,dialogItem:s})):null}},3002(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(73349),r=a(53975),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({dataSource:e,parentPost:t}){let{useDialog:a,jsxBackend:s}=(0,i.PCX)(),c=a(),{dialogProps:d}=c,u=s.render({component:"forum_post.ui.quoteItem",props:{item:t,hideAttachment:!0}});return o.createElement(n.lG,l({},d,{maxWidth:"sm",fullWidth:!0}),o.createElement(r.aI,{noHeader:!0,dataSource:e,dialog:!0,dialogEmbedItem:u,dialogItem:c,keepPaginationData:!0}))}},37607(e,t,a){a.r(t),a.d(t,{default:()=>S});var i=a(73349),n=a(91557),r=a(84680),o=a(61795),l=a(60780),s=a(2404),c=a.n(s),d=a(96540),u=a(87773),m=a(43546),p=a(52705),g=a(3556);let h=(0,g.Ay)("div",{name:"FriendListItem",slot:"Root"})(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(1.5),borderBottom:"1px solid",borderBottomColor:e.palette.divider,":hover":{backgroundColor:e.palette.action.hover}}));function f({item:e,checked:t,onChange:a}){let i=d.useCallback((t,i)=>{a(i,e.id)},[]);return d.createElement(h,null,d.createElement(u.A,{variant:"h5",sx:{flex:1}},e.name),d.createElement(m.A,{size:"small",color:"primary",checked:Boolean(t),onChange:i}))}let v=()=>d.createElement(h,null,d.createElement(u.A,{variant:"h5",sx:{flex:1}},d.createElement(p.A,{variant:"text",width:"50%",height:24})),d.createElement(p.A,{variant:"rectangular",width:16,height:16}));f.LoadingSkeleton=v;var y=a(40515);let b=(0,g.Ay)("div",{name:"root"})(({theme:e})=>({display:"flex",flexDirection:"column",justifyContent:"center",padding:e.spacing(0,2),alignItems:"center",marginTop:e.spacing(11.25)})),x=(0,g.Ay)(y.s4,{name:"LineIcon"})(({theme:e})=>({fontSize:e.mixins.pxToRem(64),color:e.palette.text.secondary,marginBottom:e.spacing(4)})),E=(0,g.Ay)("div",{name:"content"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),color:e.palette.text.secondary,textAlign:"center",[e.breakpoints.down("xs")]:{fontSize:e.mixins.pxToRem(15)}})),C=(0,g.Ay)(l.A,{name:"WrapButton"})(({theme:e})=>({marginTop:e.spacing(1),"&:hover":{backgroundColor:"unset"}})),w=(0,g.Ay)(l.A,{name:"ButtonInviteStyled"})(({theme:e})=>({height:"100%","& .MuiButton-startIcon":{marginLeft:0}}));function A({icon:e="ico-list-bullet-o",description:t="there_are_no_friend_list",buttonCustom:a}){let{i18n:i,dispatch:r,useDialog:o}=(0,n.PCX)(),{closeDialog:l}=o(),s=()=>{l(),a.type&&r({type:a.type})};return d.createElement(b,null,d.createElement(x,{icon:e}),t?d.createElement(E,null,i.formatMessage({id:t})):null,a?d.createElement(C,null,d.createElement(w,{size:"small",variant:"outlined",component:"h5",onClick:s,startIcon:d.createElement(y.s4,{sx:{marginLeft:"0 !important"},icon:"ico-envelope"})},d.createElement("span",null,i.formatMessage({id:a.label||"add_new_listing"})))):null)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function S({id:e}){let{useDialog:t,i18n:a}=(0,n.PCX)(),[s,u]=d.useState([]),[m,p]=(0,o.e6)({dataSource:{apiUrl:`/friend/list/assign/${e}`},data:[]});d.useEffect(()=>{u(m)},[m]);let{dialogProps:g,setDialogValue:h}=t(),v=()=>{h(s)},y=d.useCallback((e,t)=>{u(a=>e?[...a,t]:a.filter(e=>e!==t))},[u]),[b,x]=(0,o.e6)({dataSource:{apiUrl:"/friend/list"},data:[]});return d.createElement(i.lG,k({maxWidth:"xs",fullWidth:!0},g),d.createElement(i.L3,null,a.formatMessage({id:"friend_list"})),d.createElement(i.Cf,{variant:"fitScroll",sx:{height:"45vh"}},d.createElement(r.P,null,x||p?[0,5].map(e=>d.createElement(f.LoadingSkeleton,{key:e.toString()})):null,x||p||b.length?null:d.createElement(A,{icon:"ico-list-bullet-o",buttonCustom:{type:"friend/addNewList",label:"add_new_listing"}}),x||p||!b.length?null:b.map(e=>d.createElement(f,{key:e.id.toString(),item:e,checked:s.includes(e.id),onChange:y})))),d.createElement(i.ii,null,d.createElement(l.A,{disabled:c()(m,s),color:"primary",variant:"contained",size:"medium",onClick:v},a.formatMessage({id:"save_changes"}))))}},46709(e,t,a){a.r(t),a.d(t,{default:()=>l});var i=a(91557),n=a(40515),r=a(96540);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let l=function(e){let{i18n:t}=(0,i.PCX)(),[a,l]=(0,i.Pth)({apiUrl:e.apiUrl||"/friend/mention",initialParams:null==e?void 0:e.initialParams}),[s,c]=r.useState(e.value),d=r.useCallback(e=>{c(e)},[]);return r.createElement(n._Q,o({placeholder:t.formatMessage({id:"search_friend"}),dialogTitle:t.formatMessage({id:"select_friend"}),items:a.items,loading:a.loading,onSelectItem:d,selectedItem:s,onChanged:l,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.ui.pickItem",emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_people_found"})},"data-testid":"popupFriendPicker"},e))}},36845(e,t,a){a.r(t),a.d(t,{default:()=>u});var i=a(91557),n=a(40515),r=a(92078),o=a.n(r),l=a(42426),s=a.n(l),c=a(96540);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let u=function(e){let{i18n:t,useTheme:a}=(0,i.PCX)(),r=a(),[l,u]=(0,i.Pth)({apiUrl:e.apiUrl||"/friend/mention",initialParams:null==e?void 0:e.initialParams}),[m,p]=(0,c.useState)(e.value||[]),g=e=>{p(t=>s()(t,t=>t.id===e.id)?t.filter(t=>t.id!==e.id):o()(t,e))};return c.createElement(n.YX,d({items:l.items,onSelectItem:g,selectedItems:m,onChanged:u,loading:l.loading,placeholder:t.formatMessage({id:"search_for_friends"}),dialogTitle:t.formatMessage({id:"tag_people"}),emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_people_found"})},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.ui.pickItem",heightContent:r.spacing(37.5)},e))}},54469(e,t,a){a.d(t,{A:()=>s});var i=a(91557),n=a(73349),r=a(84680),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:s}){let{useDialog:c,ListView:d}=(0,i.PCX)(),{dialogProps:u}=c();return o.createElement(n.lG,l({},u,{maxWidth:"xs",fullWidth:!0}),o.createElement(n.L3,null,s),o.createElement(n.Cf,{variant:"fitScroll",sx:{height:"45vh"}},o.createElement(r.P,{autoHeightMax:"100%",autoHide:!0,autoHeight:!0},o.createElement(d,{dataSource:{apiUrl:e,apiParams:t},pagingId:a,canLoadMore:!0,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.itemView.smallCard"}))))}},52335(e,t,a){a.r(t),a.d(t,{default:()=>o});var i=a(91557),n=a(96540),r=a(54469);function o(e){let{i18n:t}=(0,i.PCX)();return n.createElement(r.A,{apiUrl:"/friend",apiParams:{user_id:e.user_id,view:"mutual",limit:20},pagingId:`mutualFriends/${e.user_id}`,dialogTitle:t.formatMessage({id:"mutual_friends"})})}},48271(e,t,a){a.r(t),a.d(t,{default:()=>o});var i=a(91557),n=a(96540),r=a(54469);function o({item_type:e,item_id:t,excluded_ids:a}){let{i18n:o}=(0,i.PCX)();return n.createElement(r.A,{apiUrl:"/feed/tagged-friend",apiParams:{item_type:e,item_id:t,excluded_ids:a,limit:20},pagingId:`tagged-friend/${e}/${t}`,dialogTitle:o.formatMessage({id:"tagged_friends"})})}},24718(e,t,a){a.r(t),a.d(t,{default:()=>o});var i=a(91557),n=a(96540),r=a(54469);function o(e){let{i18n:t}=(0,i.PCX)();return n.createElement(r.A,{apiUrl:"/friend",apiParams:{user_id:e.user_id,limit:20},pagingId:`friends/${e.user_id}`,dialogTitle:t.formatMessage({id:"Friends"})})}},53895(e,t,a){a.r(t),a.d(t,{default:()=>E});var i=a(73349),n=a(91557),r=a(40515),o=a(3556),l=a(60780),s=a(52705),c=a(97763),d=a(96540);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let m="GenerateLinkField",p=(0,o.Ay)("div",{name:m})(({theme:e})=>({padding:e.spacing(.5,1.75),margin:e.spacing(2),border:e.mixins.border("secondary"),borderRadius:e.spacing(.5),display:"flex",alignItems:"center",justifyContent:"space-between"})),g=(0,o.Ay)("div",{name:m})(({theme:e})=>({display:"flex",alignItems:"center",overflow:"hidden",flex:1})),h=(0,o.Ay)(r.s4,{name:"ReloadIcon"})(({theme:e})=>({fontSize:e.spacing(1.875),color:(e.palette.mode,e.palette.primary.main),cursor:"pointer"})),f=(0,o.Ay)(l.A,{name:"ReloadButton"})(({theme:e})=>({fontWeight:"bold",height:e.spacing(4),marginLeft:e.spacing(1)})),v=(0,o.Ay)(r.mE,{name:"CodeText"})(({theme:e})=>({color:e.palette.text.hint,overflow:"hidden"})),y=(0,o.Ay)("div",{name:"WrapperLoading"})(({theme:e})=>({margin:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center"})),b=(0,o.Ay)(l.A)(()=>({"& span":{margin:0}})),x=e=>{let{useDialog:t,i18n:a,dispatch:r,copyToClipboard:o,toastBackend:l}=(0,n.PCX)(),{dialogProps:m}=t(),[x,E]=d.useState(null),C=t=>{r({type:t,payload:e,meta:{onSuccess(e){E(e)},onFailure(){}}})};d.useEffect(()=>{e&&C("group/getCode")},[]);let w=()=>{o(x.url),l.success(a.formatMessage({id:"link_copied_to_clipboard"}))},A=()=>{C("group/refreshCode")};return d.createElement(i.lG,u({},m,{maxWidth:"sm",fullWidth:!0}),d.createElement(i.L3,null,a.formatMessage({id:"generate_invite_link"})),d.createElement(i.Cf,{variant:"fitScroll"},x?d.createElement(p,null,d.createElement(g,null,d.createElement(v,{lines:1},x.url)),(null==x?void 0:x.status)?null:d.createElement(c.A,{title:a.formatMessage({id:"refresh"}),placement:"top"},d.createElement(b,{onClick:A,variant:"outlined",size:"small",startIcon:d.createElement(h,{icon:"ico-refresh-o"})})),d.createElement(f,{variant:"outlined",onClick:w},a.formatMessage({id:"copy"}))):d.createElement(y,null,d.createElement(s.A,{variant:"rounded",width:"100%",height:35}))))},E=x},84168(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(80281),r=a(40515),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let s=function(e){let{i18n:t}=(0,i.PCX)(),{dataSource:a}=e||{},s=(0,i.IgF)(n.CU,n.CU,"getShareOnGroupSuggestion"),{apiUrl:c,apiParams:d}=Object.assign({},a||s),[u,m]=(0,i.Pth)({apiUrl:c,initialParams:d}),[p,g]=o.useState(e.value),h=o.useCallback(e=>{g(e)},[]);return o.createElement(r._Q,l({placeholder:t.formatMessage({id:"search_group"}),dialogTitle:t.formatMessage({id:"select_group_to_share"}),items:u.items,loading:u.loading,onSelectItem:h,selectedItem:p,onChanged:m,"data-testid":"popupGroupPicker",emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_groups_found"})},gridLayout:"Friend - Small List",itemLayout:"Group - Item Picker",itemView:"group.ui.pickGroupItem"},e))}},9310(e,t,a){a.r(t),a.d(t,{default:()=>d});var i=a(91557),n=a(9648),r=a(96540),o=a(73349),l=a(84680);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:n}){let{useDialog:c,ListView:d}=(0,i.PCX)(),{dialogProps:u}=c();return r.createElement(o.lG,s({},u,{maxWidth:"xs",fullWidth:!0}),r.createElement(o.L3,null,n),r.createElement(o.Cf,{variant:"fitScroll",sx:{height:"45vh"}},r.createElement(l.P,{style:{height:"auto"}},r.createElement(d,{dataSource:{apiUrl:e,apiParams:t},canLoadMore:!0,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"group.itemView.reportCard"}))))}function d({id:e}){let{i18n:t,compactUrl:a}=(0,i.PCX)(),o=(0,i.IgF)(n.V,n.N,"listUsersReportOwner");return r.createElement(c,{apiUrl:a(o.apiUrl,{id:e}),pagingId:`listReport/${e}`,apiParams:{},dialogTitle:t.formatMessage({id:"people_who_reported_post"})})}},69529(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(73349),n=a(53975),r=a(91557),o=a(96540),l=a(36921);let s=({id:e})=>{let{useDialog:t}=(0,r.PCX)(),{dialogProps:a}=t(),s=(0,r.IgF)(l.CU,"group_question","getQuestionForm"),{open:c}=a,d=o.useMemo(()=>o.createElement(i.lG,{open:c,maxWidth:"md",fullWidth:!0,"data-testid":"popupReport"},o.createElement(n.aI,{dialog:!0,dataSource:s,pageParams:{id:e}})),[e,c]);return d},c=s},86485(e,t,a){a.r(t),a.d(t,{default:()=>x});var i=a(73349),n=a(91557),r=a(40515),o=a(5733),l=a(38354),s=a(3556),c=a(18579),d=a(80160),u=a(8051),m=a(87773),p=a(62193),g=a.n(p),h=a(96540);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let v=(0,s.Ay)(c.A,{name:"TabStyled"})(({theme:e})=>({padding:"0!important",fontSize:e.mixins.pxToRem(15),fontWeight:"bold",marginRight:e.spacing(3.5)})),y=(0,s.Ay)(d.A,{name:"TabsStyled"})(({theme:e})=>({"& div>span":{height:e.spacing(.5)}})),b=(0,s.Ay)(u.A,{name:"itemUser"})(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(2,0),borderBottom:"1px solid",borderBottomColor:e.palette.divider}));function x({communities:e,duplicates:t}){let{i18n:a,useDialog:s}=(0,n.PCX)(),{dialogProps:c}=s(),[d,p]=(0,h.useState)("1"),x=(e,t)=>{p(t)};return h.createElement(i.lG,f({},c),h.createElement(o.Ay,{value:d},h.createElement(i.L3,null,a.formatMessage({id:"invitation_result"})),h.createElement(i.Cf,{sx:{pt:0},style:{minHeight:"45vh"}},h.createElement(y,{value:d,onChange:x},h.createElement(v,{value:"1",label:a.formatMessage({id:"invitation_before"})}),h.createElement(v,{value:"2",label:a.formatMessage({id:"registered_users"})})),h.createElement(l.A,{value:"1",sx:{py:2,px:0}},h.createElement(m.A,{variant:"h5"},a.formatMessage({id:"the_following_emails_or_phone_numbers_were_not_sent"})),h.createElement(u.A,null,g()(t)?h.createElement(u.A,{mt:2},a.formatMessage({id:"no_invites_found"})):t.map((e,t)=>h.createElement(b,{key:t.toString()},e)))),h.createElement(l.A,{value:"2",sx:{py:2,px:0}},h.createElement(m.A,{variant:"h5"},a.formatMessage({id:"the_following_users_are_already_a_member_of_our_community"})),h.createElement(u.A,null,g()(e)?h.createElement(u.A,{mt:2},a.formatMessage({id:"no_members_found"})):e.map((e,t)=>h.createElement(b,{key:t.toString()},h.createElement(r.H8,{user:e,size:48,hoverCard:!1}),h.createElement(r.xE,{ml:1.5,user:e,color:"inherit",hoverCard:!1,variant:"h5"}))))))))}},20556(e,t,a){a.r(t),a.d(t,{default:()=>k});var i=a(91557),n=a(40515),r=a(3556),o=a(8051),l=a(60780),s=a(24721),c=a(63461),d=a(69752),u=a.n(d),m=a(96540),p=a(78074),g=a.n(p);a(12391);var h=a(67725);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let v="ListingImages",y=(0,r.Ay)(o.A,{name:v,slot:"root"})(({theme:e})=>({position:"relative",background:"#000",width:"100%",height:"100%","& .image-gallery":{height:"100%"},"& .image-gallery .image-gallery-thumbnail":{width:73,height:73,border:"none",borderRadius:e.shape.borderRadius/2,marginRight:e.spacing(1),minWidth:73},"& .image-gallery .image-gallery-slide-wrapper":{paddingTop:"8px"},"& .image-gallery .image-gallery-thumbnail.active":{backgroundColor:e.palette.primary.main,padding:2},"& .image-gallery .image-gallery-thumbnail.active $ThumbBgOverplay":{opacity:0},"& .image-gallery .image-gallery-thumbnail + .image-gallery-thumbnail":{marginLeft:0},"& .image-gallery .image-gallery-thumbnails":{padding:e.spacing(1,0)},"& .image-gallery-slides":{borderRadius:e.shape.borderRadius/2},"& .image-gallery-slide":{backfaceVisibility:"hidden"},[e.breakpoints.down("sm")]:{width:"100%","& .image-gallery-thumbnails-wrapper":{display:"none"},"& .image-gallery-slides":{borderRadius:0},"& $ImageMain":{borderRadius:0}}})),b=(0,r.Ay)("div",{name:v,slot:"imageMain"})(({theme:e})=>({width:"100%",height:"calc(100vh - 200px)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:e.shape.borderRadius/2,overflow:"hidden",cursor:"auto",[e.breakpoints.down("xs")]:{height:"auto",paddingTop:"100%",position:"relative"}})),x=(0,r.Ay)("div",{name:v,slot:"imageBox"})(({theme:e})=>({position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"})),E=(0,r.Ay)("div",{name:v,slot:"imageThumb"})(({theme:e})=>({backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",cursor:"pointer",position:"relative",overflow:"hidden"})),C=(0,r.Ay)("span",{name:v,slot:"thumbBg"})(({theme:e})=>({display:"block",paddingTop:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",cursor:"pointer",borderRadius:e.shape.borderRadius/2})),w=(0,r.Ay)("span",{name:v,slot:"thumbBgOverplay"})(({theme:e})=>({backgroundColor:e.palette.background.default,position:"absolute",top:0,right:0,left:0,bottom:0,opacity:.5,".active &":{opacity:0}})),A=(0,r.Ay)(l.A,{name:v,slot:"navButton",shouldForwardProp:e=>"navDirection"!==e})(({theme:e,navDirection:t})=>({width:e.spacing(5),height:e.spacing(5),backgroundColor:"#fff",borderRadius:e.spacing(4),color:"#616161",fontSize:e.mixins.pxToRem(16),textAlign:"center",lineHeight:32,position:"absolute",transform:"translate(0, -50%)",top:"50%",zIndex:1,border:"none",display:"flex",cursor:"pointer",minWidth:32,"&:hover":{backgroundColor:"#f0f0f0"},..."left"===t&&{left:e.spacing(1)},..."right"===t&&{right:e.spacing(1)}})),k=function({images:e,alt:t,startIndex:a}){let{useGetItems:r,useDialog:l,useIsMobile:d}=(0,i.PCX)(),p=r(e),{dialogProps:v,closeDialog:k}=l(),S=d(),P=(0,m.useCallback)(e=>m.createElement(b,null,m.createElement(x,null,m.createElement("img",{style:{width:"100%",height:"100%",objectFit:"contain"},alt:e.originalAlt,src:e.original}))),[]),_=(0,m.useCallback)(e=>m.createElement(E,null,m.createElement(C,{style:{backgroundImage:`url(${e.thumbnail})`}}),m.createElement(w,null)),[]),M=(e,t)=>m.createElement(A,{navDirection:"left",disabled:t,onClick:e},m.createElement(n.s4,{icon:"ico-angle-left"})),R=(e,t)=>m.createElement(A,{navDirection:"right",disabled:t,onClick:e},m.createElement(n.s4,{icon:"ico-angle-right"})),I=(0,m.useMemo)(()=>u()(p,(e,a)=>{let i={original:(0,h.AE)(null==a?void 0:a.image,"origin"),thumbnail:(0,h.AE)(null==a?void 0:a.image,"240"),renderItem:P,renderThumbInner:_,originalAlt:t};e.push(i)},[]),[t,p,P,_]),O=()=>m.createElement("div",null,"Loading");return p?m.createElement(s.A,f({},v,{maxWidth:"lg"}),S?m.createElement(o.A,{sx:{display:"block",textAlign:"end"}},m.createElement(c.A,{size:"large",onClick:()=>k()},m.createElement(n.s4,{icon:"ico-close-circle-o"}))):null,m.createElement(y,null,m.createElement(g(),{items:I,showFullscreenButton:!1,showPlayButton:!1,onImageLoad:O,renderLeftNav:M,renderRightNav:R,startIndex:a}))):null}},80085(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(73349),n=a(91557),r=a(84680),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({item:e,dataSource:t}){var a;let{useDialog:s,i18n:c,ListView:d,useIsMobile:u}=(0,n.PCX)(),{dialogProps:m}=s(),p=u(),{resource_name:g,item_id:h}=e,f=`marketplace/${g}/${h}`;return o.createElement(i.lG,l({},m,{maxWidth:"sm",fullWidth:!0}),o.createElement(i.L3,null,c.formatMessage({id:"invited_people"})),o.createElement(i.Cf,null,o.createElement(r.P,{autoHide:!0,autoHeight:!0,autoHeightMax:p?"100%":300},o.createElement(d,{dataSource:t,pagingId:f,canLoadMore:!0,clearDataOnUnMount:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"User - List",itemView:"marketplace.itemView.peopleCard",canLoadSmooth:!0,numberOfItemsPerPage:10,emptyPage:"core.block.no_content_with_button",emptyPageProps:{icon:"ico-user3-three",description:"no_one_has_been_invited",buttonCustom:(null==e?void 0:null===(a=e.extra)||void 0===a?void 0:a.can_invite)?{component:"marketplace.invitedButton",props:{item:e,type:"marketplace/invitePeopleToCome"}}:null}}))))}},78633(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(77700),r=a(40515),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let s=function(e){let{i18n:t}=(0,i.PCX)(),{dataSource:a}=e||{},[s,c]=o.useState(e.value),d=(0,i.IgF)(n.MS,n.MS,"getShareOnPageSuggestion"),{apiUrl:u,apiParams:m}=Object.assign({},a||d),[p,g]=(0,i.Pth)({apiUrl:u,initialParams:m}),h=o.useCallback(e=>{c(e)},[]);return o.createElement(r._Q,l({placeholder:t.formatMessage({id:"search_page"}),dialogTitle:t.formatMessage({id:"select_page_to_share"}),items:p.items,loading:p.loading,onSelectItem:h,selectedItem:s,onChanged:g,emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_pages_found"})},"data-testid":"popupPagePicker",gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"page.ui.pickPageItem"},e))}},91975(e,t,a){a.r(t),a.d(t,{default:()=>d});var i=a(91557),n=a(73349),r=a(87773),o=a(60780),l=a(96540);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(){let{useDialog:e,i18n:t}=(0,i.PCX)(),{dialogProps:a,closeDialog:c}=e();return l.createElement(n.lG,s({},a),l.createElement(n.L3,null,t.formatMessage({id:"Reassign Owner"})),l.createElement(n.Cf,null,l.createElement(r.A,null,"Choose a friend and transfer this page to them. Remember that: Current owner will lose all admin privilege on this page after do this.")),l.createElement(n.ii,null,l.createElement(o.A,{autoFocus:!0,color:"primary",onClick:c,"data-testid":"alertDialogOkButton"},t.formatMessage({id:"Submit"}))))}c.displayName="ReassignOwnerDialog";let d=c},92800(e,t,a){a.d(t,{A:()=>y});var i=a(91557),n=a(3556),r=a(83445),o=a(96540),l=a(58156),s=a.n(l),c=a(67725),d=a(89481),u=a(12789);let m="SuggestionList",p=(0,n.Ay)("div",{name:m,slot:"RootNoFound"})(({theme:e})=>({minHeight:"100px",textAlign:"center"})),g=(0,n.Ay)("div",{name:m,slot:"Root"})(({theme:e})=>({minHeight:"100px",margin:e.spacing(1,-1,0)})),h=(e,{text:t,identity:a})=>{let i=s()(e,a);return{...e.friend.suggestions[`:${t}`],item_id:null==i?void 0:i.id}},f=(0,i.NgA)(h)(function(e){let{dispatch:t,i18n:a}=(0,i.PCX)(),{text:n,item_id:r,data:l,loaded:s,onItemClick:m,classes:h,excludeIds:f,isFullFriend:v,postAsParent:y,parentUser:b}=e,x=o.useMemo(()=>v?{excludeIds:f}:{item_type:"photo",item_id:r},[f,r,v]);return(o.useEffect(()=>{t({type:"friend/suggestions/LOAD",payload:{text:n,...x,user_id:y&&(null==b?void 0:b.id),owner_id:null==b?void 0:b.id}})},[t,n,x]),s)?(null==l?void 0:l.length)?o.createElement(g,null,l.map(e=>o.createElement("div",{onClick(t){t.preventDefault(),t.stopPropagation(),m(e)},className:h.tagItem,key:e.id.toString()},o.createElement(u.A,{src:(0,c.AE)(e.image,"240"),children:(0,c.cb)(e.label),alt:e.label,className:h.smallAvatar,style:{backgroundColor:c.m6.hex((0,c.cb)(e.label))}}),o.createElement("span",{className:h.userName},e.label)))):o.createElement(p,{onClick:e=>e.stopPropagation()},o.createElement("div",{style:{padding:16}},a.formatMessage({id:"no_people_found"}))):o.createElement(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"default"},onClick:e=>e.stopPropagation()},o.createElement(d.A,{color:"secondary",size:32}))}),v=(0,n.Ay)("input",{name:"Text"})(({theme:e})=>({"&::placeholder":{color:e.palette.text.hint}}));function y({classes:e,onItemClick:t,anchorRef:a,identity:n,isFullFriend:l,excludeIds:s,postAsParent:c,parentUser:d}){let{i18n:u}=(0,i.PCX)(),[m,p]=o.useState(""),g=e=>{p(e)};return o.createElement(r.A,{id:"suggest-friends",open:Boolean(a.current),disablePortal:!0,anchorEl:a.current,placement:"bottom",className:e.popper,onClick:e=>e.stopPropagation()},o.createElement("div",{className:e.inputBaseBox},o.createElement(v,{type:"text",placeholder:u.formatMessage({id:"type_any_name"}),onChange:e=>g(e.target.value),autoFocus:!0,onBlur:e=>e.target.focus()})),o.createElement(f,{onItemClick:t,text:m,classes:e,identity:n,isFullFriend:l,excludeIds:s,postAsParent:c,parentUser:d}))}},20106(e,t,a){a.d(t,{A:()=>r});var i=a(20053),n=a(96540);let r=n.forwardRef(function({classes:e,px:t,py:a,open:r},o){let l=n.useMemo(()=>({left:`${t}%`,top:`${a}%`}),[t,a]);return n.createElement("div",{onClick:e=>e.stopPropagation(),className:(0,i.default)(e.taggedBox,r?"":"srOnly"),style:l,ref:o},n.createElement("div",{className:e.whoIsThis}))})},57920(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(91557),n=a(73349),r=a(53975),o=a(96540),l=a(76096);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c({initialValues:e,formSchema:t,formName:a="edit_selecting_photo",dataSource:c}){let{useDialog:d}=(0,i.PCX)(),u=d(),{dialogProps:m,setDialogValue:p,disableBackdropClick:g}=u,h=(0,i.EkY)(l.Zt,l.i3,a),f=o.useCallback(e=>{p(e)},[p]);return(o.useEffect(()=>{g(!0)},[]),h||c)?o.createElement(n.lG,s({},m,{maxWidth:"sm",fullWidth:!0}),o.createElement(r.FF,{pageParams:e,initialValues:e,dialog:!0,dialogItem:u,formSchema:t||h,dataSource:c,onSubmit:f})):null}},58935(e,t,a){a.d(t,{A:()=>s});var i=a(67725),n=a(3556),r=a(96540);let o=(0,n.Ay)("div",{name:"MultipleUploadField",slot:"PreviewImg",shouldForwardProp:e=>"radio"!==e})(({theme:e,radio:t})=>({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:e.palette.grey.A700,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"auto 100%",maxWidth:"100%",...t&&"horizontal"===t&&{backgroundSize:"cover"}})),l=({item:e})=>{let[t,a]=r.useState({}),n=(e,t)=>{try{let a=new Image;a.src=t,a.onload=()=>{e({height:a.height,width:a.width})},a.onerror=e=>{}}catch(i){}},l=(null==e?void 0:e.source)||e.image_url||(0,i.AE)(null==e?void 0:e.image,"1024");r.useEffect(()=>{n(a,l)},[]);let s="horizontal";return s=t&&t.width/t.height<=1?"vertical":"horizontal",r.createElement(o,{radio:s,style:{backgroundImage:`url(${l})`}})},s=l},76471(e,t,a){a.d(t,{A:()=>v});var i=a(91557),n=a(58156),r=a.n(n),o=a(40515),l=a(3556),s=a(60780),c=a(96540);let d="PhotoTag",u=(0,l.Ay)("div",{name:d,slot:"root",shouldForwardProp:e=>"tagging"!==e&&"px"!==e&&"py"!==e&&"hovering"!==e&&"forceShow"!==e})(({theme:e,tagging:t,px:a,py:i,hovering:n,forceShow:r})=>({position:"absolute",width:t?10:100,height:t?10:100,transform:"translate(-50%,-50%)","&:hover > div:first-of-type":{visibility:"visible"},...(t||r)&&{"& > div:first-of-type":{visibility:"visible"}},zIndex:n?10:"auto",...a&&i&&{left:`${a}%`,top:`${i}%`}})),m=(0,l.Ay)("div",{name:d,slot:"Item"})(({theme:e})=>({position:"absolute",backgroundColor:"dark"===e.palette.mode?"rgba(0,0,0,.6)":"rgba(255,255,255,.8)",borderRadius:e.shape.borderRadius,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px",textAlign:"center",display:"flex",alignItems:"center",padding:e.spacing(.5),transform:"translate(-50%,-50%)",left:"50%",top:"50%",visibility:"hidden"})),p=(0,l.Ay)(o.xE,{name:d,slot:"LinkStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.common.white,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,maxWidth:"180px",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",flexGrow:1,padding:e.spacing(0,.5)})),g=(0,l.Ay)(s.A,{name:d,slot:"ButtonStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.common.white,minWidth:"11px",padding:e.spacing(.5,1),margin:e.spacing(-.5),fontSize:e.mixins.pxToRem(11)})),h=(0,l.Ay)("span",{name:d,slot:"LabelStyled"})(({theme:e})=>({margin:"0 4px"})),f=(e,{identity:t})=>{let a=r()(e,t);return a?{item:a,user:a.user?r()(e,a.user):void 0}:{}},v=(0,i.NgA)(f)(function({item:e,user:t,tagging:a,extra:i,onRemove:n,isTypePreview:r,forceShow:l}){var s;let d=a&&(null==e?void 0:null===(s=e.extra)||void 0===s?void 0:s.can_remove_tag_friend),[f,v]=c.useState(!1);return c.createElement(u,{px:e.px,py:e.py,tagging:a,hovering:f,forceShow:l},c.createElement(m,{onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},t&&!r?c.createElement(p,{user:t,hoverCard:!1,rootProps:{display:"inherit"}}):c.createElement(h,null,(null==t?void 0:t.full_name)||(null==e?void 0:e.content)),d?c.createElement(g,{disableRipple:!0,disableFocusRipple:!0,onClick(t){n(t,e.id)}},c.createElement(o.s4,{icon:"ico-close"})):null))})},68350(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(91557),n=a(73349),r=a(53975),o=a(76096),l=a(96540);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c({id:e}){let{useDialog:t,compactUrl:a}=(0,i.PCX)(),{dialogProps:c}=t(),d=(0,i.IgF)(o.Zt,o.hO,"addItemForm");return d?l.createElement(n.lG,s({},c,{fullWidth:!0,maxWidth:"xs","data-testid":"addPhotoAlbum"}),l.createElement(r.aI,{dialog:!0,dataSource:{apiMethod:d.apiMethod,apiUrl:a(d.apiUrl,{id:e})}})):null}},78735(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(91557),n=a(73349),r=a(96540),o=a(8051),l=a(60780);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c({id:e}){let{useDialog:t,i18n:a}=(0,i.PCX)(),{setDialogValue:c,dialogProps:d}=t();return r.createElement(n.lG,s({},d,{fullWidth:!0,maxWidth:"xs","data-testid":"androidSupportChoosePhoto"}),r.createElement(n.L3,null,a.formatMessage({id:"choose"})),r.createElement(n.Cf,null,r.createElement(o.A,{sx:{display:"flex",flexDirection:"column","& > button:not(:last-of-type)":{marginBottom:e=>e.spacing(2)}}},r.createElement(l.A,{role:"button",autoFocus:!0,variant:"contained",disableRipple:!0,size:"medium",color:"primary",onClick(){c("photo")}},a.formatMessage({id:"choose_from_library"})),r.createElement(l.A,{role:"button",autoFocus:!0,variant:"outlined",disableRipple:!0,size:"medium",color:"primary",onClick(){c("camera")}},a.formatMessage({id:"take_a_photo"})))))}},54237(e,t,a){a.r(t),a.d(t,{default:()=>F});var i=a(73349),n=a(91557),r=a(76096),o=a(80160),l=a(18579),s=a(43791),c=a(60780),d=a(96540),u=a(84680),m=a(30719),p=a(2491),g=a(16535),h=a(56525),f=a(85838);let v=(0,h.A)(e=>(0,f.A)({dialog:{"& .MuiDialog-paper":{maxWidth:"720px !important"}},dialogTitle:{height:50,maxWidth:720,display:"flex"},dialogContent:{padding:e.spacing(0,2,2,2),maxWidth:720,height:426,overflow:"hidden"},scroll:{marginTop:e.spacing(3),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"350px !important"}},scrollAlbum:{marginTop:e.spacing(2),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"406px !important"}},btnBack:{marginRight:`${e.spacing(1)} !important`,"& .ico":{flex:1}},tab:{height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(5),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main}}}),{name:"ChooseAlbumItemDialog"}),y={spacing:1},b={xs:12,sm:6,md:4,lg:4,xl:4},x=function({fileItems:e,uploadFiles:t,setFiles:a,isDetailAlbum:i,albumId:r,dataSource:o}){let{jsxBackend:l}=(0,n.PCX)(),s=v(),c=(0,m.A)(),h=(0,p.A)(c.breakpoints.down("sm")),f=l.get("photo.block.photoListingBlock"),x=e=>{let i=Boolean(t.find(t=>t.id===e.id));a((0,g.Ay)(t,a=>{if(i){let n=t.findIndex(t=>t.id===e.id);a.splice(n,1)}else a.push(e)}))};return d.createElement(u.P,{className:s.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:h?"90vh":352},d.createElement(f,{canLoadMore:!0,canLoadSmooth:!0,clearDataOnUnMount:!0,dataSource:o,itemView:"photo.itemView.selectPhotoProfile",emptyPage:"core.block.no_content",emptyPageProps:{title:"no_photos_found"},gridContainerProps:y,gridItemProps:b,itemProps:{fileItems:e,isDetailAlbum:i,albumId:r,onSuccess:x,files:t},blockLayout:"Profile - Clean Body Only",itemLayout:"Photo - Main Card - Listings"}))};var E=a(58935),C=a(40515),w=a(67725),A=a(3556),k=a(77299),S=a(97763);let P=(0,A.Ay)("div",{name:"MultipleUploadField",slot:"Root"})(({theme:e})=>({marginTop:e.spacing(3)})),_=(0,A.Ay)(c.A,{name:"DropButton",slot:"DropButton"})(({theme:e,isOver:t})=>({...t&&{backgroundColor:e.palette.action.hover}})),M=(0,A.Ay)("div",{name:"MultipleUploadField",slot:"PreviewItem"})(({theme:e})=>({width:"100%",paddingBottom:"56%",borderRadius:e.shape.borderRadius,background:e.palette.grey.A700,position:"relative",overflow:"hidden","&::before":{backgroundColor:e.palette.grey.A700,content:'""',display:"block",height:"100%",position:"absolute",width:"100%",borderRadius:e.spacing(1.2)}})),R=(0,A.Ay)("video",{name:"MultipleUploadField",slot:"PreviewVideo"})({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",maxWidth:"100%"}),I=(0,A.Ay)("div",{name:"MultipleUploadField",slot:"removeBtn"})(({theme:e})=>({width:e.spacing(3),height:e.spacing(3),borderRadius:e.spacing(1.5),backgroundColor:"rgba(0,0,0,0.89)",color:"#fff",position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"})),O=(0,A.Ay)("div",{name:"MultipleUploadField",slot:"AddMoreBtnWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",borderColor:e.palette.border.primary,borderStyle:"solid",borderWidth:1,borderRadius:e.shape.borderRadius,height:"100%",button:{width:"100% !important",height:"100% !important"},"&:before":{content:'""',display:"block",paddingBottom:"56%"}})),W=(0,A.Ay)("div",{name:"MultipleUploadField",slot:"PreviewVideoWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"})),z=(0,A.Ay)("div",{name:"MultipleUploadField",slot:"MaskPlay"})(({theme:e})=>({position:"absolute",width:e.spacing(5),height:e.spacing(5),color:"#fff",backgroundColor:"rgba(0,0,0,0.4)",borderRadius:"50%",left:"50%",top:"50%",marginLeft:e.spacing(-2.5),marginTop:e.spacing(-2.5),display:"flex",alignItems:"center",justifyContent:"center",fontSize:e.mixins.pxToRem(24)})),L=function({config:e,uploadFiles:t,setFiles:a,checkFilesSize:i}){let{accept:r}=e,{i18n:o,getSetting:l}=(0,n.PCX)(),s=(0,d.useRef)(),c=(0,m.A)(),g=(0,p.A)(c.breakpoints.down("sm")),h=l("photo.photo_allow_uploading_video_to_photo_album");t=t.filter(e=>!e.id);let f=()=>{s.current.click()},v=()=>{let e=s.current.files;e.length&&i(Object.values(e))},y=e=>a(t=>t.filter(t=>t.uid!==e));return d.createElement(u.P,{autoHide:!0,autoHeight:!0,autoHeightMax:g?"90vh":352},d.createElement(P,null,d.createElement("input",{ref:s,type:"file","aria-hidden":!0,className:"srOnly",multiple:!0,accept:r,onChange:v}),d.createElement(k.Ay,{container:!0,columnSpacing:1,rowSpacing:1},d.createElement(k.Ay,{item:!0,sm:6,md:4},d.createElement(O,null,d.createElement(_,{size:"large",color:"primary",startIcon:d.createElement(C.s4,{icon:"ico-photos-plus-o"}),sx:{fontWeight:"bold"},onClick:f},h?o.formatMessage({id:"select_files"}):o.formatMessage({id:"add_photos"})))),null==t?void 0:t.map((e,t)=>{var a;let i=(0,w.EL)(null==e?void 0:null===(a=e.file)||void 0===a?void 0:a.type)||(null==e?void 0:e.module_name)==="video",n=!w.un&&i;return d.createElement(k.Ay,{item:!0,key:e.uid,sm:6,md:4,xs:6},d.createElement(M,null,i?d.createElement(W,null,n?d.createElement(R,{src:null==e?void 0:e.source,controls:!1}):d.createElement(E.A,{item:e}),d.createElement(z,null,d.createElement(C.s4,{icon:"ico-play"}))):d.createElement(E.A,{item:e}),d.createElement(S.A,{title:o.formatMessage({id:"remove"})},d.createElement(I,{onClick:()=>y(e.uid)},d.createElement(C.s4,{icon:"ico-close"})))))}))))};var T=a(65639);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function F({config:e,fileItems:t,setFileItems:a,isDetailAlbum:u=!1,formik:m}){var p,g,h,f,y,b;let{useDialog:E,i18n:C,compactData:w}=(0,n.PCX)(),{dialogProps:A,closeDialog:k}=E(),S=v(),{dialogTitle:P,max_upload_filesize:_,upload_url:M,isVideoUploadAllowed:R,acceptFail:I,allowUploadItems:O=!0}=e||{},[W,z]=d.useState(O?0:1),[F,N,B]=(0,T.A)({initialValues:[],upload_url:M,maxSizeLimit:_,isAcceptVideo:R,messageAcceptFail:I}),D=(0,n.IgF)(r.Zt,"photo_album","selectFromMyPhotos"),H=(0,n.IgF)(r.Zt,"photo_album","selectFromGroupPhotos"),{apiUrl:$,apiParams:V}=H,X=(e,t)=>{z(t)},U=()=>{let e=F.map(e=>({...e,status:e.status||"update"}));a([...t,...e]),k(),u&&setImmediate(m.submitForm)};return d.createElement(i.lG,j({},A,{maxWidth:!1,fullWidth:!0,className:S.dialog}),d.createElement(i.L3,{className:S.dialogTitle},P||C.formatMessage({id:"add_photos_video"})),d.createElement(i.Cf,{className:S.dialogContent,sx:{overflow:"hidden !important"}},d.createElement(o.A,{value:W,onChange:X,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},O?d.createElement(l.A,{value:0,className:S.tab,disableRipple:!0,label:C.formatMessage({id:"upload"})}):null,d.createElement(l.A,{value:1,className:S.tab,disableRipple:!0,label:C.formatMessage({id:"select_from_my_photos"})}),m&&((null==m?void 0:null===(p=m.values)||void 0===p?void 0:p.owner_type)==="group"||(null==m?void 0:null===(g=m.values)||void 0===g?void 0:g.owner_type)==="page")&&d.createElement(l.A,{value:2,className:S.tab,disableRipple:!0,label:C.formatMessage({id:"select_from_owner_type_photos"},{owner_type:null==m?void 0:null===(h=m.values)||void 0===h?void 0:h.owner_type})})),0===W&&d.createElement(L,{config:e,uploadFiles:F,setFiles:N,checkFilesSize:e=>B(e,F)}),1===W&&d.createElement(x,{fileItems:t,uploadFiles:F,setFiles:N,isDetailAlbum:u,albumId:null==m?void 0:null===(f=m.values)||void 0===f?void 0:f.album,dataSource:D}),2===W&&d.createElement(x,{fileItems:t,uploadFiles:F,setFiles:N,isDetailAlbum:u,albumId:null==m?void 0:null===(y=m.values)||void 0===y?void 0:y.album,dataSource:{apiUrl:$,apiParams:w(V,{user_id:null==m?void 0:null===(b=m.values)||void 0===b?void 0:b.owner_id})}})),d.createElement(s.A,null,d.createElement(c.A,{"data-testid":"buttonSubmit",role:"button",id:"buttonSubmit",autoFocus:!0,color:"primary",size:"medium",variant:"contained",onClick:U,sx:{minWidth:120},disabled:!F.length},C.formatMessage({id:"add_to_album"}))))}},44719(e,t,a){a.r(t),a.d(t,{default:()=>x});var i=a(73349),n=a(91557),r=a(84680),o=a(40515),l=a(2491),s=a(63461),c=a(80160),d=a(18579),u=a(30719),m=a(96540),p=a(56525),g=a(85838);let h=(0,p.A)(e=>(0,g.A)({dialog:{"& .MuiDialog-paper":{maxWidth:"720px !important"}},dialogTitle:{height:50,maxWidth:720,display:"flex"},dialogContent:{padding:e.spacing(0,2,2,2),maxWidth:720,height:426,overflow:"hidden"},scroll:{marginTop:e.spacing(3),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"350px !important"}},scrollAlbum:{marginTop:e.spacing(2),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"406px !important"}},btnBack:{marginRight:`${e.spacing(1)} !important`,"& .ico":{flex:1}},tab:{height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(5),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main}}}),{name:"ChooseCoverPhoto"});var f=a(76096);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let y={spacing:1},b={xs:12,sm:6,md:4,lg:4,xl:4};function x({identity:e,onSuccess:t,onFailure:a}){let{useDialog:p,i18n:g,jsxBackend:x,compactData:E}=(0,n.PCX)(),{dialogProps:C,closeDialog:w}=p(),A=h(),k=m.useRef(),S=x.get("photo.block.photoListingBlock"),[P,_]=m.useState(50);m.useEffect(()=>{setTimeout(()=>{var e,t;let a=null===(t=null===(e=k.current)||void 0===e?void 0:e.getBoundingClientRect())||void 0===t?void 0:t.height;a&&_(a)},100)},[]);let[M,R]=m.useState(0),[I,O]=m.useState(0),[W,z]=m.useState(""),[L,T]=m.useState(""),j=(0,u.A)(),F=(0,l.A)(j.breakpoints.down("sm")),N=(0,n.IgF)(f.Zt,f.i3,"chooseAvatarCoverPhoto")||{},B=(0,n.IgF)(f.Zt,f.i3,"chooseAvatarCoverPhotoFromAlbum")||{},D=(0,n.IgF)(f.Zt,f.hO,"chooseAvatarCoverAlbum")||{apiUrl:"/photo-album"},H=e.split(".")[0],$=e.split(".")[3],V={close:w,onSuccess:t,onFailure:a,resource_name:H},X=`setCover/photo/${H}/${$}`,U={...N,apiParams:E(N.apiParams,{user_id:$})},G=`setCover/album/${H}/${$}`,q={...D,apiParams:E(D.apiParams,{user_id:$})},Z=`setCover/photo-album/${H}/${L}/${$}`,Y={...B,apiParams:E(B.apiParams,{album_id:L})},J=(e,t)=>{R(t)};return m.createElement(i.lG,v({},C,{maxWidth:!1,fullWidth:!0,className:A.dialog}),m.createElement(i.L3,{className:A.dialogTitle},1===I&&m.createElement(s.A,{size:"small",className:A.btnBack},m.createElement(o.s4,{icon:"ico-arrow-left",onClick:()=>O(0)})),0===I?g.formatMessage({id:"choose_from_photos"}):W),0===I&&m.createElement(i.Cf,{className:A.dialogContent,sx:{overflow:"hidden !important"}},m.createElement(c.A,{value:M,ref:k,onChange:J,indicatorColor:"primary",textColor:"primary"},m.createElement(d.A,{className:A.tab,disableRipple:!0,label:g.formatMessage({id:"latest_photos"})}),m.createElement(d.A,{className:A.tab,disableRipple:!0,label:g.formatMessage({id:"albums"})})),0===M&&m.createElement(r.P,{className:A.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:F?"100%":352,style:{height:F?`calc(100% - ${P}px)`:"auto"}},m.createElement(S,{canLoadMore:!0,canLoadSmooth:!0,clearDataOnUnMount:!0,dataSource:U,pagingId:X,itemView:"photo.itemView.choosePhoto",emptyPageProps:{title:"no_all_photo_found"},emptyPage:"core.block.no_content",gridContainerProps:y,gridItemProps:b,itemProps:V,blockLayout:"Profile - Clean Body Only"})),1===M&&m.createElement(r.P,{className:A.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:F?"100%":352,style:{height:F?`calc(100% - ${P}px)`:"auto"}},m.createElement(S,{canLoadMore:!0,canLoadSmooth:!0,dataSource:q,clearDataOnUnMount:!0,pagingId:G,emptyPage:"core.block.no_content",itemView:"photo_album.itemView.chooseCoverPhoto",emptyPageProps:{title:"no_albums_found"},gridContainerProps:y,gridItemProps:b,itemProps:{setId:e=>T(e),setStep:e=>O(e),setName:e=>z(e)},blockLayout:"Profile - Clean Body Only"}))),1===I&&m.createElement(i.Cf,{className:A.dialogContent,sx:{overflow:"hidden !important"}},m.createElement(r.P,{className:A.scrollAlbum,autoHide:!0,autoHeight:!0,autoHeightMax:F?"100%":400,style:{height:F?"100%":"auto"}},m.createElement(S,{canLoadMore:!0,canLoadSmooth:!0,clearDataOnUnMount:!0,dataSource:Y,pagingId:Z,emptyPage:"core.block.no_content",itemView:"photo.itemView.choosePhoto",emptyPageProps:{title:"no_all_photo_found"},gridContainerProps:y,gridItemProps:b,itemProps:V,blockLayout:"Profile - Clean Body Only"}))))}},63402(e,t,a){a.r(t),a.d(t,{default:()=>x});var i=a(73349),n=a(91557),r=a(84680),o=a(40515),l=a(2491),s=a(63461),c=a(80160),d=a(18579),u=a(30719),m=a(96540),p=a(56525),g=a(85838);let h=(0,p.A)(e=>(0,g.A)({dialog:{"& .MuiDialog-paper":{maxWidth:"720px !important"}},dialogTitle:{height:50,maxWidth:720,display:"flex"},dialogContent:{padding:e.spacing(0,2,2,2),maxWidth:720,height:426,overflow:"hidden"},scroll:{marginTop:e.spacing(3),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"350px !important"}},scrollAlbum:{marginTop:e.spacing(2),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"406px !important"}},btnBack:{marginRight:`${e.spacing(1)} !important`,"& .ico":{flex:1}},tab:{height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(5),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main}}}),{name:"ChooseCoverPhoto"});var f=a(76096);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let y={spacing:1},b={xs:12,sm:6,md:4,lg:4,xl:4};function x({identity:e,onSuccess:t,onFailure:a}){let{useDialog:p,i18n:g,jsxBackend:x,compactData:E}=(0,n.PCX)(),{dialogProps:C,closeDialog:w}=p(),A=h(),k=x.get("photo.block.photoListingBlock"),[S,P]=m.useState(0),[_,M]=m.useState(0),[R,I]=m.useState(""),[O,W]=m.useState(""),z=(0,u.A)(),L=(0,l.A)(z.breakpoints.down("sm")),T=(0,n.IgF)(f.Zt,f.i3,"chooseAvatarCoverPhoto")||{},j=(0,n.IgF)(f.Zt,f.i3,"chooseAvatarCoverPhotoFromAlbum")||{},F=(0,n.IgF)(f.Zt,f.hO,"chooseAvatarCoverAlbum")||{apiUrl:"/photo-album"},N=e.split(".")[0],B=e.split(".")[3],D={close:w,onSuccess:t,onFailure:a,resource_name:N},H=`setCover/photo/${N}/${B}`,$={...T,apiParams:E(T.apiParams,{user_id:B})},V=`setCover/album/${N}/${B}`,X={...F,apiParams:E(F.apiParams,{user_id:B})},U=`setCover/photo-album/${N}/${O}/${B}`,G={...j,apiParams:E(j.apiParams,{album_id:O})},q=(e,t)=>{P(t)};return m.createElement(i.lG,v({},C,{maxWidth:!1,fullWidth:!0,className:A.dialog}),m.createElement(i.L3,{className:A.dialogTitle},1===_&&m.createElement(s.A,{size:"small",className:A.btnBack},m.createElement(o.s4,{icon:"ico-arrow-left",onClick:()=>M(0)})),0===_?g.formatMessage({id:"choose_cover_photo"}):R),0===_&&m.createElement(i.Cf,{className:A.dialogContent,sx:{overflow:"hidden !important"}},m.createElement(c.A,{value:S,onChange:q,indicatorColor:"primary",textColor:"primary"},m.createElement(d.A,{className:A.tab,disableRipple:!0,label:g.formatMessage({id:"latest_photos"})}),m.createElement(d.A,{className:A.tab,disableRipple:!0,label:g.formatMessage({id:"albums"})})),0===S&&m.createElement(r.P,{className:A.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:L?"90vh":352,style:{height:"auto"}},m.createElement(k,{canLoadMore:!0,canLoadSmooth:!0,clearDataOnUnMount:!0,dataSource:$,pagingId:H,itemView:"photo.itemView.choosePhoto",emptyPage:"core.block.no_content",emptyPageProps:{title:"no_all_photo_found"},gridContainerProps:y,gridItemProps:b,itemProps:D,blockLayout:"Profile - Clean Body Only"})),1===S&&m.createElement(r.P,{className:A.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:L?"90vh":352,style:{height:"auto"}},m.createElement(k,{canLoadMore:!0,canLoadSmooth:!0,dataSource:X,clearDataOnUnMount:!0,pagingId:V,emptyPage:"core.block.no_content",emptyPageProps:{title:"no_albums_found"},itemView:"photo_album.itemView.chooseCoverPhoto",gridContainerProps:y,gridItemProps:b,itemProps:{setId:e=>W(e),setStep:e=>M(e),setName:e=>I(e)},blockLayout:"Profile - Clean Body Only"}))),1===_&&m.createElement(i.Cf,{className:A.dialogContent,sx:{overflow:"hidden !important"}},m.createElement(r.P,{className:A.scrollAlbum,autoHide:!0,autoHeight:!0,autoHeightMax:L?"90vh":400,style:{height:"auto"}},m.createElement(k,{canLoadMore:!0,clearDataOnUnMount:!0,dataSource:G,pagingId:U,emptyPage:"core.block.no_content",itemView:"photo.itemView.choosePhoto",gridContainerProps:y,gridItemProps:b,itemProps:D,blockLayout:"Profile - Clean Body Only",emptyPageProps:{title:"no_all_photo_found"}}))))}},75073(e,t,a){a.r(t),a.d(t,{default:()=>ey});var i=a(91557),n=a(73349),r=a(40515),o=a(3556),l=a(8051),s=a(54358),c=a(60780),d=a(96540),u=a(20053),m=a(56525),p=a(85838);let g=(0,m.A)(e=>(0,p.A)({root:{top:200,left:200,width:200,height:200,position:"absolute",transform:"translate3d(0, 0, 0)",boxSizing:"border-box",cursor:"move",boxShadow:"0 0 0 9999em rgba(0, 0, 0, 0.5)",touchAction:"manipulation",border:"1px solid rgba(255,255,255, 0.9)"},disabled:{cursor:"inherit","& $dragHandle":{cursor:"inherit"}},circular:{borderRadius:"50%",boxShadow:"0px 0px 1px 1px white, 0 0 0 9999em rgba(0, 0, 0, 0.5)"},rootInvisible:{display:"none"},dragHandle:{position:"absolute","&::after":{position:"absolute",content:"''",display:"block",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"rgba(255,255,255, 0.5)",border:"1px solid rgba(255, 255, 255, 0.7)",boxSizing:"border-box",outline:"1px solid transparent"}},ordNW:{top:"0",left:"0",marginTop:"-5px",marginLeft:"-5px",cursor:"nw-resize","&::after":{top:0,left:0}},ordN:{top:"0",left:"50%",marginTop:"-5px",marginLeft:"-5px",cursor:"n-resize","&::after":{top:"0"}},ordNE:{top:"0",right:"0",marginTop:"-5px",marginRight:"-5px",cursor:"ne-resize","&::after":{top:"0",right:"0"}},ordE:{top:"50%",right:"0",marginTop:"-5px",marginRight:"-5px",cursor:"e-resize","&::after":{right:"0"}},ordSE:{bottom:"0",right:"0",marginBottom:"-5px",marginRight:"-5px",cursor:"se-resize","&::after":{bottom:"0",right:"0"}},ordS:{bottom:"0",left:"50%",marginBottom:"-5px",marginLeft:"-5px",cursor:"s-resize","&::after":{bottom:"0"}},ordSW:{bottom:"0",left:"0",marginBottom:"-5px",marginLeft:"-5px",cursor:"sw-resize","&::after":{bottom:"0",left:"0"}},ordW:{top:"50%",left:"0",marginTop:"-5px",marginLeft:"-5px",cursor:"w-resize","&::after":{left:"0"}},dragBar:{position:"absolute","& $ordN":{top:"0",left:"0",width:"100%",height:"6px",marginTop:"-3px"},"& $ordE":{right:"0",top:"0",width:"6px",height:"100%",marginRight:"-3px"},"& $ordS":{bottom:"0",left:"0",width:"100%",height:"6px",marginBottom:"-3px"},"& $ordW":{top:"0",left:"0",width:"6px",height:"100%",marginLeft:"-3px"}},fixedAspect:{"& $dragHandle.$ordN":{display:"none"},"& $dragHandle.$ordE":{display:"none"},"& $dragHandle.$ordS":{display:"none"},"& $dragHandle.$ordW":{display:"none"}},"@media (pointer: coarse)":{ordN:{display:"none"},ordE:{display:"none"},ordS:{display:"none"},ordW:{display:"none"},dragHandle:{width:"24px",height:"24px"}}}),{name:"ImageCropperSelection"}),h=d.forwardRef(function({onMounted:e,onMouseDown:t,onTouchStart:a,style:i},n){let r=g();return d.useEffect(()=>{e&&e()},[]),d.createElement("div",{onMouseDown:t,onTouchStart:a,className:r.root,style:i,ref:n},d.createElement("div",{className:(0,u.default)(r.dragBar,r.ordN),"data-ord":"n"}),d.createElement("div",{className:(0,u.default)(r.dragBar,r.ordE),"data-ord":"e"}),d.createElement("div",{className:(0,u.default)(r.dragBar,r.ordS),"data-ord":"s"}),d.createElement("div",{className:(0,u.default)(r.dragBar,r.ordW),"data-ord":"w"}),d.createElement("div",{className:(0,u.default)(r.dragHandle,r.ordNW),"data-ord":"nw"}),d.createElement("div",{className:(0,u.default)(r.dragHandle,r.ordN),"data-ord":"n"}),d.createElement("div",{className:(0,u.default)(r.dragHandle,r.ordNE),"data-ord":"ne"}),d.createElement("div",{className:(0,u.default)(r.dragHandle,r.ordE),"data-ord":"e"}),d.createElement("div",{className:(0,u.default)(r.dragHandle,r.ordSE),"data-ord":"se"}),d.createElement("div",{className:(0,u.default)(r.dragHandle,r.ordS),"data-ord":"s"}),d.createElement("div",{className:(0,u.default)(r.dragHandle,r.ordSW),"data-ord":"sw"}),d.createElement("div",{className:(0,u.default)(r.dragHandle,r.ordW),"data-ord":"w"}))});function f(e){let t,a;return e.touches?[{pageX:t,pageY:a}]=e.touches:{pageX:t,pageY:a}=e,{x:t,y:a}}function v(e,t,a){return Math.min(Math.max(e,t),a)}function y(e){return"n"===e?"s":"ne"===e?"sw":"e"===e?"w":"se"===e?"nw":"s"===e?"n":"sw"===e?"ne":"w"===e?"e":"nw"===e?"se":e}function b(e,t,a){return"%"===e.unit?e:{unit:"%",aspect:e.aspect,x:e.x/t*100,y:e.y/a*100,width:e.width?e.width/t*100:100,height:e.height?e.height/a*100:100}}function x(e,t,a){return"px"===e.unit?e:{unit:"px",aspect:e.aspect,x:e.x*t/100,y:e.y*a/100,width:e.width?e.width*t/100:t,height:e.height?e.height*a/100:a}}let E={x:0,y:0,unit:"px",aspect:0},C={xOrds:["e","w"],yOrds:["n","s"],xyOrds:["nw","ne","se","sw"],nudgeStep:1,nudgeStepMedium:10,nudgeStepLarge:100};var w=a(40244);let A=e=>(0,p.A)({root:{fontSize:"1rem",justifyContent:"flex-start !important",marginBottom:"12px !important","&.Mui-disabled":{"& .MuiButton-startIcon":{borderColor:`${e.palette.action.disabled} !important`}}},startIcon:{width:"32px",height:"32px",fontSize:"15px",borderRadius:"50%",alignItems:"center",textAlign:"center",lineHeight:"32px",justifyContent:"center",border:`1px solid ${e.palette.primary.main}`},label:{}}),k=(0,w.A)(A)(c.A);var S=a(67725),P=a(20106),_=a(92800);let M="PhotoTag",R=(0,o.Ay)("div",{name:M,slot:"root",shouldForwardProp:e=>"tagging"!==e&&"px"!==e&&"py"!==e&&"hovering"!==e&&"forceShow"!==e})(({theme:e,tagging:t,px:a,py:i,hovering:n,forceShow:r})=>({position:"absolute",width:t?10:100,height:t?10:100,transform:"translate(-50%,-50%)","&:hover > div:first-of-type":{visibility:"visible"},...(t||r)&&{"& > div:first-of-type":{visibility:"visible"}},zIndex:n?10:"auto",...a&&i&&{left:`${a}%`,top:`${i}%`}})),I=(0,o.Ay)("div",{name:M,slot:"Item"})(({theme:e})=>({position:"absolute",backgroundColor:"dark"===e.palette.mode?"rgba(0,0,0,.6)":"rgba(255,255,255,.8)",borderRadius:e.shape.borderRadius,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"120px",textAlign:"center",display:"flex",alignItems:"center",padding:e.spacing(.5),transform:"translate(-50%,-50%)",left:"50%",top:"50%",visibility:"hidden"})),O=(0,o.Ay)(c.A,{name:M,slot:"ButtonStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.grey["800"],minWidth:"11px",padding:e.spacing(.5,1),margin:e.spacing(-.5),fontSize:e.mixins.pxToRem(11)})),W=(0,o.Ay)("span",{name:M,slot:"LabelStyled"})(({theme:e})=>({margin:"0 4px"}));function z({content:e,px:t,py:a,tagging:i,onRemove:n,forceShow:o,user:l}){let[s,c]=d.useState(!1);return d.createElement(R,{px:t,py:a,tagging:i,hovering:s,forceShow:o},d.createElement(I,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},d.createElement(W,null,(null==e?void 0:e.label)||(null==l?void 0:l.full_name)),i?d.createElement(O,{disableRipple:!0,disableFocusRipple:!0,onClick:t=>n(t,null==e?void 0:e.id)},d.createElement(r.s4,{icon:"ico-close"})):null))}var L=a(76471);let T=(0,m.A)(e=>(0,p.A)({root:{},image:{maxWidth:"100%",maxHeight:"100vh",float:"left",opacity:0,[e.breakpoints.down("sm")]:{maxHeight:"350px"}},imageHeightAuto:{maxHeight:"initial",[e.breakpoints.down("sm")]:{maxHeight:"350px"}},visibleImage:{opacity:1},boxFake:{position:"absolute",top:0,right:0,left:0,objectFit:"cover",display:"flex",alignItems:"center",justifyContent:"center"},imageFake:{width:"100%",height:"auto"},actionBar:{position:"absolute",right:0,top:0,padding:e.spacing(1),display:"flex",justifyContent:"flex-end",zIndex:1,alignItems:"center"},tagFriend:{color:"#fff !important",width:32,height:32,fontSize:e.mixins.pxToRem(15)},dropDown:{color:"#fff",minWidth:"32px",height:"32px",fontSize:e.mixins.pxToRem(15)},taggedBox:{position:"absolute",left:0,top:0,width:"100px",height:"100px",border:"2px solid",borderColor:e.palette.background.paper,boxShadow:e.shadows[20],transform:"translate(-50%,-50%)"},suggestFriend:{backgroundColor:e.mixins.backgroundColor("paper"),marginTop:"10px",marginLeft:"-70px",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,"&  .MuiFilledInput-root":{background:"none"}},smallAvatar:{width:"24px",height:"24px",marginRight:e.spacing(1)},whoIsThis:{height:"100px",width:"100%"},popper:{zIndex:e.zIndex.snackbar,backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(1),boxShadow:e.shadows[20],borderRadius:e.shape.borderRadius,margin:e.spacing(1,0),width:"240px","& .MuiAutocomplete-paper":{boxShadow:"none"},"& .MuiAutocomplete-listbox":{padding:0},"& .MuiAutocomplete-option":{borderRadius:e.shape.borderRadius,padding:"6px 8px"},"& .MuiAutocomplete-root":{maxWidth:"224px"},"& .MuiFilledInput-underline:after":{display:"none"},"& .MuiAutocomplete-endAdornment":{display:"none"},"& .MuiFilledInput-underline:before":{display:"none"},"& .MuiFilledInput-root":{background:"none",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius},"& .MuiAutocomplete-noOptions":{padding:e.spacing(1.5,1)}},tagItem:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(.5,1),textAlign:"left",cursor:"pointer","&:hover":{background:e.palette.action.selected,borderRadius:e.shape.borderRadius/2}},userName:{flexGrow:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",fontSize:e.mixins.pxToRem(14)},inputBaseBox:{"& input":{width:"100%",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,padding:e.spacing(1),fontSize:e.mixins.pxToRem(15),"&:focus":{border:e.mixins.border("secondary"),outline:"none"}}},message:{color:"#fff",margin:e.spacing(0,1)},iconButton:{color:"white"},clear:{clear:"both"}}),{name:"EditPreviewPhotoTag"});var j=a(67338),F=a(55074),N=a(20687),B=a(97763),D=a(92885),H=a(84058),$=a.n(H),V=a(97200),X=a.n(V);let U="UploadThumbnail",G={width:2,right:0,position:"absolute",opacity:0,display:"none"},q=(0,o.Ay)(c.A,{name:"AddPhotoButton"})(({theme:e})=>({fontWeight:"bold",margin:e.spacing(0,2),height:"auto"})),Z=(0,o.Ay)(N.A,{name:"Root"})(({theme:e})=>({margin:e.spacing(2,0,1),overflow:"hidden"})),Y=(0,o.Ay)("div",{name:"Preview"})(({theme:e})=>({marginTop:-5,borderRadius:4,width:"100%",maxWidth:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",position:"relative","& button":{"& + button":{marginLeft:e.spacing(1)}}})),J=(0,o.Ay)("div",{name:"RemoveBtn",slot:"removeBtn"})(({theme:e})=>({width:e.spacing(3),height:e.spacing(3),borderRadius:e.spacing(1.5),backgroundColor:"rgba(0,0,0,0.89)",color:"#fff",position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"})),Q=(0,o.Ay)("div",{name:"Controls",slot:"Controls"})(({theme:e})=>({borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:0,left:0,width:"100%",height:"100%"})),K=(0,o.Ay)("div",{name:"ImageWrapper",slot:"ImageWrapper",shouldForwardProp:e=>"haveError"!==e&&"hoverState"!==e})(({theme:e,haveError:t,hoverState:a})=>({height:"150px",width:"100%",maxWidth:"100%",overflow:"hidden",position:"relative",borderStyle:"solid",borderWidth:"1px",borderColor:"light"===e.palette.mode?"#0000003b":"rgba(255, 255, 255, 0.23)",borderRadius:4,...a&&{borderColor:"light"===e.palette.mode?"#000":"#fff"},...t&&{borderColor:e.palette.error.main}})),ee=(0,o.Ay)("div",{name:"LinkChange"})(({theme:e})=>({marginTop:e.spacing(1),marginBottom:e.spacing(1),cursor:"pointer"}));function et({config:e,value:t,setValue:a}){let{preview_url:n,aspectRatio:o="169",accept:l="image/*",isDropFile:s=!1}=e||{},{dialogBackend:c,i18n:u,useIsMobile:m,ParserPreviewPhoto:p,getSetting:g}=(0,i.PCX)(),h=g("core.attachment.maximum_file_size_each_attachment_can_be_uploaded"),f=h||0,v=d.useMemo(()=>{if(null==n?void 0:n.image)return(0,S.AE)(null==n?void 0:n.image,"500")},[n]),[y,b]=(0,d.useState)(v),[x,E]=(0,d.useState)(Boolean(y)),C=(0,d.useRef)(),[w,A]=(0,d.useState)(!1),k=o.replace(":",""),P=m();d.useEffect(()=>{(null==n?void 0:n.file)&&(0,F.t)(null==n?void 0:n.file,e=>{b(e),E(!0)})},[null==n?void 0:n.file]);let _=()=>{C.current.click()},M=(e,t)=>{var i;let n=t||C.current.files;if(!n&&!n.length)return;let r=(0,S.EL)(n[0].type)?"video":"photo",o={id:0,uid:X()("file"),source:URL.createObjectURL(n[0]),file:n[0],file_name:n[0].name,file_size:n[0].size,file_type:r,fileItemType:"photo",status:"new",upload_url:"/file",extension:(0,S.QC)(n[0].name),thumbnail_sizes:["150","240","500"]},s=o.file.size;if(s>f&&0!==f){c.alert({message:u.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,S.Tu)(o.file_name,30),fileSize:(0,S.lT)(o.file.size),maxSize:(0,S.lT)(f)})});return}if(!(0,S.HH)(null==o?void 0:null===(i=o.file)||void 0===i?void 0:i.type,l)){c.alert({message:u.formatMessage({id:"file_accept_type_fail"})}),(null==C?void 0:C.current)&&(C.current.value=null);return}o&&(b(o.source),E(!0),a(o))},R=()=>{b(null),E(!1),a("new"===t.status?void 0:{status:"remove"})},I=e=>{e.currentTarget.value=null},O=e=>{if(!e.length)return;let t=Object.assign({length:e.length},e);t&&M(null,t)},W=e=>{var t;a({...e.preUploadFile,status:"new"}),b(null==e?void 0:null===(t=e.preUploadFile)||void 0===t?void 0:t.url),E(!0)};return x?d.createElement(d.Fragment,null,d.createElement(Z,{fullWidth:!0,variant:"outlined",margin:"normal","data-testid":$()(`field ${U}`)},d.createElement(K,{hoverState:w,isMobile:P},d.createElement(p,{item:t,onParse:W},d.createElement(Y,{onMouseOver:()=>A(!0),onMouseLeave:()=>A(!1)},d.createElement(r._V,{src:y,aspectRatio:k,backgroundImage:!0}),d.createElement(B.A,{title:u.formatMessage({id:"remove"})},d.createElement(J,{onClick:R,"data-testid":$()(`button_remove ${U}`)},d.createElement(r.s4,{icon:"ico-close"})))))),d.createElement(ee,null,d.createElement(D.A,{onClick:_,color:"primary","data-testid":$()(`button add ${U}`)},u.formatMessage({id:"change"})))),d.createElement("input",{onClick:I,ref:C,type:"file","aria-hidden":!0,accept:l,style:G,"data-testid":$()(`input ${U}`),onChange:M})):d.createElement(Z,{variant:"outlined",margin:"normal","data-testid":$()(`field ${U}`)},s?d.createElement(r.dl,{onDrop:e=>O(e),render:({canDrop:e,isOver:t})=>d.createElement(K,{hoverState:w,isMobile:P},d.createElement(r._V,{src:y,aspectRatio:k,backgroundImage:!0}),d.createElement(Q,{role:"button",onClick:_,onMouseOver:()=>A(!0),onMouseLeave:()=>A(!1)},d.createElement(q,{size:"small",color:"primary",variant:"outlined","data-testid":$()(`button add ${U}`),startIcon:d.createElement(r.s4,{icon:"ico-photo-plus-o"})},u.formatMessage({id:"choose_a_thumbnail"}))))}):d.createElement(K,{hoverState:w,isMobile:P},d.createElement(r._V,{src:y,aspectRatio:k,backgroundImage:!0}),d.createElement(Q,{role:"button",onClick:_,onMouseOver:()=>A(!0),onMouseLeave:()=>A(!1)},d.createElement(q,{size:"small",color:"primary",variant:"outlined","data-testid":$()(`button add ${U}`),startIcon:d.createElement(r.s4,{icon:"ico-photo-plus-o"})},u.formatMessage({id:"choose_a_thumbnail"})))),d.createElement("input",{onClick:I,ref:C,type:"file","aria-hidden":!0,accept:l,"data-testid":$()(`input ${U}`),onChange:M,style:G}))}function ea(){return(ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let ei=(0,o.Ay)(n.Cf,{name:"DialogContentWrapper"})(({theme:e})=>({display:"flex",flexDirection:"row",[e.breakpoints.down("sm")]:{flexDirection:"column-reverse"}})),en=(0,o.Ay)("div",{name:"LeftSide"})(({theme:e})=>({width:360,maxWidth:"100%",display:"flex",flexDirection:"column",paddingRight:e.spacing(2),[e.breakpoints.down("sm")]:{width:"100%",padding:0,marginTop:e.spacing(2)}})),er=(0,o.Ay)("div",{name:"LeftSideActions"})(({theme:e})=>({display:"flex",flex:1,flexDirection:"column",marginBottom:e.spacing(2),[e.breakpoints.down("sm")]:{flexDirection:"row",marginBottom:e.spacing(1),justifyContent:"center","& button":{minWidth:"auto"}}})),eo=(0,o.Ay)("div",{name:"MainContent"})(({theme:e})=>({display:"flex",flexDirection:"column",backgroundColor:e.palette.background.default,maxWidth:"100%",position:"relative",textAlign:"center",flex:1,minWidth:0,height:"auto",aspectRatio:"1"})),el=(0,o.Ay)("div",{name:"LeftSideBottom"})(({theme:e})=>({display:"flex",flexDirection:"row","& > :first-of-type":{marginRight:e.spacing(1)},[e.breakpoints.down("sm")]:{justifyContent:"end"}})),es=(0,o.Ay)("div",{name:"Backdrop"})(({theme:e})=>({backgroundColor:e.mixins.backgroundColor("paper"),textAlign:"center",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,right:0,top:0,bottom:0})),ec=(0,o.Ay)("div",{name:"BlurContainer"})(({theme:e})=>({width:"10%",height:"10%",transform:"scale(14)",filter:"blur(3px)",WebkitFilter:"blur(3px)"})),ed=(0,o.Ay)("img",{name:"BlurImg"})(({theme:e})=>({objectFit:"cover",width:"100%",height:"100%",border:0})),eu=(0,o.Ay)("div",{name:"Mask"})(({theme:e})=>({position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)"})),em=(0,o.Ay)("div",{name:"MediaContainer"})(({theme:e})=>({position:"relative",maxWidth:"100%",height:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:e.spacing(2),flexGrow:1})),ep=(0,o.Ay)("div",{name:"MediaWrapper"})(({theme:e})=>({maxHeight:"100%",position:"relative",justifyContent:"center",alignItems:"center",display:"flex"})),eg=(0,o.Ay)("div",{name:"ImageError"})(({theme:e})=>({color:"white",fontSize:e.mixins.pxToRem(20)})),eh=(0,o.Ay)("img",{name:"LargeImage"})(({theme:e})=>({maxWidth:"100%",maxHeight:"100%",objectFit:"contain",position:"relative",pointerEvents:"none"})),ef={top:0,left:0,width:"100%",height:"100%"},ev=e=>({x:null==e?void 0:e.left,y:null==e?void 0:e.top,width:null==e?void 0:e.width,height:null==e?void 0:e.height}),ey=function({classes:e,dialogTitle:t="edit_photos",item:a,hideTextField:o=!1,tagging:u,postAsParent:m,parentUser:p}){var g,w,A,M,R,I;let{useDialog:O,i18n:W}=(0,i.PCX)(),{dialogProps:F,closeDialog:N,setDialogValue:B}=O(),[D]=d.useState(a),[H,$]=d.useState("loading"),[V,X]=d.useState(0),[U,G]=d.useState({x:0,y:0}),[q,Z]=d.useState(u?"tag":void 0),Y=d.useRef(),J=d.useRef(),Q=d.useRef(),K=d.useRef(),ee=(0,S.AE)(null==D?void 0:D.image),[ey,eb]=d.useState(D.base64||D.source||ee),ex=d.useRef(),eE=d.useRef((null==D?void 0:D.tagged_friends)||[]),[eC,ew]=d.useState((null==D?void 0:D.tagged_friends)||[]),eA=T(),{user:ek}=(0,i.wVH)(),eS=(0,i.alo)(),eP=e=>{ew(t=>[...t,e])},e_=(e,t)=>{e.stopPropagation(),ew(e=>e.filter(e=>{var a;return(null===(a=e.content)||void 0===a?void 0:a.id)!==t}))},eM=(e,t)=>{e.stopPropagation(),ew(e=>e.filter(e=>e.id!==t))},{onClickImageBox:eR,setTagging:eI,tagging:eO,offsetTag:eW,openTagBox:ez,chooseFriendToTag:eL}=function({imageRef:e,onAddPhotoTag:t,onRemovePhotoTag:a,ready:i}){let[n,r]=d.useState({px:0,py:0}),[o,l]=d.useState(!1),[s,c]=d.useState(!1),[u,m]=d.useState({width:0,height:0}),p=e=>{let t=e.getBoundingClientRect();m({width:t.width,height:t.height})},g=e=>{if(!s)return;let t=e.currentTarget.getBoundingClientRect(),a=Math.max(Math.min(e.clientX-t.left,u.width-50),50)/u.width*100,i=Math.max(Math.min(e.clientY-t.top,u.height-50),50)/u.height*100;r({px:a,py:i}),s&&l(!0)},h=e=>{let{px:a,py:i}=n;t({content:e,px:a,py:i}),l(!1)};return d.useEffect(()=>{i&&(null==e?void 0:e.current)&&p(null==e?void 0:e.current)},[i,null==e?void 0:e.current]),{chooseFriendToTag:h,onClickImageBox:g,tagging:s,setTagging:c,offsetTag:n,openTagBox:o}}({imageRef:Q,onAddPhotoTag:eP,ready:"success"===H}),eT=d.useMemo(()=>null!==(R=null==D?void 0:D.text)&&void 0!==R?R:"",[null==D?void 0:D.text]),ej=d.useMemo(()=>null!==(I=null==D?void 0:D.thumbnail)&&void 0!==I?I:void 0,[null==D?void 0:D.thumbnail]),[eF,eN]=d.useState(eT),[eB,eD]=d.useState(ej),[eH,e$]=d.useState(),eV=d.useCallback(()=>{$("success")},[]),eX=d.useCallback(()=>{$("error")},[]),eU=d.useCallback((e,t)=>{},[]),{getCropStyle:eG,onFulfillSelection:eq,cropSelectionStyle:eZ,onComponentMouseTouchDown:eY,onCropMouseTouchDown:eJ}=function({imageContainerRef:e,imageWrapperRef:t,cropSelectionRef:a,imageRef:i,crop:n,minWidth:r=0,maxWidth:o=0,minHeight:l=0,maxHeight:s=0,disabled:c,locked:u,keepSelection:m,onComplete:p,onChange:g,onDragStart:h,onDragEnd:w}){let A=e.current,k=d.useRef(),[S,P]=d.useState({}),_=d.useRef(!1),M=d.useRef(!1),R=d.useRef(Object.assign({},E,n)),I=d.useCallback(()=>{if(!t.current)return{width:0,height:0};let{clientWidth:e,clientHeight:a}=t.current;return{width:e,height:a}},[t]),O=d.useCallback(e=>{let t=R.current,{width:a,height:i}=I();return"px"===e?x(t,a,i):b(t,a,i)},[I]),W=d.useCallback(()=>{let{clientTop:e=0,clientLeft:t=0}=window.document.documentElement||{};return{clientTop:e,clientLeft:t}},[]),z=d.useCallback(()=>{let{pageYOffset:e=0,pageXOffset:t=0}=window;return{pageYOffset:e,pageXOffset:t}},[]),L=d.useCallback(e=>{let t=e.getBoundingClientRect(),a=W(),i=z(),n=t.top+i.pageYOffset-a.clientTop,r=t.left+i.pageXOffset-a.clientLeft;return{top:n,left:r}},[W,z]),T=d.useCallback(()=>{let e=O("%");return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}},[O]),j=d.useCallback(()=>{let e;let{width:t,height:a}=I(),i=R.current,n=k.current.cropStartWidth+k.current.xDiff;return k.current.xCrossOver&&(n=Math.abs(n)),n=v(n,r,o||t),e=i.aspect?n/i.aspect:k.current.cropStartHeight+k.current.yDiff,k.current.yCrossOver&&(e=Math.min(Math.abs(e),k.current.cropStartY)),e=v(e,l,s||a),i.aspect&&(n=v(e*i.aspect,0,t)),{width:n,height:e}},[I,s,o,l,r]),F=d.useCallback(()=>{let e=O("px"),{width:t,height:a}=I();return e.x=v(k.current.cropStartX+k.current.xDiff,0,t-e.width),e.y=v(k.current.cropStartY+k.current.yDiff,0,a-e.height),e},[I,O]),N=d.useCallback(()=>{let e=O("px"),{width:t,height:i}=I();if(e.width=t,e.height=i,e.x=0,e.y=0,g&&g(x(e,t,i),b(e,t,i)),e.width&&e.height){let{left:n,top:r,width:o,height:l}=T();a.current.style.left=n,a.current.style.top=r,a.current.style.width=o,a.current.style.height=l}},[a,T,I,O,g]),B=d.useCallback(()=>{!r&&(!k.current.xCrossOver&&0<=-Math.abs(k.current.cropStartWidth)-k.current.xDiff||k.current.xCrossOver&&0>=-Math.abs(k.current.cropStartWidth)-k.current.xDiff)&&(k.current.xCrossOver=!k.current.xCrossOver),!l&&(!k.current.yCrossOver&&0<=-Math.abs(k.current.cropStartHeight)-k.current.yDiff||k.current.yCrossOver&&0>=-Math.abs(k.current.cropStartHeight)-k.current.yDiff)&&(k.current.yCrossOver=!k.current.yCrossOver);let e=k.current.xCrossOver!==k.current.startXCrossOver,t=k.current.yCrossOver!==k.current.startYCrossOver;k.current.inversedXOrd=!!e&&y(k.current.ord),k.current.inversedYOrd=!!t&&y(k.current.ord)},[l,r]),D=d.useCallback(()=>{let e=O("px"),{ord:t}=k.current;k.current.xInversed&&(k.current.xDiff-=2*k.current.cropStartWidth,k.current.xDiffPc-=2*k.current.cropStartWidth),k.current.yInversed&&(k.current.yDiff-=2*k.current.cropStartHeight,k.current.yDiffPc-=2*k.current.cropStartHeight);let a=j(),i=k.current.cropStartX,n=k.current.cropStartY;k.current.xCrossOver&&(i=e.x+(e.width-a.width)),k.current.yCrossOver&&(n=!1===k.current.lastYCrossover?e.y-a.height:e.y+(e.height-a.height));let r=R.current,{width:o,height:l}=I(),s=function(e,t,a,i){let n=x(t,a,i),r=x(e,a,i),o={...n};if(!n.aspect)return 0>n.x?(o.x=0,o.width+=n.x):n.x+n.width>a&&(o.width=a-n.x),n.y+n.height>i&&(o.height=i-n.y),o;let l=!1;0>n.x?(o.x=0,o.width+=n.x,o.height=o.width/n.aspect,l=!0):n.x+n.width>a&&(o.width=a-n.x,o.height=o.width/n.aspect,l=!0),l&&r.y>o.y&&(o.y=n.y+(n.height-o.height));let s=!1;return o.y+o.height>i&&(o.height=i-n.y,o.width=o.height*n.aspect,s=!0),s&&r.x>o.x&&(o.x=n.x+(n.width-o.width)),o}(r,{unit:e.unit,x:i,y:n,width:a.width,height:a.height,aspect:e.aspect},o,l);return e.aspect||-1<C.xyOrds.indexOf(t)?(e.x=s.x,e.y=s.y,e.width=s.width,e.height=s.height):-1<C.xOrds.indexOf(t)?(e.x=s.x,e.width=s.width):-1<C.yOrds.indexOf(t)&&(e.y=s.y,e.height=s.height),k.current.lastYCrossover=k.current.yCrossOver,B(),e},[B,I,j,O]),H=(0,d.useCallback)(e=>{let t;let i=R.current;if(c||!_.current)return;e.preventDefault(),!M.current&&(M.current=!0,h&&h(e));let n=f(e);if(k.current.isResize&&i.aspect&&k.current.cropOffset&&(n.y=X(n.x)),k.current.xDiff=n.x-k.current.clientStartX,k.current.yDiff=n.y-k.current.clientStartY,(t=k.current.isResize?D():F())!==i){let{width:r,height:o}=I();g&&g(x(t,r,o),b(t,r,o))}if(t.width&&t.height){if(!a.current)return;let{left:l,top:s,width:d,height:u}=T();a.current.style.left=l,a.current.style.top=s,a.current.style.width=d,a.current.style.height=u}},[]),$=d.useCallback(e=>{if(V(),c)return;let t=R.current;if(_.current){_.current=!1,M.current=!1;let{width:a,height:i}=I();w&&w(e),p&&p(x(t,a,i),b(t,a,i)),P(e=>({...e,cropIsActive:!1,newCropIsBeingDrawn:!1}))}},[c,I,p,w,V]);var V=d.useCallback(()=>{A&&(A.removeEventListener("mousemove",H),A.removeEventListener("touchmove",H),A.removeEventListener("mouseup",$),A.removeEventListener("touchend",$),A.removeEventListener("touchcancel",$))},[A,$,H]);let X=d.useCallback(e=>{let t,a;let{ord:i,cropOffset:n,cropStartWidth:r,cropStartHeight:o}=k.current;return"nw"===i||"se"===i?(t=o/r,a=n.top-n.left*t):(t=-o/r,a=n.top+(o-n.left*t)),t*e+a},[]),U=d.useCallback(()=>{A.addEventListener("mousemove",H),A.addEventListener("touchmove",H,{passing:!1}),A.addEventListener("mouseup",$),A.addEventListener("touchend",$,{passing:!1}),A.addEventListener("touchcancel",$,{passing:!1})},[A,$,H]),G=t=>{let i;let n=R.current,{width:r,height:o}=I(),l=x(n,r,o);if(c)return;t.preventDefault(),U();let s=f(t);e.current.setActive?e.current.setActive({preventScroll:!0}):e.current.focus({preventScroll:!0});let{ord:d}=t.target.dataset,u="nw"===d||"w"===d||"sw"===d,m="nw"===d||"n"===d||"ne"===d;l.aspect&&(i=L(a.current)),k.current={clientStartX:s.x,clientStartY:s.y,cropStartWidth:l.width,cropStartHeight:l.height,cropStartX:u?l.x+l.width:l.x,cropStartY:m?l.y+l.height:l.y,xInversed:u,yInversed:m,xCrossOver:u,yCrossOver:m,startXCrossOver:u,startYCrossOver:m,isResize:t.target.dataset.ord,ord:d,cropOffset:i,xDiff:0,yDiff:0,xDiffPc:0,yDiffPc:0},_.current=!0,P(e=>({...e,cropIsActive:!0}))},q=a=>{var i;let n=R.current;if(!t.current)return;let r=t.current.firstChild;if(a.target!==r||!r.contains(a.target)||c||u||m&&(i=n)&&!isNaN(i.width)&&!isNaN(i.height))return;a.preventDefault(),U();let o=f(a);e.current.setActive?e.current.setActive({preventScroll:!0}):e.current.focus({preventScroll:!0});let l=L(t.current),s=o.x-l.left,d=o.y-l.top,p={unit:"px",aspect:n?n.aspect:void 0,x:s,y:d,width:0,height:0};k.current={clientStartX:o.x,clientStartY:o.y,cropStartWidth:p.width,cropStartHeight:p.height,cropStartX:p.x,cropStartY:p.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw",xDiff:0,yDiff:0,xDiffPc:0,yDiffPc:0},_.current=!0;let{width:h,height:v}=I();g&&g(x(p,h,v),b(p,h,v)),P(e=>({...e,cropIsActive:!0,newCropIsBeingDrawn:!0}))},Z=d.useCallback(()=>{let e=O("%"),t=0!==e.x||0!==e.y||100!==e.height||100!==e.width;return[t,e]},[O]);return{getCropStyle:T,cropSelectionStyle:T(),onFulfillSelection:N,getCropValue:Z,onCropMouseTouchDown:G,onComponentMouseTouchDown:q}}({imageContainerRef:Y,imageWrapperRef:J,imageRef:Q,cropSelectionRef:K,onChange:eU}),eQ=d.useCallback(()=>{"crop"!==q&&Z("crop")},[q]),eK=d.useCallback(()=>{G(e=>({...e,x:e.x?0:1})),"flip"!==q&&Z("flip")},[q]),e0=d.useCallback(()=>{G(e=>({...e,y:e.y?0:1})),"flip"!==q&&Z("flip")},[q]),e1=d.useCallback(()=>{"rotate"!==q&&Z("rotate"),X(e=>(e+90)%360)},[q]),e5=d.useCallback(()=>{"tag"!==q&&Z("tag")},[q]);d.useEffect(()=>{eI("tag"===q)},[q,eI]);let e4=d.useCallback(()=>{"tag"===q&&ew(eE.current),eb(ey||D.source||ee),Z(void 0),G({x:0,y:0}),X(0)},[D.source,ee,ey,eE.current,q]),e3=async()=>{let e="crop"===q?eG():ef,t=ev(e),a=await (0,S.nJ)(eH||ey,t,"base64",V,!!(null==U?void 0:U.x),!!(null==U?void 0:U.y),"%");return G({x:0,y:0}),X(0),a&&e$(a),!0},e2=d.useCallback(async()=>{if("tag"===q)eE.current=eC,Z(null);else{let e=await e3();e&&Z(null)}},[eF,eZ,ey,V,U]),e6=d.useCallback(()=>{B({thumbnail:eB,text:eF,base64:eH,tagged_friends:eC.map(e=>{var t,a;return{...e,user_id:(null===(t=e.content)||void 0===t?void 0:t.id)||(null===(a=e.user)||void 0===a?void 0:a.id)}})})},[eF,eH,eC,eB]),e7=d.useCallback(e=>"success"!==H||q&&e!==q,[H,q]),e9=V?`rotate(${V}deg)`:"",e8=U.x||U.y?`scale(${U.x?-1:1}, ${U.y?-1:1})`:"",te={transform:`${e9} ${e8}`},tt=e=>{let t=e.target.value;eN(t)},ta=(null==D?void 0:D.file)&&(0,S.RX)(null==D?void 0:null===(g=D.file)||void 0===g?void 0:g.type)||(null==D?void 0:D.module_name)&&(null==D?void 0:D.module_name)!=="video"||"photo"===D.type,ti=(null==D?void 0:D.uid)?null==ek?void 0:null===(w=ek.extra)||void 0===w?void 0:w.can_tag_friend_on_photo:null==D?void 0:null===(A=D.extra)||void 0===A?void 0:A.can_tag_friend,tn=(0,S.EL)(null===(M=D.file)||void 0===M?void 0:M.type)||(null==D?void 0:D.type)==="video"||(null==D?void 0:D.module_name)==="video";return d.createElement(n.lG,ea({},F,{disableBackdropClick:!0,scroll:"body",maxWidth:"md"}),d.createElement(n.L3,null,W.formatMessage({id:t})),d.createElement(ei,null,d.createElement(en,null,tn?d.createElement(et,{value:eB,setValue:eD,config:{preview_url:eB}}):null,o?null:d.createElement(l.A,{mb:2},d.createElement(s.A,{variant:"outlined",placeholder:W.formatMessage({id:"caption"}),fullWidth:!0,multiline:!0,rows:4,InputLabelProps:{shrink:!0},value:eF,onChange:tt})),"success"===H?d.createElement(er,null,ti?d.createElement(k,{disabled:e7("tag"),startIcon:d.createElement(r.s4,{icon:"ico-price-tag"}),children:eS?"":W.formatMessage({id:"tags"}),onClick:e5}):null,d.createElement(k,{disabled:e7("crop"),startIcon:d.createElement(r.s4,{icon:"ico-arrow-collapse"}),children:eS?"":W.formatMessage({id:"crop"}),onClick:eQ}),d.createElement(k,{disabled:e7("rotate"),startIcon:d.createElement(r.s4,{icon:"ico-rotate-right-alt"}),children:eS?"":W.formatMessage({id:"rotate"}),onClick:e1}),d.createElement(k,{disabled:e7("flip"),startIcon:d.createElement(r.s4,{icon:"ico-flip-v"}),children:eS?"":W.formatMessage({id:"flip_vertical"}),onClick:eK}),d.createElement(k,{disabled:e7("flip"),startIcon:d.createElement(r.s4,{icon:"ico-flip-h"}),children:eS?"":W.formatMessage({id:"flip_horizontal"}),onClick:e0})):null,d.createElement(el,null,q?d.createElement(c.A,{disabled:"success"!==H,variant:"contained",color:"primary",onClick:e2},W.formatMessage({id:"save_changes"})):null,q?d.createElement(c.A,{disabled:"success"!==H,variant:"outlined",color:"primary",onClick:e4},W.formatMessage({id:"discard"})):null,q?null:d.createElement(c.A,{disabled:!H,variant:"contained",color:"primary",onClick:e6},W.formatMessage({id:"save"})),q?null:d.createElement(c.A,{disabled:!H,variant:"outlined",color:"primary",onClick:N},W.formatMessage({id:"cancel"})))),d.createElement(eo,null,d.createElement(es,null,tn?d.createElement(j.A,{ratioPercent:"100%",autoPlay:!0,src:(null==D?void 0:D.destination)||ey}):d.createElement(ec,null,d.createElement(ed,{draggable:!1,src:D.source||ee,alt:D.uid}))),tn?null:d.createElement(d.Fragment,null,d.createElement(eu,null),d.createElement(em,{onMouseDown:eY,onTouchStart:eY,ref:Y},d.createElement(ep,{ref:J,onClick:eR},"error"!==H&&ta?d.createElement(d.Fragment,null,d.createElement(eh,{draggable:!1,src:eH||ey,ref:Q,onLoad:eV,style:te,onError:eX,alt:D.uid}),d.createElement(P.A,{open:eO&&ez,px:eW.px,py:eW.py,classes:eA,ref:ex}),eO&&ez?d.createElement(_.A,{onItemClick:eL,classes:eA,anchorRef:ex,identity:(null==D?void 0:D.id)?`photo.entities.photo.${D.id}`:void 0,open:!0,excludeIds:eC.map(e=>{var t,a;return(null==e?void 0:null===(t=e.content)||void 0===t?void 0:t.id)||(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.id)}),isFullFriend:!0,postAsParent:m,parentUser:p}):null,eC&&(null==eC?void 0:eC.length)?eC.map(e=>(null==e?void 0:e.resource_name)==="photo_tag"?d.createElement(L.A,{tagging:eO,identity:`${e.module_name}.entities.${e.resource_name}.${e.id}`,onRemove:eM,classes:eA,isTypePreview:!0,forceShow:!0}):d.createElement(z,ea({},e,{tagging:eO,onRemove:e_,forceShow:!0}))):null):d.createElement(eg,null,W.formatMessage({id:"could_not_load_photo"})),"crop"===q&&"success"===H?d.createElement(h,{onMounted:eq,style:eZ,ref:K,onMouseDown:eJ,onTouchStart:eJ}):null))))))}},15924(e,t,a){a.r(t),a.d(t,{default:()=>I});var i=a(85838);let n=e=>(0,i.A)({dialogTitle:{},dialogContent:{backgroundColor:e.palette.background.default,minWidth:550,minHeight:500},dialogActions:{},itemListContainer:{display:"flex",flexWrap:"wrap",padding:e.spacing(2),justifyContent:"space-between"},isDragging:{},itemRoot:{width:"calc(50% - 8px)",backgroundColor:e.mixins.backgroundColor("paper"),marginBottom:e.spacing(2),borderRadius:e.shape.borderRadius,boxShadow:e.shadows[2],"&:hover $autoHideButton":{visibility:"visible"},"&$isDragging":{border:"dashed 2px",borderColor:e.palette.primary.main}},itemMediaBackdrop:{backgroundColor:e.mixins.backgroundColor("paper"),textAlign:"center",overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",height:"33vh",borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},itemBlur:{width:"10%",height:"10%",transform:"scale(14)",filter:"blur(3px)",WebkitFilter:"blur(3px)"},itemBlurImg:{objectFit:"cover",width:"100%",height:"100%",border:0},itemMediaContainer:{position:"relative",textAlign:"center"},itemMedia:{position:"absolute",objectFit:"contain",left:0,top:0,width:"100%",height:"100%"},itemComposerContainer:{padding:e.spacing(1)},itemComposer:{},autoHideButton:{visibility:"hidden"},closeButton:{position:"absolute",top:e.spacing(2),right:e.spacing(2)},tagButton:{position:"absolute",bottom:e.spacing(2),left:e.spacing(2)},editButton:{position:"absolute",left:e.spacing(2),top:e.spacing(2)}});var r=a(40244),o=a(91557),l=a(73349),s=a(84680),c=a(26433),d=a(8051),u=a(60780),m=a(16535),p=a(58156),g=a.n(p),h=a(96540),f=a(40515),v=a(18164),y=a(18422);function b({variant:e="outlined",setItems:t,items:a,parentUser:i,icon:n="ico-photos-plus-o"}){let{i18n:r}=(0,o.PCX)(),l=h.useRef(),[s]=(0,v.A)({parentUser:i}),{acceptTypes:c}=(0,y.A)({parentUser:i}),d=h.useCallback(()=>{var e;null==l||null===(e=l.current)||void 0===e||e.click()},[l]),m=()=>{(null==l?void 0:l.current)&&(l.current.value=null)},p=()=>{var e;let i=null==l?void 0:null===(e=l.current)||void 0===e?void 0:e.files;s(i,a,e=>{t(e)}),m()};return h.createElement(h.Fragment,null,h.createElement(u.A,{color:"primary",onClick:d,variant:e,startIcon:h.createElement(f.s4,{icon:n})},r.formatMessage({id:"add_photos"})),h.createElement("input",{onChange:p,multiple:!0,ref:l,className:"srOnly",type:"file",accept:c}))}var x=a(67725),E=a(3556),C=a(54358),w=a(20053),A=a(5079),k=a(58410);let S={PHOTO:"photo"};var P=a(55074);let _=(0,E.Ay)(f.s4,{name:"PreviewPhotosDialogItemPhoto",slot:"CustomPlayButton"})(({theme:e})=>({position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",fontSize:"64px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.3)",color:"#fff",borderTopLeftRadius:e.spacing(1),borderTopRightRadius:e.spacing(1)}));function M({id:e,index:t,item:a,movePhoto:i,editItem:n,editPhoto:r,removeItem:l,tagItem:s,editTextPhoto:c,classes:u,hideRemove:m,isEdit:p}){var g,v,y,b,E,M;let{i18n:R,useSession:I,ParserPreviewPhoto:O}=(0,o.PCX)(),W=h.useRef(null),{user:z}=I(),[L,T]=h.useState(null!==(M=null==a?void 0:a.text)&&void 0!==M?M:""),[j,F]=h.useState(!1),N=h.useMemo(()=>{let e=null==a?void 0:a.thumbnail;if(null==e?void 0:e.image)return(0,x.AE)(null==e?void 0:e.image,"500")},[null==a?void 0:a.thumbnail]),[B,D]=h.useState(N);h.useEffect(()=>{let e=null==a?void 0:a.thumbnail;if(!(null==e?void 0:e.file)){D((null==e?void 0:e.image)?(0,x.AE)(null==e?void 0:e.image,"500"):void 0);return}(0,P.t)(null==e?void 0:e.file,e=>{D(e)})},[null==a?void 0:null===(g=a.thumbnail)||void 0===g?void 0:g.file,null==a?void 0:null===(v=a.thumbnail)||void 0===v?void 0:v.image]);let[,H]=(0,A.H)({accept:S.PHOTO,hover(e,a){var n;if(!W.current)return;let r=e.index;if(r===t)return;let o=null===(n=W.current)||void 0===n?void 0:n.getBoundingClientRect(),l=(o.bottom-o.top)/2,s=a.getClientOffset(),c=s.y-o.top;r<t&&c<l||r>t&&c>l||(i(r,t),e.index=t)}}),$=h.useCallback(e=>{let t=e.target.value;T(t)},[]),V=h.useCallback(e=>{let t=e.target.value;c(a,t)},[c,a]),[X,U]=(0,k.i)({type:S.PHOTO,item:{type:S.PHOTO,id:e,index:t},collect:e=>({isDragging:e.isDragging()})}),G=X.isDragging?.5:.9999,q=X.isDragging?"isDragging":"";U(H(W));let Z=h.useCallback(()=>{F(!0)},[]),Y=h.useCallback(e=>{r(a,e),F(!1)},[a,r]),J=h.useCallback(e=>{T(null==e?void 0:e.text)},[]);if(!a)return;let Q=(null==a?void 0:a.uid)?null==z?void 0:null===(y=z.extra)||void 0===y?void 0:y.can_tag_friend_on_photo:null==a?void 0:null===(b=a.extra)||void 0===b?void 0:b.can_tag_friend,K=(0,x.EL)(null===(E=a.file)||void 0===E?void 0:E.type)||(null==a?void 0:a.type)==="video"||(null==a?void 0:a.resource_name)==="video",ee=!x.un&&K&&!B;return h.createElement("div",{"data-uid":a.uid,style:{cursor:p?"default":"move",opacity:G},ref:p?null:W,className:(0,w.default)(u.itemRoot,q?u.isDragging:"")},h.createElement("div",{className:u.itemMediaContainer},h.createElement("div",{className:u.itemMediaBackdrop},K?ee?h.createElement(h.Fragment,null,h.createElement("div",{className:u.itemBlur},h.createElement("video",{src:a.source||a.destination,draggable:!1,controls:!1,autoPlay:!1,muted:!0,className:u.itemBlurImg})),h.createElement("video",{src:a.source||a.destination,draggable:!1,controls:!1,autoPlay:!1,muted:!0,className:u.itemMedia}),h.createElement(_,{icon:"ico-play-circle-o"})):h.createElement(h.Fragment,null,h.createElement("div",{className:u.itemBlur},h.createElement("img",{draggable:!1,src:B||a.source||a.destination,className:u.itemBlurImg,alt:a.uid})),h.createElement(d.A,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderTopLeftRadius:e=>e.shape.borderRadius,borderTopRightRadius:e=>e.shape.borderRadius,overflow:"hidden"}},h.createElement("img",{draggable:!1,src:B||a.source||a.destination,className:u.itemMedia,alt:a.uid}),h.createElement(_,{icon:"ico-play-circle-o"}))):h.createElement(h.Fragment,null,h.createElement("div",{className:u.itemBlur},h.createElement("img",{draggable:!1,src:a.base64||a.source||(0,x.AE)(null==a?void 0:a.image),className:u.itemBlurImg,alt:a.uid})),h.createElement(O,{item:a,onParse:Y,onError:()=>l(a),onStartParseFile:Z,sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderTopLeftRadius:e=>e.shape.borderRadius,borderTopRightRadius:e=>e.shape.borderRadius,overflow:"hidden"}},h.createElement("img",{draggable:!1,src:a.base64||a.source||(0,x.AE)(null==a?void 0:a.image),className:u.itemMedia,alt:a.uid}))),j?null:h.createElement(h.Fragment,null,h.createElement(d.A,{className:(0,w.default)(u.editButton,u.autoHideButton)},h.createElement(f.Bj,{size:"small",color:"primary",icon:"ico-pencil",onClick:()=>n(a,J),title:R.formatMessage({id:"edit"})})),Q&&!K?h.createElement(d.A,{className:(0,w.default)(u.tagButton)},h.createElement(f.Bj,{onClick:()=>s(a),size:"small",color:"primary",icon:"ico-price-tag",title:R.formatMessage({id:"tag_friends"})})):null),m?null:h.createElement(d.A,{className:(0,w.default)(u.closeButton,u.autoHideButton)},h.createElement(f.Bj,{size:"small",onClick:()=>l(a),color:"primary",icon:"ico-close",title:R.formatMessage({id:"remove"})})))),h.createElement("div",{className:u.itemComposerContainer},h.createElement(C.A,{value:L,variant:"outlined",placeholder:R.formatMessage({id:"caption"}),fullWidth:!0,disabled:j,InputLabelProps:{shrink:!0},className:u.itemComposer,onChange:$,onBlur:V})))}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let I=(0,r.A)(n)(function({composerRef:e,classes:t,dialogTitle:a="edit_media",isEdit:i,parentUser:n,postAsParent:r}){let{useDialog:p,i18n:f,dialogBackend:v,useIsMobile:y}=(0,o.PCX)(),{dialogProps:x,closeDialog:E}=p(),[C,w]=h.useState(g()(e.current.state,"attachments.photo.value")),A=C.length,k=y();h.useEffect(()=>{C.length?e.current.setAttachments("photo","photo",{as:"StatusComposerControlAttachedPhotos",value:C}):e.current.removeAttachments()},[e,C]);let S=h.useCallback((e,t)=>{w((0,m.Ay)(C,a=>{let i=a.find(t=>(null==e?void 0:e.uid)&&(null==t?void 0:t.uid)===e.uid||(null==e?void 0:e.id)&&(null==t?void 0:t.id)===(null==e?void 0:e.id));i&&Object.assign(i,t)}))},[C]),P=h.useCallback((e,t)=>{v.present({component:"photo.dialog.EditPreviewPhotoDialog",props:{item:e,tagging:!1,postAsParent:r,parentUser:n}}).then(a=>{a&&(t&&t(a),S(e,a))})},[v,S]),_=h.useCallback(e=>{w(t=>t.filter(t=>t.uid!==e.uid||t.id!==e.id))},[]),I=h.useCallback(e=>{v.present({component:"photo.dialog.EditPreviewPhotoDialog",props:{item:e,tagging:!0,postAsParent:r,parentUser:n}}).then(t=>{t&&S(e,t)})},[v,S]),O=h.useCallback((e,t)=>{let a=C[e];w((0,m.Ay)(C,i=>{i.splice(e,1),i.splice(t,0,a)}))},[C]),W=h.useCallback((e,t)=>{w(a=>(0,m.Ay)(a,a=>{let i=a.find(t=>(null==e?void 0:e.uid)&&(null==t?void 0:t.uid)===e.uid||(null==e?void 0:e.id)&&(null==t?void 0:t.id)===(null==e?void 0:e.id));i&&(i.text=t)}))},[]);return h.createElement(l.lG,R({},x,{fullWidth:!0}),h.createElement(l.L3,{className:t.dialogTitle},f.formatMessage({id:a})),h.createElement(c.A,{dividers:!0,sx:{p:0}},h.createElement(s.P,{autoHide:!0,autoHeight:!0,autoHeightMax:k?"100%":"400px",className:t.dialogContent},h.createElement("div",{className:t.itemListContainer},A?C.map((e,a)=>h.createElement(M,{key:e.uid||`k${null==e?void 0:e.id}`,index:a,id:e.uid,movePhoto:O,item:e,editItem:P,editPhoto:S,removeItem:_,tagItem:I,classes:t,editTextPhoto:W,hideRemove:!!i&&1===A,isEdit:i})):h.createElement(d.A,{p:3,sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},h.createElement(b,{setItems:w,items:C,parentUser:n}))))),h.createElement(l.ii,{className:t.dialogActions},h.createElement(u.A,{variant:"contained",color:"primary",onClick:E},f.formatMessage({id:"done"})),h.createElement(b,{setItems:w,items:C,parentUser:n,icon:"ico-plus"})))})},63329(e,t,a){a.r(t),a.d(t,{default:()=>y});var i=a(91557),n=a(73349),r=a(40515),o=a(3556),l=a(89481),s=a(97763),c=a(96540);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let u=(0,o.Ay)(n.lG)(({theme:e})=>({"& .MuiDialog-paper":{background:"transparent"}})),m=(0,o.Ay)("div")(({theme:e})=>({position:"fixed",top:e.spacing(4),right:e.spacing(4),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"2",[e.breakpoints.down("md")]:{top:e.spacing(.5),right:e.spacing(.5)}})),p=(0,o.Ay)("div")(({theme:e})=>({position:"fixed",top:e.spacing(4),right:e.spacing(10),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"2",[e.breakpoints.down("md")]:{top:e.spacing(.5),right:e.spacing(5.5)}})),g=(0,o.Ay)(n.Cf)(({theme:e})=>({padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",zIndex:"1",flexFlow:"column",justifyContent:"center"})),h=(0,o.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative"})),f=(0,o.Ay)("img",{shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({maxHeight:" calc(100vh - 88px)",margin:"auto",borderRadius:e.shape.borderRadius,[e.breakpoints.down("sm")]:{borderRadius:0},...t&&{width:"100%"}})),v=(0,o.Ay)(l.A)(({theme:e})=>({color:"white"}));function y(e){var t;let{useDialog:a,dispatch:n,useIsMobile:o,i18n:l}=(0,i.PCX)(),{src:y,identity:b}=e,x=(0,i.dx2)(b),{dialogProps:E,closeDialog:C}=a(),[w,A]=c.useState(!1),k=o(),S=()=>A(!1),P=()=>{b&&!w&&(A(!0),n({type:"core/downloadItem",payload:{identity:b},meta:{onSuccess:S,onFailure:S}}))};return c.createElement(u,d({},E,{"data-testid":"popupViewPhoto",sx:{backgroundColor:"rgba(0, 0, 0, 0.9)"}}),(null==x?void 0:null===(t=x.extra)||void 0===t?void 0:t.can_download)&&c.createElement(s.A,{title:l.formatMessage({id:"download"})},c.createElement(p,{onClick:P},w?c.createElement(v,{size:18}):c.createElement(r.s4,{icon:"ico-download"}))),c.createElement(s.A,{title:l.formatMessage({id:"press_esc_to_close"})},c.createElement(m,{onClick:C},c.createElement(r.s4,{icon:"ico-close"}))),c.createElement(g,{dividers:!1},c.createElement(h,null,c.createElement(f,{src:y,alt:"",isMobile:k}))))}},65639(e,t,a){a.d(t,{A:()=>d});var i=a(91557),n=a(96540),r=a(62193),o=a.n(r),l=a(97200),s=a.n(l),c=a(67725);function d({initialValues:e,upload_url:t="",maxSizeLimit:a,isAcceptVideo:r=!0,messageAcceptFail:l,accept:d,inputRef:u,storage_id:m}){var p,g,h,f;let{dialogBackend:v,i18n:y}=(0,i.PCX)(),[b,x]=n.useState(e||[]),E=null!==(g=null!==(p=null==a?void 0:a.photo)&&void 0!==p?p:null==a?void 0:a.other)&&void 0!==g?g:0,C=null!==(f=null!==(h=null==a?void 0:a.video)&&void 0!==h?h:null==a?void 0:a.other)&&void 0!==f?f:0,w=(e,a)=>{let i=[];if(o()(e))return;let n=[];for(let p=0;p<e.length;++p){let g=e[p],h=g.size,f=(0,c.EL)(null==g?void 0:g.type)?C:E,b=(0,c.ti)(g),w={id:0,uid:s()(),source:URL.createObjectURL(g),file_name:g.name,file_size:g.size,file_type:g.type,file:g,upload_url:t,storage_id:m,type:b.match("image/*")?"photo":"video",status:"new"};if("video"===w.type&&!r||!(0,c.HH)((0,c.ti)(g),d)){v.alert({message:l||y.formatMessage({id:"file_accept_type_fail"})}),(null==u?void 0:u.current)&&(u.current.value=null);break}h>f&&0!==f?(w.max_size=f,n.push(w)):i.push(w)}if(i.length&&x(e=>[...a||e,...i]),n.length>0){var A;v.alert({message:1===n.length?y.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,c.Tu)(n[0].file_name,30),fileSize:(0,c.lT)(n[0].file_size),maxSize:(0,c.lT)(null===(A=n[0])||void 0===A?void 0:A.max_size)}):y.formatMessage({id:"warning_upload_limit_multi_file"},{numberFile:n.length,photoMaxSize:(0,c.lT)(E),videoMaxSize:(0,c.lT)(C)})})}};return[b,x,w]}},98623(e,t,a){a.r(t),a.d(t,{default:()=>u});var i=a(73349),n=a(91557),r=a(3556),o=a(8051),l=a(96540),s=a(2677);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let d=(0,r.Ay)(i.Cf,{name:"ViewMediaModal",slot:"root"})(({theme:e})=>({height:"100%",padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("md")]:{height:"auto",flexFlow:"column",flexDirection:"column","& > div":{overflow:"inherit"}}})),u=function(e){let{identity:t,photo_set:a,photo_album:r,photo_id:u,media_type:m,error:p}=e,{jsxBackend:g,useDialog:h,i18n:f,useIsMobile:v,useGetItem:y}=(0,n.PCX)(),b=y(t),x=v(!0),E=g.get("media.ui.viewBlockMobileModal"),C=g.get("media.ui.viewBlock"),{dialogProps:w}=h();return b?x?l.createElement(i.lG,c({},w,{fullScreen:!p,scroll:"body","data-testid":"popupViewPhoto"}),l.createElement(i.L3,{enableBack:!p&&x,disableClose:x},f.formatMessage({id:"photo"})),l.createElement(s.A,{error:p},l.createElement(o.A,{pb:2},l.createElement(E,c({},e))))):l.createElement(i.lG,c({scroll:"body"},w,{fullScreen:!p,"data-testid":"popupDetailPhoto"}),p?l.createElement(i.L3,{backIcon:"ico-close",enableBack:!p},f.formatMessage({id:"photo"})):null,l.createElement(s.A,{error:p},l.createElement(d,{dividers:!1},l.createElement(C,{photo_set:a,photo_album:r,identity:t,photo_id:u,media_type:m})))):null}},78234(e,t,a){a.r(t),a.d(t,{default:()=>m});var i=a(91557),n=a(73349),r=a(53975),o=a(73357),l=a.n(o),s=a(88055),c=a.n(s),d=a(96540);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function m({initialValues:e,formUrl:t,isEdit:a}){let{useDialog:o}=(0,i.PCX)(),{dialogProps:s,setDialogValue:m}=o(),p=c()(e);return l()(p,"submit"),d.createElement(n.lG,u({},s,{maxWidth:"sm",fullWidth:!0}),d.createElement(r.aI,{initialValues:p,dataSource:{apiUrl:t||"/poll/status-form",apiParams:{is_edit:a}},onSubmit:m,dialog:!0}))}},51359(e,t,a){a.r(t),a.d(t,{default:()=>E});var i=a(73349),n=a(91557),r=a(84680),o=a(40515),l=a(3556),s=a(18579),c=a(80160),d=a(96540),u=a(56525),m=a(85838);let p=(0,u.A)(e=>(0,m.A)({root:{},dialogContent:{height:320,[e.breakpoints.down("sm")]:{height:"unset"}},reactNumber:{paddingLeft:e.spacing(1),color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold},customTabs:{borderBottom:e.mixins.border("secondary"),"& .MuiTabs-scroller":{overflow:"auto !important"},"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5),display:"flex",flexDirection:"column"},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",minWidth:0,borderRadius:e.shape.borderRadius/2,marginRight:e.spacing(1),padding:e.spacing(.5),flexDirection:"row","&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected,color:`${e.palette.text.secondary} !important`},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});var g=a(84058),h=a.n(g);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let v="PeopleWhoVoted",y={minHeight:32},b=(0,l.Ay)(s.A,{name:v})(({theme:e})=>({justifyContent:"space-between",maxWidth:"100%",padding:`${e.spacing(.5,1)} !important`,height:`${e.spacing(3.5)} !important`,marginRight:"0px !important",marginBottom:e.spacing(.5)})),x=(0,l.Ay)(o.mE,{name:v})(({theme:e})=>({maxWidth:"95%"})),E=function(e){let{listAnswers:t}=e,a=p(),[o,l]=(0,d.useState)(t[0].id),{useDialog:s,i18n:u,ListView:m}=(0,n.PCX)(),{dialogProps:g}=s(),v=d.useRef(),E=(0,d.useMemo)(()=>({apiUrl:"/poll-result",apiParams:{answer_id:o}}),[o]),C=`pollAnswerResult/${o}`,w=(e,t)=>{l(parseInt(t,10))};return d.useEffect(()=>{v.current&&v.current.scrollTo({top:0})},[o]),d.createElement(i.lG,f({},g,{maxWidth:"xs",fullWidth:!0}),d.createElement(i.L3,null,u.formatMessage({id:"people_who_voted"})),d.createElement("div",null,d.createElement(c.A,{value:o,onChange:w,style:y,className:a.customTabs},t.map((e,t)=>d.createElement(b,{key:e.id,disableRipple:!0,"data-testid":h()(`button_tab ${t+1}`),label:e.answer?d.createElement(d.Fragment,null,d.createElement(x,{lines:1},e.answer),d.createElement("span",{className:a.reactNumber},e.total_votes)):void 0,value:e.id,"aria-label":e.title}))),d.createElement("div",{className:a.dialogContent},d.createElement(r.P,{autoHide:!0,autoHeightMax:"auto",ref:v},d.createElement(m,{dataSource:E,pagingId:C,canLoadMore:!0,gridLayout:"Poll - People Who Voted",itemLayout:"Poll - People Who Voted",itemView:"poll.itemView.peopleWhoVoted",emptyPage:"core.block.no_content",emptyPageProps:{title:"no_votes",contentStyle:{sx:{pt:2}}}})))))}},35881(e,t,a){a.r(t),a.d(t,{default:()=>d});var i=a(91557),n=a(73349),r=a(96540),o=a(56525),l=a(85838);let s=(0,o.A)(e=>(0,l.A)({root:{padding:"0 !important",overflowY:"visible",display:"flex"},titleDialog:{display:"flex",alignItems:"center"},closeDialog:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),marginLeft:"auto",cursor:"pointer"},contentWrapper:{width:"100%",maxWidth:"100%"}}),{name:"MuiPollViewModal"});function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let d=(0,i.G5k)(function({item:e,identity:t}){let a=s(),{useDialog:o,jsxBackend:l,useIsMobile:d,i18n:u}=(0,i.PCX)(),{dialogProps:m}=o(),p=l.get("poll.block.pollView"),g=d();return e?r.createElement(n.lG,c({},m,{maxWidth:"md",scroll:"body","data-testid":"popupViewBlog"}),r.createElement(n.L3,{enableBack:g,disableClose:g},u.formatMessage({id:"poll"})),r.createElement(n.Cf,{className:a.root},r.createElement("div",{className:a.contentWrapper},r.createElement(p,{item:e,identity:t,isModalView:!0})))):null})},52093(e,t,a){a.r(t),a.d(t,{default:()=>J});var i=a(91557),n=a(73349),r=a(84680),o=a(3556),l=a(18579),s=a(8051),c=a(80160),d=a(96540);let u="quiz",m="quiz";var p=a(54358),g=a(20687),h=a(18727),f=a(59006),v=a(58156),y=a.n(v);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let x=function({onSelect:e,data:t,valueSelect:a,isOrtherTab:i}){let{options:n=[]}=t,r=(e,t)=>y()(e,"id")==y()(t,"id"),o=e=>{var t;return null!==(t=y()(e,"label"))&&void 0!==t?t:""},l=(0,f.Z)({stringify:({label:e})=>`${e}`}),c=e=>{13===e.keyCode&&e.preventDefault()},u=e=>d.createElement(p.A,b({},e,{fullWidth:!0,onKeyDown:c,inputProps:{...e.inputProps,autoComplete:"on"}})),m=d.useCallback((e,t)=>d.createElement(s.A,b({"data-value":null==t?void 0:t.value,component:"li"},e,{key:`${null==t?void 0:t.id}${null==t?void 0:t.question}`}),i?t.label:`${null==t?void 0:t.ordering}. ${t.label}`),[i]);return d.createElement(g.A,{margin:"normal",fullWidth:!0,"data-testid":"field select custom"},d.createElement(h.A,{disableClearable:!0,filterOptions:l,openOnFocus:!0,value:a||n[0],defaultValue:n[0],onChange:e,isOptionEqualToValue:r,options:n,getOptionLabel:o,autoHighlight:!0,renderInput:u,renderOption:m}))};var E=a(2677),C=a(40515),w=a(87773),A=a(62193),k=a.n(A),S=a(33359),P=a(58407),_=a(3372),M=a(27155),R=a(14767),I=a(77009),O=a(46772),W=a(56449),z=a.n(W),L=a(71468);let T=(0,o.Ay)(s.A,{name:"quiz-question-dialog",slot:"root",shouldForwardProp:e=>"rightAnswer"!==e})(({theme:e,rightAnswer:t})=>({marginTop:e.spacing(3),marginBottom:e.spacing(1),...t?{"& .option .Mui-checked + span":{color:e.palette.success.main,fontWeight:"bold"}}:{"& .option .Mui-checked + span":{color:e.palette.error.main,fontWeight:"bold"}}})),j=(0,o.Ay)(M.A,{slot:"RadioButton"})(({theme:e})=>({"&.Mui-disabled":{..."dark"===e.palette.mode&&{color:e.palette.text.hint}}})),F=(0,o.Ay)(R.A,{slot:"label"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),lineHeight:1.33,fontWeight:"bold",color:e.palette.text.primary,marginBottom:e.spacing(1)}));function N(e){let{question:t,answers:a,order:i,result:n}=e,r=(0,L.d4)(e=>(0,S.S)(e,a)),o=Boolean((null==n?void 0:n.correct_answer_id)===(null==n?void 0:n.user_answer_id));return d.createElement(T,{rightAnswer:o},d.createElement(F,{variant:"h5",component:"div"},`${i}. ${t}`),d.createElement(I.A,{value:null==n?void 0:n.user_answer_id.toString()},z()(r)?r.map(e=>d.createElement(O.A,{disabled:!0,key:e.id.toString(),value:e.id.toString(),style:{width:"fit-content"},control:d.createElement(j,{color:"primary",size:"small",icon:e.id===(null==n?void 0:n.correct_answer_id)?d.createElement(P.A,{fontSize:"small"}):d.createElement(_.A,{fontSize:"small"})}),label:e.answer,className:"option"})):null))}let B=(0,o.Ay)(s.A)(({theme:e})=>({display:"flex",alignItems:"center",marginTop:e.spacing(2)})),D=(0,o.Ay)(i.N_E,{name:"ProfileLinkStyled"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),fontWeight:e.typography.fontWeightBold,paddingRight:e.spacing(.5),color:e.palette.text.primary})),H=function({questions:e,item:t,userId:a}){var n;let{useFetchDetail:r,i18n:o}=(0,i.PCX)(),l=(0,i.IgF)(u,m,"viewQuizResultIndividual"),[c,p,g]=r({dataSource:l,pageParams:{quiz_id:t.id,user_id:a}}),h=(e||[]).reduce((e,t)=>{var a;let i=null==c?void 0:null===(a=c.user_result)||void 0===a?void 0:a.find(e=>e.question_id===t.id),n=Boolean((null==i?void 0:i.correct_answer_id)===(null==i?void 0:i.user_answer_id));return n?e+1:e},0);return d.createElement(E.A,{loading:p,error:g,emptyComponent:null},k()(c)?null:d.createElement(s.A,null,d.createElement(B,null,d.createElement(C.H8,{user:null==c?void 0:c.user,size:48}),d.createElement(s.A,{sx:{ml:1.5}},d.createElement(D,{to:null==c?void 0:null===(n=c.user)||void 0===n?void 0:n.link,children:null==c?void 0:c.user.full_name,"data-testid":"headline"}),d.createElement(w.A,{color:"text.secondary",mt:.5},o.formatMessage({id:"correct_answer_percent_question"},{result:()=>d.createElement("strong",null,`${h}/${null==e?void 0:e.length}`),percent:()=>d.createElement("strong",null,"(",null==c?void 0:c.result_correct,")")})))),(null==e?void 0:e.length)>0&&e.map((e,t)=>{var a;return d.createElement(N,{key:t.toString(),question:e.question,questionId:e.id,answers:e.answers,order:t+1,result:null==c?void 0:null===(a=c.user_result)||void 0===a?void 0:a.find(t=>t.question_id===e.id)})})))};var $=a(84058),V=a.n($),X=a(85015),U=a.n(X),G=a(67725);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let Z=(0,o.Ay)(l.A)(({theme:e})=>({height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(4),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main},"&:hover":{color:e.palette.primary.main}})),Y=(0,o.Ay)(s.A)(({theme:e})=>({padding:e.spacing(0,2)}));function J({dialogTitle:e,questions:t,user:a,userOwner:o,item:l}){let{useDialog:p,ListView:g,i18n:h,useGetItem:f}=(0,i.PCX)(),{dialogProps:v}=p(),y=(0,i.IgF)(u,m,"viewQuizSummary"),[b,E]=d.useState(0),[C,w]=d.useState(null),[A,S]=d.useState(t[0].id),P=(e,t)=>{S(t.id),w(t)},_=(a||[]).map((e,t)=>{if(U()(e.user)){let a=f(e.user);return{id:a.id,label:a.full_name,ordering:t}}return{id:e.user.id,label:e.user.full_name,ordering:t}}),M=d.useMemo(()=>(t||[]).map(e=>({id:e.id,label:e.question,ordering:e.ordering})),[t]),R=d.useMemo(()=>({0:{options:M},1:{options:_}}),[t,a,M,_]),I=(e,t)=>{E(t),0===t?(w(M[0]),S(M[0].id)):(w(_[0]),S(_[0].id))},O=d.useMemo(()=>{var e;return!k()(a)&&(null!=l&&!!l.is_owner||null!=l&&null!==(e=l.extra)&&void 0!==e&&!!e.can_moderate)},[a,l]);return d.createElement(n.lG,q({},v,{maxWidth:"xs",fullWidth:!0}),d.createElement(s.A,{"data-testid":V()(`dialog ${e}`)},d.createElement(n.L3,null,h.formatMessage({id:e})),d.createElement(n.Cf,{variant:"fitScroll",sx:{height:"45vh"}},d.createElement(Y,null,d.createElement(c.A,{value:b,onChange:I,indicatorColor:"primary",textColor:"primary"},d.createElement(Z,{disableRipple:!0,label:h.formatMessage({id:"summary"}).toUpperCase(),"data-testid":V()("tab_summary")}),O?d.createElement(Z,{disableRipple:!0,label:h.formatMessage({id:"individuals"}).toUpperCase(),"data-testid":V()("tab_individuals")}):null),d.createElement(x,{onSelect:P,data:R[b],tab:b,isOrtherTab:0!==b,valueSelect:C})),d.createElement(r.P,{autoHeightMax:"100%"},d.createElement(Y,{sx:{mb:2}},0===b?d.createElement(g,{canLoadMore:!0,dataSource:{apiMethod:(null==y?void 0:y.apiMethod)||"get",apiUrl:null==y?void 0:y.apiUrl,apiParams:(0,G.A8)(y.apiParams,{id:A})},pagingId:`/quiz/view-plays/tab=${b}/value=${A}`,prefixPagingId:"/quiz/view-plays",itemView:"quiz.itemView.AnswerPercent",emptyPage:"hide",gridLayout:"Friend - Small List",itemLayout:"Quiz - Answer Played List"}):d.createElement(H,{item:l,userId:A,questions:t}))))))}},69230(e,t,a){a.r(t),a.d(t,{default:()=>u});var i=a(91557),n=a(73349),r=a(3556),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let s="QuizViewDialog",c=(0,r.Ay)(n.Cf,{name:s,slot:"root"})(({theme:e})=>({padding:"0 !important",overflowY:"visible",display:"flex"})),d=(0,r.Ay)("div",{name:s,slot:"root"})(({theme:e})=>({width:"100%",maxWidth:"100%"})),u=(0,i.G5k)(function({item:e,identity:t}){let{useDialog:a,jsxBackend:r,useIsMobile:s,i18n:u}=(0,i.PCX)(),{dialogProps:m}=a(),p=r.get("quiz.block.quizView"),g=s();return e?o.createElement(n.lG,l({},m,{maxWidth:"md",scroll:"body","data-testid":"popupViewQuiz"}),o.createElement(n.L3,{enableBack:g,disableClose:g},u.formatMessage({id:"quiz"})),o.createElement(c,null,o.createElement(d,null,o.createElement(p,{item:e,identity:t,isModalView:!0})))):null})},33359(e,t,a){a.d(t,{S:()=>l});var i=a(1081),n=a(58156),r=a.n(n);let o=(e,t)=>t?null==t?void 0:t.map(t=>r()(e,t)).filter(Boolean):[],l=(0,i.Mz)(o,e=>e)},48340(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(91557),n=a(73349),r=a(53975),o=a(47186),l=a(96540);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(e){let{useDialog:t,compactData:a}=(0,i.PCX)(),{dialogProps:c}=t(),d=a("item_id=:item_id&item_type=:item_type&report_owner=:report_owner",e);return l.createElement(n.lG,s({},c,{maxWidth:"xs",fullWidth:!0,"data-testid":"popupReport"}),l.createElement(r.aI,{dialog:!0,keepPaginationData:!0,dataSource:{apiUrl:`/report/form?${o.stringify(d)}`}}))}},58507(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(91557),n=a(73349),r=a(53975),o=a(47186),l=a(96540);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(e){let{useDialog:t,compactData:a}=(0,i.PCX)(),{dialogProps:c}=t(),d=a("item_id=:item_id&item_type=:item_type",e);return l.createElement(n.lG,s({},c,{maxWidth:"xs",fullWidth:!0,"data-testid":"popupReport"}),l.createElement(r.aI,{keepPaginationData:!0,dialog:!0,dataSource:{apiUrl:`/report-owner/form?${o.stringify(d)}`}}))}},19288(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(73349),n=a(53975),r=a(91557),o=a(22847),l=a(96540);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(){let{useDialog:e}=(0,r.PCX)(),t=e(),{dialogProps:a,closeDialog:c}=t,d=(0,r.IgF)(o.Kw,"saved_list","addItem"),u=e=>l.createElement("div",null);return l.createElement(i.lG,s({"data-testid":"saved.dialog.addCollection"},a,{maxWidth:"sm"}),l.createElement(i.Cf,{sx:{maxWidth:"100%",p:0}},l.createElement(n.FF,{dialog:!0,dialogItem:t,dataSource:{apiUrl:d.apiUrl},onCancel:c,onSuccess:c,loadingComponent:l.createElement(u,null)})))}},82010(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(73349),r=a(84680),o=a(96540);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:s}){let{useDialog:c,ListView:d,i18n:u,useIsMobile:m}=(0,i.PCX)(),p=m(),{dialogProps:g}=c();return o.createElement(n.lG,l({"data-testid":"saved.dialog.friendList"},g,{maxWidth:"sm",fullWidth:!0}),o.createElement(n.L3,null,u.formatMessage({id:s})),o.createElement(n.Cf,{variant:"fitScroll"},o.createElement(r.P,{autoHeight:!0,autoHeightMax:p?"100%":"45vh"},o.createElement(d,{dataSource:{apiUrl:e,apiParams:t},canLoadMore:!1,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"saved.itemView.friendList",emptyPage:"core.block.no_item_with_icon",emptyPageProps:{description:"no_friends_found",image:"ico-user-circle-o"}}))))}},71586(e,t,a){a.r(t),a.d(t,{default:()=>P});var i=a(73349),n=a(91557),r=a(84680),o=a(40515),l=a(3556),s=a(60780),c=a(8051),d=a(87773),u=a(43791),m=a(2404),p=a.n(m),g=a(96540),h=a(59262),f=a(54358),v=a(62193),y=a.n(v);let b=(0,l.Ay)(c.A)(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(0,1)})),x=(0,l.Ay)(s.A)(({theme:e})=>({fontSize:e.mixins.pxToRem(15)})),E=function({handleToggleName:e}){let{i18n:t,getSetting:a,dispatch:i}=(0,n.PCX)(),[r,o]=g.useState(""),l=a("saved.maximum_name_length"),[s,d]=g.useState(null),u=()=>{if(y()(r)){d(t.formatMessage({id:"collection_name_required_field"}));return}e(),i({type:"saved/addNewCollectionName",payload:{name:r}})},m=e=>{let t=e.target.value;o(t),d(null)};return g.createElement(c.A,null,g.createElement(b,null,g.createElement(f.A,{id:"question",name:"question",sx:{flex:1,minWidth:0,marginRight:1},size:"medium",label:t.formatMessage({id:"collection_name"}),variant:"outlined",error:!!s,value:r,required:!0,onChange:m,inputProps:{maxLength:l}}),g.createElement(x,{variant:"outlined",onClick:u,size:"large",color:"primary",id:"create"},t.formatMessage({id:"create"}))),!!s&&g.createElement(c.A,{px:1},g.createElement(h.A,{error:s})))};function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let w=(0,l.Ay)(s.A)(({theme:e})=>({fontSize:e.mixins.pxToRem(13),minWidth:e.spacing(6.25),minHeight:e.spacing(6),"& p":{fontWeight:e.typography.fontWeightMedium},"& .ico":{marginRight:e.spacing(1),fontSize:e.mixins.pxToRem(15),fontWeight:e.typography.fontWeightMedium}})),A=(0,l.Ay)(i.Cf)(({theme:e})=>({padding:e.spacing(1),paddingBottom:0,display:"flex",flexDirection:"column"})),k=(0,l.Ay)(c.A)(({theme:e})=>({minHeight:0,height:"300px",[e.breakpoints.down("sm")]:{height:"unset",flex:1}})),S=({item:e,collection_ids:t,handleToggleItem:a,checkedList:i,submitting:o})=>{let{jsxBackend:l,useIsMobile:s,BatchSelectProvider:c}=(0,n.PCX)(),d=s(),u=l.get("saved.block.savedListAddBlock"),m=l.get("saved.ui.noCollectionList");return u?g.createElement(r.P,{autoHide:!0,autoHeight:!0,autoHeightMax:d?"100%":300},g.createElement(c,{value:{item:e,collection_ids:t,handleToggleItem:a,loading:o,checkedList:i}},g.createElement(u,null))):g.createElement(m)};function P({item:e}){let{useDialog:t,i18n:a,dispatch:r,getAcl:l}=(0,n.PCX)(),m=l("saved.saved_list.create"),h=t(),{dialogProps:f,closeDialog:v}=h,[y,b]=g.useState(!1),x=e._identity,{collection_ids:P=[]}=e||{},[_,M]=g.useState(P||[]),[R,I]=g.useState(!1),O=()=>{b(e=>!e)},W=(e,t)=>{let a=t?[..._,e]:_.filter(t=>t!==e);M(a)},z=()=>{p()(P,_)||(I(!0),r({type:"addSavedItemToCollection",payload:{identity:x,ids:_,initCollections:P},meta:{onSuccess(){I(!1),v()}}}))};return g.createElement(i.lG,C({"data-testid":"saved.dialog.saveToCollection"},f,{maxWidth:"xs"}),g.createElement(i.L3,{children:a.formatMessage({id:"add_to_collections"}),"data-testid":"popupTitle"}),g.createElement(A,null,g.createElement(k,null,g.createElement(S,{item:e,collection_ids:P,handleToggleItem:W,checkedList:_,submitting:R})),m?g.createElement(c.A,{mt:1},y?g.createElement(E,{handleToggleName:O}):g.createElement(w,{variant:"text",color:"primary",onClick:O,"data-testid":"new_collection"},g.createElement(o.s4,{icon:"ico-plus"}),g.createElement(d.A,{variant:"body1"},a.formatMessage({id:"new_collection"})))):null),g.createElement(u.A,null,g.createElement(s.A,{variant:"contained",onClick:z,size:"small",color:"primary","data-testid":"buttonSubmit",disabled:p()(P,_)||R},a.formatMessage({id:"save"}))))}},35986(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(91557),n=a(73349),r=a(84680),o=a(96540),l=a(8051);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c({dataSource:e,dialogTitle:t}){let{useDialog:a,ListView:c,i18n:d}=(0,i.PCX)(),{dialogProps:u}=a();return o.createElement(n.lG,s({"data-testid":"saved.dialog.viewCollectionItemSaved"},u,{maxWidth:"xs",fullWidth:!0}),o.createElement(n.L3,null,d.formatMessage({id:t})),o.createElement(n.Cf,{variant:"fitScroll",sx:{height:"45vh"}},o.createElement(r.P,{style:{height:"auto"}},o.createElement(l.A,{p:1},o.createElement(c,{dataSource:e,canLoadMore:!0,canLoadSmooth:!0,clearDataOnUnMount:!0,gridLayout:"Friend List - Small List",itemLayout:"Saved Collection List View",itemView:"saved_collection_list.itemView.mainCard",emptyPage:"hide"})))))}},15036(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(91557),n=a(73349),r=a(40515),o=a(60780),l=a(96540);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(e){let{i18n:t,useSession:a}=(0,i.PCX)(),{user:c}=a(),{dialogProps:d}=(0,n.sp)();return l.createElement(n.lG,s({},d),l.createElement(n.L3,null,t.formatMessage({id:"share"})),l.createElement(n.Cf,{sx:{minWidth:600,maxWidth:"100%"}},l.createElement("div",null,l.createElement(r.H8,{user:c,size:40,noLink:!0})),"This features is coming soon!"),l.createElement(n.ii,null,l.createElement(o.A,{style:{minWidth:160},variant:"contained",color:"primary",size:"medium"},t.formatMessage({id:"share"}))))}},53918(e,t,a){a.r(t),a.d(t,{default:()=>p});var i=a(91557),n=a(73349),r=a(96540),o=a(40515),l=a(3556);let s="MenuItem",c=(0,l.Ay)("div",{name:s,slot:"itemRoot"})(({theme:e})=>({fontSize:"1rem",padding:e.spacing(1,2),cursor:"pointer","&:hover":{backgroundColor:e.palette.action.selected}})),d=(0,l.Ay)(o.s4,{name:s,slot:"itemIcon"})(({theme:e})=>({width:e.spacing(4),display:"inline-block"}));function u({item:e,onClick:t}){return r.createElement(c,{onClick:t},r.createElement(d,{icon:e.icon}),r.createElement("span",null,e.label))}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function p(e){let{i18n:t,dispatch:a}=(0,i.PCX)(),{dialogProps:o,closeDialog:l}=(0,n.sp)(),{shareOptions:s,identity:c}=e,d=r.useCallback(e=>{a({type:e,payload:{identity:c}}),l()},[l,a,c]);return r.createElement(n.lG,m({},o),r.createElement(n.L3,null,t.formatMessage({id:"share"})),r.createElement(n.Cf,{sx:{minWidth:360,px:0,py:1}},s.map((e,t)=>r.createElement(u,{item:e,onClick:()=>d(e.value),key:t.toString()}))))}},92109(e,t,a){a.r(t),a.d(t,{default:()=>E});var i=a(73349),n=a(3556),r=a(18579),o=a(80160),l=a(8051),s=a(87773),c=a(60780),d=a(96540),u=a(91557),m=a(84680),p=a(24175),g=a(40515);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let f=(0,n.Ay)(r.A,{name:"TabStyled"})(({theme:e})=>({padding:"0!important",fontSize:e.mixins.pxToRem(15),fontWeight:"bold",marginRight:e.spacing(3.5)})),v=(0,n.Ay)(o.A,{name:"TabsStyled"})(({theme:e})=>({"& div>span":{height:e.spacing(.5)}})),y=(0,n.Ay)(i.Cf,{name:"DialogContentStyled"})(({theme:e})=>({padding:`${e.spacing(0,1,0,2)}!important`,height:"50vh"})),b=(0,n.Ay)(l.A,{name:"EmptySticker"})(({theme:e})=>({display:"flex",flexDirection:"column",color:e.palette.text.secondary,alignItems:"center",justifyContent:"center",height:"100%"})),x=(0,n.Ay)(g.s4,{name:"iconEmpty"})(({theme:e})=>({fontSize:e.mixins.pxToRem(40),marginBottom:e.spacing(1)}));function E(e){let{itemView:t}=e,{useDialog:a,i18n:n,jsxBackend:r}=(0,u.PCX)(),o=d.useRef(),{dialogProps:l}=a(),g=p.UR,[E,C]=(0,d.useState)(g),w=r.get("core.block.listview"),A=(e,t)=>{o.current&&o.current.scrollTo({top:0}),C(t)},k=()=>{C(p.bx)},S=d.createElement(b,null,d.createElement(x,{icon:"ico-sticker"}),d.createElement(s.A,{mb:2,fontSize:20},n.formatMessage({id:E===p.UR?"no_stickers_are_found_add_some_stickers_to_your_library_now":"no_sticker_found"})),E===p.UR&&d.createElement(c.A,{variant:"contained",size:"medium",onClick:k},n.formatMessage({id:"add"})));return d.createElement(i.lG,h({},l,{maxWidth:"sm",fullWidth:!0}),d.createElement(i.L3,null,n.formatMessage({id:"manager_stickers"})),d.createElement(y,{variant:"fitScroll"},d.createElement(v,{value:E,onChange:A},d.createElement(f,{value:p.UR,label:n.formatMessage({id:"my_stickers"})}),d.createElement(f,{value:p.bx,label:n.formatMessage({id:"all_stickers"})})),d.createElement(m.P,{ref:o,autoHeightMax:"100%",autoHide:!0,autoHeight:!0},d.createElement(w,{moduleName:"sticker",resourceName:"sticker_set",actionName:E===p.bx?"viewAll":"viewMyStickerSet",emptyPage:S,errorPage:"hide",itemView:t,canLoadMore:!0,canLoadSmooth:!0,numberOfItemsPerPage:8,cachedEmpty:!1}))))}},65827(e,t,a){a.r(t),a.d(t,{default:()=>y});var i=a(73349),n=a(3556),r=a(8051),o=a(96540),l=a(91557),s=a(67725),c=a(40515),d=a(24175),u=a(84680);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let p=(0,n.Ay)(i.Cf,{name:"DialogContentStyled"})(({theme:e})=>({padding:`${e.spacing(0,1,0,2)}!important`,height:"50vh"})),g=(0,n.Ay)("img",{name:"StickerPicker",slot:"tabImg"})(({theme:e})=>({height:e.spacing(16),maxWidth:e.spacing(20)})),h=(0,n.Ay)(r.A,{name:"titleSticker"})(({theme:e})=>({color:e.palette.text.primary,fontSize:e.mixins.pxToRem(18),marginBottom:e.spacing(1.5),fontWeight:e.typography.fontWeightSemiBold})),f=(0,n.Ay)(r.A,{name:"totalSticker"})(({theme:e})=>({color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),marginBottom:e.spacing(2)})),v=(0,n.Ay)(r.A,{name:"infoSticker"})(({theme:e})=>({display:"flex",alignItems:"center",borderBottom:`1px solid ${e.palette.divider}`,paddingBottom:e.spacing(2)}));function y({identity:e,addToMyList:t,removeToMyList:a}){let n=(0,l.dx2)(e),{i18n:y,useDialog:b,jsxBackend:x}=(0,l.PCX)(),E=x.get("core.block.listview"),{dialogProps:C}=b(),w=(0,l.IgF)(d.or,d.or,"viewByStickerSet");if(!n)return;let{image:A,title:k,statistic:S,is_added:P}=n;return o.createElement(i.lG,m({},C,{maxWidth:"sm",fullWidth:!0}),o.createElement(i.L3,{enableBack:!0},y.formatMessage({id:"sticker_detail"})),o.createElement(p,{variant:"fitScroll"},o.createElement(v,null,o.createElement(g,{draggable:!1,alt:k,src:(0,s.AE)(A,"200")}),o.createElement(r.A,{ml:2,mt:2},o.createElement(h,null,k),o.createElement(f,null,y.formatMessage({id:"total_stickers"},{value:S.total_sticker})),P?o.createElement(c.dz,{variant:"outlined",size:"medium",action:a},y.formatMessage({id:"remove"})):o.createElement(c.dz,{variant:"contained",size:"medium",action:t},y.formatMessage({id:"add"})))),o.createElement(u.P,{autoHeightMax:"100%",autoHide:!0,autoHeight:!0},o.createElement(r.A,{ml:{xs:0,sm:5},mt:2,sx:{display:"flex",flexWrap:"wrap"}},o.createElement(E,{dataSource:{apiUrl:w.apiUrl,apiParams:(0,s.A8)(w.apiParams,{id:n.id})},emptyPage:"hide",errorPage:"hide",itemView:"sticker.itemView.itemOnStickerSet",canLoadMore:!0,canLoadSmooth:!0,numberOfItemsPerPage:20,gridContainerProps:{spacing:0},gridItemProps:{xs:3,md:3,sm:3,xl:3,lg:3}})))))}},32206(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(91557),n=a(73349),r=a(96540),o=a(44562),l=a(53975);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c({updateItem:e,item:t,nameField:a}){let{useDialog:c}=(0,i.PCX)(),d=(0,i.EkY)(o.ap,o.fA,"expand_link_mobile"),u=c(),{dialogProps:m,closeDialog:p}=u,g=a?{[a]:t[a]}:{},h=t=>{e(t),p()};return r.createElement(n.lG,s({},m,{"data-testid":"addExpendLink",fullScreen:!1,maxWidth:"xs"}),r.createElement(l.FF,{initialValues:g,dialog:!0,dialogItem:u,formSchema:d,onSubmit:h}))}},12498(e,t,a){a.r(t),a.d(t,{default:()=>d});var i=a(96540),n=a(91557),r=a(73349),o=a(44562),l=a(84058),s=a.n(l);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function d(){let{useDialog:e,ListView:t,i18n:a}=(0,n.PCX)(),{dialogProps:l}=e(),d=(0,n.IgF)(o.ap,o.dI,"viewAll");return d?i.createElement(r.lG,c({},l,{maxWidth:"sm",fullWidth:!0,"data-testid":s()("dialog story_you_have_muted")}),i.createElement(r.L3,null,a.formatMessage({id:"story_you_have_muted"})),i.createElement(r.Cf,{variant:"fix",sx:{px:1,py:1}},i.createElement(t,{dataSource:d,itemView:"story.itemView.mutedItem",canLoadMore:!0,canLoadSmooth:!0,clearDataOnUnMount:!0,gridLayout:"Story - Muted Card",itemLayout:"Story - Muted Card",emptyPage:"store.block.no_muted_with_icon",emptyPageProps:{noBlock:!0,icon:"ico-eye-alt",description:"you_have_not_muted_any_stories"}}))):null}},11091(e,t,a){a.r(t),a.d(t,{default:()=>s});var i=a(91557),n=a(73349),r=a(96540),o=a(8051);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({dataSource:e,title:t,hasComparison:a,meta:s,relatedFieldName:c}){let{useDialog:d,ListView:u,i18n:m,layoutBackend:p}=(0,i.PCX)(),{dialogProps:g}=d(),h="Subscription - Dialog - List",f=p.getItemPreset(h);return r.createElement(n.lG,l({},g,{maxWidth:"sm",fullWidth:!0}),r.createElement(n.L3,{children:null!=t?t:m.formatMessage({id:"subscription_packages"}),"data-testid":"popupTitle"}),r.createElement(o.A,{sx:{flex:1,minHeight:0,maxHeight:"100%",overflow:"auto"}},r.createElement(u,{dataSource:e,itemView:"subscription_package.itemView.smallCard",limitItemsLoadSmooth:3,gridLayout:h,itemLayout:h,itemProps:{...null==f?void 0:f.itemProps,setFieldValue:null==s?void 0:s.setFieldValue,relatedFieldName:c}}),a?r.createElement(o.A,{px:2,pb:2,sx:{display:"flex",justifyContent:"flex-end"}},r.createElement(i.N_E,{to:"/subscription/package",color:"primary",target:"_blank"},m.formatMessage({id:"compare_packages"}))):null))}},84314(e,t,a){a.d(t,{A:()=>l});var i=a(91557),n=a(53975),r=a(19971),o=a(96540);function l({user:e,submitAction:t="@login",formName:a="login",title:l}){let[s,c]=o.useState(),d=(0,i.EkY)("user","user",a);o.useEffect(()=>{e&&c(e)},[e]);let u={email:(null==s?void 0:s.email)||(null==s?void 0:s.phone_number)||(null==s?void 0:s.user_name),password:null==s?void 0:s.password};return o.createElement(r.A,{component:"main",maxWidth:"xs"},o.createElement(n.ok,{key:(null==s?void 0:s.id)||"none",submitAction:t,initialValues:u,formSchema:l?{...d,title:l}:d,navigationConfirmWhenDirty:!1}))}},19909(e,t,a){a.r(t),a.d(t,{default:()=>u});var i=a(91557),n=a(73349),r=a(96540),o=a(84314),l=a(8051),s=a(63461),c=a(40515);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function u({title:e,formName:t="login_popup"}){let{useDialog:a}=(0,i.PCX)(),{dialogProps:u,closeDialog:m}=a();return r.createElement(n.lG,d({},u,{maxWidth:"xs",fullWidth:!0}),r.createElement(l.A,{py:3},r.createElement(s.A,{sx:{position:"absolute",top:8,right:8},onClick:m},r.createElement(c.s4,{icon:"ico-close"})),r.createElement(o.A,{submitAction:"@loginFromDialog",formName:t,title:e})))}},39674(e,t,a){a.r(t),a.d(t,{default:()=>m});var i=a(91557),n=a(73349),r=a(84680),o=a(40515),l=a(3556),s=a(8051),c=a(96540);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let u=(0,l.Ay)(o.rq,{name:"DialogSearch"})(({theme:e})=>({"& input::placeholder, .ico":{color:e.palette.text.hint}}));function m(){let{useDialog:e,i18n:t,ListView:a}=(0,i.PCX)(),{dialogProps:o}=e(),[l,m]=c.useState(""),p=c.useCallback(e=>{m(e)},[]),g=t.formatMessage({id:"edit_your_shortcuts"}),h=c.useMemo(()=>`/user/shortcut/edit/?query=${l}`,[l]);return c.useEffect(()=>()=>{},[]),c.createElement(n.lG,d({},o,{maxWidth:"xs",fullWidth:!0}),c.createElement(n.L3,null,g),c.createElement(n.Cf,{variant:"fitScroll",sx:{height:"45vh"}},c.createElement(s.A,{sx:{p:2}},c.createElement(u,{placeholder:t.formatMessage({id:"search_your_page_groups_dots"}),onChanged:p})),c.createElement(r.P,{autoHeightMax:"100%",autoHide:!0,autoHeight:!0},c.createElement(a,{emptyPage:"core.block.no_content",emptyPageProps:{title:"no_results_found"},dataSource:{apiUrl:"/user/shortcut/edit",apiParams:{q:l||void 0}},pagingId:h,canLoadMore:!0,clearDataOnUnMount:!0,itemView:"shortcut.itemView.mainCard",gridLayout:"Shortcut - Small Lists",itemLayout:"Shortcut - Small Lists"}))))}},34713(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(91557),n=a(73349),r=a(53975),o=a(96540),l=a(31741);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c({initialValues:e}){let{useDialog:t}=(0,i.PCX)(),{dialogProps:a}=t(),c=(0,i.IgF)(l.a,l.a,"composerShareItem");return o.createElement(n.lG,s({},a,{maxWidth:"sm",fullWidth:!0}),o.createElement(r.aI,{initialValues:e,dataSource:c,dialog:!0}))}},66715(e,t,a){a.r(t),a.d(t,{default:()=>l});var i=a(73349),n=a(91557),r=a(96540);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let l=(0,n.G5k)(function({item:e,identity:t,error:a,searchParams:l}){let{useDialog:s,useIsMobile:c,i18n:d,jsxBackend:u}=(0,n.PCX)(),{dialogProps:m}=s(),p=c(!0);return e?r.createElement(i.lG,o({scroll:"body"},m,{fullScreen:!a,"data-testid":"popupDetailVideo",onBackdropClick:void 0}),p||a?r.createElement(i.L3,{backIcon:"ico-close",enableBack:!a,disableClose:p},d.formatMessage({id:"video"})):null,r.createElement(i.Cf,{sx:{padding:e=>p?e.spacing(2):"0 !important",height:p?"auto":"100% !important"}},u.render({component:p?"video.ui.detailMobile":"video.ui.detail",props:{identity:t,error:a,searchParams:l}}))):null})}}]);