"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-advertise-blocks-Detail-Block"],{12645(e,t,a){a.r(t),a.d(t,{default:()=>M});var i=a(91557),n=a(3556),l=a(8051),r=a(63461),o=a(52705),d=a(60780),s=a(96540),m=a(53975),c=a(67725),u=a(47186),p=a(80998),v=a(40515),g=a(77299);let h=({isViewChart:e,pageParamsInitSearch:t,isSearch:a})=>{let{jsxBackend:n,useIsMobile:r,useFetchDetail:o,usePageParams:d}=(0,i.PCX)(),m=r(),c=d(),u=(0,i.IgF)(p.C3,p.C3,"viewClickReport"),v=(0,i.IgF)(p.C3,p.C3,"viewImpressionReport"),h=s.useMemo(()=>!a&&t?t:c,[a,t,c]),[y,A]=o({dataSource:(null==h?void 0:h.view)?u:null,pageParams:h}),[b,E]=o({dataSource:(null==h?void 0:h.view)?v:null,pageParams:h}),_=s.useMemo(()=>[{grid:6,grid_mobile:12,icon:"ico-mouse-alt",type:p.SX,total:null==y?void 0:y.total,phrase:null==y?void 0:y.phrase,view:null==y?void 0:y.view,data:null==y?void 0:y.statistic},{grid:6,grid_mobile:12,icon:"ico-eye",type:p.BN,total:null==b?void 0:b.total,phrase:null==b?void 0:b.phrase,view:null==b?void 0:b.view,data:null==b?void 0:b.statistic}],[y,b]),w=n.get("advertise.itemView.itemTable"),C=n.get("advertise.itemView.itemChart");return e?s.createElement(l.A,{sx:{my:2}},s.createElement(g.Ay,{container:!0,spacing:2},_.map(e=>s.createElement(g.Ay,{key:e.type,item:!0,xs:m?e.grid_mobile:e.grid},s.createElement(C,{data:e,loading:e.type===p.SX?A:E}))))):s.createElement(l.A,{sx:{my:2}},s.createElement(g.Ay,{container:!0,spacing:2},_.map(e=>s.createElement(g.Ay,{key:e.type,item:!0,xs:m?e.grid_mobile:e.grid},s.createElement(w,{data:e,loading:e.type===p.SX?A:E})))))},y=s.memo(h);var A=a(62193),b=a.n(A);let E="Detail-Advertise",_=(0,n.Ay)(l.A,{name:E,slot:"root"})(({theme:e})=>({backgroundColor:e.palette.background.paper,padding:e.spacing(2),borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius})),w=(0,n.Ay)(r.A,{name:E})(()=>({transform:"translate(-7px,0)"})),C=(0,n.Ay)(l.A,{name:E})(({theme:e})=>({margin:e.spacing(2,0)})),f=(0,n.Ay)(l.A,{name:E})(({theme:e})=>({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",[e.breakpoints.down("sm")]:{flexDirection:"column"}})),k=(0,n.Ay)(v.s4,{name:E,shouldForwardProp:e=>"active"!==e})(({theme:e,active:t})=>({...t&&{color:e.palette.primary.main}})),x=(0,n.Ay)(l.A,{name:E,shouldForwardProp:e=>"isFormSearch"!==e})(({theme:e,isFormSearch:t})=>({marginLeft:"auto",[e.breakpoints.down("sm")]:{marginLeft:"inherit",marginRight:"auto",marginTop:e.spacing(1)}}));function S({detailActionMenu:e,identity:t,item:a}){var n;let{navigate:r,jsxBackend:v,i18n:g,usePageParams:h}=(0,i.PCX)(),[A,E]=s.useState(!0),S=v.get("advertise.block.itemDetailInfo"),I=(0,i.IgF)(p.C3,p.C3,"viewItem"),{id:F}=h(),[M,$]=s.useState(null),[R,P]=s.useState(!1),[B,D]=s.useState(null),X=(0,i.IgF)(p.C3,p.C3,"getChartForm"),L=(e,t)=>{let a=I.apiRules,i=e.view,n=e[`start_date_${i}`],l=e[`end_date_${i}`],o=(0,c.FI)({view:i,[`start_date_${i}`]:n,[`end_date_${i}`]:l},a);r(`?${u.stringify(o)}`,{replace:!0}),$(null),P(!0),t.setSubmitting(!1)},N=()=>{E(e=>!e)},T=()=>{},V=({data:e})=>{if(!e||!e.value)return;let t=e.value.view,a=e.value[`start_date_${t}`],i=e.value[`end_date_${t}`];$({id:F,view:t,[`start_date_${t}`]:a,[`end_date_${t}`]:i})},W=e=>{D(e)};if(!a)return null;let j=s.createElement(l.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"}},s.createElement(o.A,{animation:"wave",height:30,width:200}),s.createElement(o.A,{animation:"wave",height:30,width:200}),s.createElement(o.A,{animation:"wave",height:30,width:200}));return s.createElement(_,null,s.createElement(l.A,{sx:{mb:2,mt:1}},s.createElement(i.N_E,{to:"/advertise",underline:"hover",color:"primary"},g.formatMessage({id:"back_to_all_ads"}))),s.createElement(S,{identity:t,item:a,detailActionMenu:e}),s.createElement(C,null,X&&b()(B)?s.createElement(l.A,null,s.createElement(f,null,s.createElement(m.aI,{hideWhenError:!0,loadingComponent:j,navigationConfirmWhenDirty:!1,dataSource:{apiMethod:X.apiMethod,apiUrl:(0,c.vi)(X.apiUrl,{id:F})},onLoaded:V,onFailure:W,onSubmit:L}),s.createElement(x,null,s.createElement(w,{size:"small",onClick:N,role:"button",id:"back","data-testid":"buttonChart"},s.createElement(k,{active:A,icon:"ico-stats-dots"})),s.createElement(w,{size:"small",onClick:N,role:"button",id:"back","data-testid":"buttonTable"},s.createElement(k,{active:!A,icon:"ico-th-o"})))),s.createElement(y,{isViewChart:A,pageParamsInitSearch:M,isSearch:R})):null,(null==a?void 0:null===(n=a.extra)||void 0===n?void 0:n.can_export)?s.createElement(d.A,{onClick:T,"data-testid":"buttonExport",color:"primary",variant:"outlined"},g.formatMessage({id:"export"})):null))}S.displayName="Advertise";let I=(0,i.NgA)(e=>({detailActionMenu:e._resourceMenus.advertise.advertise.detailActionMenu.items}))(S),F=(0,i.$MH)((0,i.FB$)(I,()=>{},{})),M=(0,i.WvA)({extendBlock:F})}}]);