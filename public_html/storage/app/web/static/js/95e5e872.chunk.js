"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-invite-blocks-InviteListing-Block"],{45331(e,t,i){i.d(t,{_:()=>r});var n=i(26287);let r=(0,n.Ay)({resolved:{},chunkName:()=>"dataGrid",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e("dataGrid").then(i.bind(i,86867)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>86867})},34676(e,t,i){i.r(t),i.d(t,{default:()=>w});var n=i(91557),r=i(3556),a=i(8051),l=i(84680),o=i(96540),s=i(53975),c=i(67725),m=i(47186),d=i(80532),u=i(45331),p=i(71468),v=i(62193),g=i.n(v),f=i(2404),h=i.n(f),y=i(90179),k=i.n(y),E=i(2677);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}let A=(0,r.Ay)(a.A,{name:"ContentWrapper"})(({theme:e})=>({padding:e.spacing(3,2,2),display:"flex",flexDirection:"column",[e.breakpoints.down("md")]:{padding:e.spacing(0)},"& .MuiCheckbox-root":{padding:0}}));function S({title:e,...t}){let{usePageParams:i,navigate:r,jsxBackend:a,BatchSelectProvider:v,dispatch:f,useIsMobile:y}=(0,n.PCX)(),S=i(),w=y(),[L,C]=o.useState([]),[_,I]=o.useState(!1),[x,P]=o.useState(d.c6),B=(0,n.IgF)(d.GA,d.rc,"viewAll"),G=(0,n.IgF)(d.GA,d.rc,"getGrid"),$=(0,c.A8)(B.apiParams,S,B.apiRules),D=`${(0,c.vi)(B.apiUrl,S)}?${m.stringify(k()($,["page"]))}`,M=(0,p.d4)(e=>(0,n.qRQ)(e,D)),R=(0,n.EkY)(d.GA,d.rc,"search"),F=a.get("core.block.mainListing"),O=(e,t)=>{let i=B.apiRules,n=(0,c.FI)(e,i),a=`${d.c6}?${m.stringify(n)}`;g()(n)||h()(x,a)||(C([]),P(a)),r(`?${m.stringify(n)}`,{replace:!0}),t.setSubmitting(!1)},W=(e,t)=>{let i=t?[...L,e]:L.filter(t=>t!==e);C(i)},q=e=>{I(!0),f({type:`${e}/selectAll`,payload:{ids:L},meta:{onSuccess(){C([]),I(!1)},onFailure(){I(!1)}}})},N=o.useMemo(()=>{var e;return null==M?void 0:null===(e=M.ids)||void 0===e?void 0:e.map(e=>parseInt(e.split(".")[3]))},[M]),T=()=>{N.length===L.length?C([]):C(N)};o.useEffect(()=>{let e=L.some(e=>!N.includes(e));e&&C(e=>e.filter(e=>N.includes(e)))},[null==N?void 0:N.length]);let V={handleToggleItem:W,handleActionName:q,handleSelectAll:T,pagingIds:N,checkedList:L,pagingData:M,loading:_};return w?o.createElement(l.eB,b({testid:"inviteListBlock"},t),o.createElement(l.Tw,{title:e}),o.createElement(l.tD,b({},t),o.createElement(v,{value:V},o.createElement(s.ok,{navigationConfirmWhenDirty:!1,formSchema:R,onSubmit:O}),o.createElement(F,{itemView:"invite.itemView.inviteRecord",dataSource:B,emptyPage:"invite.itemView.no_content_record",blockLayout:"Large Main Lists",gridContainerProps:{spacing:0},pageParams:S,canLoadMore:!0,loadMoreType:"pagination",numberOfItemsPerPage:15})))):o.createElement(l.eB,b({testid:"inviteListBlock"},t),o.createElement(l.Tw,{title:e}),o.createElement(l.tD,b({},t),o.createElement(v,{value:V},o.createElement(A,null,o.createElement(s.ok,{navigationConfirmWhenDirty:!1,formSchema:R,onSubmit:O}),o.createElement(u._,{dataSource:G,gridName:"invite.listing",errorComponent:E.A})))))}S.displayName="Invite_Listing";let w=(0,n.WvA)({extendBlock:S,name:"InviteListing"})}}]);