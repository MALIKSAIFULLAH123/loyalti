(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-group-blocks-ProfileHeader-Block"],{89637(e,t,n){"use strict";n.d(t,{A:()=>E});var a=n(58168),i=n(98587),r=n(96540),o=n(20053),l=n(75659),s=n(3556),c=n(92353),d=n(18799),m=n(38413),u=n(31609);function p(e){return(0,u.A)("MuiCard",e)}(0,m.A)("MuiCard",["root"]);var g=n(74848);let v=["className","raised"],f=e=>{let{classes:t}=e;return(0,l.A)({root:["root"]},p,t)},h=(0,s.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),b=r.forwardRef(function(e,t){let n=(0,c.A)({props:e,name:"MuiCard"}),{className:r,raised:l=!1}=n,s=(0,i.A)(n,v),d=(0,a.A)({},n,{raised:l}),m=f(d);return(0,g.jsx)(h,(0,a.A)({className:(0,o.default)(m.root,r),elevation:l?8:void 0,ref:t,ownerState:d},s))}),E=b},25669(e,t,n){"use strict";n.d(t,{A:()=>c});var a=n(58168),i=n(98587),r=n(96540);let o=["getTrigger","target"];function l(e,t){let{disableHysteresis:n=!1,threshold:a=100,target:i}=t,r=e.current;return i&&(e.current=void 0!==i.pageYOffset?i.pageYOffset:i.scrollTop),(!!n||void 0===r||!(e.current<r))&&e.current>a}let s="undefined"!=typeof window?window:null;function c(e={}){let{getTrigger:t=l,target:n=s}=e,c=(0,i.A)(e,o),d=r.useRef(),[m,u]=r.useState(()=>t(d,c));return r.useEffect(()=>{let e=()=>{u(t(d,(0,a.A)({target:n},c)))};return e(),n.addEventListener("scroll",e,{passive:!0}),()=>{n.removeEventListener("scroll",e,{passive:!0})}},[n,t,JSON.stringify(c)]),m}},24176(e,t,n){var a=n(30361);e.exports=function(e,t){var n=e.length;if(n)return a(t+=t<0?n:0,n)?e[t]:void 0}},78646(e,t,n){var a=n(24176),i=n(61489);e.exports=function(e,t){return e&&e.length?a(e,i(t)):void 0}},76358(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>Y});var a=n(91557),i=n(81966),r=n(80281),o=n(84680),l=n(40515),s=n(67725),c=n(3556),d=n(8051),m=n(87773),u=n(60780),p=n(12789),g=n(25669),v=n(62193),f=n.n(v),h=n(78646),b=n.n(h),E=n(96540),A=n(56752),x=n(52705),y=n(56525),w=n(85838);let _=(0,y.A)(e=>(0,w.A)({root:{},profileUserWrapper:{padding:e.spacing(2),background:e.palette.background.paper,borderBottom:e.mixins.border("secondary"),display:"flex"},name:{},type:{marginTop:e.spacing(1)},btn:{marginLeft:"auto"},menu:{marginBottom:e.spacing(2),background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,height:e.spacing(7.5),display:"flex",alignItems:"center","& > .MuiSkeleton-root":{padding:e.spacing(2),marginLeft:e.spacing(2)}},btnGroups:{display:"flex",marginLeft:"auto",marginRight:e.spacing(2),"& .MuiSkeleton-root":{padding:e.spacing(1),marginLeft:e.spacing(1)}}}),{name:"GroupProfileHeaderSkeleton"});function k(){let e=_();return E.createElement(l.mc,{maxWidth:"md",gutter:!0},E.createElement(d.A,{sx:{background:e=>e.palette.background.paper}},E.createElement(x.A,{variant:"rectangular",sx:{height:320},animation:!1})),E.createElement("div",{className:e.profileUserWrapper},E.createElement("div",{className:e.name},E.createElement(x.A,{variant:"text",width:400,height:42}),E.createElement(x.A,{variant:"text",width:120,className:e.type})),E.createElement("div",{className:e.btn},E.createElement(x.A,{variant:"button",width:140,height:32}))),E.createElement("div",{className:e.menu},E.createElement(x.A,{variant:"button",width:100,height:20}),E.createElement(x.A,{variant:"button",width:100,height:20}),E.createElement(x.A,{variant:"button",width:100,height:20}),E.createElement(x.A,{variant:"button",width:100,height:20}),E.createElement(x.A,{variant:"button",width:100,height:20}),E.createElement("div",{className:e.btnGroups},E.createElement(x.A,{variant:"button",width:32,height:32}),E.createElement(x.A,{variant:"button",width:32,height:32}))))}var C=n(89637),M=n(63461);let R=(0,c.Ay)(C.A)(({theme:e})=>({display:"flex",justifyContent:"space-between",background:"light"===e.palette.mode?e.layoutSlot.background.paper:e.palette.background.default,padding:e.spacing(2),color:e.palette.text.secondary,boxShadow:"none"})),S=(0,c.Ay)(m.A)(({theme:e})=>({})),L=({item:e})=>{let{i18n:t}=(0,a.PCX)();return(null==e?void 0:e.is_muted)?E.createElement(R,null,E.createElement(d.A,{sx:{display:"flex",alignItems:"center"}},E.createElement(d.A,null,E.createElement(M.A,{size:"medium"},E.createElement(l.s4,{icon:"ico-volume-del-o"}))),E.createElement(d.A,{sx:{paddingLeft:2}},E.createElement(m.A,{variant:"h5",color:"text.primary",paddingBottom:.5},t.formatMessage({id:"you_have_been_muted_in_this_group"})),E.createElement(S,{variant:"body2"},t.formatMessage({id:"your_can_still_access_its_post_and_chat"}))))):null};var B=n(71468);let I="HeaderProfileInPageDetail",T=(0,c.Ay)(d.A,{name:I,slot:"buttonWrapper",overridesResolver:(e,t)=>[t.buttonWrapper]})(({theme:e})=>({display:"flex",justifyContent:"end",alignItems:"center",marginLeft:e.spacing(4),"& button":{fontWeight:"bold",boxShadow:"none",width:"max-content",marginLeft:e.spacing(1),"& .ico":{fontSize:e.mixins.pxToRem(15)}},[e.breakpoints.down("sm")]:{justifyContent:"center",flexFlow:"row wrap",minHeight:40,padding:"4px 0",marginLeft:"0","& button":{minWidth:"120px"}}})),W=(0,c.Ay)(m.A)(({theme:e})=>({fontWeight:"normal",paddingTop:e.spacing(1)})),z=(0,c.Ay)(d.A,{name:I,slot:"userInfo",overridesResolver:(e,t)=>[t.userInfo]})(({theme:e})=>({backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(2,2,2)})),N=(0,c.Ay)(d.A,{name:I,slot:"infoNameActionMenu",overridesResolver:(e,t)=>[t.infoNameActionMenu]})(({theme:e})=>({paddingTop:e.spacing(.5),display:"flex",justifyContent:"space-between",alignItems:"flex-start",[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%",alignItems:"center"}})),j=(0,c.Ay)(d.A)(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"flex-start",[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%",alignItems:"flex-start",marginBottom:e.spacing(2)}})),H=(0,c.Ay)(d.A)(({theme:e})=>({"> div":{marginTop:e.spacing(2)}})),P=(0,c.Ay)(l.s4,{name:"FeaturedIcon"})(({theme:e})=>({color:e.palette.primary.main,marginLeft:e.spacing(2),fontSize:24})),F=(0,c.Ay)(u.A,{name:"ButtonJoin"})(({theme:e})=>({"&.Mui-disabled":{..."dark"===e.palette.mode&&{color:`${e.palette.text.hint} !important`}}})),U=(0,c.Ay)("div",{name:I,slot:"profileHeaderBottom",shouldForwardProp:e=>"isSticky"!==e,overridesResolver:(e,t)=>[!e.isSticky&&t.profileHeaderBottom]})(({theme:e})=>{var t;return{backgroundColor:e.mixins.backgroundColor("paper"),borderTop:"solid 1px",borderTopColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,overflow:"hidden",[e.breakpoints.down("sm")]:{flexWrap:"wrap",flexDirection:"column",borderTop:"none",height:"auto"},"& .MuiProfileMenu-tabItem":{padding:e.spacing(2)}}}),$=(0,c.Ay)("div",{name:I,overridesResolver:(e,t)=>[t.wrapperMenu,e.isSticky&&t.wrapperMenuSticky],shouldForwardProp:e=>"isSticky"!==e&&"scrollTrigger"!==e})(({theme:e,isSticky:t,scrollTrigger:n})=>{var a;return{display:"flex",flexGrow:1,maxWidth:"100%",...t&&{paddingLeft:e.spacing(2)},[e.breakpoints.down("md")]:{paddingLeft:e.spacing(2),...n&&{marginTop:e.spacing(1)}},[e.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",padding:e.spacing(0,2),borderBottom:"solid 1px",borderBottomColor:null===(a=e.palette.border)||void 0===a?void 0:a.secondary}}}),G=(0,c.Ay)("div",{name:"UserStickyWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(1,0)})),X=(0,c.Ay)(p.A,{name:"UserAvatarSticky"})(({theme:e})=>({cursor:"pointer",width:48,height:48,borderRadius:e.shape.borderRadius})),q=(0,c.Ay)("div",{name:"UserNameSticky"})(({theme:e})=>({cursor:"pointer",fontSize:e.mixins.pxToRem(18),fontWeight:"bold",marginLeft:e.spacing(1.5),WebkitLineClamp:2,display:"-webkit-box",padding:"0",overflow:"hidden",maxWidth:"100%",whiteSpace:"normal",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"})),D=(0,c.Ay)("div",{name:I,slot:"actionButtons",overridesResolver:(e,t)=>[t.actionButtons]})(({theme:e})=>({display:"flex",padding:e.spacing(0,2),"& button":{marginLeft:e.spacing(1),textTransform:"capitalize",fontWeight:"bold",whiteSpace:"nowrap",borderRadius:e.spacing(.5),fontSize:e.mixins.pxToRem(13),padding:e.spacing(.5,1.25),marginTop:e.spacing(.5),marginBottom:e.spacing(.5),minWidth:e.spacing(4),height:e.spacing(4),"& .ico":{fontSize:e.mixins.pxToRem(13)}},[e.breakpoints.down("sm")]:{width:"100%",alignItems:"center",justifyContent:"flex-start","& button":{margin:e.spacing(2,0,2,2)},"& button + button":{marginLeft:e.spacing(1)}}})),O=(0,c.Ay)("div",{name:"ProfileMenuWrapper"})(({theme:e})=>({flex:1,minWidth:0}));function V({item:e,user:t,identity:n,profileMenu:i,profileActionMenu:c,handleAction:p,actions:v,state:h}){var x,y,w;let{i18n:_,usePageParams:C,ProfileHeaderCover:M,ItemActionMenu:R,dispatch:S,jsxBackend:I,getAcl:V,getSetting:J,assetUrl:Y,useIsMobile:Z,useTheme:K}=(0,a.PCX)(),Q=V(),ee=J(),{tab:et="home"}=C(),{user:en}=(0,a.wVH)(),[ea,ei]=E.useState(!1),er=I.get("group.itemView.pendingReviewCard"),eo=I.get("group.itemView.pendingReviewGroupCard"),el=(0,B.d4)(t=>(0,a.NYR)(t,null==e?void 0:e.module_name,null==e?void 0:e.resource_name,"itemActionInviteMenu")),es=(0,g.A)(),ec=Z(!0),ed=K(),em=null!==(w=null===(x=ed.appBarMobileConfig)||void 0===x?void 0:x.nav)&&void 0!==w?w:48,eu=(0,E.useCallback)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);if(!e)return E.createElement(k,null);let{cover_photo_id:ep,extra:eg,title:ev,id:ef,statistic:eh,cover_photo_position:eb,membership:eE}=e,eA=(0,s.AE)(e.cover,"240")||(0,s.AE)(e.image,"240"),ex={item:e,acl:Q,setting:ee},ey={item:{...e,is_admin:(null==t?void 0:t.id)===(null==en?void 0:en.id)},acl:Q,setting:ee},ew=(0,s.Ue)(i.items,ex),e_=(0,s.Zk)((0,s.Ue)(c.items,ey),ey),ek=(0,s.Ue)(null==el?void 0:el.items,ex),eC=(null===(y=b()(e_,0))||void 0===y?void 0:y.name)!=="manage"?b()(e_,0):void 0,eM=[r.HV,r.$C,r.FX].includes(eE)?eC:void 0,eR=eM?e_.slice(1):e_,eS=(0,s.AE)(e.cover,"1024",Y("group.cover_no_image")),eL=()=>{S({type:"group/search",payload:{identity:n}})},eB=()=>{S({type:"user/showDialogLogin",meta:{onSuccess:()=>ei(!1)}})},eI=()=>{S({type:"group/inviteFriends",payload:{identity:n}})},eT=e=>{ei(!0),f()(en)?eB():p(null==eM?void 0:eM.value,{onSuccess:()=>ei(!1)})};return E.createElement(o.eB,null,E.createElement(o.tD,null,E.createElement(d.A,null,E.createElement(M,{identity:n,image:eS,imageId:ep,alt:ev,left:0,top:eb||0}),E.createElement(d.A,null,E.createElement(l.mc,{maxWidth:"md",gutter:!0},E.createElement(z,null,E.createElement(l.FN,{variant:"itemView",value:e.is_sponsor,item:e}),E.createElement(N,null,E.createElement(j,null,E.createElement(d.A,null,E.createElement(m.A,{variant:"h2"},e.title,e.is_featured?E.createElement(P,{icon:"ico-check-circle"}):null),E.createElement(W,{variant:"subtitle1",color:"text.secondary"},E.createElement(l.J7,null,(null==eg?void 0:eg.can_view_privacy)?E.createElement("span",null,e.reg_name):null,(null==eh?void 0:eh.total_member)&&(null==eg?void 0:eg.can_view_members)?E.createElement(a.N_E,{to:`/group/${e.id}/member?stab=all_members`},_.formatMessage({id:"total_member"},{value:eh.total_member})):null,(null==eh?void 0:eh.total_pending_requests)&&(null==eg?void 0:eg.can_view_members)&&(null==eg?void 0:eg.can_manage_pending_request_tab)?E.createElement(a.N_E,{to:`/group/${e.id}/member?stab=pending_requests`},_.formatMessage({id:"total_pending_requests"},{value:eh.total_pending_requests})):null)))),E.createElement(T,null,eM&&E.createElement(F,{size:"small",variant:null==eM?void 0:eM.variant,disabled:(null==eM?void 0:eM.disabled)||ea,startIcon:E.createElement(l.s4,{icon:null==eM?void 0:eM.icon}),color:"primary",onClick:()=>eT(eM.value)},null==eM?void 0:eM.label),1===ek.length?E.createElement(u.A,{onClick:eI,size:"small",variant:"outlined",startIcon:E.createElement(l.s4,{sx:{marginLeft:"0 !important"},icon:"ico-envelope"})},E.createElement("span",null,_.formatMessage({id:"invite_friends"}))):null,ek.length>1?E.createElement(R,{items:ek,state:h,handleAction:p,control:E.createElement(u.A,{size:"small",variant:"outlined",startIcon:E.createElement(l.s4,{sx:{marginLeft:"0 !important"},icon:"ico-envelope"})},E.createElement("span",null,_.formatMessage({id:"invite"})))}):null)),E.createElement(H,null,E.createElement(A.default,{item:e,actions:v}),E.createElement(er,{item:e,actions:v}),E.createElement(eo,{item:e,actions:v}),E.createElement(L,{item:e})))),E.createElement(l.TM,{sx:ec&&!es?{top:em}:""},({sticky:t})=>E.createElement(l.mc,{maxWidth:"md",gutter:!0},t?E.createElement(U,{isSticky:!0},E.createElement($,{isSticky:!0,scrollTrigger:es},E.createElement(G,null,E.createElement(X,{src:eA,onClick:eu}),E.createElement(q,{onClick:eu},e.title))),E.createElement(D,null,0===e.reg_method||(null==eM?void 0:eM.name)==="joined"?E.createElement(u.A,{variant:"outlined",color:"primary",onClick:eL,sx:{display:"none"}},E.createElement(l.s4,{icon:"ico-search-o"})):null,1===ek.length?E.createElement(u.A,{onClick:eI,size:"small",variant:"outlined",sx:{width:"100%"},startIcon:E.createElement(l.s4,{sx:{marginLeft:"0 !important"},icon:"ico-envelope"})},E.createElement("span",null,_.formatMessage({id:"invite_friends"}))):null,ek.length>1?E.createElement(R,{items:ek,state:h,handleAction:p,control:E.createElement(u.A,{size:"small",variant:"outlined",startIcon:E.createElement(l.s4,{sx:{marginLeft:"0 !important"},icon:"ico-envelope"})},E.createElement("span",null,_.formatMessage({id:"invite"})))}):null,0===e.reg_method||(null==eM?void 0:eM.name)==="joined"?E.createElement(u.A,{variant:"outlined",color:"primary",onClick:eL},E.createElement(l.s4,{icon:"ico-search-o"})):null,E.createElement(R,{id:"actionMenu",label:"ActionMenu",handleAction:p,items:eR,control:E.createElement(u.A,{variant:"outlined",color:"primary",size:"large"},E.createElement(l.s4,{icon:"ico-dottedmore-o"}))}))):E.createElement(U,null,E.createElement($,{scrollTrigger:es},E.createElement(O,null,E.createElement(l.XR,{items:ew,activeTab:et,prefix:(null==e?void 0:e.link)||`/group/${ef}`,maxDisplayTab:5}))),E.createElement(D,null,0===e.reg_method||(null==eM?void 0:eM.name)==="joined"?E.createElement(u.A,{variant:"outlined",color:"primary",onClick:eL},E.createElement(l.s4,{icon:"ico-search-o"})):null,E.createElement(R,{id:"actionMenu",label:"ActionMenu",handleAction:p,items:eR,control:E.createElement(u.A,{variant:"outlined",color:"primary",size:"large"},E.createElement(l.s4,{icon:"ico-dottedmore-o"}))})))))))))}V.LoadingSkeleton=k;let J=(0,a.$MH)((0,a.L2$)(V,i.A)),Y=(0,a.WvA)({name:"GroupProfileHeaderBlock",extendBlock:J})},56752(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>h});var a=n(91557),i=n(80281),r=n(40515),o=n(3556),l=n(89637),s=n(87773),c=n(8051),d=n(86670),m=n(60780),u=n(96540),p=n(71468);let g=(0,o.Ay)(l.A)(({theme:e})=>({display:"flex",justifyContent:"space-between",padding:e.spacing(2),boxShadow:"none",..."light"===e.palette.mode&&{backgroundColor:e.layoutSlot.background.paper}})),v=(0,o.Ay)(s.A)(({theme:e})=>({color:e.palette.text.primary})),f=({item:e,actions:t})=>{let{i18n:n}=(0,a.PCX)(),o=(0,p.d4)(t=>(0,a.B_w)(t,null==e?void 0:e.invite)),l=(0,p.d4)(e=>(0,a.B_w)(e,null==o?void 0:o.user));if((null==e?void 0:e.membership)!==i.nH&&(null==e?void 0:e.membership)!==i.e3||!l||!o)return null;let{invited_admin:f,invited_moderator:h,expired_description:b}=o,E="person_who_invite_me";return f&&(E="person_who_invite_me_to_admin"),h&&(E="person_who_invite_me_to_moderator"),u.createElement(g,null,u.createElement(c.A,{sx:{display:"flex",alignItems:"center"}},u.createElement(r.H8,{size:48,user:l}),u.createElement(c.A,{sx:{paddingLeft:2}},u.createElement(v,{component:"div",variant:"h5",sx:{marginBottom:.5}},n.formatMessage({id:E},{value:l.full_name})),b?u.createElement(s.A,{component:"span",variant:"body2",color:"text.hint"},b):null)),u.createElement(d.A,{sx:{paddingX:0}},u.createElement(m.A,{size:"small",variant:"contained",onClick:t.acceptInvite,component:"h5"},n.formatMessage({id:"accept_invite"})),u.createElement(r.Ak,{size:"small",variant:"outlined",onClick:t.declineInvite,component:"h5"},n.formatMessage({id:"decline_invite"}))))},h=f}}]);