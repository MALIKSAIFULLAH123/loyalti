"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-story-blocks-StoryDetail-Block"],{24774(e,t,a){a.d(t,{A:()=>h});var i=a(91557),o=a(85332),l=a(3556),n=a(8051),r=a(87773),s=a(96540);let d="PenddingView",c=(0,l.Ay)(n.A,{name:d,slot:"root",shouldForwardProp:e=>"isDetailPage"!==e})(({theme:e,isDetailPage:t})=>({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none",backgroundColor:"#000",paddingTop:e.spacing(1.5),flexDirection:"column",cursor:"pointer","& .MuiSkeleton-root":{..."light"===e.palette.mode&&{backgroundColor:e.palette.grey.A200}},...t&&{paddingTop:0}})),p=(0,l.Ay)(n.A,{name:d,slot:"ItemWrapper",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,width:t})=>({position:"relative",margin:"auto",height:"100%",display:"flex",justifyContent:"center",flexDirection:"column",width:t})),y=(0,l.Ay)(r.A)(({theme:e})=>({color:"#fff",fontSize:e.mixins.pxToRem(14),paddingBottom:e.spacing(1.5),textAlign:"center",width:"80%"})),u=(0,l.Ay)(n.A,{name:d,slot:"ItemInteractionStyled",shouldForwardProp:e=>"isDetailPage"!==e&&"isOwner"!==e&&"isMobile"!==e})(({theme:e,isDetailPage:t,isOwner:a,isMobile:i})=>({minHeight:t?54:64,...(a||t&&i)&&{display:"none"}})),m=(0,l.Ay)(n.A,{name:d,slot:"ContentStyled",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,height:t,width:a})=>({backgroundColor:e.palette.grey["900"],borderRadius:e.shape.borderRadius,height:t,width:a,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minWidth:"120px"}));function h({isDetailPage:e=!1,isOwner:t=!1}){let{i18n:a,useIsMobile:l,dispatch:n}=(0,i.PCX)(),{fire:r}=(0,o.vC)(),d=l(!0),h=s.useRef(),[g,f]=(0,o.Uf)(h),w=s.useCallback(()=>{r({type:"setReady",payload:!0}),r({type:"setMuted",payload:!1}),n({type:"story/updateMutedStatus",payload:!1})},[r]);return s.createElement(c,{isDetailPage:e},s.createElement(p,{ref:h,width:g},s.createElement(m,{height:f,width:g,onClick:w},s.createElement(y,{component:"span"},a.formatMessage({id:"click_to_view_story"})))),s.createElement(u,{isDetailPage:e,isOwner:t,isMobile:d}))}},73220(e,t,a){a.d(t,{A:()=>D,I:()=>P});var i=a(91557),o=a(84680),l=a(96540),n=a(88316),r=a(3556),s=a(8051),d=a(63461),c=a(97763),p=a(87773),y=a(32113),u=a(51147),m=a(24774),h=a(85332),g=a(40515);let f="StoryDetail",w=(0,r.Ay)(s.A,{name:f,slot:"RootStyled"})(({theme:e})=>({backgroundColor:e.palette.background.paper,padding:"0 !important",height:"100%",display:"flex",overflowX:"hidden",[e.breakpoints.down("md")]:{height:"auto",flexFlow:"column"}})),A=(0,r.Ay)("div",{name:f,slot:"DetailStory",shouldForwardProp:e=>"isOwner"!==e&&"isMobile"!==e})(({theme:e,isOwner:t,isMobile:a})=>({position:"relative",backgroundColor:"#000",width:"100%",overflow:"hidden",flex:1,minWidth:0,padding:e.spacing(1.5,0),"& iframe":{width:"100%",height:"100%"},[e.breakpoints.down("md")]:{width:"100%",height:"auto",borderRadius:0,overflow:"initial"},...(a||!t)&&{paddingBottom:0}})),b=(0,r.Ay)("div",{name:f,slot:"DetailStatistic"})(({theme:e})=>({height:"100%",width:"420px",[e.breakpoints.down("md")]:{width:"100%"},[e.breakpoints.down("xs")]:{width:"100%",height:"400px"}})),v=(0,r.Ay)(s.A,{name:f,slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%",padding:e.spacing(2),paddingTop:e.spacing(2.5),paddingBottom:0})),k=(0,r.Ay)(s.A,{name:f,slot:"HeaderBlock"})(({theme:e})=>({padding:e.spacing(2),paddingTop:0,display:"flex",alignItems:"center",justifyContent:"center"})),x=(0,r.Ay)(s.A,{name:f,slot:"HeaderTitle"})(()=>({})),S=(0,r.Ay)(s.A,{name:f,slot:"ContentBlock"})(({theme:e})=>({overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0})),E=(0,r.Ay)("div",{name:f,slot:"actionBar"})(({theme:e})=>({position:"absolute",right:0,top:0,padding:e.spacing(1),display:"flex",justifyContent:"space-between",zIndex:1,alignItems:"center"})),C=(0,r.Ay)(d.A,{name:f,slot:"TagFriend"})(({theme:e})=>({color:"#fff !important",width:32,height:32,fontSize:e.mixins.pxToRem(15)})),P=({item:e,isOwner:t=!1})=>{var a,i,o;let r=(0,h.vC)(),{isReady:s}=r||{};return(null==e?void 0:e.in_process)||s||null===(a=window.navigator)||void 0===a||!a.userActivation||(null===(i=window.navigator)||void 0===i?void 0:null===(o=i.userActivation)||void 0===o?void 0:o.hasBeenActive)?l.createElement(n.Lz,{story:e,isModal:!1,isOwner:t}):l.createElement(m.A,{isDetailPage:!0,isOwner:t})},D=(0,i.G5k)(function({item:e}){let{useGetItem:t,useSession:a,i18n:r,useIsMobile:d,navigate:m,getSetting:h}=(0,i.PCX)(),f=d(!0),D=h("comment"),[R,I]=l.useReducer(u.l,{...y.x6});l.useEffect(()=>{I({type:"setReady",payload:!1})},[]);let{user:M}=a(),B=t(null==e?void 0:e.user);if(!e)return null;let F=(null==B?void 0:B.id)===(null==M?void 0:M.id),O=()=>{m("/")};return l.createElement(o.eB,{testid:`detailview ${e.resource_name}`},l.createElement(o.tD,null,l.createElement(y.MO.Provider,{value:{...R,fire:I}},l.createElement(w,null,l.createElement(A,{isOwner:F,isMobile:f},f?null:l.createElement(E,null,l.createElement(s.A,null,l.createElement(c.A,{title:r.formatMessage({id:"close"})},l.createElement(C,{onClick:O},l.createElement(g.s4,{icon:"ico-close",color:"white"}))))),l.createElement(P,{item:e,isOwner:F})),D?l.createElement(b,null,l.createElement(v,null,l.createElement(k,null,l.createElement(x,null,l.createElement(p.A,{variant:"h4",color:"text.primary"},r.formatMessage({id:F?"story_details":"comments"})))),l.createElement(S,null,l.createElement(n.Dq,{item:e})))):null))))})},4616(e,t,a){a.r(t),a.d(t,{default:()=>n});var i=a(91557),o=a(73220);let l=(0,i.$MH)(o.A),n=(0,i.WvA)({extendBlock:l,defaults:{placeholder:"Search",blockProps:{variant:"plained",titleComponent:"h2",titleVariant:"subtitle1",titleColor:"textPrimary",noFooter:!0,noHeader:!0,blockStyle:{height:"100%"},contentStyle:{borderRadius:"base",height:"100%"},headerStyle:{},footerStyle:{}}}})},51147(e,t,a){a.d(t,{l:()=>o});var i=a(16535);let o=(0,i.Ay)((e,t)=>{switch(t.type){case"setListUserStories":e.listUserStories=t.payload;break;case"setReactions":e.reactions=t.payload;break;case"setIdentityStoryActive":e.identityStoryActive=t.payload;break;case"setIdentityUserS_Active":e.identityUserStoryActive=t.payload;break;case"setForcePause":e.pauseStatus=t.payload;break;case"setOpenStoryDetail":e.openStoryDetail=t.payload;break;case"setOpenViewComment":e.openViewComment=t.payload;break;case"setOpenActionItem":e.openActionItem=t.payload;break;case"setReadyStateFile":e.readyStateFile=t.payload;break;case"setProgressVideoPlay":e.progressVideoPlay=t.payload;break;case"setIndexStoryActive":e.indexStoryActive=t.payload;break;case"setLastStory":e.isLastStory=t.payload;break;case"setReady":e.isReady=t.payload;break;case"setMuted":e.mutedStatus=t.payload;break;case"setDuration":e.durationVideo=t.payload;break;case"setBuffer":e.buffer=t.payload}})}}]);