"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-story-blocks-StoryArchiveDetail-Block"],{24774(e,t,o){o.d(t,{A:()=>g});var a=o(91557),i=o(85332),l=o(3556),n=o(8051),r=o(87773),d=o(96540);let s="PenddingView",c=(0,l.Ay)(n.A,{name:s,slot:"root",shouldForwardProp:e=>"isDetailPage"!==e})(({theme:e,isDetailPage:t})=>({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none",backgroundColor:"#000",paddingTop:e.spacing(1.5),flexDirection:"column",cursor:"pointer","& .MuiSkeleton-root":{..."light"===e.palette.mode&&{backgroundColor:e.palette.grey.A200}},...t&&{paddingTop:0}})),p=(0,l.Ay)(n.A,{name:s,slot:"ItemWrapper",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,width:t})=>({position:"relative",margin:"auto",height:"100%",display:"flex",justifyContent:"center",flexDirection:"column",width:t})),u=(0,l.Ay)(r.A)(({theme:e})=>({color:"#fff",fontSize:e.mixins.pxToRem(14),paddingBottom:e.spacing(1.5),textAlign:"center",width:"80%"})),y=(0,l.Ay)(n.A,{name:s,slot:"ItemInteractionStyled",shouldForwardProp:e=>"isDetailPage"!==e&&"isOwner"!==e&&"isMobile"!==e})(({theme:e,isDetailPage:t,isOwner:o,isMobile:a})=>({minHeight:t?54:64,...(o||t&&a)&&{display:"none"}})),m=(0,l.Ay)(n.A,{name:s,slot:"ContentStyled",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,height:t,width:o})=>({backgroundColor:e.palette.grey["900"],borderRadius:e.shape.borderRadius,height:t,width:o,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minWidth:"120px"}));function g({isDetailPage:e=!1,isOwner:t=!1}){let{i18n:o,useIsMobile:l,dispatch:n}=(0,a.PCX)(),{fire:r}=(0,i.vC)(),s=l(!0),g=d.useRef(),[h,f]=(0,i.Uf)(g),v=d.useCallback(()=>{r({type:"setReady",payload:!0}),r({type:"setMuted",payload:!1}),n({type:"story/updateMutedStatus",payload:!1})},[r]);return d.createElement(c,{isDetailPage:e},d.createElement(p,{ref:g,width:h},d.createElement(m,{height:f,width:h,onClick:v},d.createElement(u,{component:"span"},o.formatMessage({id:"click_to_view_story"})))),d.createElement(y,{isDetailPage:e,isOwner:t,isMobile:s}))}},67894(e,t,o){o.d(t,{A:()=>M,Y:()=>F});var a=o(91557),i=o(84680),l=o(96540),n=o(88316),r=o(3556),d=o(8051),s=o(63461),c=o(97763),p=o(87773),u=o(32113),y=o(85332),m=o(91262),g=o(40515),h=o(79655),f=o(10272),v=o(62193),A=o.n(v),w=o(24774);let b="StoryArchiveDetail",k=(0,r.Ay)(d.A,{name:b,slot:"RootStyled"})(({theme:e})=>({backgroundColor:e.palette.background.paper,padding:"0 !important",height:"100%",display:"flex",overflowX:"hidden",[e.breakpoints.down("md")]:{height:"auto",flexFlow:"column"}})),x=(0,r.Ay)("div",{name:b,slot:"DetailStory",shouldForwardProp:e=>"isOwner"!==e&&"isMobile"!==e})(({theme:e,isOwner:t,isMobile:o})=>({position:"relative",backgroundColor:"#000",width:"100%",overflow:"hidden",flex:1,minWidth:0,padding:e.spacing(1.5,0),"& iframe":{width:"100%",height:"100%"},[e.breakpoints.down("md")]:{width:"100%",height:"auto",borderRadius:0,overflow:"initial"},...(o||!t)&&{paddingBottom:0}})),S=(0,r.Ay)("div",{name:b,slot:"DetailStatistic"})(({theme:e})=>({height:"100%",width:"420px",[e.breakpoints.down("md")]:{width:"100%"},[e.breakpoints.down("xs")]:{width:"100%",height:"400px"}})),E=(0,r.Ay)(d.A,{name:b,slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%",padding:e.spacing(2),paddingTop:e.spacing(2.5),paddingBottom:0})),P=(0,r.Ay)(d.A,{name:b,slot:"HeaderBlock"})(({theme:e})=>({padding:e.spacing(2),paddingTop:0,display:"flex",alignItems:"center",justifyContent:"center"})),C=(0,r.Ay)(d.A,{name:b,slot:"HeaderTitle"})(()=>({})),R=(0,r.Ay)(d.A,{name:b,slot:"ContentBlock"})(({theme:e})=>({overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0})),D=(0,r.Ay)("div",{name:b,slot:"actionBar"})(({theme:e})=>({position:"absolute",right:0,top:0,padding:e.spacing(1),display:"flex",justifyContent:"space-between",zIndex:1,alignItems:"center"})),I=(0,r.Ay)(s.A,{name:b,slot:"TagFriend"})(({theme:e})=>({color:"#fff !important",width:32,height:32,fontSize:e.mixins.pxToRem(15)})),F=e=>{var t,o,a;let{item:i,isOwner:r=!1}=e||{},d=(0,y.vC)(),{isReady:s}=d||{};return(null==i?void 0:i.in_process)||s||null===(t=window.navigator)||void 0===t||!t.userActivation||(null===(o=window.navigator)||void 0===o?void 0:null===(a=o.userActivation)||void 0===a?void 0:a.hasBeenActive)?l.createElement(n.pZ,{story:i,isModal:!1,isOwner:r}):l.createElement(w.A,{isDetailPage:!0,isOwner:r})},M=(0,h.A)(function(e){let{useGetItem:t,useSession:o,i18n:r,useIsMobile:s,dispatch:y,goSmartBack:h,usePageParams:v}=(0,a.PCX)(),w=v(),{identity:b,stories:M,story_id:O,total:T,nextDate:_,prevDate:B,shouldPreload:j,indexStoryActive:H,date:Z,positionStory:V,pagingId:W}=e||{},z=s(!0),{user:L}=o(),[X,N]=l.useReducer(f.y,{...u.x6}),$=l.useRef(!1),q=l.useRef(),{identityStoryActive:U,pauseStatus:Y}=X||{},G=t(b),J=t(U)||G,K=t(null==J?void 0:J.user);l.useEffect(()=>{(null==M?void 0:M.length)&&N({type:"setInit",payload:{isReady:!1,stories:M,story_id:O,total:T,nextDate:_,prevDate:B,date:Z,positionStory:V,pagingId:W}})},[]),l.useEffect(()=>{A()(G)||N({type:"setInit",payload:{indexStoryActive:H,identityStoryActive:b}})},[G]),l.useEffect(()=>{(null==w?void 0:w.id)&&j&&y({type:"story/story_archive/LOAD",payload:{user_id:null==w?void 0:w.user_id,date:Z,direction:j},meta:{onSuccess:Q}})},[]);let Q=e=>{var t;let o=null==e?void 0:e.pagingId,a=null==e?void 0:e.ids;if(!o||!(null==a?void 0:a.length))return;let i=null==e?void 0:null===(t=e.pagesOffset)||void 0===t?void 0:t.total;N({type:"setInit",payload:{stories:a,total:i,pagingId:o}})};if(!K)return null;let ee=(null==K?void 0:K.id)===(null==L?void 0:L.id),et=()=>{h()},eo=e=>{if(Y!==m.ZR.Force){if(e.relatedTarget!==e.currentTarget&&!e.currentTarget.contains(e.relatedTarget)){$.current=!0,N({type:"setForcePause",payload:m.ZR.Pause}),N({type:"setOpenActionItem",payload:!0});return}N({type:"setForcePause",payload:m.ZR.No}),N({type:"setOpenActionItem",payload:!1})}},ea=e=>{Y!==m.ZR.Force&&$.current&&(q.current=setTimeout(()=>{N({type:"setForcePause",payload:m.ZR.No}),N({type:"setOpenActionItem",payload:!1}),$.current=!1},300))},ei=e=>{clearTimeout(q.current)};return J?l.createElement(i.eB,{testid:`detailview ${J.resource_name}`},l.createElement(i.tD,null,l.createElement(u.MO.Provider,{value:{...X,fire:N}},l.createElement(k,null,l.createElement(x,{isOwner:ee,isMobile:z,onBlur:eo,onMouseEnter:ea,onMouseLeave:ei,tabIndex:0},z?null:l.createElement(D,null,l.createElement(d.A,null,l.createElement(c.A,{title:r.formatMessage({id:"close"})},l.createElement(I,{onClick:et},l.createElement(g.s4,{icon:"ico-close",color:"white"}))))),l.createElement(F,{item:J,isOwner:ee})),l.createElement(S,null,l.createElement(E,null,l.createElement(P,null,l.createElement(C,null,l.createElement(p.A,{variant:"h4",color:"text.primary"},r.formatMessage({id:ee?"story_details":"comments"})))),l.createElement(R,null,l.createElement(n.Dq,{item:J,isArchive:!0})))))))):null})},19934(e,t,o){o.r(t),o.d(t,{default:()=>n});var a=o(91557),i=o(67894);let l=(0,a.$MH)(i.A),n=(0,a.WvA)({extendBlock:l,defaults:{placeholder:"Search",blockProps:{variant:"plained",titleComponent:"h2",titleVariant:"subtitle1",titleColor:"textPrimary",noFooter:!0,noHeader:!0,blockStyle:{height:"100%"},contentStyle:{borderRadius:"base",height:"100%"},headerStyle:{},footerStyle:{}}}})},10272(e,t,o){o.d(t,{y:()=>i});var a=o(16535);let i=(0,a.Ay)((e,t)=>{switch(t.type){case"setInit":e=Object.assign(e,t.payload);break;case"setStoryActive":var o,a,i;e.identityStoryActive=null===(o=t.payload)||void 0===o?void 0:o.identity,e.indexStoryActive=null===(a=t.payload)||void 0===a?void 0:a.index,e.positionStory=null===(i=t.payload)||void 0===i?void 0:i.positionStory,e.loading=!1;break;case"setReady":e.isReady=t.payload;break;case"setStories":e.stories=t.payload;break;case"setReadyStateFile":e.readyStateFile=t.payload;break;case"setForcePause":e.pauseStatus=t.payload;break;case"setReactions":e.reactions=t.payload;break;case"setOpenActionItem":e.openActionItem=t.payload;break;case"setProgressVideoPlay":e.progressVideoPlay=t.payload;break;case"setMuted":e.mutedStatus=t.payload;break;case"setDuration":e.durationVideo=t.payload;break;case"setBuffer":e.buffer=t.payload;break;case"setLoading":e.loading=t.payload;break;case"setOpenStoryDetail":e.openStoryDetail=t.payload}})}}]);