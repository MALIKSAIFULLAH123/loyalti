(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-friend-blocks-FriendListingBirthdayWithMonth-Block"],{63945(e){e.exports=function(e,t,n,l){for(var r=-1,a=null==e?0:e.length;++r<a;){var i=e[r];t(l,i,n(i),e)}return l}},62429(e,t,n){var l=n(80909);e.exports=function(e,t,n,r){return l(e,function(e,l,a){t(r,e,n(e),a)}),r}},42e3(e,t,n){var l=n(63945),r=n(62429),a=n(15389),i=n(56449);e.exports=function(e,t){return function(n,o){var d=i(n)?l:r,u=t?t():{};return d(n,e,a(o,2),u)}}},94394(e,t,n){var l=n(43360),r=n(42e3),a=Object.prototype.hasOwnProperty,i=r(function(e,t,n){a.call(e,n)?e[n].push(t):l(e,n,[t])});e.exports=i},38625(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>C});var l=n(91557),r=n(84680),a=n(3556),i=n(8051),o=n(87773),d=n(52705),u=n(23181),c=n.n(u),m=n(58156),s=n.n(m),f=n(94394),p=n.n(f),g=n(96540),E=n(71468),h=n(95093),y=n.n(h),v=n(67725);let k=({data:e})=>{let{i18n:t}=(0,l.PCX)();if(null==e?void 0:e.length)return g.createElement(i.A,{fontSize:e=>e.mixins.pxToRem(14),my:.5},g.createElement(x,{item:e[0]}),2===e.length&&g.createElement(g.Fragment,null,` ${t.formatMessage({id:"_and_"})} `,g.createElement(x,{item:e[1]})),3===e.length&&g.createElement(g.Fragment,null,", ",g.createElement(x,{item:e[1]}),` ${t.formatMessage({id:"_and_"})} `,g.createElement(x,{item:e[2]})),e.length>3&&g.createElement(g.Fragment,null,", ",g.createElement(x,{item:e[1]})," ",t.formatMessage({id:"and_value_others"},{value:e.length-2})))},x=({item:e})=>g.createElement(l.N_E,{hoverCard:!1,to:null==e?void 0:e.link,sx:{fontWeight:"bold"}},null==e?void 0:e.full_name);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}let b=e=>e>12?e-12:e,M=(e,t)=>{let n=Object.keys(e),l=n.indexOf(t);return!!n[l+1]},w=(0,a.Ay)(i.A,{name:"sessionBirthday"})(({theme:e})=>({backgroundColor:e.palette.background.paper,marginTop:e.spacing(2),borderRadius:e.spacing(2),padding:e.spacing(2)})),A=(0,l.hS2)(function({blockId:e,title:t,itemView:n,itemProps:a={},gridItemProps:u={},displayLimit:m=4,displayRowsLimit:f,pagingId:h,canLoadMore:x,handleUpdateLastRead:A,canLoadSmooth:S,loadMore:C,numberOfItemsPerPage:F,emptyPage:O="core.block.no_content",emptyPageProps:P,isLoadMoreScroll:B,isLoadMorePagination:L,errorPage:W}){let{jsxBackend:$,usePageParams:D,i18n:V,useWidthBreakpoint:j,useCachedBlockEmpty:I,getSetting:T}=(0,l.PCX)(),R=D(),Q=T("friend.days_to_check_for_birthday"),U=y()(new Date).add(Q,"days").month()+1,{page:X}=R,q=$.get(n),z=$.get("friend.itemView.birthdayWidthAvatar"),K=$.get("friend.itemView.birthdayWidthAvatar.skeleton"),N=$.get(`${n}.skeleton`),G=L?parseInt(X||1,10):1,[H,J]=(0,l.xWD)(!0),Y=j(),Z=12/parseInt(s()(u,Y)||12,10),ee=f?f*Z:m,[et,en]=I(e),[el,er]=g.useState(G),ea=(0,E.d4)(e=>(0,l.qRQ)(e,h))||(0,l.KCW)(),ei=g.useCallback(()=>{B&&el<=ea.page&&er(e=>e+1)},[B,el,ea.page]);(0,l.ksV)(ei);let eo=g.useCallback(()=>{C(),er(e=>e+1)},[h]);g.useEffect(()=>{J&&J()},[null==ea?void 0:ea.page,J]),g.useEffect(()=>{!B||(null==ea?void 0:ea.ended)||(null==ea?void 0:ea.loading)||H||(null==ea?void 0:ea.dirty)||eo()},[null==ea?void 0:ea.loading,null==ea?void 0:ea.page,B,null==ea?void 0:ea.ended,null==ea?void 0:ea.dirty,H,eo]);let ed=F||20,eu=L?ed:2*Z;!x&&ee&&(eu=ee);let{loading:ec,refreshing:em,error:es,ended:ef,initialized:ep,pagesOffset:eg,dirty:eE}=null!=ea?ea:{},eh=S&&(B&&!ef||L&&ec),ey=x?ea.ids.slice(0,el*ed):ea.ids.slice(0,ee||ea.ids.length),ev=(0,l.UfA)(ey);if(L){var ek;ey=(null===(ek=ea.pages[el])||void 0===ek?void 0:ek.ids)||[]}if(g.useEffect(()=>{A&&A()},[el]),g.useEffect(()=>{if(!L)return;let e=parseInt((null==R?void 0:R.page)||(null==eg?void 0:eg.current_page),10);er(e),C()},[L,null==R?void 0:R.page,null==eg?void 0:eg.current_page]),g.useEffect(()=>{em&&!eE&&C()},[ep,em]),!q)return null;if(u.xs||(u.xs=12),es){if("hide"===W)return null;let ex=s()(es,"response.data.error")||s()(es,"response.data.message"),e_=403===s()(es,"response.status")?"core.block.error403":"core.block.error404",eb=$.get(e_);return"default"===W?g.createElement(r.eB,null,g.createElement(r.Tw,{title:t,data:ey}),g.createElement(r.tD,null,g.createElement(eb,{title:ex}))):g.createElement(eb,{title:ex})}if(!ey.length&&(ef||et)||es){if(et||en(!0),"hide"===O)return null;if("string"!=typeof O)return O;let eM=$.get(O);if(!eM)return null;let{noBlock:ew,contentStyle:eA}=P||{};return ew?g.createElement(eM,_({},P)):g.createElement(r.eB,null,g.createElement(r.tD,_({},eA),g.createElement(eM,{...P})))}if(et&&en(!1),!ep)return N?g.createElement(r.eB,null,g.createElement(r.tD,null,g.createElement(w,null,c()(0,eu).map(e=>g.createElement(N,{testid:"loadingIndicator",itemProps:a,key:e.toString()}))))):g.createElement("div",null,V.formatMessage({id:"loading_dots"}));if(!ey.length)return;let eS=p()(ev,({month:e,birthday:t,birthday_format:n})=>{let l=y()(t,n),r=(0,v.QS)(l),a=l.month()+1;return 0===r?"today":r<=Q&&r>0?"upcoming":a===U&&r<0?"recentOfCurrentMonth":e});return g.createElement(r.eB,null,g.createElement(r.tD,null,(null==eS?void 0:eS.today)&&g.createElement(w,null,g.createElement(o.A,{variant:"h3"},V.formatMessage({id:"today_birthdays"})),null==eS?void 0:eS.today.map((e,t)=>g.createElement(q,{index:t,identity:e._identity,itemProps:a,key:t.toString()}))),(null==eS?void 0:eS.upcoming)&&g.createElement(w,null,g.createElement(o.A,{variant:"h3"},V.formatMessage({id:"upcoming_birthdays"})),null==eS?void 0:eS.upcoming.map((e,t)=>g.createElement(q,{index:t,identity:e._identity,itemProps:a,key:t.toString()}))),g.createElement(i.A,null,c()(U,U+12).map(e=>eS[`${b(e)}`]&&(M(eS,`${b(e)}`)||ef)&&g.createElement(w,{key:e.toString()},g.createElement(o.A,{variant:"h3"},y()().month(b(e)-1).format("MMMM")),g.createElement(k,{data:eS[`${b(e)}`]}),g.createElement(i.A,{sx:{display:"flex",flexFlow:"wrap"}},eS[`${b(e)}`].map((e,t)=>g.createElement(z,{identity:e._identity,itemProps:a,key:t.toString()}))))),(null==eS?void 0:eS.recentOfCurrentMonth)&&g.createElement(w,null,g.createElement(o.A,{variant:"h3"},y()().month(U-1).format("MMMM")),g.createElement(i.A,{sx:{display:"flex",flexFlow:"wrap"}},eS.recentOfCurrentMonth.map((e,t)=>g.createElement(z,{identity:e._identity,itemProps:a,key:t.toString()})),eh?c()(3).map(e=>g.createElement(K,{key:e.toString()})):null))),eh&&eS?g.createElement(w,null,g.createElement(d.A,{width:"25%"}),g.createElement(d.A,{width:"50%"}),g.createElement(i.A,{sx:{display:"flex",flexFlow:"wrap"}},c()(6).map(e=>g.createElement(K,{key:e.toString()})))):null))}),S=(0,l.WvA)({name:"FriendListing",extendBlock:A,overrides:{contentType:"friend"},defaults:{title:"Friend",dataSource:{apiUrl:"/friend"},emptyPage:"hide",itemView:"friend.itemView.mainCard",blockLayout:"Main Listings",gridLayout:"Friend List - Small List"}}),C=S}}]);