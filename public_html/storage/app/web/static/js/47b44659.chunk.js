"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["chatplusUI","metafox-chatplus-components-Avatar"],{72761(e,t,n){n.d(t,{A:()=>P});var r=n(98587),i=n(58168),l=n(96540),a=n(20053),o=n(5004),s=n(75659),d=n(38413),c=n(31609);function u(e){return(0,c.A)("MuiBadge",e)}(0,d.A)("MuiBadge",["root","badge","invisible"]);var m=n(99977),p=n(74848);let g=["badgeContent","component","children","invisible","max","slotProps","slots","showZero"],h=e=>{let{invisible:t}=e;return(0,s.A)({root:["root"],badge:["badge",t&&"invisible"]},u,void 0)},v=l.forwardRef(function(e,t){let{component:n,children:l,max:a=99,slotProps:s={},slots:d={},showZero:c=!1}=e,u=(0,r.A)(e,g),{badgeContent:v,max:f,displayValue:y,invisible:b}=function(e){let{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,l=(0,o.A)({badgeContent:t,max:r}),a=n;!1!==n||0!==t||i||(a=!0);let{badgeContent:s,max:d=r}=a?l:e,c=s&&Number(s)>d?`${d}+`:s;return{badgeContent:s,invisible:a,max:d,displayValue:c}}((0,i.A)({},e,{max:a})),A=(0,i.A)({},e,{badgeContent:v,invisible:b,max:f,showZero:c}),E=h(A),x=n||d.root||"span",w=(0,m.A)({elementType:x,externalSlotProps:s.root,externalForwardedProps:u,additionalProps:{ref:t},ownerState:A,className:E.root}),C=d.badge||"span",M=(0,m.A)({elementType:C,externalSlotProps:s.badge,ownerState:A,className:E.badge});return(0,p.jsxs)(x,(0,i.A)({},w,{children:[l,(0,p.jsx)(C,(0,i.A)({},M,{children:y}))]}))});var f=n(3556),y=n(92353),b=n(87447),A=n(75630);function E(e){return(0,c.A)("MuiBadge",e)}let x=(0,d.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),w=["anchorOrigin","className","component","components","componentsProps","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],C=e=>{let{color:t,anchorOrigin:n,invisible:r,overlap:i,variant:l,classes:a={}}=e,o={root:["root"],badge:["badge",l,r&&"invisible",`anchorOrigin${(0,A.A)(n.vertical)}${(0,A.A)(n.horizontal)}`,`anchorOrigin${(0,A.A)(n.vertical)}${(0,A.A)(n.horizontal)}${(0,A.A)(i)}`,`overlap${(0,A.A)(i)}`,"default"!==t&&`color${(0,A.A)(t)}`]};return(0,s.A)(o,E,a)},M=(0,f.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),k=(0,f.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver(e,t){let{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${(0,A.A)(n.anchorOrigin.vertical)}${(0,A.A)(n.anchorOrigin.horizontal)}${(0,A.A)(n.overlap)}`],"default"!==n.color&&t[`color${(0,A.A)(n.color)}`],n.invisible&&t.invisible]}})(({theme:e,ownerState:t})=>(0,i.A)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},"default"!==t.color&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},"dot"===t.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${x.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${x.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${x.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${x.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${x.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${x.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${x.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${x.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})})),O=l.forwardRef(function(e,t){var n,l,s,d,c,u;let m;let g=(0,y.A)({props:e,name:"MuiBadge"}),{anchorOrigin:h={vertical:"top",horizontal:"right"},className:f,component:A="span",components:E={},componentsProps:x={},overlap:O="rectangular",color:P="default",invisible:I=!1,max:R,badgeContent:_,slots:T,slotProps:S,showZero:F=!1,variant:z="standard"}=g,$=(0,r.A)(g,w),B=(0,o.A)({anchorOrigin:h,color:P,overlap:O,variant:z}),W=I;!1!==I||(0!==_||F)&&(null!=_||"dot"===z)||(W=!0);let{color:j=P,overlap:N=O,anchorOrigin:D=h,variant:L=z}=W?B:g,H=(0,i.A)({},g,{anchorOrigin:D,invisible:W,color:j,overlap:N,variant:L}),X=C(H);"dot"!==L&&(m=_&&Number(_)>R?`${R}+`:_);let U=null!=(n=null!=(l=null==T?void 0:T.root)?l:E.Root)?n:M,V=null!=(s=null!=(d=null==T?void 0:T.badge)?d:E.Badge)?s:k,Q=null!=(c=null==S?void 0:S.root)?c:x.root,q=null!=(u=null==S?void 0:S.badge)?u:x.badge;return(0,p.jsx)(v,(0,i.A)({invisible:I,badgeContent:m,showZero:F,max:R},$,{slots:{root:U,badge:V},className:(0,a.default)(null==Q?void 0:Q.className,X.root,f),slotProps:{root:(0,i.A)({},Q,(0,b.A)(U)&&{as:A,ownerState:(0,i.A)({},null==Q?void 0:Q.ownerState,{anchorOrigin:D,color:j,overlap:N,variant:L})}),badge:(0,i.A)({},q,{className:(0,a.default)(X.badge,null==q?void 0:q.className)},(0,b.A)(V)&&{ownerState:(0,i.A)({},null==q?void 0:q.ownerState,{anchorOrigin:D,color:j,overlap:N,variant:L})})},ref:t}))}),P=O},13586(e,t,n){n.r(t),n.d(t,{default:()=>w});var r=n(91557),i=n(67725),l=n(3556),a=n(12789),o=n(72761),s=n(8051),d=n(30719),c=n(96540),u=n(97837),m=n(65121),p=n(86663),g=n(84058),h=n.n(g);let v=(0,l.Ay)(a.A,{name:"AvatarWrapper"})(({theme:e})=>({borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.border.secondary})),f=(0,l.Ay)(r.N_E,{name:"Link"})(({theme:e})=>({"&:hover":{textDecoration:"none"}})),y=(0,l.Ay)(o.A,{shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({"& .MuiBadge-badge":{...t===u.O2.Offline&&{display:"none"},...t===u.O2.Online&&{color:e.palette.success.main,backgroundColor:e.palette.success.main},...t===u.O2.Away&&{color:e.palette.warning.main,backgroundColor:e.palette.warning.main},...t===u.O2.Busy&&{color:e.palette.error.main,backgroundColor:e.palette.error.main},boxShadow:"dark"===e.palette.mode?"none":`0 0 0 2px ${e.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}}})),b=(0,l.Ay)("div",{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"relative",width:"32px",height:"32px",...t&&{width:t,height:t}})),A=(0,l.Ay)(a.A,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"absolute",bottom:0,left:0,width:"26px",height:"26px",backgroundColor:"dark"===e.palette.mode?e.palette.grey["600"]:e.palette.grey["300"],borderWidth:1,borderStyle:"solid",borderColor:"light"===e.palette.mode?e.palette.grey["50"]:e.palette.grey["800"],zIndex:2,...t&&{width:.7*t,height:.7*t}})),E=(0,l.Ay)(s.A,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"relative",width:"100%",height:"100%"})),x=(0,l.Ay)(a.A,{shouldForwardProp:e=>"sizeProps"!==e})(({theme:e,sizeProps:t})=>({position:"absolute",top:"50%",right:0,transform:"translate(0%, -50%)",width:"26px",height:"26px",...t&&{width:`${.7*t}px !important`,height:`${.7*t}px !important`}})),w=(0,c.memo)(function({username:e="Name",name:t="Name",src:n,size:l,to:o,onClick:s,status:g=0,room:w,uploadLocal:C=!1,roomType:M=null,avatarETag:k,component:O="span",target:P="_self",noLink:I}){var R,_;let{getSetting:T}=(0,r.PCX)(),S=(0,d.A)(),F=I,z=o,$=M||(null==w?void 0:w.t),B=(0,i.cb)(t),W={width:l,height:l,color:S.palette.grey["50"],fontSize:l/3},j=T("chatplus"),N=null==j?void 0:null===(R=j.server)||void 0===R?void 0:R.replace(/\/$/,""),D=n;if(D||(D=k?`${N}/avatar/${e}?${p.stringify({etag:k})}`:""),B&&(W.backgroundColor=i.m6.hex(B)),(null==w?void 0:w.isBotRoom)&&(z=null,F=!0),z)return c.createElement(f,{target:P,to:z||`/${e}`},c.createElement(v,{"data-testid":h()("chatplus avatar"),src:D,alt:t,style:W,component:O,children:B}));if([u.CJ.Private,u.CJ.Public].includes($)){if(C)return c.createElement(v,{"data-testid":h()("chatplus avatar"),src:D,alt:t,style:W,component:O,children:B});if(null==w?void 0:w.avatarETag)return D=`${N}/avatar/room/${null==w?void 0:w.id}?${p.stringify({etag:null==w?void 0:w.avatarETag})}`,c.createElement(v,{"data-testid":h()("chatplus avatar"),src:D,alt:t,style:W,component:O,children:B});{let L=`${N}/avatar/${null==w?void 0:null===(_=w.u)||void 0===_?void 0:_.username}`;return c.createElement(b,{"data-testid":h()("chatplus avatar"),sizeProps:l},c.createElement(A,{sizeProps:l,src:L,alt:t,component:O,children:B}),c.createElement(E,null,c.createElement(x,{sizeProps:l,src:D,alt:t,style:W,component:O,children:B})))}}if($===u.CJ.Direct&&g){let H=(0,m.cR)(g);return c.createElement(y,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",status:H},c.createElement(a.A,{"data-testid":h()("chatplus avatar"),src:D,alt:t,style:W,component:O,children:B}))}return c.createElement(v,{"data-testid":h()("chatplus avatar"),src:D,alt:t,style:W,component:O,children:B,onClick:s,to:F?null:e})})},5818(e,t,n){n.r(t),n.d(t,{default:()=>$});var r=n(88485),i=n(91557),l=n(84680),a=n(40515),o=n(3556),s=n(8051),d=n(83445),c=n(18799),u=n(87773),m=n(96540),p=n(62193),g=n.n(p),h=n(97837),v=n(65121),f=n(67725),y=n(40120),b=n(59408),A=n(61341),E=n(67912);let x="MsgItemFilterPopper",w=(0,o.Ay)("div",{name:x,slot:"uiChatMsgItemBody",shouldForwardProp:e=>"file"!==e})(({theme:e,file:t})=>({display:t?"block":"flex"})),C=(0,o.Ay)("div",{name:x,slot:"uiChatMsgSet",shouldForwardProp:e=>"isOwner"!==e&&"isAlert"!==e})(({theme:e,isOwner:t,isAlert:n})=>({display:"flex",flexDirection:"row",padding:e.spacing(1.25),borderBottom:e.mixins.border("secondary"),width:"100%",...n&&{"&.uiChatMsgSetAvatar":{display:"none"},"&.uiChatMsgItemCall":{border:"none"},"&.uiChatMsgActions":{justifyContent:"center","&.my-1; .btn":{"&.mx-1":"!important"}}},...t&&{flexDirection:"row-reverse"}})),M=(0,o.Ay)("div",{name:x,slot:"uiChatMsgSetAvatar"})(({theme:e})=>({marginRight:e.spacing(1)})),k=(0,o.Ay)("span")(({theme:e})=>({...e.typography.h5})),O=(0,o.Ay)("span")(({theme:e})=>({padding:e.spacing(.5,0)})),P=(0,o.Ay)(s.A)(({theme:e})=>({display:"flex",flexDirection:"column",width:"calc(100% - 40px)"}));function I({msgId:e,user:t,tooltipPosition:n,isMobile:l,showToolbar:a=!0,isRoomLimited:o,room:d,type:c,closePopover:u}){var p,g;let x=`chatplus.chatRooms.${d.id}.messageFilter.${e}`,I=(0,r.wg)(x),{jsxBackend:R,dispatch:_}=(0,i.PCX)(),[T,S]=(0,i.Vd3)(x,{}),F=()=>{u&&u()},z=(t,n,r)=>{t===A.ci&&e?_({type:A.ci,payload:{roomId:null==d?void 0:d.id,mid:e,identity:x,type:c},meta:{onSuccess:F}}):T(t,n,r)},$=(0,r.y8)(null==d?void 0:d.id),B=(0,r.sz)(),W=(0,r.GV)(null==d?void 0:d.id),j=!((null==W?void 0:W.allowMessageFrom)!=="noone"),{_id:N,t:D,system:L,attachments:H,reactions:X,msgType:U,ts:V,u:Q,starred:q}=I||{},J=(0,r.Fz)(null==Q?void 0:Q._id),G=t._id===(null==Q?void 0:Q._id),K=(0,v.rs)(H),Z=(null==H?void 0:H.length)?null===(p=H.filter(e=>e.image_url))||void 0===p?void 0:p.length:null,Y=!!((null==d?void 0:d.t)===h.CJ.Direct&&((null==W?void 0:W.metafoxBlocked)||(null==W?void 0:W.metafoxBlocker))),ee=!!((null==d?void 0:d.t)===h.CJ.Direct&&((null==W?void 0:W.blocked)||(null==W?void 0:W.blocker))),et=!!(ee||Y),en=null==q?void 0:q.find(e=>e._id===t._id),er=(null==B?void 0:B.Message_AllowStarring)&&!j&&!et,ei=B.Message_AllowPinning&&$["pin-message"]&&!o&&!j&&!et,el=B.Message_AllowDeleting&&($["force-delete-message"]||$["delete-message"]||G&&$["delete-own-message"])&&!o&&!j&&!et,ea=(0,r.B)(),eo=m.useMemo(()=>(0,f.Ue)(ea,{allowPinning:ei,item:I,allowStarring:er,isStarred:en,canDelete:el,type:c}),[ea,ei,I,er,en,el,c]);return I?m.createElement(C,null,m.createElement(M,null,m.createElement(E.A,{name:(null==J?void 0:J.name)||(null==Q?void 0:Q.name),username:(null==J?void 0:J.username)||(null==Q?void 0:Q.username),avatarETag:(null==Q?void 0:Q.avatarETag)||(null==J?void 0:J.avatarETag),size:32})),m.createElement(P,null,m.createElement(s.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"}},m.createElement(s.A,{sx:{display:"flex",flexDirection:"column"}},m.createElement(k,null,(null==Q?void 0:Q.name)||(null==Q?void 0:Q.username)),m.createElement(O,null,(0,v.rb)(null==V?void 0:V.$date))),m.createElement(b.A,{identity:x,items:eo,handleAction:z,disabled:!1,disableReact:!0,state:S,showHover:!1,menuStyles:{maxWidth:"auto"},sxFieldWrapper:{justifyContent:"flex-start"}})),m.createElement("div",{"data-id":N,"data-t":D},m.createElement(w,{file:Boolean(1===K||!Z&&(null==I?void 0:I.file)||(null==I?void 0:null===(g=I.urls)||void 0===g?void 0:g.length))},R.render({component:"chatplus.messageContent.standard",props:{message:I,showActiveSearch:!1,isOwner:!1,user:t,createdDate:null,isRoomLimited:o,msgType:U,tooltipPosition:l?"top":n}}),m.createElement(b.A,{identity:x,handleAction:T,disabled:L||!a,disableReact:!0,state:S})),m.createElement(y.A,{identity:x,disabled:!X||L,reactions:X})))):null}let R="MessageFilterPopper",_=(0,o.Ay)("div",{name:R,slot:"root"})(({theme:e})=>({width:"100%","& :last-child":{borderBottom:"none"}})),T=(0,o.Ay)("div",{name:R,slot:"noItemFound"})(({theme:e})=>({...e.typography.body1,padding:e.spacing(1,2),color:e.palette.grey["600"],margin:e.spacing(1,0),textAlign:"center"})),S=({archived:e,settings:t,user:n,disableReact:r,room:l,items:a,phraseNoContent:o="no_results_found",type:s,closePopover:d})=>{let{i18n:c}=(0,i.PCX)();return g()(a)?m.createElement(T,null,c.formatMessage({id:o})," "):m.createElement(_,null,a&&Object.values(a).map(i=>m.createElement(I,{key:i._id,msgId:i._id,archived:e,settings:t,perms:{},isMobile:!1,user:n,disableReact:r,room:l,type:s,closePopover:d})))},F=(0,o.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"flex-end"})),z=(0,o.Ay)(s.A,{shouldForwardProp:e=>"noContent"!==e})(({theme:e,noContent:t})=>{var n;return{padding:e.spacing(1.5,2),display:"flex",alignItems:"center",justifyContent:"space-between",...!t&&{borderBottom:"1px solid",borderColor:null===(n=e.palette.border)||void 0===n?void 0:n.secondary}}});function $({anchorRef:e,open:t,placement:n,type:o,closePopover:s}){let{i18n:p,usePageParams:g,dispatch:h}=(0,i.PCX)(),v=g(),{rid:f}=v,y=(0,r.Im)(f),b=(0,r.hB)(),A=(0,r.GV)(f),E=(0,r.iW)(f),x=(0,r.sz)(),w=!!(null==A?void 0:A.archived);return m.useEffect(()=>{"pin"===o&&h({type:"chatplus/room/pinnedMessages",payload:{roomId:null==E?void 0:E.id,filter:"pin"}}),"star"===o&&h({type:"chatplus/room/pinnedMessages",payload:{roomId:null==E?void 0:E.id,filter:"star"}})},[o]),m.useEffect(()=>{h({type:"chatplus/room/deleteMessagesFilter",payload:{identity:null==E?void 0:E.id}})},[]),m.createElement(a.qB,{excludeRef:e,onClickAway:s},m.createElement(d.A,{id:"chatplus","data-testid":"chatplus",anchorEl:null==e?void 0:e.current,open:t,placement:n||"bottom-end"},m.createElement(c.A,{sx:{width:320,overflow:"hidden",userSelect:"none"}},m.createElement(z,null,m.createElement(F,null,m.createElement(u.A,{variant:"h4"},p.formatMessage({id:"pin"===o?"pinned_messages":"starred_messages"})))),m.createElement(l.P,{autoHide:!0,autoHeight:!0,autoHeightMax:390,autoHeightMin:40},m.createElement(S,{user:b,items:y,archived:w,room:E,isMobile:!1,settings:x,disableReact:!0,phraseNoContent:"pin"===o?"no_pinned_messages":"no_starred_messages",type:o,closePopover:s})))))}},29382(e,t,n){n.r(t),n.d(t,{default:()=>m});var r=n(88485),i=n(91557),l=n(40515),a=n(3556),o=n(97763),s=n(20053),d=n(96540);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let u=(0,a.Ay)("button",{shouldForwardProp:e=>"variant"!==e})(({theme:e,variant:t})=>({height:"34px",lineHeight:"20px",fontSize:"17px",padding:"0 6px",cursor:"pointer",color:"light"===e.palette.mode?e.palette.grey["600"]:e.palette.text.secondary,position:"relative",minWidth:e.spacing(3),display:"inline-flex",textAlign:"center",alignItems:"center",justifyContent:"center",border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:e.palette.text.secondary},..."pageMessage"===t&&{color:"light"===e.palette.mode?e.palette.grey["600"]:e.palette.text.primary,fontSize:e.spacing(2.25),minWidth:e.spacing(6.25),width:"34px"}}));function m({item:{icon:e,active:t,label:n,items:a,disablePortal:m=!0},handleAction:p,classes:g,variant:h,popperOptions:v,popperStyles:f={},menuStyles:y,...b}){let{i18n:A,useTheme:E}=(0,i.PCX)(),x=(0,r.hB)(),w=E(),C={zIndex:w.zIndex.snackbar,minWidth:"max-content",width:"auto",maxHeight:"70vh",...f},M=a.map(e=>"status_user"===e.name&&(null==x?void 0:x.status)===e.item_name?{...e,active:!0}:e);return d.createElement(l.pN,c({placement:"bottom-end",items:M,disablePortal:m,handleAction:p,popperOptions:v,popperStyles:C,menuStyles:y},b,{control:d.createElement("div",{className:(0,s.default)(g.item,t&&g.itemActive)},d.createElement(o.A,{title:n?A.formatMessage({id:n}):"",placement:"top"},d.createElement(u,{variant:h,className:(0,s.default)(g.btn,t&&g.btnActive)},e?d.createElement(l.s4,{icon:e}):null)))}))}},13817(e,t,n){n.r(t),n.d(t,{default:()=>c});var r=n(91557),i=n(40515),l=n(97763),a=n(20053),o=n(84058),s=n.n(o),d=n(96540);function c({item:{value:e,icon:t,active:n,label:o},handleAction:c,classes:u}){let{i18n:m}=(0,r.PCX)(),p=t=>{t&&t.stopPropagation(),e&&c(e)};return d.createElement("div",{"data-testid":s()("Chat Dock Header title"),className:(0,a.default)(u.item,n&&u.itemActive)},d.createElement(l.A,{title:o?m.formatMessage({id:o}):"",placement:"top"},d.createElement("button",{className:(0,a.default)(u.btn,n&&u.btnActive),onClick:p},t?d.createElement(i.s4,{icon:t}):null)))}},67912(e,t,n){n.d(t,{A:()=>c});var r=n(97837),i=n(3556),l=n(97763),a=n(96540),o=n(13586);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let d=(0,i.Ay)(({className:e,...t})=>a.createElement(l.A,s({},t,{classes:{popper:e}})))(({theme:e})=>({"& .MuiTooltip-tooltip":{"&.MuiTooltip-tooltipPlacementLeft":{marginRight:`${e.spacing(1)} !important`}}})),c=(0,a.memo)(function({username:e,name:t,size:n="sm",status:i=null,room:l=null,avatarETag:s,hoverCard:c,showTooltip:u=!1}){return a.createElement(d,{title:u&&(t||e),placement:"left",arrow:!1,PopperProps:{popperOptions:{strategy:"fixed"}}},a.createElement("div",null,a.createElement(o.default,{username:e,size:n,name:t,roomType:r.CJ.Direct,status:i,room:l,avatarETag:s,hoverCard:c})))})},9781(e,t,n){n.d(t,{w:()=>l,A:()=>s});var r=n(60780),i=n(96540);function l({label:e,children:t,onClick:n,className:l}){return i.createElement(r.A,{className:l,onClick:n,disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0},e||null,t)}var a=n(3556);let o=(0,a.Ay)("div",{name:"uiChatMsgActions",slot:"uiChatMsgActions"})(({theme:e})=>({borderTop:e.mixins.border("secondary"),paddingTop:e.spacing(1),marginTop:e.spacing(1),textAlign:"center",justifyContent:"center"}));function s({children:e}){return i.createElement(o,null,e)}},17510(e,t,n){n.d(t,{A:()=>C});var r=n(91557),i=n(96540),l=n(3556);let a=(0,l.Ay)("div",{name:"MsgAttachmentAudio",slot:"uiChatAudioCustom",shouldForwardProp:e=>"isPageAllMessages"!==e&&"msgType"!==e&&"isOwner"!==e&&"isOther"!==e})(({theme:e,isPageAllMessages:t,msgType:n,isOwner:r,isOther:i})=>({width:"300px",maxWidth:"100%",...("message_pinned"===n||"message_unpinned"===n||i)&&{width:r?"177px":"137px"},...("message_pinned"===n||"message_unpinned"===n||i)&&t&&{width:"200px"}})),o=i.memo(function({audio_url:e,msgType:t,isOwner:n,isOther:l,audio_duration:o}){let{usePageParams:s,jsxBackend:d}=(0,r.PCX)(),c=s(),u=(null==c?void 0:c.rid)||!1;return i.createElement(a,{isPageAllMessages:u,msgType:t,isOwner:n,isOther:l},d.render({component:"chatplus.ui.messageWaveForm",props:{autoPlay:!1,url:e,isOwner:n,audioDuration:o,isPageAllMessages:u}}))},(e,t)=>(null==e?void 0:e.audio_url)===(null==t?void 0:t.audio_url)),s="MsgAttachmentImage",d=(0,l.Ay)("div",{name:s})(({theme:e})=>({position:"relative",width:"100%"})),c=(0,l.Ay)("figure",{name:s})(({theme:e})=>({margin:0,display:"block"})),u=(0,l.Ay)("div",{name:s,shouldForwardProp:e=>"isOwner"!==e&&"isPageAllMessages"!==e})(({theme:e,isOwner:t,isPageAllMessages:n})=>({width:"100%",minWidth:t?"200px":"180px",maxWidth:"100%",cursor:"pointer",...n&&{width:"300px",[e.breakpoints.down("sm")]:{width:t?"200px":"180px"}}})),m=(0,l.Ay)("img",{name:s})(({theme:e})=>({position:"absolute",left:0,top:0,width:"100%",borderRadius:e.spacing(1),border:e.mixins.border("secondary")}));function p({isOwner:e,title:t,image_url:n,image_dimensions:l,allowOpenPreview:a=!0}){let{chatplus:o,usePageParams:s}=(0,r.PCX)(),p=s(),g=(null==p?void 0:p.rid)||!1,h=!!l&&l.height/l.width,v=i.useCallback(e=>{a&&o.presentImageView(e,{id:"img0",src:o.sanitizeRemoteFileUrl(n)})},[o,n,a]);return i.createElement(d,null,i.createElement(c,null,i.createElement(u,{isOwner:!!e,isPageAllMessages:g,style:{paddingBottom:`${h?100*h:100}%`}},i.createElement(m,{src:`${o.sanitizeRemoteFileUrl(n)}&width=300`,onClick:v,alt:t}))))}let g="MsgAttachmentImage",h=(0,l.Ay)("div",{name:g,slot:"UIMsgAttachmentImgWrapper"})(({theme:e})=>({position:"relative",width:"100%"})),v=(0,l.Ay)("figure",{name:g})(({theme:e})=>({margin:0,display:"block"})),f=(0,l.Ay)("div",{name:g,shouldForwardProp:e=>"isPageAllMessages"!==e})(({theme:e,isPageAllMessages:t})=>({maxWidth:"100%",cursor:"pointer",marginBottom:"1px",width:"100%",height:"100%",...t&&{width:"100%",height:"100%"}})),y=(0,l.Ay)("img",{name:g})(({theme:e})=>({position:"absolute",left:0,top:0,width:"100%",objectFit:"cover",borderRadius:e.spacing(1),border:e.mixins.border("secondary"),height:"100%"}));function b({image_url:e,images:t,keyIndex:n}){let{chatplus:l,usePageParams:a}=(0,r.PCX)(),o=a(),s=(null==o?void 0:o.rid)||!1,d=t&&t.length?t.map((e,t)=>({id:t,src:l.sanitizeRemoteFileUrl(e.image_url)})):[];return i.createElement(h,null,i.createElement(v,null,i.createElement(f,{isPageAllMessages:s,style:{paddingBottom:"100%"}},i.createElement(y,{src:`${l.sanitizeRemoteFileUrl(e)}&width=150`,onClick(t){l.presentImageView(t,{id:parseInt(n),src:l.sanitizeRemoteFileUrl(e)},d)},alt:"MsgAttachmentMultiImage"}))))}var A=n(85376);let E=(0,l.Ay)("figure",{name:"MsgAttachmentVideo"})(({theme:e})=>({margin:0,display:"block"})),x=i.memo(function({video_url:e,video_width:t,video_height:n,thumb_url:l,isOwner:a,allowOpenPreview:o=!0}){let{chatplus:s,usePageParams:d,useIsMobile:c}=(0,r.PCX)(),u=c(),m=`msg-video-${e}`,p=d(),g=(null==p?void 0:p.rid)||!1,h=!u&&g?300:186;return i.createElement(E,null,i.createElement(A.A,{width:h,height:t<=h?"auto":n/(t<=h?h:t/h),src:s.sanitizeRemoteFileUrl(e),idPlaying:m,thumb_url:l,allowOpenPreview:o}))},(e,t)=>(null==e?void 0:e.video_url)===(null==t?void 0:t.video_url)&&(null==e?void 0:e.allowOpenPreview)===(null==t?void 0:t.allowOpenPreview));function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C({image_url:e,image_dimensions:t,video_url:n,title:l,video_type:a,video_thumb_url:s,audio_url:d,layout:c,totalImages:u,isOwner:m,msgType:g,isOther:h,keyIndex:v,allowOpenPreview:f=!0,audio_duration:y,...A}){let{chatplus:E}=(0,r.PCX)();return d?i.createElement(o,{audio_url:E.sanitizeRemoteFileUrl(d),audio_duration:y,msgType:g,isOwner:m,isOther:h}):n?i.createElement(x,w({isOwner:m,video_url:n,video_type:E.sanitizeRemoteFileUrl(a),thumb_url:E.sanitizeRemoteFileUrl(s),allowOpenPreview:f},A)):e&&"multi-image"===c?i.createElement(b,{title:l,images:u,image_url:e,isOwner:m,msgType:g,isOther:h,keyIndex:v}):e?i.createElement(p,{isOwner:m,title:l,image_dimensions:t,image_url:e,allowOpenPreview:f}):null}},78976(e,t,n){n.d(t,{A:()=>_});var r=n(96540),i=n(88485),l=n(36338),a=n(65121),o=n(91557),s=n(40515),d=n(3556),c=n(8051),u=n(67912),m=n(17510);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let g="MsgAttachmentMultiMedia",h=(0,d.Ay)("div",{name:g,slot:"uiMsgImageAttachmentWrapper",shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:t?"flex-end":"flex-start",marginTop:e.spacing(.25),width:"100%",gap:e.spacing(.5)})),v=(0,d.Ay)("div",{name:g,slot:"uiMsgImageAttachmentItem",shouldForwardProp:e=>"isPageAllMessages"!==e&&"isLastItem"!==e&&"isAudio"!==e&&"totalImages"!==e})(({theme:e,isPageAllMessages:t,isLastItem:n,isAudio:r,totalImages:i})=>({flexBasis:`calc(100% / 3 - ${e.spacing(.5)})`,...r&&{width:"185px"},...2===i&&{flexBasis:`calc(100% / 2 - ${e.spacing(.5)})`}}));function f({mediaItems:e,isOwner:t,msgType:n,isOther:i}){let{usePageParams:l}=(0,o.PCX)(),a=l(),s=(null==a?void 0:a.rid)||!1;return r.createElement(h,{isOwner:t},e.map((l,a)=>r.createElement(v,{isPageAllMessages:s,isLastItem:a===e.length-1,isAudio:!!(null==l?void 0:l.audio_url),key:`k${a}`,totalImages:e.length},r.createElement(m.A,p({},l,{layout:"multi-image",keyIndex:a,totalImages:e,isOwner:t,msgType:n,isOther:i})))))}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let b="MsgAttachment",A=(0,d.Ay)("div",{name:b,slot:"UIMsgAttachment",shouldForwardProp:e=>"isOwner"!==e&&"isAudio"!==e&&"isTypeFile"!==e&&"isOther"!==e&&"totalImage"!==e&&"msgType"!==e})(({theme:e,isOwner:t,isAudio:n,isTypeFile:r,isOther:i,msgType:l,totalImage:a})=>({zIndex:2,maxWidth:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",paddingBottom:e.spacing(.5),marginTop:e.spacing(.25),overflow:"hidden",...(r||a)&&{width:"100%"},...(n||"message_pinned"===l||"message_unpinned"===l||i)&&{backgroundColor:e.palette.grey["100"],..."dark"===e.palette.mode&&{backgroundColor:e.palette.grey["600"]},padding:e.spacing(.5,.75),borderRadius:e.spacing(1.25),"& a":{color:t?"#fff":e.palette.text.primary,textDecoration:"underline",cursor:"pointer"},...t&&{backgroundColor:e.palette.primary.main,color:"#fff !important"}},...t&&{alignItems:"flex-end"},...n&&{width:"185px",paddingTop:e.spacing(1.5)}})),E=(0,d.Ay)("div",{name:b,slot:"TitleLinkStyled",shouldForwardProp:e=>"isOwner"!==e&&"isVideo"!==e&&"isImage"!==e&&"isAudio"!==e&&"isTypeFile"!==e})(({theme:e,isOwner:t,isVideo:n,isImage:r,isAudio:i,isTypeFile:l})=>({borderRadius:e.spacing(1),fontSize:e.spacing(1.75),padding:e.spacing(1),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block",maxWidth:"100%",wordBreak:"break-word",wordWrap:"break-word",backgroundColor:e.palette.grey["100"],..."dark"===e.palette.mode&&{backgroundColor:e.palette.grey["600"]},...t&&{backgroundColor:e.palette.primary.main,color:"#fff"},...(n||r)&&{display:"none"},...i&&{width:"300px"},cursor:"pointer","& .ico":{marginRight:e.spacing(1)}})),x=(0,d.Ay)("div",{name:b,slot:"DescriptionStyled",shouldForwardProp:e=>"isOwner"!==e&&"isVideo"!==e})(({theme:e,isOwner:t,isVideo:n})=>({backgroundColor:e.palette.grey["100"],..."dark"===e.palette.mode&&{backgroundColor:e.palette.grey["600"]},borderRadius:e.spacing(1),fontSize:e.spacing(1.75),padding:e.spacing(1),display:"inline-block",...t&&{backgroundColor:e.palette.primary.main,color:"#fff"}})),w=(0,d.Ay)("div",{name:b,slot:"uiMsgAttachmentAuthor"})(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center","& .MuiAvatar-root":{fontSize:`${e.spacing(1)} !important`},strong:{padding:e.spacing(0,.5,0,.25)}})),C=(0,d.Ay)("div",{name:b,slot:"uiMsgAttachmentFlex"})(({theme:e})=>({textAlign:"start"})),M=(0,d.Ay)("div",{name:b,slot:"uiMsgAttachmentText"})(({theme:e})=>({margin:e.spacing(.5,0)})),k=(0,d.Ay)("div",{name:b,slot:"UIMsgAttachmentTextDelete"})(({theme:e})=>({margin:e.spacing(.5),marginLeft:0,fontStyle:"italic"})),O=(0,d.Ay)("div",{name:b,slot:"uiMsgAttachmentInfoWrapper",shouldForwardProp:e=>"msgType"!==e&&"isOther"!==e})(({theme:e,msgType:t,isOther:n})=>({...("message_pinned"===t||"message_unpinned"===t||n)&&{borderLeft:"2px solid #a2a2a2",paddingLeft:e.spacing(1),width:"100%"}})),P=(0,d.Ay)(s.mE,{name:b,slot:"uiMsgAttachmentLink"})(({theme:e})=>({cursor:"pointer","& .ico":{marginRight:e.spacing(1)}}));function I({mentions:e=[],title:t,author_real_name:n,author_name:d,author_id:p,text:g,image_url:h,image_dimensions:v,audio_url:b,audio_duration:I,video_url:R,video_type:_,title_link:T,description:S,video_thumb_url:F,attachments:z,type:$,layout:B,isOwner:W,msgType:j,t:N,video_width:D,video_height:L}){let{chatplus:H,i18n:X}=(0,o.PCX)(),U="file"===$,{count:V,data:Q}=(0,a.Ry)(z),q=(0,i.Fz)(p);return r.createElement(A,{isOwner:W,isAudio:!!b,isTypeFile:!!U,isOther:!b&&!U,msgType:j,totalImage:V},r.createElement(O,{msgType:j,isOther:!b&&!U},d?r.createElement(w,null,r.createElement(u.A,{size:16,name:(null==q?void 0:q.name)||d,username:(null==q?void 0:q.username)||d,avatarETag:null==q?void 0:q.avatarETag}),r.createElement("strong",null,n||d)):null,r.createElement(C,null,"rm"===N?r.createElement(k,null,X.formatMessage({id:"message_was_deleted"})):null,g&&"rm"!==N?r.createElement(M,{dangerouslySetInnerHTML:{__html:(0,l.Ay)(g,{mentions:e})}}):null,z&&z.length?r.createElement(c.A,{mt:1},V>1?r.createElement(f,{mediaItems:Q,isOwner:W,msgType:j,isOther:!b&&!U}):r.createElement(r.Fragment,null,z.map((e,t)=>r.createElement(r.Fragment,{key:`k${t}`},e.video_url||e.image_url||e.audio_url?r.createElement(m.A,y({},e,{key:`k${t}`,msgType:j,isOther:!b&&!U})):r.createElement(r.Fragment,null,e.title_link?r.createElement(P,{lines:1},r.createElement("div",{style:{display:"inline"},onClick:()=>(0,a.NK)(H.sanitizeRemoteFileUrl(e.title_link),!1,!0)},r.createElement(s.s4,{icon:"ico-arrow-down-circle"}),e.title)):null))))):null)),r.createElement(m.A,{image_url:h,video_url:R,audio_url:b,audio_duration:I,title:t,video_type:_,video_thumb_url:F,layout:B,image_dimensions:v,isOwner:W,video_width:D,video_height:L}),T?r.createElement(E,{isOwner:W,isVideo:!!R,isImage:!!h,isAudio:!!b,isTypeFile:!!U},r.createElement(s.mE,{lines:1,onClick:()=>(0,a.NK)(H.sanitizeRemoteFileUrl(T),!1,!0)},r.createElement(s.s4,{icon:"ico-arrow-down-circle"}),t)):null,S?r.createElement(x,{isOwner:W,isVideo:!!R,isImage:!!h,isAudio:!!b,isTypeFile:!!U},S):null)}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _({message:e,isOwner:t,msgType:n,dataQuote:i,isQuote:l}){var a;if(!(null===(a=e.attachments)||void 0===a?void 0:a.length))return null;let o=e.attachments;if(l&&i&&(o=o.filter(e=>!e.message_id)),!o&&!o.length)return null;let s=o.filter(e=>e.image_url);return s.length>1?r.createElement(f,{mediaItems:s,isOwner:t}):o.map((e,i)=>r.createElement(I,R({},e,{key:`k${i}`,isOwner:t,msgType:n})))}},83836(e,t,n){n.r(t),n.d(t,{default:()=>m});var r=n(91557),i=n(3556),l=n(96540),a=n(9781);let o="directChatCallEnded",s=(0,i.Ay)("div",{name:o,slot:"uiChatMsgItemCall",shouldForwardProp:e=>"missedCall"!==e})(({theme:e,missedCall:t})=>({padding:e.spacing(1.5),paddingTop:e.spacing(1),border:e.mixins.border("secondary"),borderRadius:e.spacing(.5)})),d=(0,i.Ay)("div",{name:o,slot:"uiChatMsgItemCallTitle",shouldForwardProp:e=>"missedCall"!==e})(({theme:e,missedCall:t})=>({fontWeight:e.typography.fontWeightBold,...t&&{color:"#ee5a2b"}})),c=(0,i.Ay)("div",{name:o,slot:"uiChatMsgItemTime"})(({theme:e})=>({color:e.palette.grey["600"],marginTop:e.spacing(.5),textTransform:"capitalize",fontSize:e.spacing(1.5)})),u=(0,i.Ay)(a.w,{name:o,slot:"uiChatMsgCallActionLink"})(({theme:e})=>({height:e.spacing(1.5),fontSize:e.spacing(1.625)}));function m({message:e,isRoomLimited:t,msgType:n,createdDate:i}){let{chatplus:o,i18n:m}=(0,r.PCX)(),p=m.formatMessage({id:`${n}`},{msg:e.msg,user:l.createElement("b",null,e.u.name)}),g=/(miss)_(audio|video)_call_d/.test(n);return l.createElement("div",{className:"uiChatMsgItemBodyInnerWrapper"},l.createElement(s,{missedCall:g},l.createElement(d,{missedCall:g},p),l.createElement(c,null,i),t?null:l.createElement(a.A,null,l.createElement(u,{onClick:()=>o.callAgainFromMessage(e),label:m.formatMessage({id:"call_again"})}))))}},12643(e,t,n){n.r(t),n.d(t,{default:()=>p});var r=n(91557),i=n(3556),l=n(96540),a=n(9781),o=n(32600);let s="GroupCallEnded",d=(0,i.Ay)("div",{name:s,slot:"uiChatMsgItemCall",shouldForwardProp:e=>"missedCall"!==e})(({theme:e,missedCall:t})=>({padding:e.spacing(1,1.5),border:e.mixins.border("secondary"),borderRadius:e.spacing(.5)})),c=(0,i.Ay)("div",{name:s,slot:"uiChatMsgItemCallTitle"})(({theme:e})=>({fontWeight:e.typography.fontWeightBold})),u=(0,i.Ay)("div",{name:s,slot:"uiChatMsgItemTime"})(({theme:e})=>({color:e.palette.grey["600"],marginTop:e.spacing(.5),textTransform:"capitalize",fontSize:e.spacing(1.5)})),m=(0,i.Ay)(a.w,{name:s,slot:"uiChatMsgCallActionLink"})(({theme:e})=>({height:e.spacing(1.5),fontSize:e.spacing(1.625)}));function p({message:e,user:t,createdDate:n,isRoomLimited:i,msgType:s}){let{chatplus:p,i18n:g}=(0,r.PCX)(),h=g.formatMessage({id:`${s}`},{msg:e.msg,user:l.createElement("b",null,e.u.name)});return l.createElement("div",{className:"uiChatMsgItemBodyInnerWrapper"},l.createElement(d,null,l.createElement(c,null,h),l.createElement(u,null,n),i?null:l.createElement(a.A,null,l.createElement(m,{onClick:()=>p.joinCallFromMessage(e),label:g.formatMessage({id:"join"})})),l.createElement(o.A,{reports:e.reports,user:t})))}},51863(e,t,n){n.r(t),n.d(t,{default:()=>u});var r=n(91557),i=n(3556),l=n(96540),a=n(32600);let o="GroupCallEnded",s=(0,i.Ay)("div",{name:o,slot:"uiChatMsgItemCall",shouldForwardProp:e=>"missedCall"!==e})(({theme:e,missedCall:t})=>({padding:e.spacing(1,1.5),border:e.mixins.border("secondary"),borderRadius:e.spacing(.5)})),d=(0,i.Ay)("div",{name:o,slot:"uiChatMsgItemCallTitle"})(({theme:e})=>({fontWeight:e.typography.fontWeightBold})),c=(0,i.Ay)("div",{name:o,slot:"uiChatMsgItemTime"})(({theme:e})=>({color:e.palette.grey["600"],marginTop:e.spacing(.5),textTransform:"capitalize",fontSize:e.spacing(1.5)}));function u({message:e,user:t,createdDate:n,msgType:i}){let{i18n:o}=(0,r.PCX)(),u=o.formatMessage({id:`${i}`},{msg:e.msg,user:l.createElement("b",null,e.u.name)});return l.createElement("div",{className:"uiChatMsgItemBodyInnerWrapper"},l.createElement(s,null,l.createElement(d,null,u),l.createElement(c,null,n),l.createElement(a.A,{reports:e.reports,user:t})))}},96204(e,t,n){n.r(t),n.d(t,{default:()=>u});var r=n(91557),i=n(3556),l=n(96540),a=n(78976),o=n(33440);let s="MesagePinned",d=(0,i.Ay)("div",{name:s,slot:"uiChatMsgItemBodyInnerWrapper",shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",...t&&{alignItems:"flex-end"}})),c=(0,i.Ay)("div",{name:s,slot:"uiChatMsgItemPin",shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({textAlign:"start",...t&&{textAlign:"end"}}));function u({message:e,isOwner:t,msgType:n}){let{i18n:i}=(0,r.PCX)(),s=i.formatMessage({id:"message_pinned"===n?"user_message_pinned":"user_message_unpinned"},{msg:e.msg,user:l.createElement("b",null,e.u.name)});return l.createElement(d,{isOwner:t},l.createElement(a.A,{message:e,msgType:n,isOwner:t}),l.createElement(o.A,{message:e}),l.createElement(c,{isOwner:t},s))}},65132(e,t,n){n.r(t),n.d(t,{default:()=>d});var r=n(65121),i=n(91557),l=n(3556),a=n(97763),o=n(96540);let s=(0,l.Ay)("div")(({theme:e})=>({borderRadius:e.spacing(.5),padding:e.spacing(1.25),border:e.mixins.border("secondary"),backgroundColor:e.palette.background.paper,color:e.palette.text.primary,fontStyle:"italic"}));function d({message:e,user:t}){var n,l,d;let{i18n:c}=(0,i.PCX)(),u=(0,r.rb)(null==e?void 0:null===(n=e.editedAt)||void 0===n?void 0:n.$date),m=(0,r.rb)(null==e?void 0:null===(l=e.ts)||void 0===l?void 0:l.$date),p=c.formatMessage({id:"user_message_is_removed"},{user:e.editedBy.name||e.u.name});(null==e?void 0:null===(d=e.editedBy)||void 0===d?void 0:d.username)===(null==t?void 0:t.username)&&(p=c.formatMessage({id:"you_deleted_a_message"}));let g=()=>o.createElement(o.Fragment,null,m?o.createElement("div",null,c.formatMessage({id:"sent"}),": ",m):null,u?o.createElement("div",null,c.formatMessage({id:"removed"}),": ",u):null);return o.createElement(a.A,{title:o.createElement(g,null),placement:"top",PopperProps:{disablePortal:!0}},o.createElement(s,{className:"uiChatMsgItemBodyInnerWrapper"},p))}},10664(e,t,n){n.r(t),n.d(t,{default:()=>a});var r=n(96540),i=n(78976),l=n(33440);function a({message:e}){return r.createElement("div",{className:"uiChatMsgItemBodyInnerWrapper"},r.createElement(i.A,{message:e}),r.createElement(l.A,{message:e}))}},35319(e,t,n){n.r(t),n.d(t,{checkIsQuote:()=>$,default:()=>B});var r=n(36338),i=n(3556),l=n(97763),a=n(62193),o=n.n(a),s=n(96540),d=n(78976),c=n(33440),u=n(65121),m=n(91557),p=n(40515),g=n(87773),h=n(8051),v=n(17510),f=n(61341);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let b="MsgQuote",A=(0,i.Ay)("div",{name:b,slot:"UIMsgAttachment",shouldForwardProp:e=>"isOwner"!==e&&"isAudio"!==e&&"isTypeFile"!==e&&"isOther"!==e&&"msgType"!==e})(({theme:e,isOwner:t,isAudio:n,isTypeFile:r,isOther:i,msgType:l})=>({opacity:"0.8",marginBottom:e.spacing(-2),marginLeft:e.spacing(1),marginRight:0,marginTop:e.spacing(.25),paddingBottom:e.spacing(3),maxWidth:"calc(100% - 8px)",display:"flex",flexDirection:"row",overflow:"hidden",border:e.mixins.border("secondary"),borderRadius:e.spacing(1),minHeight:"70px",cursor:"pointer",...(n||"message_pinned"===l||"message_unpinned"===l||i)&&{"& a":{color:e.palette.text.primary,textDecoration:"underline",cursor:"pointer"},...t&&{color:e.palette.text.secondary,marginRight:e.spacing(1),marginLeft:0}}})),E=(0,i.Ay)("div",{name:b,slot:"uiMsgAttachmentAuthor"})(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center","& .MuiAvatar-root":{fontSize:`${e.spacing(1)} !important`}})),x=(0,i.Ay)(g.A)(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A200:e.palette.text.primary})),w=(0,i.Ay)("div",{name:b,slot:"MsgAttachmentFlex",shouldForwardProp:e=>"isAttachment"!==e})(({theme:e,isAttachment:t})=>({textAlign:"start",...t&&{maxWidth:"300px"}})),C=(0,i.Ay)(p.mE,{name:b,slot:"uiMsgAttachmentText"})(({theme:e})=>({color:e.palette.text.secondary})),M=(0,i.Ay)("div",{name:b,slot:"UIMsgAttachmentTextDelete"})(({theme:e})=>({margin:e.spacing(.5),marginLeft:0,fontStyle:"italic"})),k=(0,i.Ay)("div",{name:b,slot:"uiMsgAttachmentInfoWrapper",shouldForwardProp:e=>"msgType"!==e&&"isOther"!==e})(({theme:e,msgType:t,isOther:n})=>({...("message_pinned"===t||"message_unpinned"===t||n)&&{overflow:"hidden",margin:e.spacing(1,1,0,0)}})),O=(0,i.Ay)(p.mE,{name:b,slot:"uiMsgAttachmentLink"})(({theme:e})=>({cursor:"pointer","& .ico":{fontSize:e.mixins.pxToRem(12),marginRight:e.spacing(.5)}})),P=(0,i.Ay)("div")(({theme:e})=>({width:e.spacing(.5),height:"100%",backgroundColor:e.palette.grey["100"]})),I=(0,i.Ay)("div")(({theme:e})=>({width:e.spacing(3),minWidth:e.spacing(3),marginTop:e.spacing(1.5),display:"flex",justifyContent:"center",alignItems:"center"})),R=(0,i.Ay)(p.s4)(({theme:e})=>({marginRight:e.spacing(.5),display:"flex",alignItems:"center"}));function _({dataQuote:e,isOwner:t,rid:n,scrollMessage:i}){let{i18n:l,dispatch:a}=(0,m.PCX)();if(!e)return null;let{mentions:d=[],author_real_name:c,author_name:g,text:b,textRaw:_,audio_url:T,attachments:S,type:F,msgType:z,t:$}=e,B="file"===F,W=_||b,j=W?(0,r.Nj)(W,{mentions:d,onlyShowText:!0}):"",{count:N}=(0,u.Ry)(S),D=()=>{"rm"!==$&&a({type:f.ci,payload:{roomId:n,mid:null==e?void 0:e.message_id,mode:"quote"},meta:{onSuccess:i}})};return s.createElement(A,{isOwner:t,isAudio:!!T,isTypeFile:!!B,isOther:!T&&!B,msgType:z,onClick:D},s.createElement(I,null,s.createElement(P,null)),s.createElement(k,{msgType:z,isOther:!T&&!B},g?s.createElement(E,null,s.createElement(x,{component:"h2",variant:"h5"},c||g)):null,s.createElement(w,{isAttachment:null==S?void 0:S.length},"rm"===$?s.createElement(M,null,l.formatMessage({id:"message_was_deleted"})):null,o()(j)||"rm"===$?null:s.createElement(C,{lines:1,dangerouslySetInnerHTML:{__html:j}}),"rm"!==$&&S&&S.length?s.createElement(h.A,{mt:.5},N>1?s.createElement(C,{lines:1},s.createElement(h.A,{sx:{display:"flex",alignItems:"center"}},s.createElement(R,{icon:"ico-photos-alt-o"}),l.formatMessage({id:"total_photo"},{value:N}))):s.createElement(s.Fragment,null,S.map((e,t)=>s.createElement(s.Fragment,{key:`k${t}`},e.video_url||e.image_url?s.createElement(v.A,y({},e,{key:`k${t}`,msgType:z,isOther:!T&&!B,allowOpenPreview:!1})):e.audio_url?s.createElement(C,{lines:1},(null==e?void 0:e.title)||l.formatMessage({id:"file_attachment"})):s.createElement("div",null,e.title_link?s.createElement(O,{lines:1},s.createElement("div",{style:{display:"inline"}},s.createElement(p.s4,{icon:"ico-paperclip-alt"}),e.title)):null))))):null)))}var T=n(88485);let S="MessageText",F=(0,i.Ay)("div",{name:S,slot:"uiChatMsgItemMsg",shouldForwardProp:e=>"isOwner"!==e&&"isQuote"!==e&&"isMention"!==e&&"activeSearch"!==e&&"isMessageFilter"!==e})(({theme:e,isOwner:t,isQuote:n,isMention:r,activeSearch:i,isMessageFilter:l})=>({zIndex:2,borderRadius:e.spacing(1),fontSize:e.mixins.pxToRem(15),padding:e.spacing(1.25),display:"flex",alignItems:"center","& .mention":{fontWeight:"bold",textDecoration:"none","&:hover":{cursor:"pointer",textDecoration:"underline"}},backgroundColor:e.palette.grey["100"],..."dark"===e.palette.mode&&{backgroundColor:e.palette.grey["600"]},overflowWrap:"break-word",...!r&&{maxWidth:"100%"},"& div:first-of-type":{width:"100%"},"& a":{...!r&&{maxWidth:"100%"},overflowWrap:"break-word",color:e.palette.text.primary,textDecoration:"underline",cursor:"pointer",...r&&{textDecoration:"none","&:hover":{textDecoration:"underline"}}},...t&&!l&&{backgroundColor:e.palette.primary.main,color:"#fff !important","& a":{color:"#fff",textDecoration:"underline"}},...i&&{"& div":{background:"#000",color:"#fff","& a":{color:"#fff"}}}})),z=(0,i.Ay)("div",{name:S,slot:"uiChatMsgItemBodyInnerWrapper",shouldForwardProp:e=>"isOwner"!==e&&"isSearch"!==e&&"isMessageFilter"!==e})(({theme:e,isOwner:t,isSearch:n,isMessageFilter:r})=>({width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",...!(n||r)&&t&&{alignItems:"flex-end"}})),$=e=>{var t;let n=e&&e.length&&(null===(t=e[e.length-1])||void 0===t?void 0:t.type)!=="file";if(!n)return{isQuote:n,dataQuote:null};{let r=e.filter(e=>e.message_id);return{isQuote:n,dataQuote:r?r[0]:null}}};function B({message:e,isOwner:t,createdDate:n,tooltipPosition:i,showActiveSearch:a=!0,isMessageFilter:u=!1,scrollMessage:m,isSearch:p=!1}){let[g,h]=s.useState(!1),v=e.msg?(0,r.Ay)(e.msg,{mentions:e.mentions}):null,{isQuote:y,dataQuote:b}=$(null==e?void 0:e.attachments),A=(0,T.nb)(null==e?void 0:e.rid),{msgSearch:E}=A||{},x=s.useMemo(()=>{if(!a||o()(E)||(null==E?void 0:E.mode)===f.Dn)return!1;let t=(null==E?void 0:E.id)===(null==e?void 0:e.id);return(null==E?void 0:E.mQuoteId)===(null==e?void 0:e.id)&&(t=g),t},[a,null==E?void 0:E.mQuoteId,null==E?void 0:E.id,null==E?void 0:E.mode,null==e?void 0:e.id,g]);return s.useEffect(()=>((null==E?void 0:E.mQuoteId)===(null==e?void 0:e.id)&&(h(!0),setTimeout(()=>{h(!1)},f.Uk)),()=>{h(!1)}),[null==e?void 0:e.id,null==E?void 0:E.mQuoteId]),s.createElement(l.A,{title:n,placement:i,PopperProps:{variant:"hidden-partview"}},s.createElement(z,{isOwner:t,isSearch:p,isMessageFilter:u},y?s.createElement(_,{dataQuote:b,isOwner:t,rid:null==e?void 0:e.rid,scrollMessage:m}):null,v?s.createElement(F,{activeSearch:x,isMention:!o()(e.mentions),isQuote:y,isOwner:t,isMessageFilter:u},s.createElement("div",{dangerouslySetInnerHTML:{__html:v}})):null,s.createElement(d.A,{message:e,isOwner:t,isQuote:y,dataQuote:b}),s.createElement(c.A,{message:e})))}},32600(e,t,n){n.d(t,{A:()=>o});var r=n(91557),i=n(3556),l=n(96540);let a=(0,i.Ay)("div")(({theme:e})=>({marginTop:e.spacing(.5)}));function o({reports:e,user:t}){let{i18n:n}=(0,r.PCX)();return(null==e?void 0:e.length)?l.createElement(a,null,e.map((e,r)=>l.createElement("div",{className:"uiCallReport",key:`${r}`},n.formatMessage({id:`${e.u._id===t._id?"you":"user"}_${e.t}`},{user:e.u.name})))):null}},25557(e,t,n){n.r(t),n.d(t,{default:()=>u});var r=n(88485),i=n(91557),l=n(3556),a=n(96540),o=n(78976),s=n(33440);let d=(0,l.Ay)("div")(({theme:e})=>({fontSize:e.spacing(1.75),color:"dark"===e.palette.mode?e.palette.text.primary:e.palette.grey["700"]})),c=(0,l.Ay)("div")(({theme:e})=>({margin:e.spacing(1,0)}));function u({message:e,msgType:t}){var n;let{i18n:l}=(0,i.PCX)(),u=(0,r.hB)(),m=e.msg;"room_changed_privacy"===e.t&&(m="public"===m?"Public":"Private");let p=((null==e?void 0:e.owners)||[]).map(e=>e._id).includes(u._id),g=l.formatMessage({id:`user_${t}${e.role?`_${e.role}`:""}`},{msg:a.createElement("b",null,m),type:e.type,name:e.u.name,role:e.role,user:a.createElement("b",null,e.u.name),owner:(null==e?void 0:null===(n=e.owners)||void 0===n?void 0:n.length)?a.createElement("b",null,null==e?void 0:e.owners[0].name):"",isUserToMe:u._id===e.u._id?1:0,isOwnerToMe:p?1:0,remaining:((null==e?void 0:e.total)||1)-1,bold:e=>a.createElement("b",null,e)});return a.createElement(c,null,a.createElement(d,null,g),a.createElement(o.A,{message:e}),a.createElement(s.A,{message:e}))}},33440(e,t,n){n.d(t,{A:()=>A});var r=n(96540),i=n(65121),l=n(40515),a=n(3556),o=n(62193),s=n.n(o);let d="MsgEmbed",c=(0,a.Ay)("div",{name:d,slot:"uiMsgEmbed"})(({theme:e})=>({marginTop:"4px",marginBottom:"8px",width:"400px",maxWidth:"100%",cursor:"pointer"})),u=(0,a.Ay)("div",{name:d,slot:"uiMsgEmbedOuter"})(({theme:e})=>({display:"flex",flexDirection:"column",borderRadius:"8px",border:e.mixins.border("secondary"),color:"#555555"})),m=(0,a.Ay)("div",{name:d,slot:"ItemMedia"})(({theme:e})=>({width:"100%"})),p=(0,a.Ay)("div",{name:d,slot:"ItemMediaSrc"})(({theme:e})=>({width:"100%",display:"block",position:"relative",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundOrigin:"border-box",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"8px 8px 0 0",backgroundColor:"transparent",borderBottom:"1px solid rgba(0, 0, 0, 0.1)","&:before":{content:"''",display:"block",paddingBottom:"56%"}})),g=(0,a.Ay)("div",{name:d,slot:"ItemInner"})(({theme:e})=>({flex:1,minWidth:0,padding:"8px"})),h=(0,a.Ay)(l.mE,{name:d,slot:"ItemTitle"})(({theme:e})=>({marginBottom:"2px",color:"light"===e.palette.mode?e.palette.grey["900"]:e.palette.text.primary})),v=(0,a.Ay)(l.mE,{name:d,slot:"ItemUrl"})(({theme:e})=>({marginBottom:"2px",color:e.palette.text.secondary})),f=(0,a.Ay)(l.mE,{name:d,slot:"ItemDescription"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey["900"]:e.palette.text.primary}));function y({url:e,meta:t,parsedUrl:n,ignoreParse:l}){let a=!l&&(t&&!s()(t)||n&&!s()(n));if(!a)return null;let{ogTitle:o,ogDescription:d,ogImage:y,oembedThumbnailUrl:b,oembedTitle:A,oembedDescription:E}=t,x=n.host,w=o||A,C=d||E;return r.createElement(c,null,r.createElement(u,{onClick:()=>(0,i.NK)(e,!0)},y||b?r.createElement(m,null,r.createElement(p,{style:{backgroundImage:`url(${y||b})`}})):r.createElement(m,null,r.createElement("span",{className:"item-media-src media-default"})),r.createElement(g,null,w?r.createElement(h,{lines:2,variant:"h6"},w):null,r.createElement(v,{lines:2,variant:"body2"},x),C?r.createElement(f,{lines:2,variant:"h6"},C):null)))}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A({message:e}){var t;return(null===(t=e.urls)||void 0===t?void 0:t.length)?e.urls.filter(e=>!(null==e?void 0:e.ignoreParse)&&e.meta&&e.parsedUrl).map((e,t)=>r.createElement(y,b({},e,{key:`k${t}`}))):null}},40120(e,t,n){n.d(t,{A:()=>v});var r=n(91557),i=n(3556),l=n(96540),a=n(88485),o=n(85015),s=n.n(o);let d=(0,i.Ay)("span")(({theme:e})=>({display:"inline-flex",alignItems:"center",justifyContent:"center",margin:e.spacing(0,.25)})),c=(0,i.Ay)("img")(({theme:e})=>({width:15,height:15}));function u({id:e,usernames:t}){let n=(0,a.Dr)();if(!e||!t)return null;let r=s()(e)&&e.split(":")[1].split("_")[1];if(!r||!n)return null;let i=n.find(e=>e.id===parseInt(r));return l.createElement(d,null,l.createElement(c,{src:null==i?void 0:i.src,draggable:!1,alt:null==i?void 0:i.title}))}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let p=(0,i.Ay)("div",{shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({display:"flex",margin:0,padding:0,marginBottom:e.spacing(-1),...t&&{flexDirection:"row-reverse"}})),g=(0,i.Ay)("span")(({theme:e})=>({marginLeft:e.spacing(.5),position:"relative",top:"-1px",fontSize:e.typography.pxToRem(14),height:e.spacing(2.5),fontWeight:e.typography.fontWeightRegular})),h=(0,i.Ay)("div")(({theme:e})=>({cursor:"pointer",color:e.palette.grey["800"],backgroundColor:e.palette.grey["50"],position:"relative",borderRadius:e.spacing(1),lineHeight:e.spacing(2.5),whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",padding:e.spacing(.5,.75),boxShadow:"0px 0px 15px 0px #00000026",transform:"translateY(-10px)",height:e.spacing(3),zIndex:2}));function v({identity:e,disabled:t,reactions:n,isOwner:i}){let{dispatch:a,getSetting:o}=(0,r.PCX)(),s=!o("preaction"),d=()=>{a({type:"chatplus/presentReactionsList",payload:{identity:e}})};if(s||t||!n||!Object.keys(n).length)return null;let c=0,v=Object.keys(n).sort((e,t)=>{var r,i,l,a,o,s,d,c;return((null===(r=n[t])||void 0===r?void 0:null===(i=r.usernames)||void 0===i?void 0:i.length)||1)-((null===(l=n[e])||void 0===l?void 0:null===(a=l.usernames)||void 0===a?void 0:a.length)||1)-((null===(o=n[t])||void 0===o?void 0:null===(s=o.updatedAt)||void 0===s?void 0:s.$date)||1)-((null===(d=n[e])||void 0===d?void 0:null===(c=d.updatedAt)||void 0===c?void 0:c.$date)||1)}).reduce((e,t)=>{var r,i;return c+=null===(r=n[t])||void 0===r?void 0:null===(i=r.usernames)||void 0===i?void 0:i.length,{...e,[t]:n[t]}},{});return l.createElement(p,{isOwner:i},l.createElement(h,{onClick:d},Object.keys(v).slice(0,3).map((e,t)=>l.createElement(u,m({id:e},v[e],{key:`k${t}`}))),l.createElement(g,null,c)))}},59408(e,t,n){n.d(t,{A:()=>X});var r=n(91557),i=n(3556),l=n(96540),a=n(40515),o=n(60780),s=n(97763),d=n(63461),c=n(86139),u=n.n(c),m=n(1882),p=n.n(m);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let h="actionMenu";function v(e){let{id:t,label:n,dependName:i,appName:o,menuName:c="itemActionMenu",icon:m="ico-dottedmore-vertical-o",size:v="small",color:f,variant:y,identity:b,testid:A,handleAction:E,className:x,iconClassName:w,control:C,items:M,tooltipTitle:k="",autoHide:O=!0,placement:P,onClickAction:I,showActionRef:R,..._}=e,T=(0,r.wVH)(),S=(0,r.dx2)(b),{compactUrl:F,i18n:z}=(0,r.PCX)(),[$,B]=(0,l.useState)(!1),[W,j]=(0,l.useState)(null!=M?M:[]),N=()=>{B(e=>!e),p()(I)&&I({identity:b,type:h})},D=()=>{var e,t,n;B(!1),(null==R?void 0:R.current)&&(null==R?void 0:null===(e=R.current)||void 0===e?void 0:e.id)===b&&!(null==R?void 0:null===(t=R.current)||void 0===t?void 0:t.showHover)&&(null==R?void 0:null===(n=R.current)||void 0===n?void 0:n.type)===h&&p()(I)&&I({identity:b,type:h})},L=(e,t,n)=>{E(e,t,u()({setMenu:j},n))};if((0,l.useEffect)(()=>{j(M)},[M]),(0,l.useEffect)(()=>{!M&&(M||!$&&O)&&L(o&&c?"presentAppMenu":"presentItemMenu",{dependName:i,appName:o,menuName:c})},[o,i,b,c,$,S,O]),!T.loggedIn||!(null==W?void 0:W.length)&&O)return null;let H=null==W?void 0:W.map(e=>({...e,label:(null==e?void 0:e.label)&&F(null==e?void 0:e.label,S)}));return l.createElement(a.B0,g({open:Boolean($&&(null==W?void 0:W.length)),id:null!=t?t:c,label:null!=n?n:z.formatMessage({id:"action_menu"}),handleAction:L,items:H,testid:null!=A?A:"action menu",onOpen:N,onClose:D,identity:b,placement:P},_,{control:null!=C?C:l.createElement(s.A,{title:k,disableHoverListener:!k},l.createElement(d.A,{size:v,color:f,variant:y,className:x,disableRipple:!0,disableFocusRipple:!0},l.createElement(a.s4,{icon:m,className:w})))}))}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let y="MsgActionMenu",b=(0,i.Ay)("div",{name:y,slot:"root"})(({theme:e})=>({})),A=(0,i.Ay)(o.A,{name:y,slot:"UIChatItemBtn",shouldForwardProp:e=>"showHover"!==e})(({theme:e,showHover:t})=>({position:"relative",visibility:t?"hidden":"unset",padding:e.spacing(1,.5),cursor:"pointer",minWidth:e.spacing(3),lineHeight:e.spacing(2.5),color:"light"===e.palette.mode?e.palette.grey["600"]:e.palette.text.secondary})),E={overflowY:"auto",overflowX:"hidden",maxHeight:"260px",maxWidth:"170px","&::-webkit-scrollbar":{height:"6px",width:"6px",borderRadius:"3px",transition:"opacity 200ms"},"&::-webkit-scrollbar-track":{borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,.2)",borderRadius:"3px"},"&::-webkit-scrollbar-thumb:horizontal":{background:"#000",borderRadius:"10px"}};function x({identity:e,handleAction:t,scrollRef:n,items:i,showHover:o=!0,placement:d="auto-start",menuStyles:c,...u}){let{i18n:m}=(0,r.PCX)();return l.createElement(b,null,l.createElement(v,f({items:i,placement:d,identity:e,handleAction:t,dependName:"chatplus/msgActionMenu",scrollRef:n,scrollClose:!0,popperOptions:{strategy:"fixed"},variantPopper:"hidden-outview",menuStyles:{menuStyles:E,...c}},u,{control:l.createElement(s.A,{title:m.formatMessage({id:"more"}),placement:"top"},l.createElement(A,{showHover:o,disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0,className:"uiChatItemBtn"},l.createElement(a.s4,{icon:"ico-dottedmore-vertical-o"})))})))}var w=n(18799),C=n(83445),M=n(88485),k=n(10671),O=n(20053),P=n(56525),I=n(85838),R=n(62193),_=n.n(R);let T=(0,P.A)(e=>(0,I.A)({paper:{borderRadius:24,margin:0,padding:0},itemsRoot:{display:"flex",flexDirection:"row"},itemRoot:{padding:"4px",display:"flex",alignItem:"center",alignSelf:"center"},itemImage:{width:27,height:27},active:{background:e.palette.grey["300"],padding:e.spacing(.5),borderRadius:e.spacing(1),width:34,height:34,display:"flex",alignItem:"center",justifyContent:"center",margin:e.spacing(.2)}}),{name:"ReactionThisItemPopover"}),S=({item:e,classes:t,onClick:n,active:r})=>l.createElement("div",{className:(0,O.default)(t.itemRoot,r&&t.active),role:"button",onClick:n,"aria-label":e.title,"data-testid":"itemReaction"},l.createElement(s.A,{title:e.title},l.createElement("img",{src:e.src,draggable:!1,alt:e.title,className:t.itemImage}))),F=function({onEmojiClick:e,unsetReaction:t,identity:n}){let{useReactions:i=k.a}=(0,r.PCX)(),a=i(),o=T(),s=(0,M.wg)(n),d=(0,M.hB)(),c=d.username,u=e=>{var t,n,r;return!_()(null==s?void 0:null===(t=s.reactions)||void 0===t?void 0:t[e])&&(null===(n=s.reactions)||void 0===n?void 0:null===(r=n[e])||void 0===r?void 0:r.usernames.includes(c))},m=n=>{let r=u(n);r?t(n):e(n,null)};return l.createElement("div",{className:o.itemsRoot},a.map(e=>l.createElement(S,{key:e.id.toString(),onClick(){m(`:reaction_${e.id.toString()}:`)},classes:o,item:e,active:u(`:reaction_${e.id}:`)})))},z=(0,i.Ay)(w.A)(({theme:e})=>({margin:0,padding:e.spacing(0,.5),maxHeight:"48px",display:"flex",alignItems:"center",whiteSpace:"nowrap"})),$="emoji";function B({onEmojiClick:e,multiple:t=!0,disabled:n,scrollRef:i,scrollClose:o,placement:s="top",label:d="react",control:c,identity:u,unsetReaction:m,showHover:g,onClickAction:h,showActionRef:v}){let{i18n:f}=(0,r.PCX)(),y=f.formatMessage({id:d}),[b,A]=l.useState(null),E=l.useRef(),[x,w]=l.useState(!1),M=l.useCallback(()=>{var e,t,n;w(!1),(null==v?void 0:v.current)&&(null==v?void 0:null===(e=v.current)||void 0===e?void 0:e.id)===u&&!(null==v?void 0:null===(t=v.current)||void 0===t?void 0:t.showHover)&&(null==v?void 0:null===(n=v.current)||void 0===n?void 0:n.type)===$&&p()(h)&&h({identity:u,type:$})},[null==v?void 0:v.current]),k=l.useCallback(()=>{M()},[null==v?void 0:v.current,M]),O=l.useCallback(e=>{w(e=>!e),A(b?null:e.currentTarget),p()(h)&&h({identity:u,type:$})},[]),P=l.useCallback((n,r)=>{e&&e(n,r),t||w(!1)},[t,e]),I=l.useCallback(e=>{m&&m(e),w(!1)},[m]);return l.useEffect(()=>{if(x&&i&&i.current&&o){let e=()=>M();return i.current.addEventListener("scroll",e),()=>{null==i||i.current.removeEventListener("scroll",e)}}},[x]),l.createElement(l.Fragment,null,l.createElement(c,{showHover:g,onClick:O,disabled:n,title:y,"data-testid":"buttonAttachEmoji",icon:"ico-smile-o"}),x?l.createElement(a.qB,{excludeRef:E,onClickAway:k},l.createElement(C.A,{ref:E,open:x,anchorEl:b,placement:s,role:"presentation",style:{zIndex:1300},popperOptions:{strategy:"fixed"},variant:"hidden-outview"},l.createElement(z,{"data-testid":"dialogEmojiPicker"},l.createElement(F,{onEmojiClick:P,unsetReaction:I,identity:u})))):null)}function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let j=(0,i.Ay)(o.A,{name:"MsgEmojiPicker",slot:"UIChatItemBtn",shouldForwardProp:e=>"showHover"!==e})(({theme:e,showHover:t})=>({position:"relative",visibility:t?"hidden":"unset",padding:e.spacing(1,.75),cursor:"pointer",minWidth:e.spacing(2.5),lineHeight:e.spacing(2.5),color:"light"===e.palette.mode?e.palette.grey["600"]:e.palette.text.secondary})),N=l.forwardRef(({title:e,...t},n)=>l.createElement(s.A,{title:e,placement:"top"},l.createElement(j,W({className:"uiChatItemBtn uiChatIconBtn",disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0},t,{ref:n}),l.createElement(a.s4,{icon:"ico-smile-o"}))));function D({handleAction:e,scrollRef:t,identity:n,showHover:r=!0,...i}){let a=l.useCallback((t,n=null)=>e("chatplus/messageReaction",{shortcut:t,unicode:n}),[e]),o=l.useCallback(t=>{e("chatplus/unsetReaction",{identity:n,shortcut:t})},[e]);return l.createElement(B,W({size:"small",multiple:!1,onEmojiClick:a,unsetReaction:o,scrollRef:t,scrollClose:!0,identity:n,control:N,showHover:r},i))}function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let H=(0,i.Ay)("div",{name:"MsgToolbar",slot:"uiChatToolbar",shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({display:"flex",justifyContent:"flex-end",alignItems:"center",flex:1,...!t&&{flexDirection:"row-reverse"}}));function X({items:e,disabled:t,disableReact:n,handleAction:i,identity:a,isOwner:o,showHover:s,placement:d,onClickAction:c,showActionRef:u,sxFieldWrapper:m,rest:p}){let{useScrollRef:g}=(0,r.PCX)(),h=g();return t?null:l.createElement(H,{isOwner:o,sx:m},l.createElement(x,L({identity:a,items:e,scrollRef:h,handleAction:i,showHover:s,placement:d,popperOptions:{strategy:"fixed"},onClickAction:c,showActionRef:u},p)),n?null:l.createElement(D,{scrollRef:h,handleAction:i,identity:a,showHover:s,onClickAction:c,showActionRef:u}))}},67999(e,t,n){n.d(t,{A:()=>z});var r=n(96540),i=n(3556),l=n(14931),a=n(8051),o=n(97763),s=n(40244),d=n(96327),c=n(8586),u=n(58654),m=n(90590),p=n(64992),g=n(99520),h=n(4634),v=n(91557),f=n(1882),y=n.n(f),b=n(84149);let A="control-video",E=(0,i.Ay)("div",{name:A,slot:"root"})(({theme:e})=>({position:"absolute",bottom:0,right:0,left:0,transition:"all 150ms ease",width:"100%",userSelect:"none"})),x=(0,i.Ay)("div",{name:A,slot:"bottom",shouldForwardProp:e=>"isMinimize"!==e})(({theme:e,isMinimize:t})=>({width:"100%",padding:e.spacing(0,t?1:2),maxHeight:"65%",backgroundImage:"linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.35) 40%, transparent)",borderRadius:e.shape.borderRadius})),w=(0,s.A)({root:{color:"#fff",width:"10px !important"},thumb:{width:"16px !important",height:"16px !important",boxShadow:"none !important",color:"#fff"},track:{width:"10px !important"},rail:{color:"#fff"}})(l.Ay),C=(0,i.Ay)(a.A,{name:A,slot:"VolumeSliderWrapper",shouldForwardProp:e=>"isHover"!==e&&"isMinimize"!==e})(({theme:e,isHover:t,isMinimize:n})=>({height:70,visibility:"hidden",opacity:0,transition:"all 300ms ease",position:"absolute",bottom:"100%",paddingBottom:e.spacing(2),left:0,...n&&{height:50,paddingBottom:0},...t&&{visibility:"visible",opacity:1}})),M=(0,i.Ay)(a.A,{name:A,slot:"ButtonVolume"})(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",position:"relative",padding:e.spacing(1)})),k=(0,s.A)({root:{padding:0,height:"3px !important",color:"#fff !important",display:"flex",justifyContent:"center",alignItems:"center",flex:1,"& .MuiSlider-thumb:is(:focus, :hover, $active, .Mui-active)":{display:"inline-block !important"}},thumb:{height:"14px !important",width:"14px !important",backgroundColor:"#fff !important",border:"2px solid currentColor",marginTop:0,marginLeft:0,display:"none !important","&:focus, &:hover, &$active":{boxShadow:"inherit !important"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{border:"0 !important",height:"4px !important",borderRadius:4,width:"100%"},rail:{height:"4px !important",borderRadius:4}})(l.Ay),O=(0,i.Ay)("div",{name:A,slot:"slider",shouldForwardProp:e=>"isMinimize"!==e})(({theme:e,isMinimize:t})=>({display:"flex",alignItems:"center",padding:e.spacing(0,2),flex:1,paddingLeft:0,...t&&{paddingRight:e.spacing(.75),paddingLeft:e.spacing(.75)}})),P=(0,i.Ay)("div",{name:A,slot:"ControlBox"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between"})),I=(0,i.Ay)("div",{name:A,slot:"InnerControls",shouldForwardProp:e=>!/visible|isMinimize/i.test(e)})(({theme:e,visible:t,isMinimize:n})=>({display:"flex",...!n&&{padding:e.spacing(1.25,0)},alignItems:"center",width:"100%",...!t&&{"& > *":{opacity:0}}})),R=(0,i.Ay)("div",{name:A,slot:"icon-button"})(({theme:e})=>({display:"flex",alignItems:"center",color:"#fff !important",fontSize:e.mixins.pxToRem(15),zIndex:1,"&:hover":{cursor:"pointer"}})),_=(0,i.Ay)(a.A,{name:A,slot:"icon-button"})(({theme:e})=>({padding:e.spacing(1)})),T=(0,i.Ay)("span",{name:A,slot:"TimeSpan"})(({theme:e})=>({color:"#fff",fontSize:e.mixins.pxToRem(12),"& > span":{minWidth:"40px",display:"inline-block","&:nth-of-type(1)":{textAlign:"end"},"&:nth-of-type(2)":{textAlign:"start"}}})),S=(0,i.Ay)(a.A,{name:A,slot:"ProgressWrapper"})(({theme:e})=>({position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",flex:1})),F=e=>{var t;let{onPlayPause:n,playing:i,played:l,onSeek:a,onSeekMouseUp:s,onVolumeChangeHandler:f,volume:A,mute:F,onMute:z,formatDuration:$,duration:B,currentTime:W,onMouseSeekDown:j,controlRef:N,loaded:D,onFullScreen:L,showFullScreen:H=!1,isMinimize:X}=e||{},{i18n:U,useIsMobile:V}=(0,v.PCX)(),Q=V(!0),[q,J]=r.useState(!1),[G,K]=r.useState(!0),[Z,Y]=r.useState(""),ee=r.useRef({x:0}),et=r.useRef(null),en=r.useRef(null),er=()=>{y()(L)&&L()};r.useImperativeHandle(N,()=>({setVisible(e){K(e)},visible:G}));let ei=r.useCallback(e=>{try{let t=e.currentTarget.getBoundingClientRect(),n=e.clientX-e.currentTarget.getBoundingClientRect().left,r=(0,b.f)(Math.max(0,n/t.width*B));Y(r),ee.current={x:e.clientX},null!=et.current&&et.current.update()}catch(i){}},[Y,B]);return r.createElement(E,{ref:N},r.createElement(x,{isMinimize:X},r.createElement(P,null,r.createElement(I,{visible:G,isMinimize:X},r.createElement(R,{onClick:n},1===l?r.createElement(h.A,{fontSize:"medium"}):i?r.createElement(d.A,{fontSize:"medium"}):r.createElement(c.A,{fontSize:"medium"})),r.createElement(O,{isMinimize:X},X?null:r.createElement(T,null,r.createElement("span",null,W)," / ",r.createElement("span",null,$)),r.createElement(S,null,r.createElement(o.A,{title:Z,placement:"top",arrow:!0,PopperProps:{container:null!==(t=document.fullscreenElement)&&void 0!==t?t:document.body,popperRef:et,sx:{pointerEvents:"none",display:G?void 0:"none !important"},anchorEl:{getBoundingClientRect:()=>new DOMRect(ee.current.x,en.current.getBoundingClientRect().y+10,0,0)}}},r.createElement(k,{min:0,max:100,value:100*l,onChange:a,onChangeCommitted:s,onMouseDown:j,onMouseMove:ei,ref:en})),r.createElement(k,{disabled:!0,min:0,max:100,value:100*D,sx:{position:"absolute",top:0,left:0,opacity:.3}}))),X?null:r.createElement(_,null,r.createElement(o.A,{title:U.formatMessage({id:H?"exit_full_screen":"switch_to_full_screen"})},r.createElement(R,{onClick:er},H?r.createElement(p.A,null):r.createElement(g.A,null)))),r.createElement(M,{sx:{opacity:"1 !important"},onMouseEnter:()=>J(!0),onMouseLeave:()=>J(!1)},Q?null:r.createElement(C,{isHover:q,isMinimize:X},r.createElement(w,{min:0,max:1,step:.1,orientation:"vertical",onChange:f,value:A})),r.createElement(R,{onClick:z},F?r.createElement(u.A,{fontSize:"medium"}):r.createElement(m.A,{fontSize:"medium"})))))))},z=F},27571(e,t,n){n.d(t,{A:()=>c});var r=n(8051),i=n(89481),l=n(3556),a=n(96540);let o="loading-video",s=(0,l.Ay)(r.A,{name:o,slot:"backdrop"})(({theme:e})=>({position:"absolute",left:0,top:0,bottom:0,right:0,zIndex:10})),d=(0,l.Ay)(r.A,{name:o,slot:"conent"})(({theme:e})=>({position:"absolute",left:"50%",top:"50%",marginLeft:-20,marginTop:-20}));function c({size:e=40}){return a.createElement(s,{"data-testid":"loadingIndicator"},a.createElement(d,null,a.createElement(i.A,{color:"primary",size:e})))}},84149(e,t,n){n.d(t,{f:()=>r,h:()=>i});let r=e=>{if(isNaN(e)||0===e)return"00:00";let t=new Date(1e3*e),n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds().toString().padStart(2,"0");return n?`${n}:${r.toString().padStart(2,"0")} `:`${r}:${i}`},i=(e,t)=>{let n=e/t;return isNaN(n)||0===n?"56.25%":`${e/t*100}%`}},85376(e,t,n){n.d(t,{A:()=>_});var r=n(91557),i=n(40515),l=n(3556),a=n(8051),o=n(96540),s=n(26287),d=n(47695),c=n(97200),u=n.n(c),m=n(67999),p=n(84149),g=n(27571),h=n(67725);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let f=(0,s.Ay)({resolved:{},chunkName:()=>"VideoPlayer",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:()=>n.e("VideoPlayer").then(n.bind(n,13554)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return n(t)},resolve:()=>13554}),y="VideoPlayer",b=(0,l.Ay)(a.A,{name:y,slot:"root"})(({theme:e})=>({width:"100%",height:"100%",display:"flex",alignItems:"center",overflow:"hidden",position:"relative","& .react-player__preview":{position:"relative","&:before":{content:'""',position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"#000",opacity:.4}},"& .ico-play-circle-o":{fontSize:e.mixins.pxToRem(48),color:"#fff",position:"relative"}})),A=(0,l.Ay)("div",{name:y,slot:"playerContainer",shouldForwardProp:e=>!/ratioPercent/i.test(e)})(({theme:e,ratioPercent:t})=>({width:"100%",height:"100%",...t&&{"&:before":{content:'""',paddingTop:null!=t?t:"56.25%",backgroundColor:e.palette.grey.A700,display:"block",width:"100%",borderRadius:e.shape.borderRadius}}})),E=(0,l.Ay)(a.A,{name:y,slot:"playerWrapper"})(({theme:e})=>({width:"100%",height:"100%"})),x=(0,l.Ay)(f,{name:y,slot:"reactPlayer"})(({theme:e})=>({display:"flex",minHeight:"104px",".controls":{width:"10px"},"& video":{maxWidth:"100%",display:"inline-block",borderRadius:e.shape.borderRadius}})),w=(0,l.Ay)("div",{name:y,slot:"ThumbImageWrapper"})(({theme:e})=>({width:"100%",height:"100%",position:"absolute",top:0,zIndex:1,filter:"brightness(0.7)"})),C=(0,l.Ay)(i.s4,{name:y,slot:"CustomPlayButton"})({position:"absolute !important",top:0,bottom:0,left:0,right:0,margin:"auto",width:"fit-content",height:"fit-content",zIndex:2,pointerEvents:"none"}),M=(0,l.Ay)(i._V,{name:y,slot:"imageThumbnail"})(({theme:e})=>({width:"100%",height:"100%","& img":{borderRadius:e.shape.borderRadius}})),k=0,O=e=>Math.min(e/100,.99),P=o.forwardRef((e,t)=>o.createElement(x,v({},e,{ref:t}))),I={},R={};function _(e){var t,n,l,s,c;let{src:v,autoPlay:f=!1,autoplayIntersection:y=!1,idPlaying:x,width:_,height:T,isMinimize:S=!0,currentTime:F,thumb_url:z,allowOpenPreview:$,isDialog:B=!1}=e||{},{dialogBackend:W,useMediaPlaying:j,useSession:N,useIsMobile:D,assetUrl:L,useDialog:H}=(0,r.PCX)(),{dialogProps:X}=H(),U=D(),V=o.useRef(!1),{user:Q}=N(),q=o.useMemo(()=>x||u()("video"),[x]),J=(0,p.h)(T,_),G=(0,h.AE)(z,"500",L("video.no_image")),[K,Z]=j(q),[Y,ee]=o.useState(!1),[et,en]=o.useState(!1),[er,ei]=(0,d.Wx)({threshold:.5}),[el,ea]=o.useState(!0),eo=o.useRef(null),es=o.useRef(null),ed=o.useRef(null),[ec,eu]=o.useState({muted:null===(s=null==R?void 0:R.muted)||void 0===s||s,volume:null!==(c=null==R?void 0:R.volume)&&void 0!==c?c:1,played:0,seeking:!1,buffer:!0,loadedSeconds:0}),em=o.useRef(!1),ep=(0,r.zy2)();o.useLayoutEffect(()=>{f&&ea(!0)},[f]),o.useEffect(()=>{eu(e=>({...e,...R}))},[K]),o.useEffect(()=>{if(I[v]||F){var e;null===(e=eo.current)||void 0===e||e.seekTo(I[v]||F,"fraction")}},[null==ep?void 0:ep.pathname,F]),o.useEffect(()=>()=>{I[v]=void 0,Z(!1)},[]);let{muted:eg,volume:eh,played:ev,buffer:ef,loadedSeconds:ey,seeking:eb}=ec||{};o.useEffect(()=>{I[v]=ev},[ev]);let eA=null===(t=eo.current)||void 0===t?void 0:t.getDuration(),eE=eo.current?null===(n=eo.current)||void 0===n?void 0:n.getCurrentTime():0,ex=eo.current?eA:0,ew=null==Q?void 0:null===(l=Q.video_settings)||void 0===l?void 0:l.user_auto_play_videos,eC=ew&&y,eM=e=>{!Y&&(ee(!0),eC||!f||K||Z(!0))},ek=o.useCallback(e=>{Z(!0)},[Z]),eO=o.useCallback(e=>{Z(!1)},[Z]);(0,o.useEffect)(()=>{eC&&Z(ei)},[ei]);let eP=(0,p.f)(eE),eI=(0,p.f)(ex),eR=e=>{$&&(e.stopPropagation(),ea(!1),Z(!0))};(0,o.useEffect)(()=>{B&&(ea(!1),Z(!0))},[B]);let e_=(e,t=!1)=>{if(e.stopPropagation(),1===ev){var n,r,i,l;null===(n=eo.current)||void 0===n||n.seekTo(0),(null===(r=eo.current)||void 0===r?void 0:r.getInternalPlayer())&&(null===(l=null===(i=eo.current)||void 0===i?void 0:i.getInternalPlayer())||void 0===l||l.play());return}if(K&&!X.open&&!t){W.present({component:"chatplus.dialog.VideoPlayer",props:{src:v,currentTime:ev,thumbUrl:G}});return}Z(!K)},eT=e=>{var t;k>3e3?eL():(null===(t=es.current)||void 0===t?void 0:t.visible)&&(k+=200),eb||eu({...ec,...e})},eS=(e,t)=>{var n;let r=O(t);eu({...ec,played:r}),null===(n=eo.current)||void 0===n||n.seekTo(r,"fraction")},eF=(e,t)=>{var n;em.current&&(Z(!0),em.current=!1);let r=O(t);eu({...ec,seeking:!1}),null===(n=eo.current)||void 0===n||n.seekTo(r,"fraction")},ez=e=>{K&&(em.current=!0),eu({...ec,seeking:!0})},e$=(e,t)=>{e.stopPropagation();let n={muted:0===Number(t),volume:t};R=n,eu(e=>({...e,...n}))},eB=e=>{e.stopPropagation();let t={muted:!ec.muted,volume:0===ec.volume&&ec.muted?1:ec.volume};R=t,eu(e=>({...e,...t}))},eW=()=>{eD(),V.current=!1},ej=e=>{eu({...ec,buffer:!0})},eN=e=>{eu({...ec,buffer:!1})},eD=o.useCallback(()=>{es.current&&(es.current.setVisible(!0),k=0)},[]),eL=()=>{1!==ec.played&&K&&!et&&es.current&&es.current.setVisible(!1)},eH=()=>{var e,t,n,r,i;if(es.current&&ed.current){if(U){let l=null===(e=ed.current)||void 0===e?void 0:e.querySelector("video");if(!l)return;if(l.webkitSupportsFullscreen){l.webkitEnterFullscreen();return}l.requestFullscreen();return}document.fullscreenElement?document.exitFullscreen():(null===(t=ed.current)||void 0===t?void 0:t.requestFullscreen)?null===(r=ed.current)||void 0===r||r.requestFullscreen():(null===(n=ed.current)||void 0===n?void 0:n.webkitRequestFullscreen)&&(null===(i=ed.current)||void 0===i||i.webkitRequestFullscreen())}},[eX,eU]=o.useState(!1);return o.useEffect(()=>{let e=()=>{document.fullscreenElement?eU(!0):eU(!1)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]),o.createElement(o.Fragment,null,o.createElement(a.A,{display:el&&z?"inherit":"none !important"},o.createElement(b,{width:`${_}px !important`},o.createElement(A,{ratioPercent:J},o.createElement(w,{onClick:eR},o.createElement(M,{src:G,aspectRatio:"fixed"})),o.createElement(C,{icon:"ico-play-circle-o"})))),o.createElement(b,{display:el&&z?"none !important":"inherit",ref:er,onMouseLeave:eL,onMouseMove:eD},o.createElement(A,{ref:ed},o.createElement(E,{onClick:e_},ef&&K?o.createElement(g.A,{size:S?26:50}):null,o.createElement(P,{ref:eo,onEnded:eW,onPause:eO,onPlay:ek,onClickPreview:ek,progressInterval:200,url:v,controls:!1,config:{...U&&{file:{attributes:{controlsList:"nofullscreen",disablePictureInPicture:"",playsInline:!0}}}},onReady:eM,className:"player",width:_,height:T,playing:K&&!em.current,volume:eh,muted:eg,playIcon:o.createElement(i.s4,{icon:"ico-play-circle-o"}),onProgress:eT,onBuffer:ej,onBufferEnd:eN})),Y?o.createElement(m.A,{controlRef:es,onPlayPause:e=>e_(e,!0),playing:K,played:ev,loaded:ey/eA,buffer:ef,onSeek:eS,onSeekMouseUp:eF,onMouseSeekDown:ez,volume:eg?0:eh,onVolumeChangeHandler:e$,mute:eg,onMute:eB,duration:ex,formatDuration:eI,currentTime:eP,onFullScreen:eH,showFullScreen:eX,setIsEditControl:en,isMinimize:S}):null)))}}}]);