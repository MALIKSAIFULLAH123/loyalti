"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-story-blocks-AddFormMobile-Block"],{806(e,t,a){a.r(t),a.d(t,{default:()=>y});var o=a(91557),i=a(44562),r=a(32113),n=a(40515),s=a(3556),l=a(8051),d=a(63461),u=a(87773),c=a(96540);let m="AddForm",f=(0,s.Ay)(l.A,{name:m,slot:"Root",overridesResolver:(e,t)=>[t.root],shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({display:"flex",width:"100%",height:"100%",flexDirection:"column",...t&&{position:"fixed",top:0,left:0,right:0,zIndex:1300}})),p=(0,s.Ay)(l.A,{name:m,slot:"containerView",shouldForwardProp:e=>"status"!==e})(({theme:e,status:t})=>({flex:1,minWidth:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",...!t&&{padding:e.spacing(3)}})),g=(0,s.Ay)("div",{name:"HeightFixed"})(({heightApp:e})=>({height:e})),v=(0,s.Ay)("div",{name:"Root"})(({theme:e,active:t,scrollPosition:a,minHeight:o})=>({position:"fixed",top:o,left:0,right:0,zIndex:e.zIndex.speedDial,transitionDuration:".5s",backgroundColor:e.palette.background.paper,boxShadow:"0px 2px 1px 0 rgba(0, 0, 0, 0.05), 0px -2px 1px 0 rgba(0, 0, 0, 0.05)",...t&&a>o&&{top:0}})),x=({icon:e="ico-arrow-left",title:t="create_story"})=>{var a,i;let{navigate:r,i18n:s,useTheme:l}=(0,o.PCX)(),m=l(),f=()=>{r("/")},p=(0,o.YUP)(),[x,h]=c.useState(0),y=null!==(i=null===(a=m.appBarMobileConfig)||void 0===a?void 0:a.nav)&&void 0!==i?i:48;c.useEffect(()=>{function e(){h(window.pageYOffset)}return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]);let w=c.useRef(null),[A,S]=c.useState(0);return c.useEffect(()=>{S(w.current.clientHeight)},[]),c.createElement(c.Fragment,null,c.createElement(g,{heightApp:A}),c.createElement(v,{ref:w,minHeight:y,scrollPosition:x,active:"down"===p},c.createElement(d.A,{size:"small",role:"button",id:"back","data-testid":"buttonBack",sx:{alignSelf:"flex-start",margin:2,width:"auto"},onClick:f},c.createElement(n.s4,{icon:e,sx:{mr:1}}),c.createElement(u.A,{variant:"h4",color:"text.primary"},s.formatMessage({id:t})))))},h=(0,o.WvA)({name:"StoryAddFormMobile",extendBlock:function(e){let{jsxBackend:t,i18n:a,setNavigationConfirm:n,dialogBackend:s}=(0,o.PCX)(),l=t.get("story.block.mainViewForm"),[d,u]=c.useState(),[m,g]=c.useState(),[v,h]=c.useState(!1),[y,w]=c.useState(!1),[A,S]=c.useState(!1),b={message:a.formatMessage({id:"if_you_leave_form_no_save_changed"}),title:a.formatMessage({id:"are_you_sure"}),negativeButton:{label:a.formatMessage({id:"cancel"})},positiveButton:{label:a.formatMessage({id:"ok"})}},E=async()=>{let e=!0;y&&(e=await s.confirm(b)),e&&(u(void 0),w(!1))};return c.useEffect(()=>{if(!A&&y)return(d===i.xq||d===i.ip)&&n(y,b,()=>{u(void 0),w(!1)}),()=>{(d===i.xq||d===i.ip)&&n&&n(!1)}},[d,y,A]),c.useEffect(()=>{d===i.ip&&m&&w(!0)},[m,d]),c.createElement(r.vZ.Provider,{value:{status:d,setStatus:u,checkSetStatus:E,setFilePhoto:g,filePhoto:m,uploading:v,setUploading:h,setIsDirty:w,isDirty:y,isSubmitting:A,setIsSubmitting:S}},c.createElement(f,{status:d},d?null:c.createElement(x,null),c.createElement(p,{status:d},c.createElement(l,null))))}}),y=h},32113(e,t,a){a.d(t,{vZ:()=>n,MO:()=>l,x6:()=>d});var o=a(91262),i=a(96540);let r=i.createContext({status:null,setStatus(){},setFilePhoto(){},filePhoto:null,setUploading(){},uploading:!1,setIsDirty(){},isDirty:!1,isSubmitting:!1,setIsSubmitting(){}}),n=r,s=i.createContext({}),l=s,d={identityStoryActive:void 0,identityUserStoryActive:void 0,listUserStories:[],pauseStatus:o.ZR.No,reactions:[],indexStoryActive:void 0,openStoryDetail:!1,openViewComment:!1,openActionItem:!1,readyStateFile:!1,progressVideoPlay:0,isLastStory:!1,isReady:!1,mutedStatus:!0,buffer:!1}},91262(e,t,a){var o,i,r,n,s,l,d,u;a.d(t,{ZR:()=>o,Zw:()=>i,dw:()=>n,gw:()=>r}),(s=o||(o={}))[s.No=0]="No",s[s.Pause=1]="Pause",s[s.Force=2]="Force",(l=i||(i={})).LANDSCAPE="landscape",l.PORTRAIT="portrait",(d=r||(r={})).Avatar="1",d.ThumbnailAndAvatar="2",(u=n||(n={})).Viewers="1",u.Comments="2"}}]);