(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["packages_metafox_story_src_components_index_ts"],{5733(e,t,o){"use strict";o.d(t,{Ay:()=>l,QM:()=>a,eR:()=>s,vU:()=>d});var i=o(96540),n=o(74848);let r=i.createContext(null);function l(e){let{children:t,value:o}=e,l=function(){let[e,t]=i.useState(null);return i.useEffect(()=>{t(`mui-p-${Math.round(1e5*Math.random())}`)},[]),e}(),a=i.useMemo(()=>({idPrefix:l,value:o}),[l,o]);return(0,n.jsx)(r.Provider,{value:a,children:t})}function a(){return i.useContext(r)}function s(e,t){let{idPrefix:o}=e;return null===o?null:`${e.idPrefix}-P-${t}`}function d(e,t){let{idPrefix:o}=e;return null===o?null:`${e.idPrefix}-T-${t}`}},38354(e,t,o){"use strict";o.d(t,{A:()=>y});var i=o(58168),n=o(98587),r=o(96540),l=o(20053),a=o(3556),s=o(92353),d=o(75659),c=o(31609);function u(e){return(0,c.A)("MuiTabPanel",e)}(0,o(38413).A)("MuiTabPanel",["root"]);var m=o(5733),p=o(74848);let h=["children","className","value"],f=e=>{let{classes:t}=e;return(0,d.A)({root:["root"]},u,t)},g=(0,a.Ay)("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(3)})),v=r.forwardRef(function(e,t){let o=(0,s.A)({props:e,name:"MuiTabPanel"}),{children:r,className:a,value:d}=o,c=(0,n.A)(o,h),u=(0,i.A)({},o),v=f(u),y=(0,m.QM)();if(null===y)throw TypeError("No TabContext provided");let b=(0,m.eR)(y,d),x=(0,m.vU)(y,d);return(0,p.jsx)(g,(0,i.A)({"aria-labelledby":x,className:(0,l.default)(v.root,a),hidden:d!==y.value,id:b,ref:t,role:"tabpanel",ownerState:u},c,{children:d===y.value&&r}))}),y=v},15292(e,t,o){"use strict";o.d(t,{A:()=>S});var i=o(98587),n=o(58168),r=o(96540),l=o(20053),a=o(80851),s=o(75659),d=o(3556),c=o(92353),u=o(30919),m=o(82854),p=o(30719),h=o(82747),f=o(38413),g=o(31609);function v(e){return(0,g.A)("MuiCollapse",e)}(0,f.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var y=o(74848);let b=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],x=e=>{let{orientation:t,classes:o}=e,i={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,s.A)(i,v,o)},A=(0,d.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver(e,t){let{ownerState:o}=e;return[t.root,t[o.orientation],"entered"===o.state&&t.entered,"exited"===o.state&&!o.in&&"0px"===o.collapsedSize&&t.hidden]}})(({theme:e,ownerState:t})=>(0,n.A)({height:0,overflow:"hidden",transition:e.transitions.create("height")},"horizontal"===t.orientation&&{height:"auto",width:0,transition:e.transitions.create("width")},"entered"===t.state&&(0,n.A)({height:"auto",overflow:"visible"},"horizontal"===t.orientation&&{width:"auto"}),"exited"===t.state&&!t.in&&"0px"===t.collapsedSize&&{visibility:"hidden"})),w=(0,d.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>(0,n.A)({display:"flex",width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})),E=(0,d.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>(0,n.A)({width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})),C=r.forwardRef(function(e,t){let o=(0,c.A)({props:e,name:"MuiCollapse"}),{addEndListener:s,children:d,className:f,collapsedSize:g="0px",component:v,easing:C,in:S,onEnter:R,onEntered:k,onEntering:M,onExit:I,onExited:P,onExiting:F,orientation:_="vertical",style:z,timeout:W=u.p0.standard,TransitionComponent:T=a.Ay}=o,B=(0,i.A)(o,b),H=(0,n.A)({},o,{orientation:_,collapsedSize:g}),L=x(H),O=(0,p.A)(),N=r.useRef(),j=r.useRef(null),$=r.useRef(),D="number"==typeof g?`${g}px`:g,V="horizontal"===_,X=V?"width":"height";r.useEffect(()=>()=>{clearTimeout(N.current)},[]);let Z=r.useRef(null),U=(0,h.A)(t,Z),q=e=>t=>{if(e){let o=Z.current;void 0===t?e(o):e(o,t)}},Y=()=>j.current?j.current[V?"clientWidth":"clientHeight"]:0,Q=q((e,t)=>{j.current&&V&&(j.current.style.position="absolute"),e.style[X]=D,R&&R(e,t)}),G=q((e,t)=>{let o=Y();j.current&&V&&(j.current.style.position="");let{duration:i,easing:n}=(0,m.c)({style:z,timeout:W,easing:C},{mode:"enter"});if("auto"===W){let r=O.transitions.getAutoHeightDuration(o);e.style.transitionDuration=`${r}ms`,$.current=r}else e.style.transitionDuration="string"==typeof i?i:`${i}ms`;e.style[X]=`${o}px`,e.style.transitionTimingFunction=n,M&&M(e,t)}),K=q((e,t)=>{e.style[X]="auto",k&&k(e,t)}),J=q(e=>{e.style[X]=`${Y()}px`,I&&I(e)}),ee=q(P),et=q(e=>{let t=Y(),{duration:o,easing:i}=(0,m.c)({style:z,timeout:W,easing:C},{mode:"exit"});if("auto"===W){let n=O.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,$.current=n}else e.style.transitionDuration="string"==typeof o?o:`${o}ms`;e.style[X]=D,e.style.transitionTimingFunction=i,F&&F(e)}),eo=e=>{"auto"===W&&(N.current=setTimeout(e,$.current||0)),s&&s(Z.current,e)};return(0,y.jsx)(T,(0,n.A)({in:S,onEnter:Q,onEntered:K,onEntering:G,onExit:J,onExited:ee,onExiting:et,addEndListener:eo,nodeRef:Z,timeout:"auto"===W?null:W},B,{children:(e,t)=>(0,y.jsx)(A,(0,n.A)({as:v,className:(0,l.default)(L.root,f,{entered:L.entered,exited:!S&&"0px"===D&&L.hidden}[e]),style:(0,n.A)({[V?"minWidth":"minHeight"]:D},z),ownerState:(0,n.A)({},H,{state:e}),ref:U},t,{children:(0,y.jsx)(w,{ownerState:(0,n.A)({},H,{state:e}),className:L.wrapper,ref:j,children:(0,y.jsx)(E,{ownerState:(0,n.A)({},H,{state:e}),className:L.wrapperInner,children:d})})}))}))});C.muiSupportAuto=!0;let S=C},18579(e,t,o){"use strict";o.d(t,{A:()=>A});var i=o(98587),n=o(58168),r=o(96540),l=o(20053),a=o(75659),s=o(37878),d=o(75630),c=o(92353),u=o(3556),m=o(38413),p=o(31609);function h(e){return(0,p.A)("MuiTab",e)}let f=(0,m.A)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]);var g=o(74848);let v=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],y=e=>{let{classes:t,textColor:o,fullWidth:i,wrapped:n,icon:r,label:l,selected:s,disabled:c}=e,u={root:["root",r&&l&&"labelIcon",`textColor${(0,d.A)(o)}`,i&&"fullWidth",n&&"wrapped",s&&"selected",c&&"disabled"],iconWrapper:["iconWrapper"]};return(0,a.A)(u,h,t)},b=(0,u.Ay)(s.A,{name:"MuiTab",slot:"Root",overridesResolver(e,t){let{ownerState:o}=e;return[t.root,o.label&&o.icon&&t.labelIcon,t[`textColor${(0,d.A)(o.textColor)}`],o.fullWidth&&t.fullWidth,o.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>(0,n.A)({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:"top"===t.iconPosition||"bottom"===t.iconPosition?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${f.iconWrapper}`]:(0,n.A)({},"top"===t.iconPosition&&{marginBottom:6},"bottom"===t.iconPosition&&{marginTop:6},"start"===t.iconPosition&&{marginRight:e.spacing(1)},"end"===t.iconPosition&&{marginLeft:e.spacing(1)})},"inherit"===t.textColor&&{color:"inherit",opacity:.6,[`&.${f.selected}`]:{opacity:1},[`&.${f.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"primary"===t.textColor&&{color:(e.vars||e).palette.text.secondary,[`&.${f.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${f.disabled}`]:{color:(e.vars||e).palette.text.disabled}},"secondary"===t.textColor&&{color:(e.vars||e).palette.text.secondary,[`&.${f.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${f.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),x=r.forwardRef(function(e,t){let o=(0,c.A)({props:e,name:"MuiTab"}),{className:a,disabled:s=!1,disableFocusRipple:d=!1,fullWidth:u,icon:m,iconPosition:p="top",indicator:h,label:f,onChange:x,onClick:A,onFocus:w,selected:E,selectionFollowsFocus:C,textColor:S="inherit",value:R,wrapped:k=!1}=o,M=(0,i.A)(o,v),I=(0,n.A)({},o,{disabled:s,disableFocusRipple:d,selected:E,icon:!!m,iconPosition:p,label:!!f,fullWidth:u,textColor:S,wrapped:k}),P=y(I),F=m&&f&&r.isValidElement(m)?r.cloneElement(m,{className:(0,l.default)(P.iconWrapper,m.props.className)}):m,_=e=>{!E&&x&&x(e,R),A&&A(e)},z=e=>{C&&!E&&x&&x(e,R),w&&w(e)};return(0,g.jsxs)(b,(0,n.A)({focusRipple:!d,className:(0,l.default)(P.root,a),ref:t,role:"tab","aria-selected":E,disabled:s,onClick:_,onFocus:z,ownerState:I,tabIndex:E?0:-1},M,{children:["top"===p||"start"===p?(0,g.jsxs)(r.Fragment,{children:[F,f]}):(0,g.jsxs)(r.Fragment,{children:[f,F]}),h]}))}),A=x},80160(e,t,o){"use strict";o.d(t,{A:()=>U});var i,n,r=o(98587),l=o(58168),a=o(96540);o(44363);var s=o(20053),d=o(75659),c=o(3556),u=o(92353),m=o(30719),p=o(52515),h=o(57680);function f(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}var g=o(80393),v=o(74848);let y=["onChange"],b={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};var x=o(77257),A=o(45776),w=o(37878),E=o(38413),C=o(31609);function S(e){return(0,C.A)("MuiTabScrollButton",e)}let R=(0,E.A)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),k=["className","direction","orientation","disabled"],M=e=>{let{classes:t,orientation:o,disabled:i}=e;return(0,d.A)({root:["root",o,i&&"disabled"]},S,t)},I=(0,c.Ay)(w.A,{name:"MuiTabScrollButton",slot:"Root",overridesResolver(e,t){let{ownerState:o}=e;return[t.root,o.orientation&&t[o.orientation]]}})(({ownerState:e})=>(0,l.A)({width:40,flexShrink:0,opacity:.8,[`&.${R.disabled}`]:{opacity:0}},"vertical"===e.orientation&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),P=a.forwardRef(function(e,t){let o=(0,u.A)({props:e,name:"MuiTabScrollButton"}),{className:a,direction:d}=o,c=(0,r.A)(o,k),p=(0,m.A)(),h="rtl"===p.direction,f=(0,l.A)({isRtl:h},o),g=M(f);return(0,v.jsx)(I,(0,l.A)({component:"div",className:(0,s.default)(g.root,a),ref:t,role:null,ownerState:f,tabIndex:null},c,{children:"left"===d?i||(i=(0,v.jsx)(x.A,{fontSize:"small"})):n||(n=(0,v.jsx)(A.A,{fontSize:"small"}))}))});var F=o(43270);function _(e){return(0,C.A)("MuiTabs",e)}let z=(0,E.A)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]);var W=o(14684);let T=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],B=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,H=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,L=(e,t,o)=>{let i=!1,n=o(e,t);for(;n;){if(n===e.firstChild){if(i)return;i=!0}let r=n.disabled||"true"===n.getAttribute("aria-disabled");if(!n.hasAttribute("tabindex")||r)n=o(e,n);else{n.focus();return}}},O=e=>{let{vertical:t,fixed:o,hideScrollbar:i,scrollableX:n,scrollableY:r,centered:l,scrollButtonsHideMobile:a,classes:s}=e;return(0,d.A)({root:["root",t&&"vertical"],scroller:["scroller",o&&"fixed",i&&"hideScrollbar",n&&"scrollableX",r&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",l&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[n&&"scrollableX"],hideScrollbar:[i&&"hideScrollbar"]},_,s)},N=(0,c.Ay)("div",{name:"MuiTabs",slot:"Root",overridesResolver(e,t){let{ownerState:o}=e;return[{[`& .${z.scrollButtons}`]:t.scrollButtons},{[`& .${z.scrollButtons}`]:o.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,o.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>(0,l.A)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${z.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),j=(0,c.Ay)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver(e,t){let{ownerState:o}=e;return[t.scroller,o.fixed&&t.fixed,o.hideScrollbar&&t.hideScrollbar,o.scrollableX&&t.scrollableX,o.scrollableY&&t.scrollableY]}})(({ownerState:e})=>(0,l.A)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),$=(0,c.Ay)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver(e,t){let{ownerState:o}=e;return[t.flexContainer,o.vertical&&t.flexContainerVertical,o.centered&&t.centered]}})(({ownerState:e})=>(0,l.A)({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),D=(0,c.Ay)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>(0,l.A)({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},"primary"===e.indicatorColor&&{backgroundColor:(t.vars||t).palette.primary.main},"secondary"===e.indicatorColor&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),V=(0,c.Ay)(function(e){let{onChange:t}=e,o=(0,r.A)(e,y),i=a.useRef(),n=a.useRef(null),s=()=>{i.current=n.current.offsetHeight-n.current.clientHeight};return a.useEffect(()=>{let e=(0,p.A)(()=>{let e=i.current;s(),e!==i.current&&t(i.current)}),o=(0,g.A)(n.current);return o.addEventListener("resize",e),()=>{e.clear(),o.removeEventListener("resize",e)}},[t]),a.useEffect(()=>{s(),t(i.current)},[t]),(0,v.jsx)("div",(0,l.A)({style:b,ref:n},o))},{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),X={},Z=a.forwardRef(function(e,t){let o=(0,u.A)({props:e,name:"MuiTabs"}),i=(0,m.A)(),n="rtl"===i.direction,{"aria-label":d,"aria-labelledby":c,action:y,centered:b=!1,children:x,className:A,component:w="div",allowScrollButtonsMobile:E=!1,indicatorColor:C="primary",onChange:S,orientation:R="horizontal",ScrollButtonComponent:k=P,scrollButtons:M="auto",selectionFollowsFocus:I,TabIndicatorProps:_={},TabScrollButtonProps:z={},textColor:Z="primary",value:U,variant:q="standard",visibleScrollbar:Y=!1}=o,Q=(0,r.A)(o,T),G="scrollable"===q,K="vertical"===R,J=K?"scrollTop":"scrollLeft",ee=K?"top":"left",et=K?"bottom":"right",eo=K?"clientHeight":"clientWidth",ei=K?"height":"width",en=(0,l.A)({},o,{component:w,allowScrollButtonsMobile:E,indicatorColor:C,orientation:R,vertical:K,scrollButtons:M,textColor:Z,variant:q,visibleScrollbar:Y,fixed:!G,hideScrollbar:G&&!Y,scrollableX:G&&!K,scrollableY:G&&K,centered:b&&!G,scrollButtonsHideMobile:!E}),er=O(en),[el,ea]=a.useState(!1),[es,ed]=a.useState(X),[ec,eu]=a.useState({start:!1,end:!1}),[em,ep]=a.useState({overflow:"hidden",scrollbarWidth:0}),eh=new Map,ef=a.useRef(null),eg=a.useRef(null),ev=()=>{let e,t;let o=ef.current;if(o){let n=o.getBoundingClientRect();e={clientWidth:o.clientWidth,scrollLeft:o.scrollLeft,scrollTop:o.scrollTop,scrollLeftNormalized:(0,h.A)(o,i.direction),scrollWidth:o.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(o&&!1!==U){let r=eg.current.children;if(r.length>0){let l=r[eh.get(U)];t=l?l.getBoundingClientRect():null}}return{tabsMeta:e,tabMeta:t}},ey=(0,F.A)(()=>{let e;let{tabsMeta:t,tabMeta:o}=ev(),i=0;if(K)e="top",o&&t&&(i=o.top-t.top+t.scrollTop);else if(e=n?"right":"left",o&&t){let r=n?t.scrollLeftNormalized+t.clientWidth-t.scrollWidth:t.scrollLeft;i=(n?-1:1)*(o[e]-t[e]+r)}let l={[e]:i,[ei]:o?o[ei]:0};if(isNaN(es[e])||isNaN(es[ei]))ed(l);else{let a=Math.abs(es[e]-l[e]),s=Math.abs(es[ei]-l[ei]);(a>=1||s>=1)&&ed(l)}}),eb=(e,{animation:t=!0}={})=>{t?function(e,t,o,i={},n=()=>{}){let{ease:r=f,duration:l=300}=i,a=null,s=t[e],d=!1,c=()=>{d=!0},u=i=>{if(d){n(Error("Animation cancelled"));return}null===a&&(a=i);let c=Math.min(1,(i-a)/l);if(t[e]=r(c)*(o-s)+s,c>=1){requestAnimationFrame(()=>{n(null)});return}requestAnimationFrame(u)};return s===o?(n(Error("Element already at target position")),c):(requestAnimationFrame(u),c)}(J,ef.current,e,{duration:i.transitions.duration.standard}):ef.current[J]=e},ex=e=>{let t=ef.current[J];K?t+=e:(t+=e*(n?-1:1),t*=n&&"reverse"===(0,h.t)()?-1:1),eb(t)},eA=()=>{let e=ef.current[eo],t=0,o=Array.from(eg.current.children);for(let i=0;i<o.length;i+=1){let n=o[i];if(t+n[eo]>e){0===i&&(t=e);break}t+=n[eo]}return t},ew=()=>{ex(-1*eA())},eE=()=>{ex(eA())},eC=a.useCallback(e=>{ep({overflow:null,scrollbarWidth:e})},[]),eS=(0,F.A)(e=>{let{tabsMeta:t,tabMeta:o}=ev();if(o&&t){if(o[ee]<t[ee]){let i=t[J]+(o[ee]-t[ee]);eb(i,{animation:e})}else if(o[et]>t[et]){let n=t[J]+(o[et]-t[et]);eb(n,{animation:e})}}}),eR=(0,F.A)(()=>{if(G&&!1!==M){let e,t;let{scrollTop:o,scrollHeight:r,clientHeight:l,scrollWidth:a,clientWidth:s}=ef.current;if(K)e=o>1,t=o<r-l-1;else{let d=(0,h.A)(ef.current,i.direction);e=n?d<a-s-1:d>1,t=n?d>1:d<a-s-1}(e!==ec.start||t!==ec.end)&&eu({start:e,end:t})}});a.useEffect(()=>{let e;let t=(0,p.A)(()=>{ef.current&&(ey(),eR())}),o=(0,g.A)(ef.current);return o.addEventListener("resize",t),"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(t),Array.from(eg.current.children).forEach(t=>{e.observe(t)})),()=>{t.clear(),o.removeEventListener("resize",t),e&&e.disconnect()}},[ey,eR]);let ek=a.useMemo(()=>(0,p.A)(()=>{eR()}),[eR]);a.useEffect(()=>()=>{ek.clear()},[ek]),a.useEffect(()=>{ea(!0)},[]),a.useEffect(()=>{ey(),eR()}),a.useEffect(()=>{eS(X!==es)},[eS,es]),a.useImperativeHandle(y,()=>({updateIndicator:ey,updateScrollButtons:eR}),[ey,eR]);let eM=(0,v.jsx)(D,(0,l.A)({},_,{className:(0,s.default)(er.indicator,_.className),ownerState:en,style:(0,l.A)({},es,_.style)})),eI=0,eP=a.Children.map(x,e=>{if(!a.isValidElement(e))return null;let t=void 0===e.props.value?eI:e.props.value;eh.set(t,eI);let o=t===U;return eI+=1,a.cloneElement(e,(0,l.A)({fullWidth:"fullWidth"===q,indicator:o&&!el&&eM,selected:o,selectionFollowsFocus:I,onChange:S,textColor:Z,value:t},1!==eI||!1!==U||e.props.tabIndex?{}:{tabIndex:0}))}),eF=e=>{let t=eg.current,o=(0,W.A)(t).activeElement,i=o.getAttribute("role");if("tab"!==i)return;let r="horizontal"===R?"ArrowLeft":"ArrowUp",l="horizontal"===R?"ArrowRight":"ArrowDown";switch("horizontal"===R&&n&&(r="ArrowRight",l="ArrowLeft"),e.key){case r:e.preventDefault(),L(t,o,H);break;case l:e.preventDefault(),L(t,o,B);break;case"Home":e.preventDefault(),L(t,null,B);break;case"End":e.preventDefault(),L(t,null,H)}},e_=(()=>{let e={};e.scrollbarSizeListener=G?(0,v.jsx)(V,{onChange:eC,className:(0,s.default)(er.scrollableX,er.hideScrollbar)}):null;let t=ec.start||ec.end,o=G&&("auto"===M&&t||!0===M);return e.scrollButtonStart=o?(0,v.jsx)(k,(0,l.A)({orientation:R,direction:n?"right":"left",onClick:ew,disabled:!ec.start},z,{className:(0,s.default)(er.scrollButtons,z.className)})):null,e.scrollButtonEnd=o?(0,v.jsx)(k,(0,l.A)({orientation:R,direction:n?"left":"right",onClick:eE,disabled:!ec.end},z,{className:(0,s.default)(er.scrollButtons,z.className)})):null,e})();return(0,v.jsxs)(N,(0,l.A)({className:(0,s.default)(er.root,A),ownerState:en,ref:t,as:w},Q,{children:[e_.scrollButtonStart,e_.scrollbarSizeListener,(0,v.jsxs)(j,{className:er.scroller,ownerState:en,style:{overflow:em.overflow,[K?`margin${n?"Left":"Right"}`:"marginBottom"]:Y?void 0:-em.scrollbarWidth},ref:ef,onScroll:ek,children:[(0,v.jsx)($,{"aria-label":d,"aria-labelledby":c,"aria-orientation":"vertical"===R?"vertical":null,className:er.flexContainer,ownerState:en,onKeyDown:eF,ref:eg,role:"tablist",children:eP}),el&&eM]}),e_.scrollButtonEnd]}))}),U=Z},77257(e,t,o){"use strict";o.d(t,{A:()=>r}),o(96540);var i=o(70709),n=o(74848);let r=(0,i.A)((0,n.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},45776(e,t,o){"use strict";o.d(t,{A:()=>r}),o(96540);var i=o(70709),n=o(74848);let r=(0,i.A)((0,n.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},24713(e,t,o){var i=o(2523),n=o(15389),r=o(61489),l=Math.max;e.exports=function(e,t,o){var a=null==e?0:e.length;if(!a)return -1;var s=null==o?0:r(o);return s<0&&(s=l(a+s,0)),i(e,n(t,3),s)}},2339(e,t,o){"use strict";o.d(t,{A:()=>l});var i=o(38221),n=o.n(i),r=o(96540);function l(e,t){return r.useEffect(()=>{let o=null==t?void 0:t.current;if(!e||!o)return()=>void 0;let i=()=>{200>o.scrollWidth-o.scrollLeft-o.clientWidth&&e()},r=n()(i,200,{leading:!0});return o.addEventListener("scroll",r),()=>o.removeEventListener("scroll",r)},[e]),e}},74050(e,t,o){"use strict";o.d(t,{A:()=>m});var i=o(91557),n=o(40515),r=o(96540),l=o(3556),a=o(84058),s=o.n(a);let d="ButtonNextPrev",c=(0,l.Ay)("div",{name:d,slot:"ButtonWrapper",shouldForwardProp:e=>"displayPosition"!==e&&"isMobile"!==e})(({theme:e,displayPosition:t,isMobile:o})=>({display:"flex",alignItems:"center",flex:1,justifyContent:"flex-start",marginLeft:e.spacing(2),..."left"===t&&{justifyContent:"flex-end",marginRight:e.spacing(2),marginLeft:0},...o&&{position:"absolute",top:"50%",transform:"translate(0, -50%)",zIndex:3,right:12,left:"unset",..."left"===t&&{top:"50%",transform:"translate(0, -50%)",left:12,right:"unset"}}})),u=(0,l.Ay)("div",{name:d,slot:"nextPhoto",shouldForwardProp:e=>"isMobile"!==e&&"isShow"!==e})(({theme:e,isMobile:t,isShow:o})=>({display:"flex",alignItems:"center",backgroundColor:e.palette.grey[600],justifyContent:"center",zIndex:1,padding:"10px",borderRadius:"50%",width:"42px",height:"42px",cursor:"pointer",color:"#000","& span":{fontSize:e.mixins.pxToRem(20),fontWeight:e.typography.fontWeightBold,...t&&{color:"#fff"}},...!o&&{display:"none"}})),m=function({position:e="right",show:t,onClick:o,sxProps:l}){let{useIsMobile:a}=(0,i.PCX)(),d=a();return r.createElement(c,{"data-testid":s()(`buttonWrapper ${e}`),isMobile:d,displayPosition:e,sx:l},r.createElement(u,{isShow:t,isMobile:d,onClick:o},r.createElement(n.s4,{icon:`ico-angle-${e}`})))}},82164(e,t,o){"use strict";o.d(t,{A:()=>I});var i=o(91557),n=o(85332),r=o(91262),l=o(67725),a=o(3556),s=o(8051),d=o(96540),c=o(26287),u=o(40515),m=o(90243),p=o(44562),h=o(62193),f=o.n(h),g=o(1882),v=o.n(g),y=o(18312),b=o(81925);let x=(0,c.Ay)({resolved:{},chunkName:()=>"VideoPlayer",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!o.m[t]},importAsync:()=>o.e("VideoPlayer").then(o.bind(o,13554)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return o(t)},resolve:()=>13554}),A="ContentStoryBlock",w=(0,a.Ay)(s.A,{name:A,slot:"RootStyled",shouldForwardProp:e=>"isTypeLiveVideo"!==e})(({theme:e,isTypeLiveVideo:t})=>({...t&&{cursor:"pointer",top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}})),E=(0,a.Ay)("div",{name:A,slot:"TextContent",shouldForwardProp:e=>"fontFamily"!==e&&"position"!==e&&"type"!==e&&"color"!==e})(({theme:e,fontFamily:t,position:o,type:i,color:n})=>({zIndex:1,fontWeight:e.typography.fontWeightRegular,fontSize:e.mixins.pxToRem(28),wordBreak:"break-word",wordWrap:"break-word",color:"#fff","& a":{color:n||"#fff","&:hover":{textDecoration:"underline",cursor:"pointer"}},...t&&{fontFamily:t},boxSizing:"border-box",lineHeight:"normal"})),C=(0,a.Ay)(x,{name:A,slot:"VideoPlayer",shouldForwardProp:e=>"isTypeLiveVideo"!==e})(({theme:e,rotation:t})=>({"& video":{width:"100%",height:"100%",transform:`rotate(${t}deg)`,transformOrigin:"center"}})),S=(0,a.Ay)("img",{name:A,slot:"ImageUrl"})(({theme:e})=>({width:"100%",height:"100%",objectFit:"contain",position:"relative",maxWidth:"unset"})),R=(0,a.Ay)(s.A,{name:A,slot:"WrapperLabel"})(({theme:e})=>({position:"absolute",top:"8px",left:"8px",zIndex:"2",display:"flex",alignItems:"center"})),k=(0,a.Ay)(s.A,{name:A,slot:"WrapperInfoLiveVideo"})(({theme:e})=>({position:"absolute",bottom:0,right:0,zIndex:"2",padding:e.spacing(1),width:"100%"})),M=(0,a.Ay)(s.A,{name:A,slot:"TextInProgress"})(({theme:e})=>({backgroundColor:"rgba(0, 0, 0, 0.7)",position:"absolute",width:"100%",height:"100%",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",fontSize:e.mixins.pxToRem(20),fontWeight:e.typography.fontWeightSemiBold,color:"#fff"})),I=function(e){var t,o,a,c;let{assetUrl:h,useGetItem:g,navigate:x,jsxBackend:A,getSetting:I,i18n:P}=(0,i.PCX)(),{handleNext:F}=(0,n.P3)(),[_,z]=d.useState(r.Zw.LANDSCAPE),[W,T]=d.useState({width:"100%",height:"100%"}),B=I("story.video_duration")||p.oI,H=A.get("livestreaming.ui.labelLive"),{story:L,height:O,width:N,storyContent:j,onLoadCallBack:$}=e,D=(0,n.vC)(),{pauseStatus:V,readyStateFile:X,fire:Z,mutedStatus:U,durationVideo:q,progressVideoPlay:Y}=j||D||{},Q=d.useRef(),G=d.useRef(),K=d.useRef(),J=d.useRef(0),{type:ee,video:et,extra_params:eo,background:ei,duration:en,in_process:er}=L||{},el=en||p.oL,ea=("video"!==ee||!er)&&"photo"!==ee&&"text"!==ee,es=ee===p.UZ,[ed,ec]=d.useState(!1),{isBrowser:eu,storyHeight:em,texts:ep,transform:eh,size:ef,is_streaming:eg,total_viewer:ev,short_description:ey,title:eb}=eo||{},ex="text"===ee&&eu,{rotation:eA,scale:ew=1,position:eE}=eh||{},eC=g(ei),eS=(null==eC?void 0:eC.image)||(null==L?void 0:L.image),eR=(0,l.AE)(eS,"1024",h("story.no_image")),ek=ea?`${et}${null==L?void 0:L.id}`:`${eR}${null==L?void 0:L.id}`;d.useEffect(()=>{!et&&eR&&!function(e){let t=new Image;return t.src=e,null==t?void 0:t.complete}(eR)&&eM()},[eR,et]),d.useEffect(()=>{if(X){if(V!==r.ZR.No){ec(!1);return}ec(!0)}},[V,X]);let eM=()=>{Z({type:"setReadyStateFile",payload:!1}),ec(!1)},eI=()=>{var e,t,o,i,n,r;let l=(null==ef?void 0:ef.width)||(null===(e=G.current)||void 0===e?void 0:null===(t=e.props)||void 0===t?void 0:t.width)||"100%",a=(null==ef?void 0:ef.height)||(null===(o=G.current)||void 0===o?void 0:null===(i=o.props)||void 0===i?void 0:i.height)||"100%";!ea&&(l=(null==ef?void 0:ef.width)||(null===(n=K.current)||void 0===n?void 0:n.naturalWidth)||"100%",a=(null==ef?void 0:ef.height)||(null===(r=K.current)||void 0===r?void 0:r.naturalHeight)||"100%",Z({type:"setReadyStateFile",payload:!0}),v()($)&&$());let s={width:l,height:a};T(s)},eP=e=>{!X&&(Z({type:"setReadyStateFile",payload:!0}),J.current=e.playedSeconds,ec(!0),v()($)&&$())},eF=O/p.S1,e_=O/em,ez=d.useMemo(()=>es?"auto":(null==W?void 0:W.width)&&0!==ew?(0,b.Wf)(W.width*ew*e_,N):"100%",[e_,ew,null==W?void 0:W.width,es,N]),eW=d.useMemo(()=>es?"auto":(null==W?void 0:W.height)&&0!==ew?(0,b.Wf)(W.height*ew*e_,O):"100%",[e_,ew,null==W?void 0:W.height,es,O]),eT=d.useMemo(()=>es?{display:"flex",justifyContent:"center",alignItems:"center",width:"80%",position:"relative",..._===r.Zw.LANDSCAPE?{maxHeight:"60%"}:{height:"60%"}}:{top:(null==eE?void 0:eE.top)||0,left:(null==eE?void 0:eE.left)||0,position:"absolute",...er&&{top:0,left:0,width:"100%",height:"100%"}},[es,_,null==eE?void 0:eE.top,null==eE?void 0:eE.left,er]),eB=()=>{es&&(null==L?void 0:L.item_id)&&x(`/live-video/${null==L?void 0:L.item_id}`)},eH=d.useCallback(()=>{var e,t,o;let i=null===(e=G.current)||void 0===e?void 0:null===(t=e.player)||void 0===t?void 0:null===(o=t.player)||void 0===o?void 0:o.player;!f()(i)&&es&&((null==i?void 0:i.videoWidth)<(null==i?void 0:i.videoHeight)?z(r.Zw.PORTRAIT):z(r.Zw.LANDSCAPE))},[es]),eL=e=>{if(eH(),(null==e?void 0:e.loaded)<.15)return;eP(e);let t=e.playedSeconds-J.current;if((es&&t>=el||e.playedSeconds>=el&&q>B)&&G.current.seekTo(0,"seconds"),eg){t<0&&0===e.playedSeconds&&F(),Z({type:"setProgressVideoPlay",payload:parseFloat(parseFloat(t).toFixed(1))});return}Z({type:"setProgressVideoPlay",payload:e.playedSeconds})},eO=e=>{!es&&ea&&Z({type:"setDuration",payload:e>B?B:e})},eN=e=>{X&&Z({type:"setBuffer",payload:!0})},ej=e=>{X&&Z({type:"setBuffer",payload:!1})},e$=d.useMemo(()=>!!es&&X&&Y>0,[es,X,Y]);return eR||et?d.createElement(w,{isTypeLiveVideo:es,onClick:eB},d.createElement(s.A,{sx:{...eT}},d.createElement(s.A,{ref:Q,sx:{height:"100%",position:"relative"}},e$&&eg&&H?d.createElement(R,null,d.createElement(H,{mr:1}),d.createElement(y.A,{total_viewer:ev})):null,er?d.createElement(d.Fragment,null,d.createElement(S,{key:ek,src:eR,ref:K,onLoad:eI}),d.createElement(M,null,P.formatMessage({id:"creating_story"}))):ea?d.createElement(C,{wrapper:es?d.Fragment:"div",muted:U,loop:!1,autoPlay:!0,progressInterval:100,controls:!1,key:ek,url:et,ref:G,playing:ed,onLoadedMetadata:eI,onProgress:eL,onDuration:eO,rotation:eA,width:ez,height:eW,isTypeLiveVideo:es,onBuffer:eN,onBufferEnd:ej,config:{file:{attributes:{controlsList:"nofullscreen",disablePictureInPicture:"",playsInline:!0,onLoadStart:eM,style:{maxHeight:"100%",maxWidth:"100%"}}}}}):d.createElement(S,{key:ek,src:eR,ref:K,onLoad:eI,className:X?"":"srOnly",style:{transform:`rotate(${eA}deg)`,transformOrigin:"center",width:ez,height:eW}}),e$&&(eb||ey)?d.createElement(k,null,d.createElement(u.mE,{variant:"body1",lines:1},eb),d.createElement(u.mE,{variant:"body2",lines:1},ey)):null)),X&&(null==ep?void 0:ep.length)?d.createElement(d.Fragment,null,ep.filter(e=>null==e?void 0:e.text).map(e=>{var i,n,r,l,h,f;return d.createElement(s.A,{key:e.id,sx:{top:(null==e?void 0:null===(i=e.transform)||void 0===i?void 0:null===(n=i.position)||void 0===n?void 0:n.top)||0,left:(null==e?void 0:null===(r=e.transform)||void 0===r?void 0:null===(l=r.position)||void 0===l?void 0:l.left)||0,position:"absolute",width:(null==e?void 0:e.width)||N,...ex&&{top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},...er&&{opacity:.2}}},d.createElement(E,{type:ee,fontFamily:null==e?void 0:e.fontFamily,color:null!==(t=null==e?void 0:e.color)&&void 0!==t?t:p.OT,style:{transform:`rotate(${null==e?void 0:null===(h=e.transform)||void 0===h?void 0:h.rotation}deg) scale(${(null==e?void 0:null===(f=e.transform)||void 0===f?void 0:f.scale)||1})`,transformOrigin:"center",color:null!==(o=null==e?void 0:e.color)&&void 0!==o?o:p.OT,textAlign:null!==(a=null==e?void 0:e.textAlign)&&void 0!==a?a:"center",fontSize:(null!==(c=null==e?void 0:e.fontSize)&&void 0!==c?c:p.FV)*(ex?1:eF)}},d.createElement(u.np,{mt:0,sx:{whiteSpace:"normal"}},d.createElement(m.Ay,{html:null==e?void 0:e.text_parsed}))))})):null):null}},71149(e,t,o){"use strict";o.d(t,{A:()=>l});var i=o(91557),n=o(97763),r=o(96540);function l({className:e,value:t,shorten:o,component:l="span",formatTooltip:a="llll",format:s}){let{moment:d}=(0,i.PCX)();if(!t)return null;let c=d(t).diff(d(),"minute")/60;c<-23&&c>=-24&&(c=-23);let u=d.duration(60*c,"minute").humanize(!o,{h:24});s&&c<-24&&(u=d(t).format(s));let m=d(t),p=m.format(a);return r.createElement(n.A,{title:p},r.createElement(l,{role:"link",className:e,"aria-label":p},u))}},28472(e,t,o){"use strict";o.d(t,{A:()=>m});var i=o(91557),n=o(40515),r=o(3556),l=o(8051),a=o(87773),s=o(96540);let d=(0,r.Ay)(l.A,{name:"commentItem",slot:"root"})(({theme:e})=>({width:"260px",minWidth:"260px",display:"flex",alignItems:"center",border:"1px solid #fff",padding:e.spacing(1.5),borderRadius:40,cursor:"pointer",maxHeight:"44px"})),c=(0,r.Ay)(a.A)(({theme:e})=>({color:"#fff",fontWeight:"normal"})),u=(0,r.Ay)(n.s4)(({theme:e})=>({color:"#fff",marginRight:e.spacing(1),fontSize:e.mixins.pxToRem(20),fontWeight:e.typography.fontWeightBold})),m=function({onClick:e,item:t}){var o;let{i18n:n}=(0,i.PCX)();return s.createElement(d,{onClick:e},s.createElement(u,{icon:"ico-comment"}),s.createElement(c,{variant:"h5",color:"text.primary"},n.formatMessage({id:(null==t?void 0:null===(o=t.extra)||void 0===o?void 0:o.can_comment)?"write_comment_three_dots":"read_the_comments"})))}},18312(e,t,o){"use strict";o.d(t,{A:()=>s});var i=o(96540),n=o(3556),r=o(87773),l=o(40515);let a=(0,n.Ay)(r.A,{name:"FlagLiveLabel",slot:"packageOuter",shouldForwardProp:e=>"backgroundColor"!==e})(({theme:e,backgroundColor:t})=>({height:"24px",display:"inline-flex",padding:`0 ${e.spacing(1)}`,alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.4)",color:e.palette.common.white,fontSize:e.typography.body2.fontSize,textTransform:"uppercase",borderRadius:"4px","& > *":{margin:"0 4px"}}));function s({total_viewer:e=0}){return e?i.createElement(a,null,i.createElement(l.s4,{icon:"ico-eye-alt"}),i.createElement(l.Dq,{value:e})):null}},88316(e,t,o){"use strict";o.d(t,{pZ:()=>oS,Cj:()=>tk,ZJ:()=>tM,j7:()=>op.A,Y5:()=>tu,ef:()=>el,iq:()=>eR.A,q2:()=>tH,bQ:()=>tL,S1:()=>tG,CT:()=>P,Dq:()=>tr,wK:()=>eM,Lz:()=>eO,WR:()=>v,EW:()=>t1,hC:()=>t4});var i=o(91557),n=o(3556),r=o(8051),l=o(87773),a=o(2491),s=o(97763),d=o(96540),c=o(40515),u=o(62193),m=o.n(u),p=o(91262),h=o(85332);let f=(0,n.Ay)(r.A,{name:"ReactionThisItem",slot:"root",shouldForwardProp:e=>"active"!==e})(({theme:e,active:t})=>({display:"flex",flexDirection:"row","&>img":{minWidth:"44px",padding:"4px",transition:"transform 180ms",transformOrigin:"center bottom"},"&>img:hover":{transform:"scale(1.22)"}})),g=({item:e,classes:t,onClick:o,active:i})=>d.createElement(f,{active:i,role:"button",onClick:o,"aria-label":e.title,"data-testid":"itemReaction"},d.createElement(s.A,{title:e.title},d.createElement("img",{role:"button","aria-label":e.title,"data-testid":"itemReaction",src:e.src,draggable:!1,width:"44px",height:"44px",alt:e.title}))),v=d.memo(function({item:e,contextStory:t}){let{dispatch:o,useIsMobile:n,useReactions:r=h.aN}=(0,i.PCX)(),l=r(),a=n(),{fire:s,pauseStatus:c,reactions:u}=t||{};if(m()(e))return null;let v=({item:t})=>{s({type:"setReactions",payload:[...u,t]}),o({type:"story/sendReaction",payload:{identity:null==e?void 0:e._identity,reaction_id:null==t?void 0:t.id}})},y=()=>{a||c===p.ZR.Force||s({type:"setForcePause",payload:p.ZR.Pause})},b=()=>{a||c===p.ZR.Force||s({type:"setForcePause",payload:p.ZR.No})};return d.createElement(f,{"data-testid":"reactionListButton",onMouseEnter:y,onMouseLeave:b},l.map(e=>d.createElement(g,{key:e.id.toString(),onClick(){v({item:e})},item:e})))},(e,t)=>{var o,i,n,r,l,a;return(null==e?void 0:null===(o=e.item)||void 0===o?void 0:o.id)===(null==t?void 0:null===(i=t.item)||void 0===i?void 0:i.id)&&(null==e?void 0:null===(n=e.contextStory)||void 0===n?void 0:n.pauseStatus)===(null==t?void 0:null===(r=t.contextStory)||void 0===r?void 0:r.pauseStatus)&&(null==e?void 0:null===(l=e.contextStory)||void 0===l?void 0:l.reactions)===(null==t?void 0:null===(a=t.contextStory)||void 0===a?void 0:a.reactions)});var y=o(28472),b=o(84058),x=o.n(b),A=o(44562);let w="ItemInteraction",E=(0,n.Ay)(r.A,{slot:"RootOwnerStyled",shouldForwardProp:e=>"showView"!==e&&"width"!==e&&"isMobile"!==e&&"isMinHeight"!==e&&"isSmallWidth"!==e})(({theme:e,showView:t,width:o,isMobile:i,isMinHeight:n,isSmallWidth:r})=>({minHeight:"64px",display:"flex",alignItems:"center",justifyContent:"space-between",...t&&{cursor:"pointer"},...o&&{width:o},...i&&{padding:e.spacing(0,2),paddingRight:e.spacing(.5),...n&&{maxWidth:"400px"},...r&&{width:"100%"},overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"}}})),C=(0,n.Ay)(r.A,{slot:"RootStyled",shouldForwardProp:e=>"showView"!==e&&"width"!==e&&"isMobile"!==e&&"isMinHeight"!==e&&"isSmallWidth"!==e})(({theme:e,showView:t,width:o,isMobile:i,isMinHeight:n,isSmallWidth:r})=>({minHeight:"64px",display:"flex",alignItems:"center",...i&&{padding:e.spacing(0,2),...r&&{width:"100%"},...n&&{maxWidth:"560px"},overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"}}})),S=(0,n.Ay)(l.A)(({theme:e})=>({color:"#fff",fontSize:e.mixins.pxToRem(16)})),R=(0,n.Ay)(c.s4)(({theme:e})=>({color:"#fff",marginRight:e.spacing(1),fontSize:e.mixins.pxToRem(18),fontWeight:e.typography.fontWeightBold})),k=(0,n.Ay)(c.s4)(({theme:e})=>({color:"#fff",fontSize:e.mixins.pxToRem(20),fontWeight:e.typography.fontWeightBold})),M=(0,n.Ay)(r.A,{name:w,slot:"ViewWrapper"})(({theme:e})=>({display:"flex",alignItems:"center"})),I=(0,n.Ay)(r.A,{name:w,slot:"CommentWrapper"})(({theme:e})=>({padding:e.spacing(1.5)})),P=function({width:e,identity:t,isMinHeight:o=!1,...n}){let{getSetting:l,useSession:c,i18n:u,isMobile:p,useGetItem:h}=(0,i.PCX)(),f=(0,a.A)("(max-width:560px)"),g=l("comment"),{identityUserStoryActive:b,openStoryDetail:w,openViewComment:P,fire:F}=n||{},_=h(b),z=h(t),{user:W}=c();if(m()(z))return d.createElement(C,{width:e});let{statistic:T,extra:B}=z||{},H=!l("preaction")||!(null==B?void 0:B.can_like),L=()=>{P&&F({type:"setOpenViewComment",payload:!1}),F({type:"setOpenStoryDetail",payload:!w})},O=()=>{w&&F({type:"setOpenStoryDetail",payload:!1}),F({type:"setOpenViewComment",payload:!P})},N=(null==_?void 0:_.id)===(null==W?void 0:W.id);return N?d.createElement(E,{"data-testid":"itemInteraction",isMobile:p,width:o?A.G9:e,showView:N,isMinHeight:o,isSmallWidth:f},d.createElement(M,{"data-testid":"itemInteractionView",onClick:L},d.createElement(R,{icon:"ico-angle-up"}),d.createElement(S,{variant:"h4",color:"text.primary"},u.formatMessage({id:"total_story_viewer"},{value:(null==T?void 0:T.total_view)||0}))),g?d.createElement(I,{"data-testid":"itemInteractionComments",onClick:O},d.createElement(s.A,{title:u.formatMessage({id:"comments"})},d.createElement(k,{icon:"ico-comment-o"}))):null):d.createElement(C,{"data-testid":"itemInteraction",width:o?A.G9:e,isMobile:p,isMinHeight:o,isSmallWidth:f},g?d.createElement(r.A,{"data-testid":x()("field comment")},d.createElement(y.A,{onClick:O,item:z})):null,H?null:d.createElement(v,{item:z,contextStory:{...n}}))};var F=o(63461),_=o(84680);let z="AddStoryButton",W=(0,n.Ay)(r.A,{name:z,slot:"root-statistic"})(({theme:e})=>({flex:1,overflow:"hidden"})),T=(0,n.Ay)(r.A,{name:z,slot:"root-statistic"})(({theme:e})=>({display:"flex",alignItems:"center",height:"40px"})),B=(0,n.Ay)(c.s4)(({theme:e})=>({color:e.palette.text.primary,marginRight:e.spacing(1),fontSize:e.mixins.pxToRem(16),fontWeight:e.typography.fontWeightBold})),H=d.memo(function({item:e}){let{i18n:t,jsxBackend:o}=(0,i.PCX)(),{statistic:n,id:r}=e,a=(null==n?void 0:n.total_view)||0,s=o.get("story.block.viewListBlock");return d.createElement(d.Fragment,null,d.createElement(T,null,d.createElement(B,{icon:"ico-eye-o"}),d.createElement(l.A,{variant:"h5",color:"text.primary"},t.formatMessage({id:"total_story_viewer"},{value:a}))),d.createElement(W,null,a?d.createElement(_.P,{autoHide:!0,autoHeight:!0,autoHeightMax:"100%"},d.createElement(s,{pageParamsDefault:{story_id:r}})):d.createElement(l.A,{variant:"body1",color:"text.secondary"},t.formatMessage({id:"description_no_viewer_story"}))))},(e,t)=>{var o,i;return(null==e?void 0:null===(o=e.item)||void 0===o?void 0:o.id)===(null==t?void 0:null===(i=t.item)||void 0===i?void 0:i.id)}),L=(0,n.Ay)(r.A)(({theme:e})=>({minWidth:"100px",width:"100px",height:"135px",display:"flex",alignItems:"center",cursor:"pointer",padding:e.spacing(1),flexDirection:"column",background:e.palette.background.default,borderRadius:e.shape.borderRadius,justifyContent:"center"})),O=(0,n.Ay)(r.A,{name:"AddStoryButton",slot:"ButtonAdd"})(({theme:e})=>({position:"relative",width:"48px",height:"48px",backgroundColor:e.palette.background.paper,borderRadius:"50%",marginBottom:e.spacing(1.5),cursor:"pointer",border:"light"===e.palette.mode?e.mixins.border("secondary"):"none"})),N=(0,n.Ay)(c.s4)(({theme:e})=>({fontSize:e.mixins.pxToRem(16),color:e.palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),j=(0,n.Ay)(l.A)(({theme:e})=>({fontSize:e.mixins.pxToRem(12),textAlign:"center"})),$=function(){let{i18n:e,navigate:t}=(0,i.PCX)(),o=d.useCallback(()=>{t("/story/add")},[]);return d.createElement(L,{onClick:o},d.createElement(O,null,d.createElement(N,{icon:"ico-plus"})),d.createElement(j,{variant:"body1",color:"text.primary"},e.formatMessage({id:"create_story"})))};var D=o(67725);let V="slider-story",X=(0,n.Ay)(r.A,{name:V,slot:"Root",shouldForwardProp:e=>"translate"!==e})(({translate:e})=>({display:"flex",flexWrap:"nowrap",maxHeight:"182px",alignItems:"center",transform:`translate(${e}px, 0)`,transition:"all 300ms ease"})),Z=(0,n.Ay)(r.A,{name:V,shouldForwardProp:e=>"active"!==e})(({theme:e,active:t})=>({padding:e.spacing(3,0),height:"182px",width:"100px",minWidth:"100px",marginRight:e.spacing(1),...t&&{height:"200px"}})),U=(0,n.Ay)("div",{name:V,slot:"iamge-story",shouldForwardProp:e=>"imageUrl"!==e})(({theme:e,imageUrl:t})=>({cursor:"pointer",display:"flex",alignItems:"center",height:"100%",width:"100%",borderRadius:e.shape.borderRadius,backgroundImage:`url(${t})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",border:e.mixins.border("secondary")})),q=({story:e,active:t,translateItem:o,index:n})=>{let{assetUrl:r}=(0,i.PCX)(),{fire:l}=(0,h.vC)(),a=(0,D.AE)((null==e?void 0:e.thumbs)||(null==e?void 0:e.image),"100",r("story.no_image")),s=d.useCallback(()=>{l({type:"setIdentityStoryActive",payload:null==e?void 0:e._identity})},[null==e?void 0:e._identity]);return d.useEffect(()=>{t&&o({index:n})},[t,n]),d.createElement(Z,{active:t,onClick:s},d.createElement(U,{key:a,imageUrl:a}))},Y=({stories:e=[],item:t,isArchive:o=!1})=>{let{getAcl:n}=(0,i.PCX)(),[r,l]=d.useState(0),a=n("story.story.create"),s=({index:e})=>{if(0===e){l(0);return}l(108*e-45)};return d.createElement(X,{translate:-r},e.map((e,o)=>d.createElement(q,{index:o,key:null==e?void 0:e.id,story:e,active:(null==e?void 0:e.id)===(null==t?void 0:t.id),translateItem:s})),a&&!o?d.createElement($,null):null)};var Q=o(18799),G=o(15292);let K=(0,n.Ay)(Q.A,{name:"WapperItemInteraction",slot:"root",shouldForwardProp:e=>"isMinHeight"!==e})(({theme:e,isMinHeight:t})=>({width:"100%",maxWidth:"100%",height:"85%",position:"absolute",bottom:0,right:0,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,paddingTop:e.spacing(2.5),display:"flex",flexDirection:"column",zIndex:9999,...t&&{left:"50%",transform:"translate(-50%, 0)",width:A.G9}})),J=({children:e,setOpen:t,open:o,isMinHeight:n=!1,sxProps:r={}})=>{let{useIsMobile:l}=(0,i.PCX)(),a=l(!0),s=()=>{a&&t(!1)};return o?d.createElement(G.A,{in:o,orientation:"vertical"},d.createElement(c.qB,{onClickAway:s},d.createElement(K,{"data-testid":"wrapper-interaction",isMinHeight:n,sx:r},e))):null},ee="ContentViewDetail",et=(0,n.Ay)(r.A,{name:ee,slot:"HeaderBlock",shouldForwardProp:e=>"hideSlider"!==e})(({theme:e,hideSlider:t})=>({padding:e.spacing(2),paddingTop:0,display:"flex",alignItems:"center",justifyContent:"center",...t&&{borderBottom:e.mixins.border("secondary")}})),eo=(0,n.Ay)(r.A,{name:ee,slot:"HeaderTitle"})(()=>({})),ei=(0,n.Ay)(r.A,{name:ee,slot:"ContentBlock"})(({theme:e})=>({borderTop:e.mixins.border("secondary"),borderBottom:e.mixins.border("secondary"),overflow:"hidden"})),en=(0,n.Ay)(F.A,{name:ee})(()=>({marginLeft:"auto",transform:"translate(4px,0)",position:"absolute",right:"16px"})),er=({item:e,open:t,setOpen:o,isMinHeight:n=!1,hideSlider:r=!1})=>{let{i18n:a,useGetItems:s,useGetItem:u,useTheme:m}=(0,i.PCX)(),p=m(),{identityUserStoryActive:f}=(0,h.vC)(),g=u(f),v=s(null==g?void 0:g.stories),y=()=>{o(!1)};return t&&v.length?d.createElement(J,{setOpen:o,open:t,isMinHeight:n,sxProps:{padding:p.spacing(2),paddingTop:p.spacing(2.5)},"data-testid":x()("story viewers")},d.createElement(et,{hideSlider:r},d.createElement(eo,null,d.createElement(l.A,{variant:"h4",color:"text.primary"},a.formatMessage({id:"story_viewers"}))),d.createElement(en,{size:"small",onClick:y,"data-testid":"buttonClose",role:"button"},d.createElement(c.s4,{icon:"ico-close"}))),r?null:d.createElement(ei,null,d.createElement(Y,{stories:v,item:e})),d.createElement(H,{item:e})):null},el=er;var ea=o(81502),es=o(60780),ed=o(71149),ec=o(2404),eu=o.n(ec);let em="HeaderStory",ep=(0,n.Ay)(r.A,{name:em})(({theme:e})=>({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"column",padding:e.spacing(1.5)})),eh=(0,n.Ay)(r.A,{name:em,shouldForwardProp:e=>"isTypeLiveVideo"!==e})(({theme:e,isTypeLiveVideo:t})=>({width:"100%",height:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(1.5,0),...t&&{paddingBottom:e.spacing(1)}})),ef=(0,n.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"})),eg=(0,n.Ay)(r.A,{name:em})(({theme:e})=>({width:"100%",marginRight:e.spacing(.5),"&:last-child":{marginRight:e.spacing(0)}})),ev=(0,n.Ay)(ea.A,{name:em})(({theme:e})=>({borderRadius:e.shape.borderRadius/4,backgroundColor:"rgba(255, 255, 255, 0.5)","& .MuiLinearProgress-bar":{borderRadius:e.shape.borderRadius/2,backgroundColor:"rgba(255, 255, 255, 0.9)",transition:"transform .3s linear",transformOrigin:"left",willChange:"transform"}})),ey=(0,n.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",maxWidth:"70%",overflow:"hidden"})),eb=(0,n.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center"})),ex=(0,n.Ay)(F.A)(({theme:e})=>({color:"#fff"})),eA=(0,n.Ay)("div",{name:em,slot:"PrivacyBlockStyled"})(({theme:e})=>({display:"flex",flexDirection:"row",alignItems:"center",fontSize:"0.8125rem",paddingTop:"0.25em"})),ew=(0,n.Ay)("div",{name:em,slot:"SeparateSpanStyled"})(({theme:e})=>({color:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center","& span + span:before":{content:'"\xb7"',display:"inline-block",padding:`${e.spacing(0,.5)}`}})),eE=(0,n.Ay)(es.A,{name:em,slot:"ButtonStyled"})(({theme:e})=>({alignSelf:"flex-start",color:"#fff",fontWeight:e.typography.fontWeightMedium,borderColor:"#fff","&:hover":{borderColor:e.palette.border.secondary}})),eC=d.memo(({identity:e,contextStory:t})=>{let{i18n:o,navigate:n}=(0,i.PCX)(),{pauseStatus:r,fire:l}=t,[a]=(0,i.Vd3)(e,{}),u=(e,t,o)=>{a(e,t,o),e.includes("deleteItem")&&n("/")},m=d.useRef(r),[h,f]=d.useState(!1),g=e=>{f(e)};return d.useEffect(()=>{if(h){m.current=r,l({type:"setForcePause",payload:p.ZR.Force});return}l({type:"setForcePause",payload:m.current})},[h]),d.useEffect(()=>{m.current=!1,l({type:"setForcePause",payload:p.ZR.No})},[e]),d.createElement(c.pN,{triggerOpen:g,identity:e,handleAction:u,control:d.createElement(s.A,{title:o.formatMessage({id:"more_options"}),placement:"bottom"},d.createElement(ex,{size:"medium",disableRipple:!0,disableFocusRipple:!0},d.createElement(c.s4,{icon:"ico-dottedmore"})))})},(e,t)=>{var o,i;return(null==e?void 0:e.identity)===(null==t?void 0:t.identity)&&(null==e?void 0:null===(o=e.contextStory)||void 0===o?void 0:o.pauseStatus)===(null==t?void 0:null===(i=t.contextStory)||void 0===i?void 0:i.pauseStatus)}),eS=function({story:e,isMinHeight:t=!1,isSmallHeight:o=!1}){let{i18n:n,useGetItem:l,usePageParams:a,useIsMobile:u,goSmartBack:f,navigate:g,useTheme:v}=(0,i.PCX)(),y=v(),b=u(!0),x=(0,h.vC)(),{pauseStatus:w,fire:E,readyStateFile:C,progressVideoPlay:S,mutedStatus:R,durationVideo:k}=x||{},M=()=>{f()},I=a(),P=l(null==e?void 0:e.user),[F,_]=d.useState(0),z=(0,d.useRef)(),W=(0,d.useRef)(0),{_identity:T,privacy:B,creation_date:H,duration:L,type:O,extra_params:N,in_process:j}=e||{},{is_streaming:$}=N||{},D=k||L||A.oL,V=("video"!==O||!j)&&"photo"!==O&&"text"!==O,X=O===A.UZ,Z=d.useRef(0),U=()=>{if(0===W.current||W.current>=D){Q();return}if(w!==p.ZR.No){E({type:"setForcePause",payload:p.ZR.No});return}E({type:"setForcePause",payload:p.ZR.Force})},q=()=>{E({type:"setMuted",payload:!R})};d.useEffect(()=>{V&&(W.current=S)},[V,S]);let Y=()=>{if(!m()(e)){if(clearInterval(z.current),V){z.current=setInterval(()=>{!(0===W.current||eu()(W.current,Z.current))&&(Z.current=W.current,W.current>=D&&(E({type:"setForcePause",payload:p.ZR.Force}),G()))},100);return}z.current=setInterval(()=>{W.current=W.current+.1,_(e=>e+.1),W.current>=D&&(E({type:"setForcePause",payload:p.ZR.Force}),G())},100)}},Q=()=>{W.current=0,_(0),clearInterval(z.current),E({type:"setForcePause",payload:p.ZR.No}),Y()},G=()=>{clearInterval(z.current)},K=()=>{Y()},J=()=>{W.current=0,_(0),E({type:"setForcePause",payload:p.ZR.No}),clearInterval(z.current)};d.useEffect(()=>{if(w!==p.ZR.No){G();return}K()},[w]),d.useEffect(()=>{if(C&&I.id)return Q(),()=>{J()}},[null==I?void 0:I.id,C]);let ee=d.useCallback(()=>{let e=V?W.current:F;return C?e>=D?100:Math.round(e/D*100)||0:0},[W.current,D,C,F]),et=()=>{X&&(null==e?void 0:e.item_id)&&g(`/live-video/${null==e?void 0:e.item_id}`)};return d.createElement(ep,null,d.createElement(ef,null,d.createElement(eg,null,d.createElement(ev,{variant:"determinate",value:ee()||0}))),d.createElement(eh,{isTypeLiveVideo:X},d.createElement(ey,null,d.createElement(c.H8,{user:P,size:t||o?36:48,noStory:!0,showStatus:!1}),o?null:d.createElement(r.A,{ml:1,overflow:"hidden"},d.createElement(c.mE,{lines:1,style:{color:"#fff"},variant:"h5"},d.createElement(c.xE,{user:P})),X?d.createElement(c.mE,{lines:1,variant:"body1",style:{color:"rgba(255, 255, 255, 0.9)",fontSize:y.mixins.pxToRem(13),paddingTop:"0.25em"}},n.formatMessage({id:$?"live_now":"recorded_live"})):null,d.createElement(eA,null,d.createElement(ew,null,d.createElement(ed.A,{value:H,format:"ll"}),d.createElement(c.g6,{value:B}))))),d.createElement(eb,null,d.createElement(ex,{size:"medium",onClick:U},w===p.ZR.No?d.createElement(s.A,{title:n.formatMessage({id:"pause"}),placement:"bottom"},d.createElement(c.s4,{icon:"ico-pause"})):d.createElement(s.A,{title:n.formatMessage({id:"play"}),placement:"bottom"},d.createElement(c.s4,{icon:"ico-play"}))),V&&!j?d.createElement(ex,{size:"medium",onClick:q},R?d.createElement(s.A,{title:n.formatMessage({id:"unmute"}),placement:"bottom"},d.createElement(c.s4,{icon:"ico-volume-del"})):d.createElement(s.A,{title:n.formatMessage({id:"mute"}),placement:"bottom"},d.createElement(c.s4,{icon:"ico-volume-increase"}))):null,d.createElement(eC,{identity:T,contextStory:x}),b?d.createElement(ex,{onClick:M},d.createElement(c.s4,{icon:"ico-close"})):null)),X?d.createElement(eE,{role:"button","data-testid":"buttonWatchVideo",variant:"outlined",size:"small",disableRipple:!0,onClick:et},n.formatMessage({id:$?"watch_live_video":"watch_video"})):null)};var eR=o(82164),ek=o(89481);let eM=function({sx:e}){return d.createElement(r.A,{sx:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.5)",zIndex:2,...e}},d.createElement(ek.A,{size:16,style:{color:"#fff"}}))},eI="PlayStoryView",eP=(0,n.Ay)(r.A,{name:eI,slot:"RootStyled",shouldForwardProp:e=>"isOwner"!==e&&"isMobile"!==e})(({theme:e,isOwner:t,isMobile:o})=>({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none",backgroundColor:"#000",flexDirection:"column"})),eF=(0,n.Ay)(r.A,{name:eI,slot:"ContentWrapper"})(({theme:e})=>({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flex:1,minHeight:0})),e_=(0,n.Ay)(r.A,{name:eI,slot:"HeaderContainer"})(({theme:e})=>({position:"absolute",top:0,left:0,right:0,zIndex:9999,width:"100%","&::before":{content:"''",position:"absolute",top:0,left:0,right:0,width:"100%",height:"100%",backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.08), transparent)",zIndex:-1,pointerEvents:"none"}})),ez=(0,n.Ay)(r.A,{name:eI,slot:"ItemWrapper"})(({theme:e})=>({position:"relative",margin:"auto",backgroundColor:"#000",display:"flex",justifyContent:"center",borderRadius:e.shape.borderRadius,height:"100%"})),eW=(0,n.Ay)("div",{name:eI,slot:"StoryImage",shouldForwardProp:e=>"width"!==e})(({theme:e,width:t})=>({height:"100%",width:t,position:"relative"})),eT=(0,n.Ay)("div",{name:"Image",slot:"ImageWrapper",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,height:t,width:o})=>({position:"relative",display:"flex",alignItems:"center",height:t,width:o,borderRadius:e.shape.borderRadius,overflow:"hidden"})),eB=(0,n.Ay)(r.A,{name:eI,slot:"StatisticItem",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,height:t,width:o})=>({position:"absolute",bottom:0,left:0,padding:e.spacing(1.5),...o&&{width:o},overflow:"hidden"})),eH=(0,n.Ay)(r.A,{slot:"FooterStyled",shouldForwardProp:e=>"showView"!==e&&"width"!==e&&"isMobile"!==e&&"isMinHeight"!==e})(({theme:e,width:t,isMobile:o,isMinHeight:i})=>({minHeight:"64px",display:"flex",alignItems:"center",...t&&{width:t},...o&&{padding:e.spacing(0,2),width:"100%",...i&&{maxWidth:"560px"},overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"}}})),eL=(0,n.Ay)("img",{name:eI,slot:"ImageThumbUrl",shouldForwardProp:e=>"width"!==e&&"height"!==e&&"type"!==e})(({theme:e,height:t,width:o,type:i})=>({borderRadius:e.shape.borderRadius,objectFit:"contain",position:"absolute",inset:0,width:"100%",height:"100%",filter:"blur(30px)",WebkitFilter:"blur(30px)",transform:"scale(2)"})),eO=function({story:e,isModal:t=!0,isOwner:o=!1}){let{assetUrl:n,useIsMobile:r,jsxBackend:l,getSetting:s,dispatch:c,useGetItem:u}=(0,i.PCX)(),p=(0,h.vC)(),{reactions:f,readyStateFile:g,buffer:y}=p||{},b=r(!0),x=(0,a.A)("(max-height:667px)"),A=(0,a.A)("(max-height:580px)"),w=d.useRef(),E=l.get("story.ui.flyReaction"),C=l.get("story.ui.statisticSendReaction"),[S,R]=(0,h.Uf)(w),{_identity:k,reactions:M,type:I,background:P,extra:F}=e||{},_=!s("preaction")||!(null==F?void 0:F.can_like),z=u(P),W=(0,D.AE)((null==z?void 0:z.image)||(null==e?void 0:e.thumbs)||(null==e?void 0:e.image),"50x50,50",n("story.no_image")),T=()=>{if(!e.has_seen){var t,o;let i=null===(o=null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.split("."))||void 0===o?void 0:o[3],n=`story.entities.user_story.${i}`;c({type:"story/updateView",payload:{story:e,lastStory:!0,identityUser:n}})}};return d.createElement(eP,{isOwner:o,isMobile:b},d.createElement(eF,null,d.createElement(ez,null,d.createElement(eW,{ref:w,width:S},d.createElement(e_,null,d.createElement(eS,{story:e,isMinHeight:x,isSmallHeight:A})),d.createElement(eT,{height:R,width:S},!g||y?d.createElement(eM,{sx:{...y&&{background:"transparent"}}}):null,d.createElement(eL,{key:W,src:W,type:I}),d.createElement(eR.A,{story:e,height:R,width:S,onLoadCallBack:T})),d.createElement(eB,{width:S},C&&!m()(M)?d.createElement(C,{identity:k,isMinHeight:x}):null),E&&d.createElement(E,{identity:k,data:f})))),b||_||o?null:d.createElement(eH,{width:S,isMobile:b,isMinHeight:x},d.createElement(v,{item:e,contextStory:p})))};var eN=o(18579),ej=o(2339);let e$="slider_story",eD=(0,n.Ay)(r.A,{name:e$,slot:"root",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({maxHeight:"182px",display:"flex",alignItems:"center",...t&&{overflowX:"auto",overflowY:"hidden",MsOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"}}})),eV=(0,n.Ay)(r.A,{name:e$,slot:"Wrapper",shouldForwardProp:e=>"translate"!==e&&"isMobile"!==e})(({translate:e,isMobile:t})=>({display:"flex",flexWrap:"nowrap",alignItems:"center",height:"100%",transform:`translate(${t?0:e}px, 0)`,transition:"all 300ms ease"}));function eX({children:e,translate:t,setTranslate:o,loadMore:n}){let{useIsMobile:r}=(0,i.PCX)(),l=r(),a=d.useRef(null),s=d.useRef(null),c=0,u=0,m=!1,p=e=>{m=!0,c=e.clientX},h=e=>{m&&(u=e.clientX)},f=e=>{var i,r;if(l||!m||0===u)return;let d=u-c,p=null===(i=a.current)||void 0===i?void 0:i.getBoundingClientRect(),h=null===(r=s.current)||void 0===r?void 0:r.getBoundingClientRect();if(Math.abs(d)>30){if(d>0){if(t<153){o(0);return}o(t-216)}else{if(n(),t>(null==h?void 0:h.width)-(null==p?void 0:p.width))return;o(t+216)}e.preventDefault(),e.stopPropagation()}m=!1};return(0,ej.A)(l&&n?n:void 0,a),d.useEffect(()=>{if(l){if(t<a.current.clientWidth-108){a.current.scrollLeft=0;return}a.current.scrollLeft=t}},[t,l]),d.createElement(eD,{ref:a,isMobile:l},d.createElement(eV,{isMobile:l,translate:-t,onMouseDown:p,onMouseMove:h,onMouseUp:f,onMouseLeave:f,ref:s},e))}let eZ="slider-story-archive",eU=(0,n.Ay)(r.A,{name:eZ,shouldForwardProp:e=>"active"!==e})(({theme:e,active:t})=>({padding:e.spacing(3,0),height:"182px",width:"100px",minWidth:"100px",marginRight:e.spacing(1),...t&&{height:"200px"}})),eq=(0,n.Ay)("div",{name:eZ,slot:"iamge-story",shouldForwardProp:e=>"imageUrl"!==e})(({theme:e,imageUrl:t})=>({cursor:"pointer",display:"flex",alignItems:"center",height:"100%",width:"100%",borderRadius:e.shape.borderRadius,backgroundImage:`url(${t})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",border:e.mixins.border("secondary")})),eY=({story:e,active:t,index:o,translateItem:n})=>{let{assetUrl:r}=(0,i.PCX)(),l=(0,h.vC)(),{fire:a}=l,s=(0,D.AE)((null==e?void 0:e.thumbs)||(null==e?void 0:e.image),"100",r("story.no_image")),c=d.useCallback(()=>{t||a({type:"setStoryActive",payload:{identity:null==e?void 0:e._identity,index:o,positionStory:o}})},[null==e?void 0:e._identity,o,t]);return d.useEffect(()=>{t&&n({index:o})},[t,o]),d.createElement(eU,{active:t,onClick:c},d.createElement(eq,{key:s,imageUrl:s}))},eQ=({stories:e=[],item:t})=>{let[o,i]=d.useState(0),[n,r]=d.useState(!1),l=(0,h.vC)(),{stories:a,total:s}=l,{loadmore:c}=(0,h.Tq)(),u=e=>{!n&&s>a.length-1&&(r(!0),c(e,()=>{r(!1)}))},p=({index:e})=>{if(0===e){i(0);return}i(108*e-45),u(e)};return m()(a)?null:d.createElement(eX,{translate:o,setTranslate:i,loadMore:()=>u(a.length)},e.map((e,o)=>d.createElement(eY,{index:o,key:null==e?void 0:e.id,story:e,active:(null==e?void 0:e.id)===(null==t?void 0:t.id),translateItem:p})),n?d.createElement(ek.A,{size:16}):null)};var eG=o(38354),eK=o(5733),eJ=o(58168),e0=o(98587),e1=o(80160),e5=o(74848);let e2=["children"],e4=d.forwardRef(function(e,t){let{children:o}=e,i=(0,e0.A)(e,e2),n=(0,eK.QM)();if(null===n)throw TypeError("No TabContext provided");let r=d.Children.map(o,e=>d.isValidElement(e)?d.cloneElement(e,{"aria-controls":(0,eK.eR)(n,e.props.value),id:(0,eK.vU)(n,e.props.value)}):null);return(0,e5.jsx)(e1.A,(0,eJ.A)({},i,{ref:t,value:n.value,children:r}))});var e8=o(78634);let e3="ItemInteractionDetail",e6=(0,n.Ay)(r.A,{name:e3,slot:"HeaderBlock",shouldForwardProp:e=>"isOwner"!==e})(({theme:e,isOwner:t})=>({padding:e.spacing(2),paddingTop:0,display:"flex",alignItems:"center",justifyContent:"center"})),e9=(0,n.Ay)(r.A,{name:e3,slot:"HeaderTitle"})(()=>({})),e7=(0,n.Ay)(r.A,{name:e3,slot:"ContentBlock"})(({theme:e})=>({borderTop:e.mixins.border("secondary"),borderBottom:e.mixins.border("secondary"),overflow:"hidden"})),te=(0,n.Ay)(F.A,{name:e3})(()=>({marginLeft:"auto",transform:"translate(4px,0)",position:"absolute",right:"16px"})),tt=(0,n.Ay)(eG.A,{name:e3,shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({padding:e.spacing(1,0),flex:1,minHeight:0,display:"flex",flexDirection:"column",...t&&{paddingBottom:0}})),to=(0,n.Ay)(r.A,{name:e3,slot:"CommentBlock",shouldForwardProp:e=>"isMobile"!==e&&"isOwner"!==e})(({theme:e,isMobile:t,isOwner:o})=>({flex:1,minHeight:0,...!o&&{borderTop:e.mixins.border("secondary")}})),ti=({item:e,isArchive:t=!1})=>{let{jsxBackend:o,useActionControl:n,i18n:r,useGetItem:a}=(0,i.PCX)(),s=a(null==e?void 0:e._identity),{extra:c,related_comments:u,statistic:m,_identity:p,is_owner:h}=s||{},f=Object.values((null==s?void 0:s.preFetchingComment)||{}).filter(e=>(null==e?void 0:e.isLoading)===!0),g=d.useRef(),[v]=n(p,{commentFocused:!1,menuOpened:!1,commentOpened:!0,commentInputRef:g}),y=(e,t)=>v("comment/viewMoreComments",e,t),b=o.get("CommentComposer");return d.createElement(d.Fragment,null,d.createElement(to,{isOwner:h},(null==m?void 0:m.total_comment)||(null==f?void 0:f.length)?e8.A&&d.createElement(_.P,{autoHide:!0,autoHeight:!0,autoHeightMax:"100%"},d.createElement(e8.A,{"id-tid":"comment_list",handleAction:v,data:u,viewMoreComments:y,total_comment:null==m?void 0:m.total_comment,total_reply:null==m?void 0:m.total_reply,identity:p,open:!0,isDetailPage:!0,disablePortalSort:!1,showActionMenu:!t})):d.createElement(l.A,{variant:"body1",color:"text.secondary",sx:{mt:1}},r.formatMessage({id:"description_no_comment_story"},{is_owner:h?1:0}))),(null==c?void 0:c.can_comment)&&b?d.createElement(b,{"id-tid":"comment_composer_story",identity:p,open:!0,focus:!0,ref:g}):null)},tn=d.memo(({item:e,isMobile:t,isArchive:o})=>{let{i18n:n,theme:r,usePageParams:l,useGetItems:s,getSetting:c}=(0,i.PCX)(),u=l(),m=c("comment"),{comment_id:f}=u||{},g=(0,h.vC)(),v=s(null==g?void 0:g.stories),y=o&&(null==v?void 0:v.length)?v:[e],b=(0,a.A)("(max-height:580px)"),[x,A]=d.useState(f?p.dw.Comments:p.dw.Viewers),w=(e,t)=>A(t);return d.createElement(eK.Ay,{value:x},b?null:d.createElement(e7,null,o?d.createElement(eQ,{stories:y,item:e}):d.createElement(Y,{stories:y,item:e})),d.createElement(e4,{onChange:w,"aria-label":"Images",sx:{borderBottom:r.mixins.border("secondary")}},d.createElement(eN.A,{label:d.createElement("b",null,n.formatMessage({id:"viewers"})),value:p.dw.Viewers}),m?d.createElement(eN.A,{label:d.createElement("b",null,n.formatMessage({id:"comments"})),value:p.dw.Comments}):null),x===p.dw.Viewers?d.createElement(tt,{value:p.dw.Viewers,isMobile:t},d.createElement(H,{item:e})):null,m&&x===p.dw.Comments?d.createElement(tt,{value:p.dw.Comments,isMobile:t},d.createElement(ti,{item:e,isArchive:o})):null)},(e,t)=>{var o,i;return(null==e?void 0:null===(o=e.item)||void 0===o?void 0:o.id)===(null==t?void 0:null===(i=t.item)||void 0===i?void 0:i.id)}),tr=function({item:e,open:t,setOpen:o,isMinHeight:n=!1,isArchive:r=!1}){let{useGetItem:a,useSession:s,i18n:u,useIsMobile:m,useTheme:p,getSetting:h}=(0,i.PCX)(),f=p(),g=m(!0),v=h("comment"),{user:y}=s(),b=a(null==e?void 0:e.user),x=(null==b?void 0:b.id)===(null==y?void 0:y.id),A=()=>{o(!1)};return g?t?d.createElement(J,{setOpen:o,open:t,isMinHeight:n,sxProps:{padding:f.spacing(2),paddingTop:f.spacing(2.5)}},d.createElement(e6,{isOwner:x},d.createElement(e9,null,d.createElement(l.A,{variant:"h4",color:"text.primary"},u.formatMessage({id:x?"story_details":"comments"}))),d.createElement(te,{size:"small",onClick:A,"data-testid":"buttonClose",role:"button"},d.createElement(c.s4,{icon:"ico-close"}))),x?d.createElement(tn,{item:e,isMobile:g,isArchive:r}):d.createElement(ti,{item:e})):null:x?d.createElement(tn,{item:e,isMobile:g,isArchive:r}):v?d.createElement(ti,{item:e}):null},tl="CommentViewItem",ta=(0,n.Ay)(r.A,{name:tl,slot:"HeaderBlock"})(({theme:e})=>({padding:e.spacing(2),paddingTop:0,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:e.mixins.border("secondary")})),ts=(0,n.Ay)(r.A,{name:tl,slot:"HeaderTitle"})(()=>({})),td=(0,n.Ay)(F.A,{name:tl})(()=>({marginLeft:"auto",transform:"translate(4px,0)",position:"absolute",right:"16px"})),tc=({setOpen:e,open:t,identity:o,isMinHeight:n=!1})=>{let{i18n:a,jsxBackend:s,useActionControl:u,useGetItem:p}=(0,i.PCX)(),h=d.useRef(),[f]=u(o,{commentFocused:!1,menuOpened:!1,commentOpened:!0,commentInputRef:h}),g=p(o);if(m()(g))return null;let{related_comments:v,statistic:y,extra:b,is_owner:x}=g||{},A=Object.values((null==g?void 0:g.preFetchingComment)||{}).filter(e=>(null==e?void 0:e.isLoading)===!0),w=s.get("CommentComposer"),E=()=>{e(!1)},C=(e,t)=>f("comment/viewMoreComments",e,t),S=()=>{};return d.createElement(J,{setOpen:e,open:t,isMinHeight:n},d.createElement(ta,null,d.createElement(ts,null,d.createElement(l.A,{variant:"h4",color:"text.primary"},a.formatMessage({id:"comments"}))),d.createElement(td,{size:"small",onClick:E,"data-testid":"buttonClose",role:"button"},d.createElement(c.s4,{icon:"ico-close"}))),d.createElement(r.A,{sx:{flex:1,minHeight:0}},(null==y?void 0:y.total_comment)||(null==A?void 0:A.length)?e8.A&&d.createElement(_.P,{autoHide:!0,autoHeight:!0,autoHeightMax:"100%"},d.createElement(r.A,{px:2},d.createElement(e8.A,{"id-tid":"comment_list",handleAction:f,data:v,viewMoreComments:C,total_comment:null==y?void 0:y.total_comment,total_reply:null==y?void 0:y.total_reply,identity:o,open:!0,isDetailPage:!0,disablePortalSort:!1}))):d.createElement(l.A,{variant:"body1",color:"text.secondary",sx:{mt:1,paddingX:2}},a.formatMessage({id:"description_no_comment_story"},{is_owner:x?1:0}))),(null==b?void 0:b.can_comment)&&w?d.createElement(r.A,{px:2},d.createElement(w,{"id-tid":"comment_composer_story",identity:o,open:!0,focus:!0,ref:h,onSuccess:S})):null)},tu=tc;var tm=o(20053),tp=o(75659),th=o(37878),tf=o(75630),tg=o(92353),tv=o(38413),ty=o(31609);function tb(e){return(0,ty.A)("MuiFab",e)}let tx=(0,tv.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),tA=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],tw=e=>{let{color:t,variant:o,classes:i,size:n}=e,r={root:["root",o,`size${(0,tf.A)(n)}`,"inherit"===t?"colorInherit":t]},l=(0,tp.A)(r,tb,i);return(0,eJ.A)({},i,l)},tE=(0,n.Ay)(th.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,n.ep)(e)||"classes"===e,overridesResolver(e,t){let{ownerState:o}=e;return[t.root,t[o.variant],t[`size${(0,tf.A)(o.size)}`],"inherit"===o.color&&t.colorInherit,t[(0,tf.A)(o.size)],t[o.color]]}})(({theme:e,ownerState:t})=>{var o,i;return(0,eJ.A)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(o=(i=e.palette).getContrastText)?void 0:o.call(i,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${tx.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${tx.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}},"small"===t.size&&{width:40,height:40},"medium"===t.size&&{width:48,height:48},"extended"===t.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===t.variant&&"small"===t.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===t.variant&&"medium"===t.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===t.color&&{color:"inherit"})},({theme:e,ownerState:t})=>(0,eJ.A)({},"inherit"!==t.color&&"default"!==t.color&&null!=(e.vars||e).palette[t.color]&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}})),tC=d.forwardRef(function(e,t){let o=(0,tg.A)({props:e,name:"MuiFab"}),{children:i,className:n,color:r="default",component:l="button",disabled:a=!1,disableFocusRipple:s=!1,focusVisibleClassName:d,size:c="large",variant:u="circular"}=o,m=(0,e0.A)(o,tA),p=(0,eJ.A)({},o,{color:r,component:l,disabled:a,disableFocusRipple:s,size:c,variant:u}),h=tw(p);return(0,e5.jsx)(tE,(0,eJ.A)({className:(0,tm.default)(h.root,n),component:l,disabled:a,focusRipple:!s,focusVisibleClassName:(0,tm.default)(h.focusVisible,d),ownerState:p,ref:t},m,{classes:h,children:i}))}),tS=(0,n.Ay)("div",{name:"BlockLoading"})(({theme:e})=>({position:"absolute",left:0,top:0,bottom:0,right:0,zIndex:"9999",color:e.palette.text.secondary,background:"light"===e.palette.mode?"rgba(255, 255, 255, 0.6) !important":"rgba(0, 0, 0, 0.3) !important"})),tR=(0,n.Ay)(r.A,{name:"BlockLoading",slot:"Content"})({position:"absolute",left:"50%",top:"50%",marginLeft:-20,marginTop:-20});function tk(){return d.createElement(tS,null,d.createElement(tR,null,d.createElement(ek.A,{color:"inherit",size:40})))}function tM(e){let{useTheme:t}=(0,i.PCX)(),o=t(),{progressFile:n=100}=e||{};return d.createElement(r.A,{sx:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"dark"===o.palette.mode?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.5)",zIndex:5,display:"flex",alignItems:"center",justifyContent:"center"}},d.createElement(r.A,{sx:{position:"relative"}},d.createElement(tC,{disabled:!0,disableRipple:!0,disableFocusRipple:!0,"aria-label":"save",color:"primary",sx:{backgroundColor:"transparent !important"}},d.createElement(c.s4,{icon:"ico-photo-plus-o",sx:{fontSize:20,color:"#fff"}})),d.createElement(ek.A,{size:67,sx:{position:"absolute",top:-6,left:-6,zIndex:1},variant:"determinate",value:n})))}var tI=o(14931);let tP="DropAction",tF=(0,n.Ay)(r.A,{name:tP,slot:"RootStyled"})(({theme:e})=>({minHeight:"52px",height:"52px",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center","&> p:first-of-type":{fontSize:e.mixins.pxToRem(17)}})),t_=(0,n.Ay)(r.A,{name:tP,slot:"ControlStyled"})(({theme:e})=>({padding:e.spacing(1),display:"flex"})),tz=(0,n.Ay)(r.A,{name:tP,slot:"SliderContainer"})(({theme:e})=>({display:"flex",alignItems:"center",width:"250px",maxWidth:"400px"})),tW=(0,n.Ay)(es.A,{name:tP,slot:"BtnControl"})(({theme:e})=>({background:"none",boxShadow:"none",padding:0,fontSize:e.mixins.pxToRem(13),minWidth:e.spacing(4),color:"#fff !important",width:e.spacing(4),height:e.spacing(4),borderRadius:e.spacing(4),"&:hover":{background:"rgba(5, 5, 5, 0.04)",color:"#fff",boxShadow:"none"}})),tT=(0,n.Ay)(r.A,{name:tP,slot:"BtnContainer"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center","& button":{backgroundColor:e.palette.background.paper,whiteSpace:"nowrap",fontWeight:"normal",color:e.palette.text.primary,height:"36px","&:hover":{backgroundColor:e.palette.background.paper,color:e.palette.text.primary}}})),tB=(0,n.Ay)(tI.Ay,{name:tP,slot:"SliderZoom"})(({theme:e})=>({margin:e.spacing(0,1),color:"#fff","& .MuiSlider-rail":{backgroundColor:"#fff"},"& .MuiSlider-thumb":{backgroundColor:"#fff"},"& .MuiSlider-track":{border:"none",backgroundColor:e.palette.primary.main}})),tH=function({open:e,fire:t,state:o}){let{i18n:n}=(0,i.PCX)(),{zoom:r}=o||{},a=()=>{let e=360<=o.rotation+90?0:o.rotation+90;t({type:"setRotation",payload:e})};return e?d.createElement(tF,null,d.createElement(t_,null,d.createElement(tz,null,d.createElement(tW,{variant:"text",onClick:()=>t({type:"setZoom",payload:{mode:"minus"}})},d.createElement(c.s4,{icon:"ico-minus"})),d.createElement(tB,{value:r,min:A.cH,max:A.kO,step:.1,"aria-labelledby":"Zoom",onChange:(e,o)=>t({type:"setZoom",payload:{zoom:o}})}),d.createElement(tW,{variant:"text",onClick:()=>t({type:"setZoom",payload:{mode:"plus"}})},d.createElement(c.s4,{icon:"ico-plus"})))),d.createElement(tT,null,d.createElement(es.A,{disableRipple:!0,startIcon:d.createElement(c.s4,{icon:"ico-rotate-right-alt"}),onClick:a},n.formatMessage({id:"rotate"})))):d.createElement(tF,null,d.createElement(l.A,null,n.formatMessage({id:"select_photo_tp_crop_and_rotate"})))},tL=function(){return d.createElement("div",null)};var tO=o(53975),tN=o(1882),tj=o.n(tN);let t$="StoryFormViewDetail",tD=(0,n.Ay)(r.A)(({theme:e})=>({position:"absolute",bottom:0,right:0,width:"100%",height:"100%",zIndex:98})),tV=(0,n.Ay)(Q.A,{name:t$,shouldForwardProp:e=>"isMinHeight"!==e})(({theme:e,isMinHeight:t})=>({position:"absolute",bottom:0,width:"100%",height:t?"85%":"50%",backgroundColor:e.palette.background.paper,padding:e.spacing(2),paddingTop:e.spacing(2.5),display:"flex",flexDirection:"column",zIndex:99,borderRadius:0,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius})),tX=(0,n.Ay)(r.A,{name:t$,slot:"HeaderBlock"})(({theme:e})=>({padding:e.spacing(2),paddingTop:0,display:"flex",alignItems:"center",justifyContent:"center"})),tZ=(0,n.Ay)(r.A,{name:t$,slot:"HeaderTitle"})(()=>({})),tU=(0,n.Ay)(r.A,{name:t$,slot:"ContentBlock"})(({theme:e})=>({borderTop:e.mixins.border("secondary"),overflow:"hidden"})),tq=(0,n.Ay)(F.A,{name:t$})(()=>({marginRight:"auto",transform:"translate(4px,0)",position:"absolute",right:"16px"})),tY=(0,n.Ay)("div")(({theme:e})=>({height:"100%","& > form":{height:"100%",flexWrap:"nowrap",display:"flex",flexDirection:"column"}})),tQ=({open:e,setOpen:t,setHiddenActionText:o=e=>{},isMinHeight:n=!1})=>{let{useContentParams:r,usePageParams:a,i18n:s}=(0,i.PCX)(),u=(0,h.Ay)(),m=()=>{t(!1),tj()(o)&&o(!1)},{mainForm:p}=r(),f=a(),g="";(null==u?void 0:u.status)===A.ip&&(g="addPhotoStoryMobile"),(null==u?void 0:u.status)===A.xq&&(g="addTextStoryMobile");let v=(0,i.IgF)(A.ap,A.fA,g);if(!p||!v)return null;let{noHeader:y,noBreadcrumb:b,formSchema:x,breadcrumbs:w,disableFormOnSuccess:E}=p;return d.createElement(G.A,{in:e,orientation:"vertical"},d.createElement(tD,null,d.createElement(tV,{"data-testid":"content-viewDetail",isMinHeight:n},d.createElement(tX,null,d.createElement(tZ,null,d.createElement(l.A,{variant:"h4",color:"text.primary"},s.formatMessage({id:"privacy_settings"}))),d.createElement(tq,{size:"small",onClick:m,"data-testid":"buttonClose",role:"button"},d.createElement(c.s4,{icon:"ico-close"}))),d.createElement(tU,null,d.createElement(_.P,{autoHide:!0,autoHeight:!0,autoHeightMax:"100%"},d.createElement(tY,null,d.createElement(tO.FF,{noHeader:y,breadcrumbs:w,noBreadcrumb:b,formSchema:x,pageParams:f,dataSource:v,initialValues:null,disableFormOnSuccess:E,changeEventName:p.changeEventName,navigationConfirmWhenDirty:!1,submitAction:"story/submitFormAdd"})))))))},tG=d.memo(tQ);var tK=o(16535),tJ=o(44383),t0=o.n(tJ);let t1={position:{x:0,y:0},zoom:1,rotation:0,isDirty:!1,bound:{top:-100,left:-100,right:100,bottom:100}},t5=({rotate:e,height:t,width:o,zoom:i,widthContainer:n,heightContainer:r})=>e%4==0?{top:-(t*i)+20,left:-(o*i)+20,right:n-20,bottom:r-20}:{top:-(o*i)+20,left:-(t*i)+20,right:n-20,bottom:r-20},t2=e=>{e.position.x<e.bound.left&&(e.position={...e.position,x:e.bound.left}),e.position.y<e.bound.top&&(e.position={...e.position,y:e.bound.top})},t4=(0,tK.Ay)((e,t)=>{switch(t.type){case"setInitImage":{let{width:o,height:i,widthContainer:n,heightContainer:r,position:l}=t.payload||{};e.width=o,e.height=i,e.widthContainer=n,e.heightContainer=r,e.bound={top:-i+20,left:-o+20,right:n-20,bottom:r-20},l&&(e.position=l);break}case"setDrag":{let{position:a}=t.payload;e.position=a;break}case"setImgSource":e.imageSrc=t.payload;break;case"setZoom":{let{mode:s,zoom:d}=t.payload||{},c=(null==e?void 0:e.width)||291,u=(null==e?void 0:e.height)||518;if(d){e.zoom=d,e.bound=t5({rotate:e.rotation,height:u,width:c,zoom:d,widthContainer:e.widthContainer,heightContainer:e.heightContainer}),t2(e);break}let m=0;"minus"===s&&(m=A.cH<e.zoom-.2?e.zoom-.2:A.cH),"plus"===s&&(m=A.kO>e.zoom+.2?e.zoom+.2:A.kO),e.zoom=m,e.bound=t5({rotate:e.rotation,height:u,width:c,zoom:m,widthContainer:e.widthContainer,heightContainer:e.heightContainer}),t2(e);break}case"setRotation":e.rotation=t.payload,e.bound=t5({rotate:t.payload,height:e.height,width:e.width,zoom:e.zoom,widthContainer:e.widthContainer,heightContainer:e.heightContainer}),t2(e)}let p={position:e.position,rotation:e.rotation,zoom:e.zoom,imageSrc:e.imageSrc},h={position:t1.position,rotation:t1.rotation,zoom:t1.zoom,imageSrc:t1.imageSrc};e.isDirty=!eu()(t0()(h,["position","rotation","zoom"]),t0()(p,["position","rotation","zoom"]))});var t8=o(79655);let t3="progress-story",t6=(0,n.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"})),t9=(0,n.Ay)(r.A,{name:t3})(({theme:e})=>({width:"100%",marginRight:e.spacing(.5),"&:last-child":{marginRight:e.spacing(0)}})),t7=(0,n.Ay)(ea.A,{name:t3})(({theme:e})=>({borderRadius:e.shape.borderRadius/4,backgroundColor:"rgba(255, 255, 255, 0.5)","& .MuiLinearProgress-bar":{borderRadius:e.shape.borderRadius/2,backgroundColor:"rgba(255, 255, 255, 0.9)",transition:"transform 0.3s linear",transformOrigin:"left",willChange:"transform"}})),oe=function({identity:e}){let{useGetItem:t,useGetItems:o,dispatch:n,usePageParams:r}=(0,i.PCX)(),l=r(),a=d.useRef(0),[s,c]=d.useState(0),u=d.useRef(),f=d.useRef(0),g=(0,h.vC)(),{handleNext:v,hasNext:y}=(0,h.Tq)(),{identityStoryActive:b,pauseStatus:x,indexStoryActive:w,readyStateFile:E,progressVideoPlay:C,fire:S,durationVideo:R,total:k,stories:M,pagingId:I,loading:P,positionStory:F}=g||{},_=o(M),z=t(b),{duration:W,type:T,in_process:B}=z||{},H=R||W||A.oL,L=("video"!==T||!B)&&"photo"!==T&&"text"!==T,O=d.useRef(0);d.useEffect(()=>{L&&(f.current=C)},[L,C]);let N=e=>{var t;let o=e=>{var t;let o=null==e?void 0:e.pagingId,i=null==e?void 0:e.ids;if(!o||!(null==i?void 0:i.length))return;let n=null==e?void 0:null===(t=e.pagesOffset)||void 0===t?void 0:t.total;S({type:"setInit",payload:{stories:i,total:n}})},i=(0,t8.n)(null==g?void 0:null===(t=g.stories)||void 0===t?void 0:t.length,e);i&&n({type:"story/story_archive/LOAD",payload:{user_id:null==l?void 0:l.user_id,date:null==g?void 0:g.date,direction:i},meta:{onSuccess:o}})},j=()=>{if(!m()(z)){if(clearInterval(u.current),L){u.current=setInterval(()=>{if(!(0===f.current||eu()(f.current,O.current))&&(O.current=f.current,c(e=>e+.1),parseFloat(parseFloat(f.current).toFixed(1))>=parseFloat(parseFloat(H).toFixed(1)))){var e;a.current=w+1,(null==_?void 0:_[a.current])&&(N(a.current),S({type:"setStoryActive",payload:{identity:null==_?void 0:null===(e=_[a.current])||void 0===e?void 0:e._identity,index:a.current,positionStory:F+1}}))}},100);return}u.current=setInterval(()=>{if(f.current=f.current+.1,c(e=>e+.1),f.current>=H){var e;a.current=w+1,(null==_?void 0:_[a.current])&&(N(a.current),S({type:"setStoryActive",payload:{identity:null==_?void 0:null===(e=_[a.current])||void 0===e?void 0:e._identity,index:a.current,positionStory:F+1}}))}},100)}},$=()=>{f.current=0,c(0),clearInterval(u.current),x!==p.ZR.Force&&(S({type:"setForcePause",payload:p.ZR.No}),j())},D=()=>{clearInterval(u.current)},V=()=>{j()},X=()=>{f.current=0,c(0),S({type:"setProgressVideoPlay",payload:0}),S({type:"setForcePause",payload:p.ZR.No}),clearInterval(u.current)};d.useEffect(()=>{if(P)return;let e=L?parseFloat(parseFloat(f.current).toFixed(1))>=parseFloat(parseFloat(H).toFixed(1)):s>=H-.1;if(w===_.length-1&&e){if(a.current=0,y){v();return}S({type:"setForcePause",payload:p.ZR.Force})}},[P,s,w,null==z?void 0:z.id,_,y,L,H]),d.useEffect(()=>{if(P||x!==p.ZR.No){D();return}V()},[x,P]),d.useEffect(()=>{(null==_?void 0:_.length)&&X()},[I]),d.useEffect(()=>{if(E&&z)return $(),()=>{X()}},[null==z?void 0:z.id,E,_.length]);let Z=d.useCallback(e=>{if(e<F)return 100;if(e===F){if(s>=H)return;return Math.round(s/H*100)||0}if(e>F)return 0},[s,F]);return d.createElement(t6,null,Array.from(Array(k).keys()).map((e,t)=>d.createElement(t9,{key:t},d.createElement(t7,{variant:"determinate",value:Z(t)}))))},ot="ArchiveHeaderStory",oo=(0,n.Ay)(r.A,{name:ot})(({theme:e})=>({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"column",padding:e.spacing(1.5)})),oi=(0,n.Ay)(r.A,{name:ot,shouldForwardProp:e=>"isTypeLiveVideo"!==e})(({theme:e,isTypeLiveVideo:t})=>({width:"100%",height:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(1.5,0),...t&&{paddingBottom:e.spacing(1)}})),on=(0,n.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"})),or=(0,n.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",maxWidth:"70%",overflow:"hidden"})),ol=(0,n.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center"})),oa=(0,n.Ay)(F.A)(({theme:e})=>({color:"#fff"})),os=(0,n.Ay)("div",{name:ot,slot:"PrivacyBlockStyled"})(({theme:e})=>({display:"flex",flexDirection:"row",alignItems:"center",fontSize:"0.8125rem",paddingTop:"0.25em"})),od=(0,n.Ay)("div",{name:ot,slot:"SeparateSpanStyled"})(({theme:e})=>({color:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center","& span + span:before":{content:'"\xb7"',display:"inline-block",padding:`${e.spacing(0,.5)}`}})),oc=(0,n.Ay)(es.A,{name:ot,slot:"ButtonStyled"})(({theme:e})=>({alignSelf:"flex-start",color:"#fff",fontWeight:e.typography.fontWeightMedium,borderColor:"#fff","&:hover":{borderColor:e.palette.border.secondary}})),ou=d.memo(({identity:e,contextStory:t})=>{let{i18n:o,goSmartBack:n,dispatch:r}=(0,i.PCX)(),{pauseStatus:l,fire:a,pagingId:u,identityStoryActive:m,openActionItem:h}=t,[f]=(0,i.Vd3)(e,{}),g=(e,t,o)=>{e.includes("deleteItem")&&r({type:A._t,payload:{identity:m,pagingId:u}}),f(e,t,{...o,onSuccess:()=>n()})},[v,y]=d.useState(!1),b=e=>{y(e)};return d.useEffect(()=>{l===p.ZR.Force||h||a({type:"setForcePause",payload:v?p.ZR.Pause:p.ZR.No})},[v,h]),d.useEffect(()=>{a({type:"setForcePause",payload:p.ZR.No})},[e]),d.createElement(c.pN,{triggerOpen:b,identity:e,handleAction:g,tabIndex:1,control:d.createElement(s.A,{title:o.formatMessage({id:"more_options"}),placement:"bottom"},d.createElement(oa,{size:"medium",disableRipple:!0,disableFocusRipple:!0},d.createElement(c.s4,{icon:"ico-dottedmore"})))})},(e,t)=>{var o,i;return(null==e?void 0:e.identity)===(null==t?void 0:t.identity)&&(null==e?void 0:null===(o=e.contextStory)||void 0===o?void 0:o.pauseStatus)===(null==t?void 0:null===(i=t.contextStory)||void 0===i?void 0:i.pauseStatus)&&(null==e?void 0:e.contextStory)===(null==t?void 0:t.contextStory)}),om=function({story:e,isMinHeight:t=!1,isSmallHeight:o=!1}){let{i18n:n,useGetItem:l,useIsMobile:a,goSmartBack:u,navigate:m,useTheme:f}=(0,i.PCX)(),g=f(),v=a(!0),y=(0,h.vC)(),{pauseStatus:b,fire:x,progressVideoPlay:w,mutedStatus:E}=y||{},C=()=>{u()},S=l(null==e?void 0:e.user),R=(0,d.useRef)(0),{_identity:k,privacy:M,creation_date:I,type:P,extra_params:F,in_process:_}=e||{},{is_streaming:z}=F||{},W=("video"!==P||!_)&&"photo"!==P&&"text"!==P,T=P===A.UZ,B=()=>{if(b!==p.ZR.No){x({type:"setForcePause",payload:p.ZR.No});return}x({type:"setForcePause",payload:p.ZR.Force})},H=()=>{x({type:"setMuted",payload:!E})};d.useEffect(()=>{W&&(R.current=w)},[W,w]);let L=()=>{T&&(null==e?void 0:e.item_id)&&m(`/live-video/${null==e?void 0:e.item_id}`)};return d.createElement(oo,null,d.createElement(on,null,d.createElement(oe,{identity:k})),d.createElement(oi,{isTypeLiveVideo:T},d.createElement(or,null,d.createElement(c.H8,{user:S,size:t||o?36:48,noStory:!0,showStatus:!1}),o?null:d.createElement(r.A,{ml:1,overflow:"hidden"},d.createElement(c.mE,{lines:1,style:{color:"#fff"},variant:"h5"},d.createElement(c.xE,{user:S})),T?d.createElement(c.mE,{lines:1,variant:"body1",style:{color:"rgba(255, 255, 255, 0.9)",fontSize:g.mixins.pxToRem(13),paddingTop:"0.25em"}},n.formatMessage({id:z?"live_now":"recorded_live"})):null,d.createElement(os,null,d.createElement(od,null,d.createElement(ed.A,{value:I,format:"ll"}),d.createElement(c.g6,{value:M}))))),d.createElement(ol,null,d.createElement(oa,{size:"medium",onClick:B},b===p.ZR.No?d.createElement(s.A,{title:n.formatMessage({id:"pause"}),placement:"bottom"},d.createElement(c.s4,{icon:"ico-pause"})):d.createElement(s.A,{title:n.formatMessage({id:"play"}),placement:"bottom"},d.createElement(c.s4,{icon:"ico-play"}))),W&&!_?d.createElement(oa,{size:"medium",onClick:H},E?d.createElement(s.A,{title:n.formatMessage({id:"unmute"}),placement:"bottom"},d.createElement(c.s4,{icon:"ico-volume-del"})):d.createElement(s.A,{title:n.formatMessage({id:"mute"}),placement:"bottom"},d.createElement(c.s4,{icon:"ico-volume-increase"}))):null,d.createElement(ou,{identity:k,contextStory:y}),v?d.createElement(oa,{onClick:C},d.createElement(c.s4,{icon:"ico-close"})):null)),T?d.createElement(oc,{role:"button","data-testid":"buttonWatchVideo",variant:"outlined",size:"small",disableRipple:!0,onClick:L},n.formatMessage({id:z?"watch_live_video":"watch_video"})):null)};var op=o(74050);function oh(){return(oh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}let of="ArchiveStoryView",og=(0,n.Ay)(r.A,{name:of,slot:"RootStyled",shouldForwardProp:e=>"isOwner"!==e&&"isMobile"!==e})(({theme:e,isOwner:t,isMobile:o})=>({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none",backgroundColor:"#000",flexDirection:"column"})),ov=(0,n.Ay)(r.A,{name:of,slot:"ContentWrapper"})(({theme:e})=>({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flex:1,minHeight:0})),oy=(0,n.Ay)(r.A,{name:of,slot:"HeaderContainer"})(({theme:e})=>({position:"absolute",top:0,left:0,right:0,zIndex:2,"&::before":{content:"''",position:"absolute",top:0,left:0,right:0,width:"100%",height:"100%",backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.08), transparent)",zIndex:-1,pointerEvents:"none"}})),ob=(0,n.Ay)(r.A,{name:of,slot:"ItemWrapper"})(({theme:e})=>({position:"relative",margin:"auto",backgroundColor:"#000",display:"flex",justifyContent:"center",borderRadius:e.shape.borderRadius,height:"100%"})),ox=(0,n.Ay)("div",{name:of,slot:"StoryImage",shouldForwardProp:e=>"width"!==e})(({theme:e,width:t})=>({height:"100%",width:t,position:"relative"})),oA=(0,n.Ay)("div",{name:"Image",slot:"ImageWrapper",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,height:t,width:o})=>({position:"relative",display:"flex",alignItems:"center",height:t,width:o,borderRadius:e.shape.borderRadius,overflow:"hidden"})),ow=(0,n.Ay)(r.A,{name:of,slot:"StatisticItem",shouldForwardProp:e=>"width"!==e&&"height"!==e})(({theme:e,height:t,width:o})=>({position:"absolute",bottom:0,left:0,padding:e.spacing(1.5),...o&&{width:o},overflow:"hidden"})),oE=(0,n.Ay)(r.A,{slot:"FooterStyled",shouldForwardProp:e=>"showView"!==e&&"width"!==e&&"isMobile"!==e&&"isMinHeight"!==e})(({theme:e,width:t,isMobile:o,isMinHeight:i})=>({minHeight:"64px",display:"flex",alignItems:"center",...t&&{width:t},...o&&{padding:e.spacing(0,2),width:"100%",...i&&{maxWidth:"560px"},overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"}}})),oC=(0,n.Ay)("img",{name:of,slot:"ImageThumbUrl",shouldForwardProp:e=>"width"!==e&&"height"!==e&&"type"!==e})(({theme:e,height:t,width:o,type:i})=>({borderRadius:e.shape.borderRadius,objectFit:"contain",position:"absolute",inset:0,width:"100%",height:"100%",filter:"blur(30px)",WebkitFilter:"blur(30px)",transform:"scale(2)"})),oS=function(e){let{assetUrl:t,useIsMobile:o,jsxBackend:n,getSetting:r,useGetItem:l}=(0,i.PCX)(),{story:s,isOwner:c=!1}=e||{},{handleNext:u,handlePrev:p,hasNext:f,hasPrev:g}=(0,h.Tq)(),y=(0,h.vC)(),{reactions:b,readyStateFile:x,buffer:A,loading:w}=y||{},E=o(!0),C=!r("preaction"),S=(0,a.A)("(max-height:667px)"),R=(0,a.A)("(max-height:580px)"),k=d.useRef(),M=n.get("story.ui.flyReaction"),I=n.get("story.ui.statisticSendReaction"),[P,F]=(0,h.Uf)(k),{_identity:_,reactions:z,type:W,background:T}=s||{},B=l(T),H=(0,D.AE)((null==B?void 0:B.image)||(null==s?void 0:s.thumbs)||(null==s?void 0:s.image),"50x50,50",t("story.no_image"));return d.createElement(og,{isOwner:c,isMobile:E},d.createElement(tL,null),d.createElement(ov,null,d.createElement(op.A,{position:"left",show:g,onClick:p,sxProps:E&&R?{"& > div":{...!g&&{display:"flex",visibility:"hidden"}}}:null}),d.createElement(ob,null,d.createElement(ox,{ref:k,width:P},d.createElement(oy,null,d.createElement(om,oh({},e,{story:s,isMinHeight:S,isSmallHeight:R}))),d.createElement(oA,{height:F,width:P},w||!x||A?d.createElement(eM,{sx:{...A&&{background:"transparent"}}}):null,d.createElement(oC,{key:H,src:H,type:W}),d.createElement(eR.A,{story:s,height:F,width:P})),d.createElement(ow,{width:P},I&&!m()(z)?d.createElement(I,{identity:_,isMinHeight:S}):null),M&&d.createElement(M,{identity:_,data:b}))),d.createElement(op.A,{position:"right",show:f,onClick:u,sxProps:E&&R?{"& > div":{...!f&&{display:"flex",visibility:"hidden"}}}:null})),E||C||c?null:d.createElement(oE,{width:P,isMobile:E,isMinHeight:S},d.createElement(v,{item:s,contextStory:y})))}},32113(e,t,o){"use strict";o.d(t,{vZ:()=>l,MO:()=>s,x6:()=>d});var i=o(91262),n=o(96540);let r=n.createContext({status:null,setStatus(){},setFilePhoto(){},filePhoto:null,setUploading(){},uploading:!1,setIsDirty(){},isDirty:!1,isSubmitting:!1,setIsSubmitting(){}}),l=r,a=n.createContext({}),s=a,d={identityStoryActive:void 0,identityUserStoryActive:void 0,listUserStories:[],pauseStatus:i.ZR.No,reactions:[],indexStoryActive:void 0,openStoryDetail:!1,openViewComment:!1,openActionItem:!1,readyStateFile:!1,progressVideoPlay:0,isLastStory:!1,isReady:!1,mutedStatus:!0,buffer:!1}},79655(e,t,o){"use strict";o.d(t,{A:()=>p,n:()=>u});var i=o(91557),n=o(24713),r=o.n(n),l=o(58156),a=o.n(l),s=o(44562),d=o(95093),c=o.n(d);let u=(e,t,o=3)=>t<o?"prev":t>e-o-1?"next":"",m=(e,t)=>{let{identity:o}=t,i=a()(e,o),n=new URL(window.location.href),l=new URLSearchParams(n.search).get("date");if(!i)return{};let d=c()(l).format("L"),m=`${s.Lp}/${d}`,p=a()(e,`pagination.${m}.ids`),h=a()(e,`pagination.${m}.pagesOffset.total`),f=a()(e,`pagination.${m}.ended`),g=a()(e,`pagination.${m}.pagesOffset.next_date`),v=a()(e,`pagination.${m}.pagesOffset.prev_date`),y=f?1:a()(e,`pagination.${m}.pagesOffset.current_page`),b=a()(e,`pagination.${m}.pagesOffset.per_page`),x=(null==i?void 0:i.user)?a()(e,i.user):void 0,A=null==p?void 0:p.length,w=1<A?r()(p,e=>e===o):-1,E=-1!==w?w:0,C=f?E:a()(e,`pagination.${m}.pagesOffset.pos`)||0,S={item:i,stories:p,user:x,total:h,nextDate:g,prevDate:v,pagingId:m,date:l,indexStoryActive:E,positionStory:b*(y-1)+C,shouldPreload:u(A,C+1)};return S},p=(0,i.NgA)(m)},85332(e,t,o){"use strict";o.d(t,{Ay:()=>u,F_:()=>f,P3:()=>p,Tq:()=>g,Uf:()=>h,aN:()=>b,vC:()=>m});var i=o(96540),n=o(32113),r=o(91557),l=o(44562),a=o(71468),s=o(69634),d=o(79655),c=o(1081);function u(){return i.useContext(n.vZ)}function m(){return i.useContext(n.MO)}function p(){var e,t;let{navigate:o,useGetItem:n}=(0,r.PCX)(),{listUserStories:l,identityUserStoryActive:a,identityStoryActive:s,fire:d}=m(),c=n(a),u=n(s),p=(0,r.UfA)(null==c?void 0:c.stories),h=null==p?void 0:p.findIndex(e=>(null==e?void 0:e.id)===(null==u?void 0:u.id)),f=null==l?void 0:l.findIndex(e=>(null==e?void 0:e.id)===(null==c?void 0:c.id)),g=(null==p?void 0:null===(e=p[0])||void 0===e?void 0:e.id)===(null==u?void 0:u.id),v=(null==c?void 0:c.stories.length)-1===h,y=(null==l?void 0:null===(t=l[0])||void 0===t?void 0:t.id)===(null==c?void 0:c.id)&&g,b=(null==l?void 0:l.length)-1===f&&v,x=!y,A=!b,w=i.useCallback(()=>{var e,t;if(x&&-1!==h){if(g){d({type:"setIdentityUserS_Active",payload:null===(t=l[f-1])||void 0===t?void 0:t._identity});return}d({type:"setIdentityStoryActive",payload:null==p?void 0:null===(e=p[h-1])||void 0===e?void 0:e._identity})}},[x,h,g,l,p,f]),E=i.useCallback(()=>{var e,t;if(b){o("/");return}if(A&&-1!==h){if(v){d({type:"setIdentityUserS_Active",payload:null===(t=l[f+1])||void 0===t?void 0:t._identity});return}d({type:"setIdentityStoryActive",payload:null==p?void 0:null===(e=p[h+1])||void 0===e?void 0:e._identity})}},[b,A,h,v,l,f,p]);return{hasPrev:x,hasNext:A,handlePrev:w,handleNext:E}}function h(e){let[t,o]=i.useState(0),[n,r]=i.useState(0),a=i.useRef(),s=i.useCallback(()=>{var i;if(!(null==e?void 0:e.current))return[t,n];let a=null==e?void 0:null===(i=e.current)||void 0===i?void 0:i.getBoundingClientRect(),s=(null==a?void 0:a.height)/l.us,d=null==a?void 0:a.height;window.screen.width<=s&&(d=(s=window.screen.width)*l.us),r(d),o(s)},[null==e?void 0:e.current]);return i.useEffect(()=>{var t;let o=e.current;if(o)return a.current=new ResizeObserver(()=>{s()}),s(),null===(t=a.current)||void 0===t||t.observe(o),()=>{null==a||a.current.disconnect()}},[s,null==e?void 0:e.current]),[t,n,s]}function f(){return(0,a.d4)(e=>(0,s.s)(e))}function g(){var e,t;let o=m(),{fire:n,stories:l,indexStoryActive:s,nextDate:c,prevDate:u,identityStoryActive:p,loading:h,total:f,positionStory:g,pagingId:v}=o,y=(0,a.d4)(e=>(0,r.qRQ)(e,v))||{},{prev_page:b,last_page:x,current_page:A}=(null==y?void 0:y.pagesOffset)||{},{useGetItem:w,useGetItems:E,dispatch:C,usePageParams:S}=(0,r.PCX)(),R=S(),k=w(p),M=E(l),I=(null==M?void 0:null===(e=M[0])||void 0===e?void 0:e.id)===(null==k?void 0:k.id)&&0===b,P=(null==l?void 0:l[(null==l?void 0:l.length)-1])===p&&x===A,F=!(!u&&I),_=!(!c&&P),z=(null==l?void 0:l[(null==l?void 0:l.length)-1])===p&&x!==A,W=(null==M?void 0:null===(t=M[0])||void 0===t?void 0:t.id)===(null==k?void 0:k.id)&&0!==b,T=(e,t=()=>{})=>{var i;let r=e=>{var t;let o=null==e?void 0:e.pagingId,i=null==e?void 0:e.ids;if(!o||!(null==i?void 0:i.length))return;let r=null==e?void 0:null===(t=e.pagesOffset)||void 0===t?void 0:t.total;n({type:"setInit",payload:{stories:i,total:r,loading:!1}})},l=(0,d.n)(null==o?void 0:null===(i=o.stories)||void 0===i?void 0:i.length,e);if(!l){t&&t();return}t&&t(),C({type:"story/story_archive/LOAD",payload:{user_id:null==R?void 0:R.user_id,date:null==o?void 0:o.date,direction:l},meta:{onSuccess:r}})},B=(e,t)=>{var o,i,r;let l=null==e?void 0:e.pagingId,a=null==e?void 0:e.ids;if(!l||!(null==a?void 0:a.length))return;let s=null==e?void 0:null===(o=e.pagesOffset)||void 0===o?void 0:o.total,d=null==e?void 0:null===(i=e.pagesOffset)||void 0===i?void 0:i.next_date,c=null==e?void 0:null===(r=e.pagesOffset)||void 0===r?void 0:r.prev_date;n({type:"setLoading",payload:!1}),n({type:"setInit",payload:{isReady:!1,stories:a,total:s,nextDate:d,prevDate:c,indexStoryActive:0,positionStory:0,identityStoryActive:null==a?void 0:a[0],pagingId:l,date:t}})},H=()=>{n({type:"setLoading",payload:!1})},L=i.useCallback(()=>{if(W&&n({type:"setLoading",payload:!0}),!h&&F&&!W){if(I){n({type:"setLoading",payload:!0}),C({type:"story/story_archive/LOAD",payload:{user_id:null==R?void 0:R.user_id,date:u},meta:{onSuccess:e=>B(e,u),onError:H}});return}T(s-1),n({type:"setStoryActive",payload:{identity:null==l?void 0:l[s-1],index:s-1,positionStory:g-1}})}},[F,l,s,I,h,W,T,g,M,u]),O=i.useCallback(()=>{if(z&&n({type:"setLoading",payload:!0}),!h&&_&&!z){if(P){n({type:"setLoading",payload:!0}),C({type:"story/story_archive/LOAD",payload:{user_id:null==R?void 0:R.user_id,date:c},meta:{onSuccess:e=>B(e,c),onError:H}});return}T(s+1),n({type:"setStoryActive",payload:{identity:null==l?void 0:l[s+1],index:s+1,positionStory:g+1}})}},[_,l,s,P,f,z,h,T,c,g,M]);return{hasPrev:F,hasNext:_,handlePrev:L,handleNext:O,loadmore:T}}let v=e=>(e.preaction.data.reactions||[]).filter(e=>e.is_active),y=(0,c.Mz)(v,e=>e);function b(){return(0,a.d4)(y)}},91262(e,t,o){"use strict";var i,n,r,l,a,s,d,c;o.d(t,{ZR:()=>i,Zw:()=>n,dw:()=>l,gw:()=>r}),(a=i||(i={}))[a.No=0]="No",a[a.Pause=1]="Pause",a[a.Force=2]="Force",(s=n||(n={})).LANDSCAPE="landscape",s.PORTRAIT="portrait",(d=r||(r={})).Avatar="1",d.ThumbnailAndAvatar="2",(c=l||(l={})).Viewers="1",c.Comments="2"}}]);